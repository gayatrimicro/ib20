var _gsScope;((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("easing.CustomEase",["easing.Ease"],function(e){var t=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,i=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,n=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,r=/[cLlsS]/g,a="CustomEase only accepts Cubic Bezier data.",s=function(e,t,i,n,r,a,o,l,c,h,u){var d,p=(e+i)/2,f=(t+n)/2,m=(i+r)/2,g=(n+a)/2,v=(r+o)/2,y=(a+l)/2,_=(p+m)/2,x=(f+g)/2,b=(m+v)/2,w=(g+y)/2,T=(_+b)/2,E=(x+w)/2,M=o-e,S=l-t,C=Math.abs((i-o)*S-(n-l)*M),A=Math.abs((r-o)*S-(a-l)*M);return h||(h=[{x:e,y:t},{x:o,y:l}],u=1),h.splice(u||h.length-1,0,{x:T,y:E}),c*(M*M+S*S)<(C+A)*(C+A)&&(d=h.length,s(e,t,p,f,_,x,T,E,c,h,u),s(T,E,b,w,v,y,o,l,c,h,u+1+(h.length-d))),h},o=function(e){var t=this.lookup[e*this.l|0]||this.lookup[this.l-1];return t.nx<e&&(t=t.n),t.y+(e-t.x)/t.cx*t.cy},l=function(t,i,n){this._calcEnd=!0,(this.id=t)&&(e.map[t]=this),this.getRatio=o,this.setData(i,n)},c=l.prototype=new e;return c.constructor=l,c.setData=function(e,o){var l,c,h,u,d,p,f,m,g,v,y=(e=e||"0,0,1,1").match(t),_=1,x=[];if(v=(o=o||{}).precision||1,this.data=e,this.lookup=[],this.points=x,this.fast=v<=1,(r.test(e)||-1!==e.indexOf("M")&&-1===e.indexOf("C"))&&(y=function(e){var t,r,s,o,l,c,h,u,d,p,f,m=(e+"").replace(n,function(e){var t=+e;return t<1e-4&&-1e-4<t?0:t}).match(i)||[],g=[],v=0,y=0,_=m.length,x=2;for(t=0;t<_;t++)if(d=o,isNaN(m[t])?l=(o=m[t].toUpperCase())!==m[t]:t--,r=+m[t+1],s=+m[t+2],l&&(r+=v,s+=y),t||(h=r,u=s),"M"===o)c&&c.length<8&&(g.length-=1,x=0),v=h=r,y=u=s,c=[r,s],x=2,g.push(c),t+=2,o="L";else if("C"===o)c||(c=[0,0]),c[x++]=r,c[x++]=s,l||(v=y=0),c[x++]=v+1*m[t+3],c[x++]=y+1*m[t+4],c[x++]=v+=1*m[t+5],c[x++]=y+=1*m[t+6],t+=6;else if("S"===o)c[x++]="C"===d||"S"===d?(p=v-c[x-4],f=y-c[x-3],c[x++]=v+p,y+f):(c[x++]=v,y),c[x++]=r,c[x++]=s,l||(v=y=0),c[x++]=v+=1*m[t+3],c[x++]=y+=1*m[t+4],t+=4;else{if("L"!==o&&"Z"!==o)throw a;"Z"===o&&(r=h,s=u,c.closed=!0),("L"===o||.5<Math.abs(v-r)||.5<Math.abs(y-s))&&(c[x++]=v+(r-v)/3,c[x++]=y+(s-y)/3,c[x++]=v+2*(r-v)/3,c[x++]=y+2*(s-y)/3,c[x++]=r,c[x++]=s,"L"===o&&(t+=2)),v=r,y=s}return g[0]}(e)),4===(l=y.length))y.unshift(0,0),y.push(1,1),l=8;else if((l-2)%6)throw a;for((0!=+y[0]||1!=+y[l-2])&&function(e,t,i){i||0===i||(i=Math.max(+e[e.length-1],+e[1]));var n,r=-1*+e[0],a=-i,s=e.length,o=1/(+e[s-2]+r),l=-t||(Math.abs(+e[s-1]-+e[1])<.01*(+e[s-2]-+e[0])?function(e){var t,i=e.length,n=999999999999;for(t=1;t<i;t+=6)+e[t]<n&&(n=+e[t]);return n}(e)+a:+e[s-1]+a);for(l=l?1/l:-o,n=0;n<s;n+=2)e[n]=(+e[n]+r)*o,e[n+1]=(+e[n+1]+a)*l}(y,o.height,o.originY),this.rawBezier=y,u=2;u<l;u+=6)c={x:+y[u-2],y:+y[u-1]},h={x:+y[u+4],y:+y[u+5]},x.push(c,h),s(c.x,c.y,+y[u],+y[u+1],+y[u+2],+y[u+3],h.x,h.y,1/(2e5*v),x,x.length-1);for(l=x.length,u=0;u<l;u++)f=x[u],m=x[u-1]||f,f.x>m.x||m.y!==f.y&&m.x===f.x||f===m?(m.cx=f.x-m.x,m.cy=f.y-m.y,m.n=f,m.nx=f.x,this.fast&&1<u&&2<Math.abs(m.cy/m.cx-x[u-2].cy/x[u-2].cx)&&(this.fast=!1),m.cx<_&&(m.cx?_=m.cx:(m.cx=.001,u===l-1&&(m.x-=.001,_=Math.min(_,.001),this.fast=!1)))):(x.splice(u--,1),l--);if(l=1/_+1|0,d=1/(this.l=l),f=x[p=0],this.fast){for(u=0;u<l;u++)g=u*d,f.nx<g&&(f=x[++p]),c=f.y+(g-f.x)/f.cx*f.cy,this.lookup[u]={x:g,cx:d,y:c,cy:0,nx:9},u&&(this.lookup[u-1].cy=c-this.lookup[u-1].y);this.lookup[l-1].cy=x[x.length-1].y-c}else{for(u=0;u<l;u++)f.nx<u*d&&(f=x[++p]),this.lookup[u]=f;p<x.length-1&&(this.lookup[u-1]=x[x.length-2])}return this._calcEnd=1!==x[x.length-1].y||0!==x[0].y,this},c.getRatio=o,c.getSVGData=function(e){return l.getSVGData(this,e)},l.create=function(e,t,i){return new l(e,t,i)},l.version="0.2.2",l.bezierToPoints=s,l.get=function(t){return e.map[t]},l.getSVGData=function(t,i){var n,r,a,s,o,l,c,h,u,d,p=1e3,f=(i=i||{}).width||100,m=i.height||100,g=i.x||0,v=(i.y||0)+m,y=i.path;if(i.invert&&(m=-m,v=0),(t=t.getRatio?t:e.map[t]||console.log("No ease found: ",t)).rawBezier){for(n=[],c=t.rawBezier.length,a=0;a<c;a+=2)n.push(((g+t.rawBezier[a]*f)*p|0)/p+","+((v+t.rawBezier[a+1]*-m)*p|0)/p);n[0]="M"+n[0],n[1]="C"+n[1]}else for(n=["M"+g+","+v],s=1/(c=Math.max(5,200*(i.precision||1))),h=5/(c+=2),u=((g+s*f)*p|0)/p,r=((d=((v+t.getRatio(s)*-m)*p|0)/p)-v)/(u-g),a=2;a<c;a++)o=((g+a*s*f)*p|0)/p,l=((v+t.getRatio(a*s)*-m)*p|0)/p,(Math.abs((l-d)/(o-u)-r)>h||a===c-1)&&(n.push(u+","+d),r=(l-d)/(o-u)),u=o,d=l;return y&&("string"==typeof y?document.querySelector(y):y).setAttribute("d",n.join(" ")),n.join(" ")},l},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope).CustomEase};"undefined"!=typeof module&&module.exports?(require("../TweenLite.min.js"),module.exports=t()):"function"==typeof define&&define.amd&&define(["TweenLite"],t)}(),((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var e=Math.PI/180,t=function(e,t,i,n,r){this.p=t,this.f="function"==typeof e[t],this.start=this.value=this.f?e[t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3)]():parseFloat(e[t]),this.velocity=i||0,this.v=this.velocity/r,n||0===n?(this.acceleration=n,this.a=this.acceleration/(r*r)):this.acceleration=this.a=0},i=Math.random(),n=_gsScope._gsDefine.globals,r=n.com.greensock.core.Animation._rootFramesTimeline,a=_gsScope._gsDefine.plugin({propName:"physics2D",version:"0.2.1",API:2,init:function(i,n,a,s){"function"==typeof n&&(n=n(s,i)),this._target=i,this._tween=a,this._runBackwards=!0===a.vars.runBackwards,this._step=0;for(var o,l=a._timeline,c=Number(n.angle)||0,h=Number(n.velocity)||0,u=Number(n.acceleration)||0,d=n.xProp||"x",p=n.yProp||"y",f=n.accelerationAngle||0===n.accelerationAngle?Number(n.accelerationAngle):c;l._timeline;)l=l._timeline;return this._stepsPerTimeUnit=o=l===r?1:30,n.gravity&&(u=Number(n.gravity),f=90),c*=e,f*=e,this._friction=1-Number(n.friction||0),this._overwriteProps.push(d),this._overwriteProps.push(p),this._x=new t(i,d,Math.cos(c)*h,Math.cos(f)*u,o),this._y=new t(i,p,Math.sin(c)*h,Math.sin(f)*u,o),this._skipX=this._skipY=!1,!0},set:function(e){var t,i,n,r,a,s,o=this._tween._time,l=this._x,c=this._y;if(!0===this._runBackwards&&(o=this._tween._duration-o),1===this._friction)n=o*o*.5,t=l.start+(l.velocity*o+l.acceleration*n),i=c.start+(c.velocity*o+c.acceleration*n);else{if(r=s=(0|(o*=this._stepsPerTimeUnit))-this._step,a=o%1,0<=s)for(;-1<--s;)l.v+=l.a,c.v+=c.a,l.v*=this._friction,c.v*=this._friction,l.value+=l.v,c.value+=c.v;else for(s=-s;-1<--s;)l.value-=l.v,c.value-=c.v,l.v/=this._friction,c.v/=this._friction,l.v-=l.a,c.v-=c.a;t=l.value+l.v*a,i=c.value+c.v*a,this._step+=r}this._skipX||(l.m&&(t=l.m(t,this._target)),l.f?this._target[l.p](t):this._target[l.p]=t),this._skipY||(c.m&&(i=c.m(i,this._target)),c.f?this._target[c.p](i):this._target[c.p]=i)}}),s=a.prototype;s._kill=function(e){return null!=e[this._x.p]&&(this._skipX=!0),null!=e[this._y.p]&&(this._skipY=!0),this._super._kill.call(this,e)},s._mod=function(e){var t=e[this._x.p]||e.physics2D;t&&"function"==typeof t&&(this._x.m=t),(t=e[this._y.p]||e.physics2D)&&"function"==typeof t&&(this._y.m=t)},a._autoCSS=!0,a._cssRegister=function(){var e=n.CSSPlugin;if(e){var t=e._internals,r=t._parseToProxy,s=t._setPluginRatio,o=t.CSSPropTween;t._registerComplexSpecialProp("physics2D",{parser:function(e,t,n,l,c,h){h=new a;var u,d=t.xProp||"x",p=t.yProp||"y",f={};return f[d]=f[p]=i++,u=r(e,f,l,c,h),(c=new o(e,"physics2D",0,0,u.pt,2)).data=u,c.plugin=h,c.setRatio=s,h._onInitTween(u.proxy,t,l._tween),c}})}}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope).Physics2DPlugin};"undefined"!=typeof module&&module.exports?(require("../TweenLite.min.js"),module.exports=t()):"function"==typeof define&&define.amd&&define(["TweenLite"],t)}(),function(e){"use strict";var t=e.GreenSockGlobals||e,i=function(e){var i,n="com.greensock.utils".split("."),r=t;for(i=0;i<n.length;i++)r[n[i]]=r=r[n[i]]||{};return r}(),n=function(e){var t=e.nodeType,i="";if(1===t||9===t||11===t){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=n(e)}else if(3===t||4===t)return e.nodeValue;return i},r=document,a=r.defaultView?r.defaultView.getComputedStyle:function(){},s=/([A-Z])/g,o=function(e,t,i,n){var r;return(i=i||a(e,null))?r=(e=i.getPropertyValue(t.replace(s,"-$1").toLowerCase()))||i.length?e:i[t]:e.currentStyle&&(r=(i=e.currentStyle)[t]),n?r:parseInt(r,10)||0},l=function(e){return!!(e.length&&e[0]&&(e[0].nodeType&&e[0].style&&!e.nodeType||e[0].length&&e[0][0]))},c=function(e,t){for(var i,n=t.length;-1<--n;)if(i=t[n],e.substr(0,i.length)===i)return i.length},h=/(?:\r|\n|\t\t)/g,u=/(?:\s\s+)/g,d=function(e){return(e.charCodeAt(0)-55296<<10)+(e.charCodeAt(1)-56320)+65536},p=" style='position:relative;display:inline-block;"+(r.all&&!r.addEventListener?"*display:inline;*zoom:1;'":"'"),f=function(e,t){var i=-1!==(e=e||"").indexOf("++"),n=1;return i&&(e=e.split("++").join("")),function(){return"<"+t+p+(e?" class='"+e+(i?n++:"")+"'>":">")}},m=i.SplitText=t.SplitText=function(e,t){if("string"==typeof e&&(e=m.selector(e)),!e)throw"cannot split a null element.";this.elements=l(e)?function(e){var t,i,n,r=[],a=e.length;for(t=0;t<a;t++)if(i=e[t],l(i))for(n=i.length,n=0;n<i.length;n++)r.push(i[n]);else r.push(i);return r}(e):[e],this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)},g=function(e,t,i){var n=e.nodeType;if(1===n||9===n||11===n)for(e=e.firstChild;e;e=e.nextSibling)g(e,t,i);else 3!==n&&4!==n||(e.nodeValue=e.nodeValue.split(t).join(i))},v=function(e,t){for(var i=t.length;-1<--i;)e.push(t[i])},y=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},_=function(e,t,i){for(var n;e&&e!==t;){if(n=e._next||e.nextSibling)return n.textContent.charAt(0)===i;e=e.parentNode||e._parent}return!1},x=function(e){var t,i,n=y(e.childNodes),r=n.length;for(t=0;t<r;t++)(i=n[t])._isSplit?x(i):(t&&3===i.previousSibling.nodeType?i.previousSibling.nodeValue+=3===i.nodeType?i.nodeValue:i.firstChild.nodeValue:3!==i.nodeType&&e.insertBefore(i.firstChild,i),e.removeChild(i))},b=function(e,t,i,n,s,l,c){var h,u,d,p,f,m,y,b,w,T,E,M,S=a(e),C=o(e,"paddingLeft",S),A=-999,P=o(e,"borderBottomWidth",S)+o(e,"borderTopWidth",S),L=o(e,"borderLeftWidth",S)+o(e,"borderRightWidth",S),R=o(e,"paddingTop",S)+o(e,"paddingBottom",S),O=o(e,"paddingLeft",S)+o(e,"paddingRight",S),I=.2*o(e,"fontSize"),D=o(e,"textAlign",S,!0),k=[],N=[],z=[],B=t.wordDelimiter||" ",H=t.span?"span":"div",F=t.type||t.split||"chars,words,lines",U=s&&-1!==F.indexOf("lines")?[]:null,G=-1!==F.indexOf("words"),V=-1!==F.indexOf("chars"),j="absolute"===t.position||!0===t.absolute,W=t.linesClass,X=-1!==(W||"").indexOf("++"),Y=[];for(X&&(W=W.split("++").join("")),d=(u=e.getElementsByTagName("*")).length,f=[],h=0;h<d;h++)f[h]=u[h];if(U||j)for(h=0;h<d;h++)((m=(p=f[h]).parentNode===e)||j||V&&!G)&&(M=p.offsetTop,U&&m&&Math.abs(M-A)>I&&("BR"!==p.nodeName||0===h)&&(y=[],U.push(y),A=M),j&&(p._x=p.offsetLeft,p._y=M,p._w=p.offsetWidth,p._h=p.offsetHeight),U&&((p._isSplit&&m||!V&&m||G&&m||!G&&p.parentNode.parentNode===e&&!p.parentNode._isSplit)&&(y.push(p),p._x-=C,_(p,e,B)&&(p._wordEnd=!0)),"BR"===p.nodeName&&(p.nextSibling&&"BR"===p.nextSibling.nodeName||0===h)&&U.push([])));for(h=0;h<d;h++)m=(p=f[h]).parentNode===e,"BR"!==p.nodeName?(j&&(w=p.style,G||m||(p._x+=p.parentNode._x,p._y+=p.parentNode._y),w.left=p._x+"px",w.top=p._y+"px",w.position="absolute",w.display="block",w.width=p._w+1+"px",w.height=p._h+"px"),!G&&V?p._isSplit?(p._next=p.nextSibling,p.parentNode.appendChild(p)):p.parentNode._isSplit?(p._parent=p.parentNode,!p.previousSibling&&p.firstChild&&(p.firstChild._isFirst=!0),p.nextSibling&&" "===p.nextSibling.textContent&&!p.nextSibling.nextSibling&&Y.push(p.nextSibling),p._next=p.nextSibling&&p.nextSibling._isFirst?null:p.nextSibling,p.parentNode.removeChild(p),f.splice(h--,1),d--):m||(M=!p.nextSibling&&_(p.parentNode,e,B),p.parentNode._parent&&p.parentNode._parent.appendChild(p),M&&p.parentNode.appendChild(r.createTextNode(" ")),t.span&&(p.style.display="inline"),k.push(p)):p.parentNode._isSplit&&!p._isSplit&&""!==p.innerHTML?N.push(p):V&&!p._isSplit&&(t.span&&(p.style.display="inline"),k.push(p))):U||j?(p.parentNode&&p.parentNode.removeChild(p),f.splice(h--,1),d--):G||e.appendChild(p);for(h=Y.length;-1<--h;)Y[h].parentNode.removeChild(Y[h]);if(U){for(j&&(T=r.createElement(H),e.appendChild(T),E=T.offsetWidth+"px",M=T.offsetParent===e?0:e.offsetLeft,e.removeChild(T)),w=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(b=" "===B&&(!j||!G&&!V),h=0;h<U.length;h++){for(y=U[h],(T=r.createElement(H)).style.cssText="display:block;text-align:"+D+";position:"+(j?"absolute;":"relative;"),W&&(T.className=W+(X?h+1:"")),z.push(T),d=y.length,u=0;u<d;u++)"BR"!==y[u].nodeName&&(p=y[u],T.appendChild(p),b&&p._wordEnd&&T.appendChild(r.createTextNode(" ")),j&&(0===u&&(T.style.top=p._y+"px",T.style.left=C+M+"px"),p.style.top="0px",M&&(p.style.left=p._x-M+"px")));0===d?T.innerHTML="&nbsp;":G||V||(x(T),g(T,String.fromCharCode(160)," ")),j&&(T.style.width=E,T.style.height=p._h+"px"),e.appendChild(T)}e.style.cssText=w}j&&(c>e.clientHeight&&(e.style.height=c-R+"px",e.clientHeight<c&&(e.style.height=c+P+"px")),l>e.clientWidth&&(e.style.width=l-O+"px",e.clientWidth<l&&(e.style.width=l+L+"px"))),v(i,k),G&&v(n,N),v(s,z)},w=function(e,t,i,a){var s,l,p=y(e.childNodes),f=p.length,m="absolute"===t.position||!0===t.absolute;if(3!==e.nodeType||1<f){for(t.absolute=!1,s=0;s<f;s++)(3!==(l=p[s]).nodeType||/\S+/.test(l.nodeValue))&&(m&&3!==l.nodeType&&"inline"===o(l,"display",null,!0)&&(l.style.display="inline-block",l.style.position="relative"),l._isSplit=!0,w(l,t,i,a));return t.absolute=m,void(e._isSplit=!0)}!function(e,t,i,a){var s,o,l,p,f,m,v,y,_,x,b=t.span?"span":"div",w=-1!==(t.type||t.split||"chars,words,lines").indexOf("chars"),T="absolute"===t.position||!0===t.absolute,E=t.wordDelimiter||" ",M=" "!==E?"":T?"&#173; ":" ",S=t.span?"</span>":"</div>",C=!0,A=t.specialChars?"function"==typeof t.specialChars?t.specialChars:c:null,P=r.createElement("div"),L=e.parentNode;for(L.insertBefore(P,e),P.textContent=e.nodeValue,L.removeChild(e),v=-1!==(s=n(e=P)).indexOf("<"),!1!==t.reduceWhiteSpace&&(s=s.replace(u," ").replace(h,"")),v&&(s=s.split("<").join("{{LT}}")),f=s.length,o=(" "===s.charAt(0)?M:"")+i(),l=0;l<f;l++)if(m=s.charAt(l),A&&(x=A(s.substr(l),t.specialChars)))m=s.substr(l,x||1),o+=w&&" "!==m?a()+m+"</"+b+">":m,l+=x-1;else if(m===E&&s.charAt(l-1)!==E&&l){for(o+=C?S:"",C=!1;s.charAt(l+1)===E;)o+=M,l++;l===f-1?o+=M:")"!==s.charAt(l+1)&&(o+=M+i(),C=!0)}else"{"===m&&"{{LT}}"===s.substr(l,6)?(o+=w?a()+"{{LT}}</"+b+">":"{{LT}}",l+=5):55296<=m.charCodeAt(0)&&m.charCodeAt(0)<=56319||65024<=s.charCodeAt(l+1)&&s.charCodeAt(l+1)<=65039?(y=d(s.substr(l,2)),_=d(s.substr(l+2,2)),p=127462<=y&&y<=127487&&127462<=_&&_<=127487||127995<=_&&_<=127999?4:2,o+=w&&" "!==m?a()+s.substr(l,p)+"</"+b+">":s.substr(l,p),l+=p-1):o+=w&&" "!==m?a()+m+"</"+b+">":m;e.outerHTML=o+(C?S:""),v&&g(L,"{{LT}}","<")}(e,t,i,a)},T=m.prototype;T.split=function(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var t,i,n,r=this.elements.length,a=e.span?"span":"div",s=f(e.wordsClass,a),o=f(e.charsClass,a);-1<--r;)n=this.elements[r],this._originals[r]=n.innerHTML,t=n.clientHeight,i=n.clientWidth,w(n,e,s,o),b(n,e,this.chars,this.words,this.lines,i,t);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},T.revert=function(){if(!this._originals)throw"revert() call wasn't scoped properly.";for(var e=this._originals.length;-1<--e;)this.elements[e].innerHTML=this._originals[e];return this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},m.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(m.selector=i)(t):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)},m.version="0.6.1"}(_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope).SplitText};"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd&&define([],t)}(),((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("plugins.ThrowPropsPlugin",["plugins.TweenPlugin","TweenLite","easing.Ease","utils.VelocityTracker"],function(e,t,i,n){var r,a,s,o,l=function(t,i){e.call(this,"throwProps"),this._overwriteProps.length=0},c=999999999999999,h=_gsScope._gsDefine.globals,u=!1,d={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1,xPercent:1,yPercent:1},p=function(e,t,i,n,r){var a,s,o,l,h=t.length,u=0,d=c;if("object"==typeof e){for(;-1<--h;){for(o in a=t[h],s=0,e)s+=(l=a[o]-e[o])*l;s<d&&(u=h,d=s)}if((r||c)<c&&r<Math.sqrt(d))return e}else for(;-1<--h;)(s=(a=t[h])-e)<0&&(s=-s),s<d&&n<=a&&a<=i&&(u=h,d=s);return t[u]},f=function(e,t,i,n,r,a){if("auto"===e.end)return e;var s,o,l=e.end;if(i=isNaN(i)?c:i,n=isNaN(n)?-c:n,"object"==typeof t){if(s=t.calculated?t:("function"==typeof l?l(t):p(t,l,i,n,a))||t,!t.calculated){for(o in s)t[o]=s[o];t.calculated=!0}s=s[r]}else s="function"==typeof l?l(t):l instanceof Array?p(t,l,i,n,a):Number(l);return i<s?s=i:s<n&&(s=n),{max:s,min:s,unitFactor:e.unitFactor}},m=function(e,t,i){for(var n in t)void 0===e[n]&&n!==i&&(e[n]=t[n]);return e},g=l.calculateChange=function(e,n,r,a){return null==a&&(a=.05),r*a*e/(n instanceof i?n:n?new i(n):t.defaultEase).getRatio(a)},v=l.calculateDuration=function(e,n,r,a,s){s=s||.05;var o=a instanceof i?a:a?new i(a):t.defaultEase;return Math.abs((n-e)*o.getRatio(s)/r/s)},y=l.calculateTweenDuration=function(e,r,a,s,o,c){if("string"==typeof e&&(e=t.selector(e)),!e)return 0;null==a&&(a=10),null==s&&(s=.2),null==o&&(o=1),e.length&&(e=e[0]||e);var h,d,p,y,_,x,b,w,T,E,M,S,C,A=0,P=9999999999,L=r.throwProps||r,R=r.ease instanceof i?r.ease:r.ease?new i(r.ease):t.defaultEase,O=isNaN(L.checkpoint)?.05:Number(L.checkpoint),I=isNaN(L.resistance)?l.defaultResistance:Number(L.resistance);if(L.linkedProps)for(S=L.linkedProps.split(","),M={},C=0;C<S.length;C++)(d=L[h=S[C]])&&(p=0<(y=void 0!==d.velocity&&"number"==typeof d.velocity?Number(d.velocity)||0:(T=T||n.getByTarget(e))&&T.isTrackingProp(h)?T.getVelocity(h):0)*(_=isNaN(d.resistance)?I:Number(d.resistance))?y/_:y/-_,x="function"==typeof e[h]?e[h.indexOf("set")||"function"!=typeof e["get"+h.substr(3)]?h:"get"+h.substr(3)]():e[h]||0,M[h]=x+g(y,R,p,O));for(h in L)"resistance"!==h&&"checkpoint"!==h&&"preventOvershoot"!==h&&"linkedProps"!==h&&"radius"!==h&&("object"!=typeof(d=L[h])&&((T=T||n.getByTarget(e))&&T.isTrackingProp(h)?d="number"==typeof d?{velocity:d}:{velocity:T.getVelocity(h)}:p=0<(y=Number(d)||0)*I?y/I:y/-I),"object"==typeof d&&(p=0<(y=void 0!==d.velocity&&"number"==typeof d.velocity?Number(d.velocity)||0:(T=T||n.getByTarget(e))&&T.isTrackingProp(h)?T.getVelocity(h):0)*(_=isNaN(d.resistance)?I:Number(d.resistance))?y/_:y/-_,b=(x="function"==typeof e[h]?e[h.indexOf("set")||"function"!=typeof e["get"+h.substr(3)]?h:"get"+h.substr(3)]():e[h]||0)+g(y,R,p,O),void 0!==d.end&&(d=f(d,M&&h in M?M:b,d.max,d.min,h,L.radius),(c||u)&&(L[h]=m(d,L[h],"end"))),void 0!==d.max&&b>Number(d.max)+1e-10?(E=d.unitFactor||l.defaultUnitFactors[h]||1,(w=x>d.max&&d.min!==d.max||-15<y*E&&y*E<45?s+.1*(a-s):v(x,d.max,y,R,O))+o<P&&(P=w+o)):void 0!==d.min&&b<Number(d.min)-1e-10&&(E=d.unitFactor||l.defaultUnitFactors[h]||1,(w=x<d.min&&d.min!==d.max||-45<y*E&&y*E<15?s+.1*(a-s):v(x,d.min,y,R,O))+o<P&&(P=w+o)),A<w&&(A=w)),A<p&&(A=p));return P<A&&(A=P),a<A?a:A<s?s:A},_=l.prototype=new e("throwProps");return(_.constructor=l).version="0.11.2",l.API=2,l._autoCSS=!0,l.defaultResistance=100,l.defaultUnitFactors={time:1e3,totalTime:1e3},l.track=function(e,t,i){return n.track(e,t,i)},l.untrack=function(e,t){n.untrack(e,t)},l.isTracking=function(e,t){return n.isTracking(e,t)},l.getVelocity=function(e,t){var i=n.getByTarget(e);return i?i.getVelocity(t):NaN},l._cssRegister=function(){var e=h.com.greensock.plugins.CSSPlugin;if(e){var t=e._internals,i=t._parseToProxy,s=t._setPluginRatio,o=t.CSSPropTween;t._registerComplexSpecialProp("throwProps",{parser:function(e,t,c,h,u,p){p=new l;var f,m,g,v,y={},_={},x={},b={},w={},T={};for(m in a={},t)"resistance"!==m&&"preventOvershoot"!==m&&"linkedProps"!==m&&"radius"!==m&&("object"==typeof(f=t[m])?(void 0!==f.velocity&&"number"==typeof f.velocity?y[m]=Number(f.velocity)||0:(v=v||n.getByTarget(e),y[m]=v&&v.isTrackingProp(m)?v.getVelocity(m):0),void 0!==f.end&&(b[m]=f.end),void 0!==f.min&&(_[m]=f.min),void 0!==f.max&&(x[m]=f.max),f.preventOvershoot&&(T[m]=!0),void 0!==f.resistance&&(w[m]=f.resistance)):"number"==typeof f?y[m]=f:(v=v||n.getByTarget(e))&&v.isTrackingProp(m)?y[m]=v.getVelocity(m):y[m]=f||0,d[m]&&h._enableTransforms(2===d[m]));for(m in g=i(e,y,h,u,p),r=g.proxy,y=g.end,r)a[m]={velocity:y[m],min:_[m],max:x[m],end:b[m],resistance:w[m],preventOvershoot:T[m]};return null!=t.resistance&&(a.resistance=t.resistance),null!=t.linkedProps&&(a.linkedProps=t.linkedProps),null!=t.radius&&(a.radius=t.radius),t.preventOvershoot&&(a.preventOvershoot=!0),u=new o(e,"throwProps",0,0,g.pt,2),h._overwriteProps.pop(),u.plugin=p,u.setRatio=s,u.data=g,p._onInitTween(r,a,h._tween),u}})}},l.to=function(e,i,n,l,c){i.throwProps||(i={throwProps:i}),0===c&&(i.throwProps.preventOvershoot=!0),u=!0;var h=new t(e,l||1,i);return h.render(0,!0,!0),h.vars.css?(h.duration(y(r,{throwProps:a,ease:i.ease},n,l,c)),h._delay&&!h.vars.immediateRender?h.invalidate():s._onInitTween(r,o,h)):(h.kill(),h=new t(e,y(e,i,n,l,c),i)),u=!1,h},_._onInitTween=function(e,t,i,r){this.target=e,this._props=[],s=this,o=t;var a,l,c,h,d,p,v,y,_,x,b,w,T=i._ease,E=isNaN(t.checkpoint)?.05:Number(t.checkpoint),M=i._duration,S=t.preventOvershoot,C=0;if(t.linkedProps)for(b=t.linkedProps.split(","),x={},w=0;w<b.length;w++)(l=t[a=b[w]])&&(d=void 0!==l.velocity&&"number"==typeof l.velocity?Number(l.velocity)||0:(_=_||n.getByTarget(e))&&_.isTrackingProp(a)?_.getVelocity(a):0,c="function"==typeof e[a]?e[a.indexOf("set")||"function"!=typeof e["get"+a.substr(3)]?a:"get"+a.substr(3)]():e[a]||0,x[a]=c+g(d,T,M,E));for(a in t)if("resistance"!==a&&"checkpoint"!==a&&"preventOvershoot"!==a&&"linkedProps"!==a&&"radius"!==a){if("function"==typeof(l=t[a])&&(l=l(r,e)),"number"==typeof l)d=Number(l)||0;else if("object"!=typeof l||isNaN(l.velocity)){if(!(_=_||n.getByTarget(e))||!_.isTrackingProp(a))throw"ERROR: No velocity was defined in the throwProps tween of "+e+" property: "+a;d=_.getVelocity(a)}else d=Number(l.velocity);p=g(d,T,M,E),y=0,c=(h="function"==typeof e[a])?e[a.indexOf("set")||"function"!=typeof e["get"+a.substr(3)]?a:"get"+a.substr(3)]():e[a],"object"==typeof l&&(v=c+p,void 0!==l.end&&(l=f(l,x&&a in x?x:v,l.max,l.min,a,t.radius),u&&(t[a]=m(l,t[a],"end"))),void 0!==l.max&&Number(l.max)<v?S||l.preventOvershoot?p=l.max-c:y=l.max-c-p:void 0!==l.min&&Number(l.min)>v&&(S||l.preventOvershoot?p=l.min-c:y=l.min-c-p)),this._overwriteProps[C]=a,this._props[C++]={p:a,s:c,c1:p,c2:y,f:h,r:!1}}return!0},_._kill=function(t){for(var i=this._props.length;-1<--i;)null!=t[this._props[i].p]&&this._props.splice(i,1);return e.prototype._kill.call(this,t)},_._mod=function(e){for(var t,i=this._props,n=i.length;-1<--n;)"function"==typeof(t=e[i[n].p]||e.throwProps)&&(i[n].m=t)},_.setRatio=function(e){for(var t,i,n=this._props.length;-1<--n;)i=(t=this._props[n]).s+t.c1*e+t.c2*e*e,t.m?i=t.m(i,this.target):1===e&&(i=(1e4*i+(i<0?-.5:.5)|0)/1e4),t.f?this.target[t.p](i):this.target[t.p]=i},e.activate([l]),l},!0),_gsScope._gsDefine("utils.VelocityTracker",["TweenLite"],function(e){var t,i,n,r=/([A-Z])/g,a={},s=_gsScope.document,o={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1,xPercent:1,yPercent:1},l="undefined"!=typeof window?window:s.defaultView||{getComputedStyle:function(){}},c=function(e,t,i){var n,s=(e._gsTransform||a)[t];return s||0===s?s:(e.style[t]?s=e.style[t]:(i=i||(n=e,l.getComputedStyle(n)))?s=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(r,"-$1").toLowerCase()):e.currentStyle&&(s=e.currentStyle[t]),parseFloat(s)||0)},h=e.ticker,u=function(e,t,i){this.p=e,this.f=t,this.v1=this.v2=0,this.t1=this.t2=h.time,this.css=!1,this.type="",this._prev=null,i&&((this._next=i)._prev=this)},d=function(){var e,i,r=t,a=h.time;if(.03<=a-n)for(n=a;r;){for(i=r._firstVP;i;)((e=i.css?c(r.target,i.p):i.f?r.target[i.p]():r.target[i.p])!==i.v1||.15<a-i.t1)&&(i.v2=i.v1,i.v1=e,i.t2=i.t1,i.t1=a),i=i._next;r=r._next}},p=function(e){this._lookup={},this.target=e,this.elem=!(!e.style||!e.nodeType),i||(h.addEventListener("tick",d,null,!1,-100),n=h.time,i=!0),t&&((this._next=t)._prev=this),t=this},f=p.getByTarget=function(e){for(var i=t;i;){if(i.target===e)return i;i=i._next}},m=p.prototype;return m.addProp=function(t,i){if(!this._lookup[t]){var n=this.target,r="function"==typeof n[t],a=r?this._altProp(t):t,s=this._firstVP;this._firstVP=this._lookup[t]=this._lookup[a]=s=new u(a!==t&&0===t.indexOf("set")?a:t,r,s),s.css=this.elem&&(void 0!==this.target.style[s.p]||o[s.p]),s.css&&o[s.p]&&!n._gsTransform&&e.set(n,{x:"+=0",overwrite:!1}),s.type=i||s.css&&0===t.indexOf("rotation")?"deg":"",s.v1=s.v2=s.css?c(n,s.p):r?n[s.p]():n[s.p]}},m.removeProp=function(e){var t=this._lookup[e];t&&(t._prev?t._prev._next=t._next:t===this._firstVP&&(this._firstVP=t._next),t._next&&(t._next._prev=t._prev),this._lookup[e]=0,t.f&&(this._lookup[this._altProp(e)]=0))},m.isTrackingProp=function(e){return this._lookup[e]instanceof u},m.getVelocity=function(e){var t,i,n=this._lookup[e],r=this.target;if(!n)throw"The velocity of "+e+" is not being tracked.";return t=(n.css?c(r,n.p):n.f?r[n.p]():r[n.p])-n.v2,("rad"===n.type||"deg"===n.type)&&(t%=i="rad"===n.type?2*Math.PI:360)!=t%(i/2)&&(t=t<0?t+i:t-i),t/(h.time-n.t2)},m._altProp=function(e){var t=e.substr(0,3),i=("get"===t?"set":"set"===t?"get":t)+e.substr(3);return"function"==typeof this.target[i]?i:e},p.getByTarget=function(i){var n=t;for("string"==typeof i&&(i=e.selector(i)),i.length&&i!==window&&i[0]&&i[0].style&&!i.nodeType&&(i=i[0]);n;){if(n.target===i)return n;n=n._next}},p.track=function(e,t,i){var n=f(e),r=t.split(","),a=r.length;for(i=(i||"").split(","),n||(n=new p(e));-1<--a;)n.addProp(r[a],i[a]||i[0]);return n},p.untrack=function(e,i){var n=f(e),r=(i||"").split(","),a=r.length;if(n){for(;-1<--a;)n.removeProp(r[a]);n._firstVP&&i||(n._prev?n._prev._next=n._next:n===t&&(t=n._next),n._next&&(n._next._prev=n._prev))}},p.isTracking=function(e,t){var i=f(e);return!!i&&(!(t||!i._firstVP)||i.isTrackingProp(t))},p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope).ThrowPropsPlugin};"undefined"!=typeof module&&module.exports?(require("../TweenLite.min.js"),module.exports=t()):"function"==typeof define&&define.amd&&define(["TweenLite"],t)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).THREE={})}(this,function(e){function t(){}function i(e,t){this.x=e||0,this.y=t||0}function n(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function r(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==n?n:1}function a(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function s(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function o(e,t,n,r,a,l,c,h,u,d){Object.defineProperty(this,"id",{value:za++}),this.uuid=ya.generateUUID(),this.name="",this.image=void 0!==e?e:o.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:o.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==a?a:1006,this.minFilter=void 0!==l?l:1008,this.anisotropy=void 0!==u?u:1,this.format=void 0!==c?c:1023,this.type=void 0!==h?h:1009,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new s,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:3e3,this.version=0,this.onUpdate=null}function l(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1}function c(e,t,i){this.width=e,this.height=t,this.scissor=new l(0,0,e,t),this.scissorTest=!1,this.viewport=new l(0,0,e,t),i=i||{},this.texture=new o(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function h(e,t,i){c.call(this,e,t,i),this.samples=4}function u(e,t,i){c.call(this,e,t,i),this.activeMipMapLevel=this.activeCubeFace=0}function d(e,t,i,n,r,a,s,l,c,h,u,d){o.call(this,null,a,s,l,c,h,n,r,u,d),this.image={data:e,width:t,height:i},this.magFilter=void 0!==c?c:1003,this.minFilter=void 0!==h?h:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function p(e,t){this.min=void 0!==e?e:new a(1/0,1/0,1/0),this.max=void 0!==t?t:new a(-1/0,-1/0,-1/0)}function f(e,t){this.center=void 0!==e?e:new a,this.radius=void 0!==t?t:0}function m(e,t){this.normal=void 0!==e?e:new a(1,0,0),this.constant=void 0!==t?t:0}function g(e,t,i,n,r,a){this.planes=[void 0!==e?e:new m,void 0!==t?t:new m,void 0!==i?i:new m,void 0!==n?n:new m,void 0!==r?r:new m,void 0!==a?a:new m]}function v(e){var t,i={};for(t in e)for(var n in i[t]={},e[t]){var r=e[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?i[t][n]=r.clone():Array.isArray(r)?i[t][n]=r.slice():i[t][n]=r}return i}function y(e){for(var t={},i=0;i<e.length;i++){var n,r=v(e[i]);for(n in r)t[n]=r[n]}return t}function _(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}function x(){function e(r,a){!1!==i&&(n(r,a),t.requestAnimationFrame(e))}var t=null,i=!1,n=null;return{start:function(){!0!==i&&null!==n&&(t.requestAnimationFrame(e),i=!0)},stop:function(){i=!1},setAnimationLoop:function(e){n=e},setContext:function(e){t=e}}}function b(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var n=t.get(i);n&&(e.deleteBuffer(n.buffer),t.delete(i))},update:function(i,n){i.isInterleavedBufferAttribute&&(i=i.data);var r,a,s,o,l,c=t.get(i);if(void 0===c)t.set(i,(a=n,s=(r=i).array,o=r.dynamic?35048:35044,l=e.createBuffer(),e.bindBuffer(a,l),e.bufferData(a,s,o),r.onUploadCallback(),a=5126,s instanceof Float32Array?a=5126:s instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):s instanceof Uint16Array?a=5123:s instanceof Int16Array?a=5122:s instanceof Uint32Array?a=5125:s instanceof Int32Array?a=5124:s instanceof Int8Array?a=5120:s instanceof Uint8Array&&(a=5121),{buffer:l,type:a,bytesPerElement:s.BYTES_PER_ELEMENT,version:r.version}));else if(c.version<i.version){var h=i,u=h.array,d=h.updateRange;e.bindBuffer(n,c.buffer),!1===h.dynamic?e.bufferData(n,u,35044):-1===d.count?e.bufferSubData(n,0,u):0===d.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,d.offset*u.BYTES_PER_ELEMENT,u.subarray(d.offset,d.offset+d.count)),d.count=-1),c.version=i.version}}}}function w(e,t,i,n,r,s){this.a=e,this.b=t,this.c=i,this.normal=n&&n.isVector3?n:new a,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new _,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==s?s:0}function T(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._order=n||T.DefaultOrder}function E(){this.mask=1}function M(){Object.defineProperty(this,"id",{value:ds++}),this.uuid=ya.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=M.DefaultUp.clone();var e=new a,t=new T,i=new r,o=new a(1,1,1);t.onChange(function(){i.setFromEuler(t,!1)}),i.onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new n},normalMatrix:{value:new s}}),this.matrix=new n,this.matrixWorld=new n,this.matrixAutoUpdate=M.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new E,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function S(){Object.defineProperty(this,"id",{value:xs+=2}),this.uuid=ya.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function C(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function A(e,t,i){C.call(this,new Int8Array(e),t,i)}function P(e,t,i){C.call(this,new Uint8Array(e),t,i)}function L(e,t,i){C.call(this,new Uint8ClampedArray(e),t,i)}function R(e,t,i){C.call(this,new Int16Array(e),t,i)}function O(e,t,i){C.call(this,new Uint16Array(e),t,i)}function I(e,t,i){C.call(this,new Int32Array(e),t,i)}function D(e,t,i){C.call(this,new Uint32Array(e),t,i)}function k(e,t,i){C.call(this,new Float32Array(e),t,i)}function N(e,t,i){C.call(this,new Float64Array(e),t,i)}function z(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function B(e){if(0===e.length)return-1/0;for(var t=e[0],i=1,n=e.length;i<n;++i)e[i]>t&&(t=e[i]);return t}function H(){Object.defineProperty(this,"id",{value:Rs+=2}),this.uuid=ya.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function F(e,t,i,n,r,a){S.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new U(e,t,i,n,r,a)),this.mergeVertices()}function U(e,t,i,n,r,s){function o(e,t,i,n,r,s,o,m,g,v,y){var _=s/g,x=o/v,b=s/2,w=o/2,T=m/2;o=g+1;var E,M,S=v+1,C=s=0,A=new a;for(M=0;M<S;M++){var P=M*x-w;for(E=0;E<o;E++)A[e]=(E*_-b)*n,A[t]=P*r,A[i]=T,h.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[i]=0<m?1:-1,u.push(A.x,A.y,A.z),d.push(E/g),d.push(1-M/v),s+=1}for(M=0;M<v;M++)for(E=0;E<g;E++)e=p+E+o*(M+1),t=p+(E+1)+o*(M+1),i=p+(E+1)+o*M,c.push(p+E+o*M,e,i),c.push(e,t,i),C+=6;l.addGroup(f,C,y),f+=C,p+=s}H.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};var l=this;e=e||1,t=t||1,i=i||1,n=Math.floor(n)||1,r=Math.floor(r)||1,s=Math.floor(s)||1;var c=[],h=[],u=[],d=[],p=0,f=0;o("z","y","x",-1,-1,i,t,e,s,r,0),o("z","y","x",1,-1,i,t,-e,s,r,1),o("x","z","y",1,1,e,i,t,n,s,2),o("x","z","y",1,-1,e,i,-t,n,s,3),o("x","y","z",1,-1,e,t,i,n,r,4),o("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(c),this.addAttribute("position",new k(h,3)),this.addAttribute("normal",new k(u,3)),this.addAttribute("uv",new k(d,2))}function G(e,t,i,n){S.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new V(e,t,i,n)),this.mergeVertices()}function V(e,t,i,n){H.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};var r=(e=e||1)/2,a=(t=t||1)/2,s=(i=Math.floor(i)||1)+1,o=(n=Math.floor(n)||1)+1,l=e/i,c=t/n,h=[],u=[],d=[],p=[];for(e=0;e<o;e++){var f=e*c-a;for(t=0;t<s;t++)u.push(t*l-r,-f,0),d.push(0,0,1),p.push(t/i),p.push(1-e/n)}for(e=0;e<n;e++)for(t=0;t<i;t++)r=t+s*(e+1),a=t+1+s*(e+1),o=t+1+s*e,h.push(t+s*e,r,o),h.push(r,a,o);this.setIndex(h),this.addAttribute("position",new k(u,3)),this.addAttribute("normal",new k(d,3)),this.addAttribute("uv",new k(p,2))}function j(){Object.defineProperty(this,"id",{value:no++}),this.uuid=ya.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function W(e){j.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function X(e,t){this.origin=void 0!==e?e:new a,this.direction=void 0!==t?t:new a}function Y(e,t,i){this.a=void 0!==e?e:new a,this.b=void 0!==t?t:new a,this.c=void 0!==i?i:new a}function q(e){j.call(this),this.type="MeshBasicMaterial",this.color=new _(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(e)}function $(e,t){M.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new H,this.material=void 0!==t?t:new q({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Z(e,t,i,n){function r(e,i){t.buffers.color.setClear(e.r,e.g,e.b,i,n)}var a,s,o=new _(0),l=0,c=null,h=0;return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),r(o,l=void 0!==t?t:1)},getClearAlpha:function(){return l},setClearAlpha:function(e){r(o,l=e)},render:function(t,n,u,d){null===(n=n.background)?(r(o,l),c=null,h=0):n&&n.isColor&&(r(n,1),d=!0,c=null,h=0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),n&&(n.isCubeTexture||n.isWebGLRenderTargetCube)?(void 0===s&&((s=new $(new U(1,1,1),new W({type:"BackgroundCubeMaterial",uniforms:v(Ya.cube.uniforms),vertexShader:Ya.cube.vertexShader,fragmentShader:Ya.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.tCube.value}}),i.update(s)),d=n.isWebGLRenderTargetCube?n.texture:n,s.material.uniforms.tCube.value=d,s.material.uniforms.tFlip.value=n.isWebGLRenderTargetCube?1:-1,c===n&&h===d.version||(s.material.needsUpdate=!0,c=n,h=d.version),t.unshift(s,s.geometry,s.material,0,0,null)):n&&n.isTexture&&(void 0===a&&((a=new $(new V(2,2),new W({type:"BackgroundMaterial",uniforms:v(Ya.background.uniforms),vertexShader:Ya.background.vertexShader,fragmentShader:Ya.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),!0===(a.material.uniforms.t2D.value=n).matrixAutoUpdate&&n.updateMatrix(),a.material.uniforms.uvTransform.value.copy(n.matrix),c===n&&h===n.version||(a.material.needsUpdate=!0,h=(c=n).version),t.unshift(a,a.geometry,a.material,0,0,null))}}}function J(e,t,i,n){var r;this.setMode=function(e){r=e},this.render=function(t,n){e.drawArrays(r,t,n),i.update(n,r)},this.renderInstances=function(a,s,o){if(n.isWebGL2)var l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[n.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,s,o,a.maxInstancedCount),i.update(o,r,a.maxInstancedCount)}}function K(e,t,i){function n(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(35633,36338).precision&&0<e.getShaderPrecisionFormat(35632,36338).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(35633,36337).precision&&0<e.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,s=void 0!==i.precision?i.precision:"highp",o=n(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o),i=!0===i.logarithmicDepthBuffer,o=e.getParameter(34930);var l=e.getParameter(35660),c=e.getParameter(3379),h=e.getParameter(34076),u=e.getParameter(34921),d=e.getParameter(36347),p=e.getParameter(36348),f=e.getParameter(36349),m=0<l,g=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var i=t.get("EXT_texture_filter_anisotropic");return r=null!==i?e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:s,logarithmicDepthBuffer:i,maxTextures:o,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:h,maxAttributes:u,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:a?e.getParameter(36183):0}}function Q(){function e(){h.value!==n&&(h.value=n,h.needsUpdate=0<r),i.numPlanes=r,i.numIntersection=0}function t(e,t,n,r){var a=null!==e?e.length:0,s=null;if(0!==a){if(s=h.value,!0!==r||null===s)for(r=n+4*a,t=t.matrixWorldInverse,c.getNormalMatrix(t),(null===s||s.length<r)&&(s=new Float32Array(r)),r=0;r!==a;++r,n+=4)l.copy(e[r]).applyMatrix4(t,c),l.normal.toArray(s,n),s[n+3]=l.constant;h.value=s,h.needsUpdate=!0}return i.numPlanes=a,s}var i=this,n=null,r=0,a=!1,o=!1,l=new m,c=new s,h={value:null,needsUpdate:!1};this.uniform=h,this.numIntersection=this.numPlanes=0,this.init=function(e,i,s){var o=0!==e.length||i||0!==r||a;return a=i,n=t(e,s,0),r=e.length,o},this.beginShadows=function(){o=!0,t(null)},this.endShadows=function(){o=!1,e()},this.setState=function(i,s,l,c,u,d){if(!a||null===i||0===i.length||o&&!l)o?t(null):e();else{var p=4*(l=o?0:r),f=u.clippingState||null;for(h.value=f,f=t(i,c,p,d),i=0;i!==p;++i)f[i]=n[i];u.clippingState=f,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=l}}}function ee(e){var t={};return{get:function(i){if(void 0!==t[i])return t[i];switch(i){case"WEBGL_depth_texture":var n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),t[i]=n}}}function te(e,t,i){function n(e){var s=e.target;for(var o in null!==(e=r[s.id]).index&&t.remove(e.index),e.attributes)t.remove(e.attributes[o]);s.removeEventListener("dispose",n),delete r[s.id],(o=a[e.id])&&(t.remove(o),delete a[e.id]),i.memory.geometries--}var r={},a={};return{get:function(e,t){var a=r[t.id];return a||(t.addEventListener("dispose",n),t.isBufferGeometry?a=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new H).setFromObject(e)),a=t._bufferGeometry),r[t.id]=a,i.memory.geometries++,a)},update:function(e){var i=e.index,n=e.attributes;for(var r in null!==i&&t.update(i,34963),n)t.update(n[r],34962);for(r in e=e.morphAttributes){n=0;for(var a=(i=e[r]).length;n<a;n++)t.update(i[n],34962)}},getWireframeAttribute:function(e){var i=a[e.id];if(i)return i;i=[];var n=e.index,r=e.attributes;if(null!==n){r=0;for(var s=(n=n.array).length;r<s;r+=3){var o=n[r+0],l=n[r+1],c=n[r+2];i.push(o,l,l,c,c,o)}}else for(n=r.position.array,r=0,s=n.length/3-1;r<s;r+=3)o=r+0,l=r+1,c=r+2,i.push(o,l,l,c,c,o);return i=new(65535<B(i)?D:O)(i,1),t.update(i,34963),a[e.id]=i}}}function ie(e,t,i,n){var r,a,s;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,n){e.drawElements(r,n,a,t*s),i.update(n,r)},this.renderInstances=function(o,l,c){if(n.isWebGL2)var h=e;else if(null===(h=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[n.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,c,a,l*s,o.maxInstancedCount),i.update(c,r,o.maxInstancedCount)}}function ne(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,i,n){switch(n=n||1,t.calls++,i){case 4:t.triangles+=e/3*n;break;case 5:case 6:t.triangles+=n*(e-2);break;case 1:t.lines+=e/2*n;break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}function re(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ae(e){var t={},i=new Float32Array(8);return{update:function(n,r,a,s){var o=n.morphTargetInfluences,l=o.length;if(void 0===(n=t[r.id])){n=[];for(var c=0;c<l;c++)n[c]=[c,0];t[r.id]=n}var h=a.morphTargets&&r.morphAttributes.position;for(a=a.morphNormals&&r.morphAttributes.normal,c=0;c<l;c++){var u=n[c];0!==u[1]&&(h&&r.removeAttribute("morphTarget"+c),a&&r.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++)(u=n[c])[0]=c,u[1]=o[c];for(n.sort(re),c=0;c<8;c++)(u=n[c])&&(o=u[0],l=u[1])?(h&&r.addAttribute("morphTarget"+c,h[o]),a&&r.addAttribute("morphNormal"+c,a[o]),i[c]=l):i[c]=0;s.getUniforms().setValue(e,"morphTargetInfluences",i)}}}function se(e,t){var i={};return{update:function(n){var r=t.render.frame,a=n.geometry,s=e.get(n,a);return i[s.id]!==r&&(a.isGeometry&&s.updateFromObject(n),e.update(s),i[s.id]=r),s},dispose:function(){i={}}}}function oe(e,t,i,n,r,a,s,l,c,h){o.call(this,e=void 0!==e?e:[],void 0!==t?t:301,i,n,r,a,s,l,c,h),this.flipY=!1}function le(e,t,i,n){o.call(this,null),this.image={data:e,width:t,height:i,depth:n},this.minFilter=this.magFilter=1003,this.flipY=this.generateMipmaps=!1}function ce(e,t,i){var n=e[0];if(n<=0||0<n)return e;var r=t*i,a=oo[r];if(void 0===a&&(a=new Float32Array(r),oo[r]=a),0!==t)for(n.toArray(a,0),n=1,r=0;n!==t;++n)r+=i,e[n].toArray(a,r);return a}function he(e,t){if(e.length!==t.length)return!1;for(var i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function ue(e,t){for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}function de(e,t){var i=lo[t];void 0===i&&(i=new Int32Array(t),lo[t]=i);for(var n=0;n!==t;++n)i[n]=e.allocTextureUnit();return i}function pe(e,t){var i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function fe(e,t){var i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function me(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y):he(i,t)||(e.uniform2fv(this.addr,t),ue(i,t))}function ge(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z):void 0!==t.r?i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b):he(i,t)||(e.uniform3fv(this.addr,t),ue(i,t))}function ve(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w):he(i,t)||(e.uniform4fv(this.addr,t),ue(i,t))}function ye(e,t){var i=this.cache,n=t.elements;void 0===n?he(i,t)||(e.uniformMatrix2fv(this.addr,!1,t),ue(i,t)):he(i,n)||(uo.set(n),e.uniformMatrix2fv(this.addr,!1,uo),ue(i,n))}function _e(e,t){var i=this.cache,n=t.elements;void 0===n?he(i,t)||(e.uniformMatrix3fv(this.addr,!1,t),ue(i,t)):he(i,n)||(ho.set(n),e.uniformMatrix3fv(this.addr,!1,ho),ue(i,n))}function xe(e,t){var i=this.cache,n=t.elements;void 0===n?he(i,t)||(e.uniformMatrix4fv(this.addr,!1,t),ue(i,t)):he(i,n)||(co.set(n),e.uniformMatrix4fv(this.addr,!1,co),ue(i,n))}function be(e,t,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(t||ro,r)}function we(e,t,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||ao,r)}function Te(e,t,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(t||so,r)}function Ee(e,t){var i=this.cache;he(i,t)||(e.uniform2iv(this.addr,t),ue(i,t))}function Me(e,t){var i=this.cache;he(i,t)||(e.uniform3iv(this.addr,t),ue(i,t))}function Se(e,t){var i=this.cache;he(i,t)||(e.uniform4iv(this.addr,t),ue(i,t))}function Ce(e,t){var i=this.cache;he(i,t)||(e.uniform1fv(this.addr,t),ue(i,t))}function Ae(e,t){var i=this.cache;he(i,t)||(e.uniform1iv(this.addr,t),ue(i,t))}function Pe(e,t){he(this.cache,t=ce(t,this.size,2))||(e.uniform2fv(this.addr,t),this.updateCache(t))}function Le(e,t){he(this.cache,t=ce(t,this.size,3))||(e.uniform3fv(this.addr,t),this.updateCache(t))}function Re(e,t){he(this.cache,t=ce(t,this.size,4))||(e.uniform4fv(this.addr,t),this.updateCache(t))}function Oe(e,t){he(this.cache,t=ce(t,this.size,4))||(e.uniformMatrix2fv(this.addr,!1,t),this.updateCache(t))}function Ie(e,t){he(this.cache,t=ce(t,this.size,9))||(e.uniformMatrix3fv(this.addr,!1,t),this.updateCache(t))}function De(e,t){he(this.cache,t=ce(t,this.size,16))||(e.uniformMatrix4fv(this.addr,!1,t),this.updateCache(t))}function ke(e,t,i){var n=this.cache,r=t.length,a=de(i,r);for(!1===he(n,a)&&(e.uniform1iv(this.addr,a),ue(n,a)),e=0;e!==r;++e)i.setTexture2D(t[e]||ro,a[e])}function Ne(e,t,i){var n=this.cache,r=t.length,a=de(i,r);for(!1===he(n,a)&&(e.uniform1iv(this.addr,a),ue(n,a)),e=0;e!==r;++e)i.setTextureCube(t[e]||so,a[e])}function ze(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(t.type){case 5126:return pe;case 35664:return me;case 35665:return ge;case 35666:return ve;case 35674:return ye;case 35675:return _e;case 35676:return xe;case 35678:case 36198:return be;case 35679:return we;case 35680:return Te;case 5124:case 35670:return fe;case 35667:case 35671:return Ee;case 35668:case 35672:return Me;case 35669:case 35673:return Se}}()}function Be(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(t.type){case 5126:return Ce;case 35664:return Pe;case 35665:return Le;case 35666:return Re;case 35674:return Oe;case 35675:return Ie;case 35676:return De;case 35678:return ke;case 35680:return Ne;case 5124:case 35670:return Ae;case 35667:case 35671:return Ee;case 35668:case 35672:return Me;case 35669:case 35673:return Se}}()}function He(e){this.id=e,this.seq=[],this.map={}}function Fe(e,t,i){this.seq=[],this.map={},this.renderer=i,i=e.getProgramParameter(t,35718);for(var n=0;n<i;++n){var r=e.getActiveUniform(t,n),a=e.getUniformLocation(t,r.name),s=this,o=r.name,l=o.length;for(po.lastIndex=0;;){var c=po.exec(o),h=po.lastIndex,u=c[1],d=c[3];if("]"===c[2]&&(u|=0),void 0===d||"["===d&&h+2===l){o=s,r=void 0===d?new ze(u,r,a):new Be(u,r,a),o.seq.push(r),o.map[r.id]=r;break}void 0===(d=s.map[u])&&(d=new He(u),u=s,s=d,u.seq.push(s),u.map[s.id]=s),s=d}}}function Ue(e,t,i){var n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),!1===e.getShaderParameter(n,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(n),function(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(i)),n}function Ge(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+e)}}function Ve(e,t){return"vec4 "+e+"( vec4 value ) { return "+(t=Ge(t))[0]+"ToLinear"+t[1]+"; }"}function je(e){return""!==e}function We(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Xe(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Ye(e){return e.replace(/^[ \t]*#include +<([\w\d.\/]+)>/gm,function(e,t){if(void 0===(e=Ua[t]))throw Error("Can not resolve #include <"+t+">");return Ye(e)})}function qe(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,i,n){for(e="",t=parseInt(t);t<parseInt(i);t++)e+=n.replace(/\[ i \]/g,"[ "+t+" ]");return e})}function $e(e,t,i,n,r,a,s){var o=e.context,l=n.defines,c=r.vertexShader,h=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?u="SHADOWMAP_TYPE_PCF":2===a.shadowMapType&&(u="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case 301:case 302:d="ENVMAP_TYPE_CUBE";break;case 306:case 307:d="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:d="ENVMAP_TYPE_EQUIREC";break;case 305:d="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:p="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:f="ENVMAP_BLENDING_MULTIPLY";break;case 1:f="ENVMAP_BLENDING_MIX";break;case 2:f="ENVMAP_BLENDING_ADD"}}var m,g,v,y,_,x,b=0<e.gammaFactor?e.gammaFactor:1,w=s.isWebGL2?"":(g=a,v=t,[(m=(m=n.extensions)||{}).derivatives||g.envMapCubeUV||g.bumpMap||g.normalMap&&!g.objectSpaceNormalMap||g.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(m.fragDepth||g.logarithmicDepthBuffer)&&v.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",m.drawBuffers&&v.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(m.shaderTextureLOD||g.envMap)&&v.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(je).join("\n")),T=function(e){var t,i=[];for(t in e){var n=e[t];!1!==n&&i.push("#define "+t+" "+n)}return i.join("\n")}(l),E=o.createProgram();return n.isRawShaderMaterial?(0<(l=[T].filter(je).join("\n")).length&&(l+="\n"),0<(t=[w,T].filter(je).join("\n")).length&&(t+="\n")):(l=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,T,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(je).join("\n"),t=[w,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,T,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+p:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(s.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?Ua.tonemapping_pars_fragment:"",0!==a.toneMapping?function(e,t){switch(t){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Uncharted2";break;case 4:t="OptimizedCineon";break;case 5:t="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 toneMapping( vec3 color ) { return "+t+"ToneMapping( color ); }"}(0,a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Ua.encodings_pars_fragment:"",a.mapEncoding?Ve("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?Ve("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?Ve("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Ve("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?("linearToOutputTexel",y=a.outputEncoding,"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+(y=Ge(y))[0]+y[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(je).join("\n")),c=Xe(c=We(c=Ye(c),a),a),h=Xe(h=We(h=Ye(h),a),a),c=qe(c),h=qe(h),s.isWebGL2&&!n.isRawShaderMaterial&&(s=!1,u=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==c.match(u)&&null!==h.match(u)&&(s=!0,c=c.replace(u,""),h=h.replace(u,"")),l="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+l,t=["#version 300 es\n\n#define varying in",s?"":"out highp vec4 pc_fragColor;",s?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+t),h=t+h,c=Ue(o,35633,l+c),h=Ue(o,35632,h),o.attachShader(E,c),o.attachShader(E,h),void 0!==n.index0AttributeName?o.bindAttribLocation(E,0,n.index0AttributeName):!0===a.morphTargets&&o.bindAttribLocation(E,0,"position"),o.linkProgram(E),a=o.getProgramInfoLog(E).trim(),s=o.getShaderInfoLog(c).trim(),u=o.getShaderInfoLog(h).trim(),p=d=!0,!1===o.getProgramParameter(E,35714)?(d=!1,console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(E,35715),"gl.getProgramInfoLog",a,s,u)):""!==a?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",a):""!==s&&""!==u||(p=!1),p&&(this.diagnostics={runnable:d,material:n,programLog:a,vertexShader:{log:s,prefix:l},fragmentShader:{log:u,prefix:t}}),o.deleteShader(c),o.deleteShader(h),this.getUniforms=function(){return void 0===_&&(_=new Fe(o,E,e)),_},this.getAttributes=function(){if(void 0===x){for(var e={},t=o.getProgramParameter(E,35721),i=0;i<t;i++){var n=o.getActiveAttrib(E,i).name;e[n]=o.getAttribLocation(E,n)}x=e}return x},this.destroy=function(){o.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=fo++,this.code=i,this.usedTimes=1,this.program=E,this.vertexShader=c,this.fragmentShader=h,this}function Ze(e,t,i){function n(e,t){if(e)e.isTexture?i=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=e.texture.encoding);else var i=3e3;return 3e3===i&&t&&(i=3007),i}var r=[],a={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},s="precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(t,r,s,o,l,c,h){var u=a[t.type];if(h.isSkinnedMesh){var d=h.skeleton.bones;if(i.floatVertexTextures)d=1024;else{var p=Math.min(Math.floor((i.maxVertexUniforms-20)/4),d.length);d=p<d.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+d.length+" bones. This GPU supports "+p+"."),0):p}}else d=0;p=i.precision,null!==t.precision&&(p=i.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var f=e.getRenderTarget();return{shaderID:u,precision:p,supportsVertexTextures:i.vertexTextures,outputEncoding:n(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:n(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:n(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:n(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:n(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!o,useFog:t.fog,fogExp:o&&o.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:t.skinning&&0<d,maxBones:d,useVertexTexture:i.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:l,numClipIntersection:c,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&0<s.length,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);for(r=0;r<s.length;r++)n.push(i[s[r]]);return n.push(t.onBeforeCompile.toString()),n.push(e.gammaOutput),n.push(e.gammaFactor),n.join()},this.acquireProgram=function(n,a,s,o){for(var l,c=0,h=r.length;c<h;c++){var u=r[c];if(u.code===o){++(l=u).usedTimes;break}}return void 0===l&&(l=new $e(e,t,o,n,a,s,i),r.push(l)),l},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function Je(){var e=new WeakMap;return{get:function(t){var i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function Ke(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Qe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function et(){function e(e,n,r,a,s,o){var l=t[i];return void 0===l?(l={id:e.id,object:e,geometry:n,material:r,program:r.program,groupOrder:a,renderOrder:e.renderOrder,z:s,group:o},t[i]=l):(l.id=e.id,l.object=e,l.geometry=n,l.material=r,l.program=r.program,l.groupOrder=a,l.renderOrder=e.renderOrder,l.z=s,l.group=o),i++,l}var t=[],i=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){i=0,n.length=0,r.length=0},push:function(t,i,a,s,o,l){t=e(t,i,a,s,o,l),(!0===a.transparent?r:n).push(t)},unshift:function(t,i,a,s,o,l){t=e(t,i,a,s,o,l),(!0===a.transparent?r:n).unshift(t)},sort:function(){1<n.length&&n.sort(Ke),1<r.length&&r.sort(Qe)}}}function tt(){function e(i){(i=i.target).removeEventListener("dispose",e),delete t[i.id]}var t={};return{get:function(i,n){var r=t[i.id];if(void 0===r){var a=new et;t[i.id]={},t[i.id][n.id]=a,i.addEventListener("dispose",e)}else void 0===(a=r[n.id])&&(a=new et,r[n.id]=a);return a},dispose:function(){t={}}}}function it(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":var n={direction:new a,color:new _,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new a,direction:new a,color:new _,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new a,color:new _,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new a,skyColor:new _,groundColor:new _};break;case"RectAreaLight":n={color:new _,position:new a,halfWidth:new a,halfHeight:new a}}return e[t.id]=n}}}function nt(){var e=new it,t={id:mo++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new a,r=new n,s=new n;return{setup:function(n,a,o){var l=0,c=0,h=0,u=0,d=0,p=0,f=0,m=0;o=o.matrixWorldInverse;for(var g=0,v=n.length;g<v;g++){var y=n[g],_=y.color,x=y.intensity,b=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)l+=_.r*x,c+=_.g*x,h+=_.b*x;else if(y.isDirectionalLight){var T=e.get(y);T.color.copy(y.color).multiplyScalar(y.intensity),T.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(o),(T.shadow=y.castShadow)&&(_=y.shadow,T.shadowBias=_.bias,T.shadowRadius=_.radius,T.shadowMapSize=_.mapSize),t.directionalShadowMap[u]=w,t.directionalShadowMatrix[u]=y.shadow.matrix,t.directional[u]=T,u++}else y.isSpotLight?((T=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),T.position.applyMatrix4(o),T.color.copy(_).multiplyScalar(x),T.distance=b,T.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),T.direction.sub(i),T.direction.transformDirection(o),T.coneCos=Math.cos(y.angle),T.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),T.decay=y.decay,(T.shadow=y.castShadow)&&(_=y.shadow,T.shadowBias=_.bias,T.shadowRadius=_.radius,T.shadowMapSize=_.mapSize),t.spotShadowMap[p]=w,t.spotShadowMatrix[p]=y.shadow.matrix,t.spot[p]=T,p++):y.isRectAreaLight?((T=e.get(y)).color.copy(_).multiplyScalar(x),T.position.setFromMatrixPosition(y.matrixWorld),T.position.applyMatrix4(o),s.identity(),r.copy(y.matrixWorld),r.premultiply(o),s.extractRotation(r),T.halfWidth.set(.5*y.width,0,0),T.halfHeight.set(0,.5*y.height,0),T.halfWidth.applyMatrix4(s),T.halfHeight.applyMatrix4(s),t.rectArea[f]=T,f++):y.isPointLight?((T=e.get(y)).position.setFromMatrixPosition(y.matrixWorld),T.position.applyMatrix4(o),T.color.copy(y.color).multiplyScalar(y.intensity),T.distance=y.distance,T.decay=y.decay,(T.shadow=y.castShadow)&&(_=y.shadow,T.shadowBias=_.bias,T.shadowRadius=_.radius,T.shadowMapSize=_.mapSize,T.shadowCameraNear=_.camera.near,T.shadowCameraFar=_.camera.far),t.pointShadowMap[d]=w,t.pointShadowMatrix[d]=y.shadow.matrix,t.point[d]=T,d++):y.isHemisphereLight&&((T=e.get(y)).direction.setFromMatrixPosition(y.matrixWorld),T.direction.transformDirection(o),T.direction.normalize(),T.skyColor.copy(y.color).multiplyScalar(x),T.groundColor.copy(y.groundColor).multiplyScalar(x),t.hemi[m]=T,m++)}t.ambient[0]=l,t.ambient[1]=c,t.ambient[2]=h,t.directional.length=u,t.spot.length=p,t.rectArea.length=f,t.point.length=d,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=u,t.hash.pointLength=d,t.hash.spotLength=p,t.hash.rectAreaLength=f,t.hash.hemiLength=m,t.hash.shadowsLength=a.length},state:t}}function rt(){var e=new nt,t=[],i=[];return{init:function(){t.length=0,i.length=0},state:{lightsArray:t,shadowsArray:i,lights:e},setupLights:function(n){e.setup(t,i,n)},pushLight:function(e){t.push(e)},pushShadow:function(e){i.push(e)}}}function at(){function e(i){(i=i.target).removeEventListener("dispose",e),delete t[i.id]}var t={};return{get:function(i,n){if(void 0===t[i.id]){var r=new rt;t[i.id]={},t[i.id][n.id]=r,i.addEventListener("dispose",e)}else void 0===t[i.id][n.id]?(r=new rt,t[i.id][n.id]=r):r=t[i.id][n.id];return r},dispose:function(){t={}}}}function st(e){j.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(e)}function ot(e){j.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new a,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(e)}function lt(e,t,r){function s(t,i,n,r,a,s){var o=t.geometry,l=v,c=t.customDepthMaterial;return n&&(l=y,c=t.customDistanceMaterial),l=c||(c=!1,i.morphTargets&&(o&&o.isBufferGeometry?c=o.morphAttributes&&o.morphAttributes.position&&0<o.morphAttributes.position.length:o&&o.isGeometry&&(c=o.morphTargets&&0<o.morphTargets.length)),t.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t),o=0,c&&(o|=1),(t=t.isSkinnedMesh&&i.skinning)&&(o|=2),l[o]),e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(o=l.uuid,c=i.uuid,void 0===(t=_[o])&&(t={},_[o]=t),void 0===(o=t[c])&&(o=l.clone(),t[c]=o),l=o),l.visible=i.visible,l.wireframe=i.wireframe,l.side=null!=i.shadowSide?i.shadowSide:x[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,n&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=a,l.farDistance=s),l}function o(i,n,r,a){if(!1!==i.visible){if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||h.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,i.matrixWorld);var l=t.update(i),c=i.material;if(Array.isArray(c))for(var u=l.groups,d=0,p=u.length;d<p;d++){var f=u[d],g=c[f.materialIndex];g&&g.visible&&(g=s(i,g,a,m,r.near,r.far),e.renderBufferDirect(r,null,l,g,i,f))}else c.visible&&(g=s(i,c,a,m,r.near,r.far),e.renderBufferDirect(r,null,l,g,i,null))}for(l=0,c=(i=i.children).length;l<c;l++)o(i[l],n,r,a)}}var h=new g,u=new n,d=new i,p=new i(r,r),f=new a,m=new a,v=Array(4),y=Array(4),_={},x={0:1,1:0,2:2},b=[new a(1,0,0),new a(-1,0,0),new a(0,0,1),new a(0,0,-1),new a(0,1,0),new a(0,-1,0)],w=[new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,0,1),new a(0,0,-1)],T=[new l,new l,new l,new l,new l,new l];for(r=0;4!==r;++r){var E=0!=(1&r),M=0!=(2&r),S=new st({depthPacking:3201,morphTargets:E,skinning:M});v[r]=S,E=new ot({morphTargets:E,skinning:M}),y[r]=E}var C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,i,n){if(!1!==C.enabled&&(!1!==C.autoUpdate||!1!==C.needsUpdate)&&0!==t.length){var r=e.state;r.setBlending(0),r.buffers.color.setClear(1,1,1,1),r.buffers.depth.setTest(!0),r.setScissorTest(!1);for(var a,s=0,l=t.length;s<l;s++){var g=t[s];a=g.shadow;var v=g&&g.isPointLight;if(void 0===a)console.warn("THREE.WebGLShadowMap:",g,"has no shadow.");else{var y=a.camera;if(d.copy(a.mapSize),d.min(p),v){var _=d.x,x=d.y;T[0].set(2*_,x,_,x),T[1].set(0,x,_,x),T[2].set(3*_,x,_,x),T[3].set(_,x,_,x),T[4].set(3*_,0,_,x),T[5].set(_,0,_,x),d.x*=4,d.y*=2}for(null===a.map&&(a.map=new c(d.x,d.y,{minFilter:1003,magFilter:1003,format:1023}),a.map.texture.name=g.name+".shadowMap",y.updateProjectionMatrix()),a.isSpotLightShadow&&a.update(g),_=a.map,x=a.matrix,m.setFromMatrixPosition(g.matrixWorld),y.position.copy(m),v?(a=6,x.makeTranslation(-m.x,-m.y,-m.z)):(a=1,f.setFromMatrixPosition(g.target.matrixWorld),y.lookAt(f),y.updateMatrixWorld(),x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(y.projectionMatrix),x.multiply(y.matrixWorldInverse)),e.setRenderTarget(_),e.clear(),g=0;g<a;g++)v&&(f.copy(y.position),f.add(b[g]),y.up.copy(w[g]),y.lookAt(f),y.updateMatrixWorld(),r.viewport(T[g])),u.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),h.setFromMatrix(u),o(i,n,y,v)}}C.needsUpdate=!1}}}function ct(e,t,i,n){function r(t,i,n){var r=new Uint8Array(4),a=e.createTexture();for(e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728),t=0;t<n;t++)e.texImage2D(i+t,0,6408,1,1,0,6408,5121,r);return a}function a(i,r){y[i]=1,0===_[i]&&(e.enableVertexAttribArray(i),_[i]=1),x[i]!==r&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),x[i]=r)}function s(t){!0!==b[t]&&(e.enable(t),b[t]=!0)}function o(t){!1!==b[t]&&(e.disable(t),b[t]=!1)}function c(t,n,r,a,l,c,h,u){if(0===t)E&&(o(3042),E=!1);else if(E||(s(3042),E=!0),5!==t){if(t!==M||u!==O){if(100===S&&100===P||(e.blendEquation(32774),P=S=100),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}R=L=A=C=null,M=t,O=u}}else l=l||n,c=c||r,h=h||a,n===S&&l===P||(e.blendEquationSeparate(i.convert(n),i.convert(l)),S=n,P=l),r===C&&a===A&&c===L&&h===R||(e.blendFuncSeparate(i.convert(r),i.convert(a),i.convert(c),i.convert(h)),C=r,A=a,L=c,R=h),M=t,O=null}function h(t){I!==t&&(t?e.frontFace(2304):e.frontFace(2305),I=t)}function u(t){0!==t?(s(2884),t!==D&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):o(2884),D=t}function d(t,i,n){t?(s(32823),(N!==i||z!==n)&&(e.polygonOffset(i,n),N=i,z=n)):o(32823)}function p(t){void 0===t&&(t=33984+B-1),F!==t&&(e.activeTexture(t),F=t)}var f=new function(){var t=!1,i=new l,n=null,r=new l(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,a,s,o){!0===o&&(t*=s,n*=s,a*=s),i.set(t,n,a,s),!1===r.equals(i)&&(e.clearColor(t,n,a,s),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},m=new function(){var t=!1,i=null,n=null,r=null;return{setTest:function(e){e?s(2929):o(2929)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,r=n=i=null}}},g=new function(){var t=!1,i=null,n=null,r=null,a=null,l=null,c=null,h=null,u=null;return{setTest:function(e){e?s(2960):o(2960)},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,s){n===t&&r===i&&a===s||(e.stencilFunc(t,i,s),n=t,r=i,a=s)},setOp:function(t,i,n){l===t&&c===i&&h===n||(e.stencilOp(t,i,n),l=t,c=i,h=n)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,u=h=c=l=a=r=n=i=null}}},v=e.getParameter(34921),y=new Uint8Array(v),_=new Uint8Array(v),x=new Uint8Array(v),b={},w=null,T=null,E=null,M=null,S=null,C=null,A=null,P=null,L=null,R=null,O=!1,I=null,D=null,k=null,N=null,z=null,B=e.getParameter(35661),H=!1;v=0,-1!==(v=e.getParameter(7938)).indexOf("WebGL")?(v=parseFloat(/^WebGL ([0-9])/.exec(v)[1]),H=1<=v):-1!==v.indexOf("OpenGL ES")&&(v=parseFloat(/^OpenGL ES ([0-9])/.exec(v)[1]),H=2<=v);var F=null,U={},G=new l,V=new l,j={};return j[3553]=r(3553,3553,1),j[34067]=r(34067,34069,6),f.setClear(0,0,0,1),m.setClear(1),g.setClear(0),s(2929),m.setFunc(3),h(!1),u(1),s(2884),c(0),{buffers:{color:f,depth:m,stencil:g},initAttributes:function(){for(var e=0,t=y.length;e<t;e++)y[e]=0},enableAttribute:function(e){a(e,0)},enableAttributeAndDivisor:a,disableUnusedAttributes:function(){for(var t=0,i=_.length;t!==i;++t)_[t]!==y[t]&&(e.disableVertexAttribArray(t),_[t]=0)},enable:s,disable:o,getCompressedTextureFormats:function(){if(null===w&&(w=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var i=e.getParameter(34467),n=0;n<i.length;n++)w.push(i[n]);return w},useProgram:function(t){return T!==t&&(e.useProgram(t),T=t,!0)},setBlending:c,setMaterial:function(e,t){2===e.side?o(2884):s(2884);var i=1===e.side;t&&(i=!i),h(i),1===e.blending&&!1===e.transparent?c(0):c(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),m.setFunc(e.depthFunc),m.setTest(e.depthTest),m.setMask(e.depthWrite),f.setMask(e.colorWrite),d(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:h,setCullFace:u,setLineWidth:function(t){t!==k&&(H&&e.lineWidth(t),k=t)},setPolygonOffset:d,setScissorTest:function(e){e?s(3089):o(3089)},activeTexture:p,bindTexture:function(t,i){null===F&&p();var n=U[F];void 0===n&&(n={type:void 0,texture:void 0},U[F]=n),n.type===t&&n.texture===i||(e.bindTexture(t,i||j[t]),n.type=t,n.texture=i)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===G.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),G.copy(t))},viewport:function(t){!1===V.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),V.copy(t))},reset:function(){for(var t=0;t<_.length;t++)1===_[t]&&(e.disableVertexAttribArray(t),_[t]=0);b={},F=w=null,U={},D=I=M=T=null,f.reset(),m.reset(),g.reset()}}}function ht(e,t,i,n,r,a,s){function o(e,t,i,n){var r=1;if((e.width>n||e.height>n)&&(r=n/Math.max(e.width,e.height)),r<1||!0===t){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap)return void 0===b&&(b=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),i=i?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):b,t=t?ya.floorPowerOfTwo:Math.floor,i.width=t(r*e.width),i.height=t(r*e.height),i.getContext("2d").drawImage(e,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+i.width+"x"+i.height+")."),i;"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").")}return e}function l(e){return ya.isPowerOfTwo(e.width)&&ya.isPowerOfTwo(e.height)}function c(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function h(t,i,r,a){e.generateMipmap(t),n.get(i).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function u(e,i){if(!r.isWebGL2)return e;var n=e;return 6403===e&&(5126===i&&(n=33326),5131===i&&(n=33325),5121===i&&(n=33321)),6407===e&&(5126===i&&(n=34837),5131===i&&(n=34843),5121===i&&(n=32849)),6408===e&&(5126===i&&(n=34836),5131===i&&(n=34842),5121===i&&(n=32856)),33325===n||33326===n||34842===n||34836===n?t.get("EXT_color_buffer_float"):(34843===n||34837===n)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),n}function d(e){return 1003===e||1004===e||1005===e?9728:9729}function p(t){(t=t.target).removeEventListener("dispose",p);e:{var i=n.get(t);if(t.image&&i.__image__webglTextureCube)e.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)break e;e.deleteTexture(i.__webglTexture)}n.remove(t)}t.isVideoTexture&&delete w[t.id],s.memory.textures--}function f(t){(t=t.target).removeEventListener("dispose",f);var i=n.get(t),r=n.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(r=0;r<6;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(t.texture),n.remove(t)}s.memory.textures--}function m(e,t){var r=n.get(e);if(e.isVideoTexture){var a=e.id,o=s.render.frame;w[a]!==o&&(w[a]=o,e.update())}if(0<e.version&&r.__version!==e.version)if(void 0===(a=e.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void v(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}i.activeTexture(33984+t),i.bindTexture(3553,r.__webglTexture)}function g(i,s,o){o?(e.texParameteri(i,10242,a.convert(s.wrapS)),e.texParameteri(i,10243,a.convert(s.wrapT)),e.texParameteri(i,10240,a.convert(s.magFilter)),e.texParameteri(i,10241,a.convert(s.minFilter))):(e.texParameteri(i,10242,33071),e.texParameteri(i,10243,33071),1001===s.wrapS&&1001===s.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(i,10240,d(s.magFilter)),e.texParameteri(i,10241,d(s.minFilter)),1003!==s.minFilter&&1006!==s.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(o=t.get("EXT_texture_filter_anisotropic"))||1015===s.type&&null===t.get("OES_texture_float_linear")||1016===s.type&&null===(r.isWebGL2||t.get("OES_texture_half_float_linear"))||!(1<s.anisotropy||n.get(s).__currentAnisotropy)||(e.texParameterf(i,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy)}function v(t,n,d){var f=n.isDataTexture3D?32879:3553;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),s.memory.textures++),i.activeTexture(33984+d),i.bindTexture(f,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment),d=(d=!r.isWebGL2&&(1001!==n.wrapS||1001!==n.wrapT||1003!==n.minFilter&&1006!==n.minFilter))&&!1===l(n.image);var m=l(d=o(n.image,d,!1,r.maxTextureSize))||r.isWebGL2,v=a.convert(n.format),y=a.convert(n.type),_=u(v,y);g(f,n,m);var x=n.mipmaps;if(n.isDepthTexture){if(_=6402,1015===n.type){if(!r.isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");_=36012}else r.isWebGL2&&(_=33189);1026===n.format&&6402===_&&1012!==n.type&&1014!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=1012,y=a.convert(n.type)),1027===n.format&&(_=34041,1020!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=1020,y=a.convert(n.type))),i.texImage2D(3553,0,_,d.width,d.height,0,v,y,null)}else if(n.isDataTexture)if(0<x.length&&m){for(var b=0,w=x.length;b<w;b++)f=x[b],i.texImage2D(3553,b,_,f.width,f.height,0,v,y,f.data);n.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else i.texImage2D(3553,0,_,d.width,d.height,0,v,y,d.data),t.__maxMipLevel=0;else if(n.isCompressedTexture){for(b=0,w=x.length;b<w;b++)f=x[b],1023!==n.format&&1022!==n.format?-1<i.getCompressedTextureFormats().indexOf(v)?i.compressedTexImage2D(3553,b,_,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(3553,b,_,f.width,f.height,0,v,y,f.data);t.__maxMipLevel=x.length-1}else if(n.isDataTexture3D)i.texImage3D(32879,0,_,d.width,d.height,d.depth,0,v,y,d.data),t.__maxMipLevel=0;else if(0<x.length&&m){for(b=0,w=x.length;b<w;b++)f=x[b],i.texImage2D(3553,b,_,v,y,f);n.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else i.texImage2D(3553,0,_,v,y,d),t.__maxMipLevel=0;c(n,m)&&h(3553,n,d.width,d.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function y(t,r,s,o){var l=a.convert(r.texture.format),c=a.convert(r.texture.type),h=u(l,c);i.texImage2D(o,0,h,r.width,r.height,0,l,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,o,n.get(r.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function _(t,i,n){e.bindRenderbuffer(36161,t),i.depthBuffer&&!i.stencilBuffer?(n?(n=x(i),e.renderbufferStorageMultisample(36161,n,33189,i.width,i.height)):e.renderbufferStorage(36161,33189,i.width,i.height),e.framebufferRenderbuffer(36160,36096,36161,t)):i.depthBuffer&&i.stencilBuffer?(n?(n=x(i),e.renderbufferStorageMultisample(36161,n,34041,i.width,i.height)):e.renderbufferStorage(36161,34041,i.width,i.height),e.framebufferRenderbuffer(36160,33306,36161,t)):(t=u(t=a.convert(i.texture.format),a.convert(i.texture.type)),n?(n=x(i),e.renderbufferStorageMultisample(36161,n,t,i.width,i.height)):e.renderbufferStorage(36161,t,i.width,i.height)),e.bindRenderbuffer(36161,null)}function x(e){return r.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,e.samples):0}var b,w={};this.setTexture2D=m,this.setTexture3D=function(e,t){var r=n.get(e);0<e.version&&r.__version!==e.version?v(r,e,t):(i.activeTexture(33984+t),i.bindTexture(32879,r.__webglTexture))},this.setTextureCube=function(t,d){var f=n.get(t);if(6===t.image.length)if(0<t.version&&f.__version!==t.version){f.__image__webglTextureCube||(t.addEventListener("dispose",p),f.__image__webglTextureCube=e.createTexture(),s.memory.textures++),i.activeTexture(33984+d),i.bindTexture(34067,f.__image__webglTextureCube),e.pixelStorei(37440,t.flipY),d=t&&t.isCompressedTexture;for(var m=t.image[0]&&t.image[0].isDataTexture,v=[],y=0;y<6;y++)v[y]=d||m?m?t.image[y].image:t.image[y]:o(t.image[y],!1,!0,r.maxCubemapSize);var _=v[0],x=l(_)||r.isWebGL2,b=a.convert(t.format),w=a.convert(t.type),T=u(b,w);for(g(34067,t,x),y=0;y<6;y++)if(d)for(var E,M=v[y].mipmaps,S=0,C=M.length;S<C;S++)E=M[S],1023!==t.format&&1022!==t.format?-1<i.getCompressedTextureFormats().indexOf(b)?i.compressedTexImage2D(34069+y,S,T,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(34069+y,S,T,E.width,E.height,0,b,w,E.data);else m?i.texImage2D(34069+y,0,T,v[y].width,v[y].height,0,b,w,v[y].data):i.texImage2D(34069+y,0,T,b,w,v[y]);f.__maxMipLevel=d?M.length-1:0,c(t,x)&&h(34067,t,_.width,_.height),f.__version=t.version,t.onUpdate&&t.onUpdate(t)}else i.activeTexture(33984+d),i.bindTexture(34067,f.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,t){i.activeTexture(33984+t),i.bindTexture(34067,n.get(e).__webglTexture)},this.setupRenderTarget=function(t){var o=n.get(t),d=n.get(t.texture);t.addEventListener("dispose",f),d.__webglTexture=e.createTexture(),s.memory.textures++;var p=!0===t.isWebGLRenderTargetCube,v=!0===t.isWebGLMultisampleRenderTarget,b=l(t)||r.isWebGL2;if(p)for(o.__webglFramebuffer=[],v=0;v<6;v++)o.__webglFramebuffer[v]=e.createFramebuffer();else if(o.__webglFramebuffer=e.createFramebuffer(),v)if(r.isWebGL2){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,o.__webglColorRenderbuffer),v=a.convert(t.texture.format);var w=a.convert(t.texture.type);v=u(v,w),w=x(t),e.renderbufferStorageMultisample(36161,w,v,t.width,t.height),e.bindFramebuffer(36160,o.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,o.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),_(o.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(p){for(i.bindTexture(34067,d.__webglTexture),g(34067,t.texture,b),v=0;v<6;v++)y(o.__webglFramebuffer[v],t,36064,34069+v);c(t.texture,b)&&h(34067,t.texture,t.width,t.height),i.bindTexture(34067,null)}else i.bindTexture(3553,d.__webglTexture),g(3553,t.texture,b),y(o.__webglFramebuffer,t,36064,3553),c(t.texture,b)&&h(3553,t.texture,t.width,t.height),i.bindTexture(3553,null);if(t.depthBuffer){if(o=n.get(t),d=!0===t.isWebGLRenderTargetCube,t.depthTexture){if(d)throw Error("target.depthTexture not supported in Cube render targets");if(t&&t.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,o.__webglFramebuffer),!t.depthTexture||!t.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(n.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),m(t.depthTexture,0),o=n.get(t.depthTexture).__webglTexture,1026===t.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,o,0);else{if(1027!==t.depthTexture.format)throw Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,o,0)}}else if(d)for(o.__webglDepthbuffer=[],d=0;d<6;d++)e.bindFramebuffer(36160,o.__webglFramebuffer[d]),o.__webglDepthbuffer[d]=e.createRenderbuffer(),_(o.__webglDepthbuffer[d],t);else e.bindFramebuffer(36160,o.__webglFramebuffer),o.__webglDepthbuffer=e.createRenderbuffer(),_(o.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(e){var t=e.texture,a=l(e)||r.isWebGL2;if(c(t,a)){a=e.isWebGLRenderTargetCube?34067:3553;var s=n.get(t).__webglTexture;i.bindTexture(a,s),h(a,t,e.width,e.height),i.bindTexture(a,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var i=n.get(t);e.bindFramebuffer(36008,i.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,i.__webglFramebuffer),i=t.width;var a=t.height,s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,i,a,0,0,i,a,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}}function ut(e,t,i){return{convert:function(e){if(1e3===e)return 10497;if(1001===e)return 33071;if(1002===e)return 33648;if(1003===e)return 9728;if(1004===e)return 9984;if(1005===e)return 9986;if(1006===e)return 9729;if(1007===e)return 9985;if(1008===e)return 9987;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e){if(i.isWebGL2)return 5131;var n=t.get("OES_texture_half_float");if(null!==n)return n.HALF_FLOAT_OES}if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(100===e)return 32774;if(101===e)return 32778;if(102===e)return 32779;if(200===e)return 0;if(201===e)return 1;if(202===e)return 768;if(203===e)return 769;if(204===e)return 770;if(205===e)return 771;if(206===e)return 772;if(207===e)return 773;if(208===e)return 774;if(209===e)return 775;if(210===e)return 776;if((33776===e||33777===e||33778===e||33779===e)&&null!==(n=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===e||35841===e||35842===e||35843===e)&&null!==(n=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e&&null!==(n=t.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e)&&null!==(n=t.get("WEBGL_compressed_texture_astc")))return e;if(103===e||104===e){if(i.isWebGL2){if(103===e)return 32775;if(104===e)return 32776}if(null!==(n=t.get("EXT_blend_minmax"))){if(103===e)return n.MIN_EXT;if(104===e)return n.MAX_EXT}}if(1020===e){if(i.isWebGL2)return 34042;if(null!==(n=t.get("WEBGL_depth_texture")))return n.UNSIGNED_INT_24_8_WEBGL}return 0}}}function dt(){M.call(this),this.type="Group"}function pt(){M.call(this),this.type="Camera",this.matrixWorldInverse=new n,this.projectionMatrix=new n,this.projectionMatrixInverse=new n}function ft(e,t,i,n){pt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function mt(e){ft.call(this),this.cameras=e||[]}function gt(e,t,i){Oo.setFromMatrixPosition(t.matrixWorld),Io.setFromMatrixPosition(i.matrixWorld);var n=Oo.distanceTo(Io),r=t.projectionMatrix.elements,a=i.projectionMatrix.elements,s=r[14]/(r[10]-1);i=r[14]/(r[10]+1);var o=(r[9]+1)/r[5],l=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0];r=s*c,a=s*h,c=(h=n/(-c+h))*-c,t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(c),e.translateZ(h),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld),t=s+h,s=i+h,e.projectionMatrix.makePerspective(r-c,a+(n-c),o*i/s*t,l*i/s*t,t,s)}function vt(e){function t(){return null!==o&&!0===o.isPresenting}function i(){if(t()){var i=o.getEyeParameters("left"),n=i.renderWidth*f;i=i.renderHeight*f,E=e.getPixelRatio(),T=e.getSize(),e.setDrawingBufferSize(2*n,i,1),S.start()}else s.enabled&&e.setDrawingBufferSize(T.width,T.height,E),S.stop()}var s=this,o=null,c=null,h=null,u=[],d=new n,p=new n,f=1,m="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(c=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",i,!1));var g=new n,v=new r,y=new a,_=new ft;_.bounds=new l(0,0,.5,1),_.layers.enable(1);var b=new ft;b.bounds=new l(.5,0,.5,1),b.layers.enable(2);var w=new mt([_,b]);w.layers.enable(1),w.layers.enable(2);var T,E,M=[];this.enabled=!1,this.getController=function(e){var t=u[e];return void 0===t&&((t=new dt).matrixAutoUpdate=!1,t.visible=!1,u[e]=t),t},this.getDevice=function(){return o},this.setDevice=function(e){void 0!==e&&(o=e),S.setContext(e)},this.setFramebufferScaleFactor=function(e){f=e},this.setFrameOfReferenceType=function(e){m=e},this.setPoseTarget=function(e){void 0!==e&&(h=e)},this.getCamera=function(e){var t="stage"===m?1.6:0;if(null===o)return e.position.set(0,t,0),e;if(o.depthNear=e.near,o.depthFar=e.far,o.getFrameData(c),"stage"===m){var i=o.stageParameters;i?d.fromArray(i.sittingToStandingTransform):d.makeTranslation(0,t,0)}if(t=c.pose,(i=null!==h?h:e).matrix.copy(d),i.matrix.decompose(i.position,i.quaternion,i.scale),null!==t.orientation&&(v.fromArray(t.orientation),i.quaternion.multiply(v)),null!==t.position&&(v.setFromRotationMatrix(d),y.fromArray(t.position),y.applyQuaternion(v),i.position.add(y)),i.updateMatrixWorld(),!1===o.isPresenting)return e;_.near=e.near,b.near=e.near,_.far=e.far,b.far=e.far,_.matrixWorldInverse.fromArray(c.leftViewMatrix),b.matrixWorldInverse.fromArray(c.rightViewMatrix),p.getInverse(d),"stage"===m&&(_.matrixWorldInverse.multiply(p),b.matrixWorldInverse.multiply(p)),null!==(e=i.parent)&&(g.getInverse(e.matrixWorld),_.matrixWorldInverse.multiply(g),b.matrixWorldInverse.multiply(g)),_.matrixWorld.getInverse(_.matrixWorldInverse),b.matrixWorld.getInverse(b.matrixWorldInverse),_.projectionMatrix.fromArray(c.leftProjectionMatrix),b.projectionMatrix.fromArray(c.rightProjectionMatrix),gt(w,_,b),(e=o.getLayers()).length&&(null!==(e=e[0]).leftBounds&&4===e.leftBounds.length&&_.bounds.fromArray(e.leftBounds),null!==e.rightBounds&&4===e.rightBounds.length&&b.bounds.fromArray(e.rightBounds));e:for(e=0;e<u.length;e++){t=u[e];t:{i=e;for(var n=navigator.getGamepads&&navigator.getGamepads(),r=0,a=0,s=n.length;r<s;r++){var l=n[r];if(l&&("Daydream Controller"===l.id||"Gear VR Controller"===l.id||"Oculus Go Controller"===l.id||"OpenVR Gamepad"===l.id||l.id.startsWith("Oculus Touch")||l.id.startsWith("Spatial Controller"))){if(a===i){i=l;break t}a++}}i=void 0}if(void 0!==i&&void 0!==i.pose){if(null===i.pose)break e;!1===(n=i.pose).hasPosition&&t.position.set(.2,-.6,-.05),null!==n.position&&t.position.fromArray(n.position),null!==n.orientation&&t.quaternion.fromArray(n.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(d),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0,n="Daydream Controller"===i.id?0:1,M[e]!==i.buttons[n].pressed&&(M[e]=i.buttons[n].pressed,!0===M[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}return w},this.getStandingMatrix=function(){return d},this.isPresenting=t;var S=new x;this.setAnimationLoop=function(e){S.setAnimationLoop(e)},this.submitFrame=function(){t()&&o.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",i)}}function yt(e){function t(){return null!==o&&null!==h}function i(e){var t=p[f.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function n(){e.setFramebuffer(null),_.stop()}function r(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}var a=e.context,s=null,o=null,c=1,h=null,u="stage",d=null,p=[],f=[],m=new ft;m.layers.enable(1),m.viewport=new l;var g=new ft;g.layers.enable(2),g.viewport=new l;var v=new mt([m,g]);v.layers.enable(1),v.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=p[e];return void 0===t&&((t=new dt).matrixAutoUpdate=!1,t.visible=!1,p[e]=t),t},this.getDevice=function(){return s},this.setDevice=function(e){void 0!==e&&(s=e),e instanceof XRDevice&&a.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){c=e},this.setFrameOfReferenceType=function(e){u=e},this.setSession=function(t){null!==(o=t)&&(o.addEventListener("select",i),o.addEventListener("selectstart",i),o.addEventListener("selectend",i),o.addEventListener("end",n),o.baseLayer=new XRWebGLLayer(o,a,{framebufferScaleFactor:c}),o.requestFrameOfReference(u).then(function(t){h=t,e.setFramebuffer(o.baseLayer.framebuffer),_.setContext(o),_.start()}),f=o.getInputSources(),o.addEventListener("inputsourceschange",function(){f=o.getInputSources(),console.log(f);for(var e=0;e<p.length;e++)p[e].userData.inputSource=f[e]}))},this.getCamera=function(e){if(t()){var i=e.parent,n=v.cameras;r(v,i);for(var a=0;a<n.length;a++)r(n[a],i);for(e.matrixWorld.copy(v.matrixWorld),a=0,i=(e=e.children).length;a<i;a++)e[a].updateMatrixWorld(!0);return gt(v,m,g),v}return e},this.isPresenting=t;var y=null,_=new x;_.setAnimationLoop(function(e,t){if(null!==(d=t.getDevicePose(h)))for(var i=o.baseLayer,n=t.views,r=0;r<n.length;r++){var a=n[r],s=i.getViewport(a),l=d.getViewMatrix(a),c=v.cameras[r];c.matrix.fromArray(l).getInverse(c.matrix),c.projectionMatrix.fromArray(a.projectionMatrix),c.viewport.set(s.x,s.y,s.width,s.height),0===r&&v.matrix.copy(c.matrix)}for(r=0;r<p.length;r++)i=p[r],(n=f[r])&&null!==(n=t.getInputPose(n,h))?("targetRay"in n?i.matrix.elements=n.targetRay.transformMatrix:"pointerMatrix"in n&&(i.matrix.elements=n.pointerMatrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.visible=!0):i.visible=!1;y&&y(e)}),this.setAnimationLoop=function(e){y=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function _t(e){var t;function i(){I=new ee(Oe),(D=new K(Oe,I,e)).isWebGL2||(I.get("WEBGL_depth_texture"),I.get("OES_texture_float"),I.get("OES_texture_half_float"),I.get("OES_texture_half_float_linear"),I.get("OES_standard_derivatives"),I.get("OES_element_index_uint"),I.get("ANGLE_instanced_arrays")),I.get("OES_texture_float_linear"),$=new ut(Oe,I,D),(k=new ct(Oe,I,$,D)).scissor(ve.copy(Ee).multiplyScalar(we)),k.viewport(ge.copy(Te).multiplyScalar(we)),N=new ne(Oe),z=new Je,B=new ht(Oe,I,k,z,D,$,N),H=new b(Oe),F=new te(Oe,H,N),U=new se(F,N),X=new ae(Oe),G=new Ze(re,I,D),V=new tt,j=new at,W=new Z(re,k,U,A),Y=new J(Oe,I,N,D),q=new ie(Oe,I,N,D),N.programs=G.programs,re.context=Oe,re.capabilities=D,re.extensions=I,re.properties=z,re.renderLists=V,re.state=k,re.info=N}function r(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),oe=!0}function s(){console.log("THREE.WebGLRenderer: Context Restored."),oe=!1,i()}function o(e){(e=e.target).removeEventListener("dispose",o),c(e),z.remove(e)}function c(e){var t=z.get(e).program;(e.program=void 0)!==t&&G.releaseProgram(t)}function h(e,t,i,n){for(var r=0,a=e.length;r<a;r++){var s=e[r],o=s.object,l=s.geometry,c=void 0===n?s.material:n;if(s=s.group,i.isArrayCamera)for(var h=(me=i).cameras,d=0,p=h.length;d<p;d++){var f=h[d];if(o.layers.test(f.layers)){if("viewport"in f)k.viewport(ge.copy(f.viewport));else{var m=f.bounds;k.viewport(ge.set(m.x*xe,m.y*be,m.z*xe,m.w*be).multiplyScalar(we))}O.setupLights(f),u(o,t,f,l,c,s)}}else me=null,u(o,t,i,l,c,s)}}function u(e,i,n,r,a,s){if(e.onBeforeRender(re,i,n,r,a,s),O=j.get(i,me||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){k.setMaterial(a);var o=f(n,i.fog,a,e);de=t=null,pe=!1,l=o,e.render(function(e){re.renderBufferImmediate(e,l)})}else re.renderBufferDirect(n,i.fog,r,a,e,s);var l;e.onAfterRender(re,i,n,r,a,s),O=j.get(i,me||n)}function p(e,t,i){var n=z.get(e),r=O.state.lights,a=n.lightsHash,s=r.state.hash;i=G.getParameters(e,r.state,O.state.shadowsArray,t,Ce.numPlanes,Ce.numIntersection,i);var l=G.getProgramCode(e,i),h=n.program,u=!0;if(void 0===h)e.addEventListener("dispose",o);else if(h.code!==l)c(e);else{if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength;else if(void 0!==i.shaderID)return;u=!1}if(u&&(i.shaderID?(l=Ya[i.shaderID],n.shader={name:e.type,uniforms:v(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}):n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader},e.onBeforeCompile(n.shader,re),l=G.getProgramCode(e,i),h=G.acquireProgram(e,n.shader,i,l),n.program=h,e.program=h),i=h.getAttributes(),e.morphTargets)for(l=e.numSupportedMorphTargets=0;l<re.maxMorphTargets;l++)0<=i["morphTarget"+l]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(l=e.numSupportedMorphNormals=0;l<re.maxMorphNormals;l++)0<=i["morphNormal"+l]&&e.numSupportedMorphNormals++;i=n.shader.uniforms,(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=Ce.numPlanes,n.numIntersection=Ce.numIntersection,i.clippingPlanes=Ce.uniform),n.fog=t,void 0===a&&(n.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(i.ambientLightColor.value=r.state.ambient,i.directionalLights.value=r.state.directional,i.spotLights.value=r.state.spot,i.rectAreaLights.value=r.state.rectArea,i.pointLights.value=r.state.point,i.hemisphereLights.value=r.state.hemi,i.directionalShadowMap.value=r.state.directionalShadowMap,i.directionalShadowMatrix.value=r.state.directionalShadowMatrix,i.spotShadowMap.value=r.state.spotShadowMap,i.spotShadowMatrix.value=r.state.spotShadowMatrix,i.pointShadowMap.value=r.state.pointShadowMap,i.pointShadowMatrix.value=r.state.pointShadowMatrix),e=n.program.getUniforms(),e=Fe.seqWithValue(e.seq,i),n.uniformsList=e}function f(e,t,i,n){_e=0;var r=z.get(i),a=r.lightsHash,s=O.state.lights.state.hash;Ae&&(Pe||e!==fe)&&Ce.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,r,e===fe&&i.id===ue),!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==t?i.needsUpdate=!0:(!i.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===Ce.numPlanes&&r.numIntersection===Ce.numIntersection)||(i.needsUpdate=!0)),i.needsUpdate&&(p(i,t,n),i.needsUpdate=!1);var o=!1,l=!1,c=!1;s=(a=r.program).getUniforms();var h=r.shader.uniforms;if(k.useProgram(a.program)&&(c=l=o=!0),i.id!==ue&&(ue=i.id,l=!0),(o||fe!==e)&&(s.setValue(Oe,"projectionMatrix",e.projectionMatrix),D.logarithmicDepthBuffer&&s.setValue(Oe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),fe!==e&&(fe=e,c=l=!0),(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap)&&void 0!==(o=s.map.cameraPosition)&&o.setValue(Oe,Re.setFromMatrixPosition(e.matrixWorld)),(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&s.setValue(Oe,"viewMatrix",e.matrixWorldInverse)),i.skinning&&(s.setOptional(Oe,n,"bindMatrix"),s.setOptional(Oe,n,"bindMatrixInverse"),e=n.skeleton))if(o=e.bones,D.floatVertexTextures){if(void 0===e.boneTexture){o=Math.sqrt(4*o.length),o=ya.ceilPowerOfTwo(o),o=Math.max(o,4);var u=new Float32Array(o*o*4);u.set(e.boneMatrices);var f=new d(u,o,o,1023,1015);f.needsUpdate=!0,e.boneMatrices=u,e.boneTexture=f,e.boneTextureSize=o}s.setValue(Oe,"boneTexture",e.boneTexture),s.setValue(Oe,"boneTextureSize",e.boneTextureSize)}else s.setOptional(Oe,e,"boneMatrices");return l&&(s.setValue(Oe,"toneMappingExposure",re.toneMappingExposure),s.setValue(Oe,"toneMappingWhitePoint",re.toneMappingWhitePoint),i.lights&&(l=c,h.ambientLightColor.needsUpdate=l,h.directionalLights.needsUpdate=l,h.pointLights.needsUpdate=l,h.spotLights.needsUpdate=l,h.rectAreaLights.needsUpdate=l,h.hemisphereLights.needsUpdate=l),t&&i.fog&&(h.fogColor.value=t.color,t.isFog?(h.fogNear.value=t.near,h.fogFar.value=t.far):t.isFogExp2&&(h.fogDensity.value=t.density)),i.isMeshBasicMaterial?m(h,i):i.isMeshLambertMaterial?(m(h,i),i.emissiveMap&&(h.emissiveMap.value=i.emissiveMap)):i.isMeshPhongMaterial?(m(h,i),i.isMeshToonMaterial?(y(h,i),i.gradientMap&&(h.gradientMap.value=i.gradientMap)):y(h,i)):i.isMeshStandardMaterial?(m(h,i),i.isMeshPhysicalMaterial?(_(h,i),h.reflectivity.value=i.reflectivity,h.clearCoat.value=i.clearCoat,h.clearCoatRoughness.value=i.clearCoatRoughness):_(h,i)):i.isMeshMatcapMaterial?(m(h,i),i.matcap&&(h.matcap.value=i.matcap),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDepthMaterial?(m(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDistanceMaterial?(m(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias),h.referencePosition.value.copy(i.referencePosition),h.nearDistance.value=i.nearDistance,h.farDistance.value=i.farDistance):i.isMeshNormalMaterial?(m(h,i),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isLineBasicMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,i.isLineDashedMaterial&&(h.dashSize.value=i.dashSize,h.totalSize.value=i.dashSize+i.gapSize,h.scale.value=i.scale)):i.isPointsMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,h.size.value=i.size*we,h.scale.value=.5*be,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isSpriteMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,h.rotation.value=i.rotation,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isShadowMaterial&&(h.color.value=i.color,h.opacity.value=i.opacity),void 0!==h.ltc_1&&(h.ltc_1.value=Xa.LTC_1),void 0!==h.ltc_2&&(h.ltc_2.value=Xa.LTC_2),Fe.upload(Oe,r.uniformsList,h,re)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Fe.upload(Oe,r.uniformsList,h,re),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&s.setValue(Oe,"center",n.center),s.setValue(Oe,"modelViewMatrix",n.modelViewMatrix),s.setValue(Oe,"normalMatrix",n.normalMatrix),s.setValue(Oe,"modelMatrix",n.matrixWorld),a}function m(e,t){if(e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=z.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map)var i=t.map;else t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap);void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function y(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function _(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}console.log("THREE.WebGLRenderer","101");var w=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),T=void 0!==e.context?e.context:null,E=void 0!==e.alpha&&e.alpha,M=void 0===e.depth||e.depth,S=void 0===e.stencil||e.stencil,C=void 0!==e.antialias&&e.antialias,A=void 0===e.premultipliedAlpha||e.premultipliedAlpha,P=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,L=void 0!==e.powerPreference?e.powerPreference:"default",R=null,O=null;this.domElement=w,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var I,D,k,N,z,B,H,F,U,G,V,j,W,X,Y,q,$,re=this,oe=!1,le=null,ce=null,he=null,ue=-1,de=t=null,pe=!1,fe=null,me=null,ge=new l,ve=new l,ye=null,_e=0,xe=w.width,be=w.height,we=1,Te=new l(0,0,xe,be),Ee=new l(0,0,xe,be),Me=!1,Se=new g,Ce=new Q,Ae=!1,Pe=!1,Le=new n,Re=new a;try{E={alpha:E,depth:M,stencil:S,antialias:C,premultipliedAlpha:A,preserveDrawingBuffer:P,powerPreference:L},w.addEventListener("webglcontextlost",r,!1),w.addEventListener("webglcontextrestored",s,!1);var Oe=T||w.getContext("webgl",E)||w.getContext("experimental-webgl",E);if(null===Oe){if(null!==w.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===Oe.getShaderPrecisionFormat&&(Oe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}i();var Ie=null;"undefined"!=typeof navigator&&(Ie="xr"in navigator?new yt(re):new vt(re)),this.vr=Ie;var De=new lt(re,U,D.maxTextureSize);this.shadowMap=De,this.getContext=function(){return Oe},this.getContextAttributes=function(){return Oe.getContextAttributes()},this.forceContextLoss=function(){var e=I.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=I.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return we},this.setPixelRatio=function(e){void 0!==e&&(we=e,this.setSize(xe,be,!1))},this.getSize=function(){return{width:xe,height:be}},this.setSize=function(e,t,i){Ie.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(xe=e,be=t,w.width=e*we,w.height=t*we,!1!==i&&(w.style.width=e+"px",w.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:xe*we,height:be*we}},this.setDrawingBufferSize=function(e,t,i){xe=e,be=t,we=i,w.width=e*i,w.height=t*i,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return ge},this.setViewport=function(e,t,i,n){Te.set(e,be-t-n,i,n),k.viewport(ge.copy(Te).multiplyScalar(we))},this.setScissor=function(e,t,i,n){Ee.set(e,be-t-n,i,n),k.scissor(ve.copy(Ee).multiplyScalar(we))},this.setScissorTest=function(e){k.setScissorTest(Me=e)},this.getClearColor=function(){return W.getClearColor()},this.setClearColor=function(){W.setClearColor.apply(W,arguments)},this.getClearAlpha=function(){return W.getClearAlpha()},this.setClearAlpha=function(){W.setClearAlpha.apply(W,arguments)},this.clear=function(e,t,i){var n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===i||i)&&(n|=1024),Oe.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){w.removeEventListener("webglcontextlost",r,!1),w.removeEventListener("webglcontextrestored",s,!1),V.dispose(),j.dispose(),z.dispose(),U.dispose(),Ie.dispose(),He.stop()},this.renderBufferImmediate=function(e,t){k.initAttributes();var i=z.get(e);e.hasPositions&&!i.position&&(i.position=Oe.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=Oe.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=Oe.createBuffer()),e.hasColors&&!i.color&&(i.color=Oe.createBuffer()),t=t.getAttributes(),e.hasPositions&&(Oe.bindBuffer(34962,i.position),Oe.bufferData(34962,e.positionArray,35048),k.enableAttribute(t.position),Oe.vertexAttribPointer(t.position,3,5126,!1,0,0)),e.hasNormals&&(Oe.bindBuffer(34962,i.normal),Oe.bufferData(34962,e.normalArray,35048),k.enableAttribute(t.normal),Oe.vertexAttribPointer(t.normal,3,5126,!1,0,0)),e.hasUvs&&(Oe.bindBuffer(34962,i.uv),Oe.bufferData(34962,e.uvArray,35048),k.enableAttribute(t.uv),Oe.vertexAttribPointer(t.uv,2,5126,!1,0,0)),e.hasColors&&(Oe.bindBuffer(34962,i.color),Oe.bufferData(34962,e.colorArray,35048),k.enableAttribute(t.color),Oe.vertexAttribPointer(t.color,3,5126,!1,0,0)),k.disableUnusedAttributes(),Oe.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,i,n,r,a,s){var o=a.isMesh&&a.normalMatrix.determinant()<0;k.setMaterial(r,o);var l=f(e,i,r,a),c=!1;t===n.id&&de===l.id&&pe===(!0===r.wireframe)||(t=n.id,de=l.id,pe=!0===r.wireframe,c=!0),a.morphTargetInfluences&&(X.update(a,n,r,l),c=!0),o=n.index;var h=n.attributes.position;if(i=1,!0===r.wireframe&&(o=F.getWireframeAttribute(n),i=2),e=Y,null!==o){var u=H.get(o);(e=q).setIndex(u)}if(c){if(n&&n.isInstancedBufferGeometry&!D.isWebGL2&&null===I.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{k.initAttributes(),c=n.attributes,l=l.getAttributes();var d=r.defaultAttributeValues;for(T in l){var p=l[T];if(0<=p){var m=c[T];if(void 0!==m){var g=m.normalized,v=m.itemSize,y=H.get(m);if(void 0!==y){var _=y.buffer,x=y.type;if(y=y.bytesPerElement,m.isInterleavedBufferAttribute){var b=m.data,w=b.stride;m=m.offset,b&&b.isInstancedInterleavedBuffer?(k.enableAttributeAndDivisor(p,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):k.enableAttribute(p),Oe.bindBuffer(34962,_),Oe.vertexAttribPointer(p,v,x,g,w*y,m*y)}else m.isInstancedBufferAttribute?(k.enableAttributeAndDivisor(p,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):k.enableAttribute(p),Oe.bindBuffer(34962,_),Oe.vertexAttribPointer(p,v,x,g,0,0)}}else if(void 0!==d&&void 0!==(g=d[T]))switch(g.length){case 2:Oe.vertexAttrib2fv(p,g);break;case 3:Oe.vertexAttrib3fv(p,g);break;case 4:Oe.vertexAttrib4fv(p,g);break;default:Oe.vertexAttrib1fv(p,g)}}}k.disableUnusedAttributes()}null!==o&&Oe.bindBuffer(34963,u.buffer)}u=1/0,null!==o?u=o.count:void 0!==h&&(u=h.count),o=n.drawRange.start*i,h=null!==s?s.start*i:0;var T=Math.max(o,h);if(0!==(s=Math.max(0,Math.min(u,o+n.drawRange.count*i,h+(null!==s?s.count*i:1/0))-1-T+1))){if(a.isMesh)if(!0===r.wireframe)k.setLineWidth(r.wireframeLinewidth*(null===ce?we:1)),e.setMode(1);else switch(a.drawMode){case 0:e.setMode(4);break;case 1:e.setMode(5);break;case 2:e.setMode(6)}else a.isLine?(void 0===(r=r.linewidth)&&(r=1),k.setLineWidth(r*(null===ce?we:1)),a.isLineSegments?e.setMode(1):a.isLineLoop?e.setMode(2):e.setMode(3)):a.isPoints?e.setMode(0):a.isSprite&&e.setMode(4);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&e.renderInstances(n,T,s):e.render(T,s)}},this.compile=function(e,t){(O=j.get(e,t)).init(),e.traverse(function(e){e.isLight&&(O.pushLight(e),e.castShadow&&O.pushShadow(e))}),O.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var i=0;i<t.material.length;i++)p(t.material[i],e.fog,t);else p(t.material,e.fog,t)})};var ke,Ne,ze,Be=null,He=new x;He.setAnimationLoop(function(e){Ie.isPresenting()||Be&&Be(e)}),"undefined"!=typeof window&&He.setContext(window),this.setAnimationLoop=function(e){Be=e,Ie.setAnimationLoop(e),He.start()},this.render=function(e,i,n,r){if(i&&i.isCamera){if(!oe){de=t=null,pe=!1,ue=-1,!(fe=null)===e.autoUpdate&&e.updateMatrixWorld(),null===i.parent&&i.updateMatrixWorld(),Ie.enabled&&(i=Ie.getCamera(i)),(O=j.get(e,i)).init(),e.onBeforeRender(re,e,i,n),Le.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Se.setFromMatrix(Le),Pe=this.localClippingEnabled,Ae=Ce.init(this.clippingPlanes,Pe,i),(R=V.get(e,i)).init(),function e(t,i,n,r){if(!1!==t.visible){if(t.layers.test(i.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLight)O.pushLight(t),t.castShadow&&O.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||Se.intersectsSprite(t)){r&&Re.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Le);var a=U.update(t),s=t.material;R.push(t,a,s,n,Re.z,null)}}else if(t.isImmediateRenderObject)r&&Re.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Le),R.push(t,null,t.material,n,Re.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||Se.intersectsObject(t)))if(r&&Re.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Le),a=U.update(t),s=t.material,Array.isArray(s))for(var o=a.groups,l=0,c=o.length;l<c;l++){var h=o[l],u=s[h.materialIndex];u&&u.visible&&R.push(t,a,u,n,Re.z,h)}else s.visible&&R.push(t,a,s,n,Re.z,null);for(l=0,c=(t=t.children).length;l<c;l++)e(t[l],i,n,r)}}(e,i,0,re.sortObjects),!0===re.sortObjects&&R.sort(),Ae&&Ce.beginShadows(),De.render(O.state.shadowsArray,e,i),O.setupLights(i),Ae&&Ce.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),W.render(R,e,i,r),r=R.opaque;var a=R.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;r.length&&h(r,e,i,s),a.length&&h(a,e,i,s)}else r.length&&h(r,e,i),a.length&&h(a,e,i);n&&(B.updateRenderTargetMipmap(n),B.updateMultisampleRenderTarget(n)),k.buffers.depth.setTest(!0),k.buffers.depth.setMask(!0),k.buffers.color.setMask(!0),k.setPolygonOffset(!1),e.onAfterRender(re,e,i),Ie.enabled&&Ie.submitFrame(),O=R=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=_e;return e>=D.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+D.maxTextures),_e+=1,e},this.setTexture2D=(ke=!1,function(e,t){e&&e.isWebGLRenderTarget&&(ke||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ke=!0),e=e.texture),B.setTexture2D(e,t)}),this.setTexture3D=function(e,t){B.setTexture3D(e,t)},this.setTexture=(Ne=!1,function(e,t){Ne||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),Ne=!0),B.setTexture2D(e,t)}),this.setTextureCube=(ze=!1,function(e,t){e&&e.isWebGLRenderTargetCube&&(ze||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ze=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?B.setTextureCube(e,t):B.setTextureCubeDynamic(e,t)}),this.setFramebuffer=function(e){le=e},this.getRenderTarget=function(){return ce},this.setRenderTarget=function(e){(ce=e)&&void 0===z.get(e).__webglFramebuffer&&B.setupRenderTarget(e);var t=le,i=!1;ye=e?(t=z.get(e).__webglFramebuffer,e.isWebGLRenderTargetCube?(t=t[e.activeCubeFace],i=!0):t=e.isWebGLMultisampleRenderTarget?z.get(e).__webglMultisampledFramebuffer:t,ge.copy(e.viewport),ve.copy(e.scissor),e.scissorTest):(ge.copy(Te).multiplyScalar(we),ve.copy(Ee).multiplyScalar(we),Me),he!==t&&(Oe.bindFramebuffer(36160,t),he=t),k.viewport(ge),k.scissor(ve),k.setScissorTest(ye),i&&(i=z.get(e.texture),Oe.framebufferTexture2D(36160,36064,34069+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel))},this.readRenderTargetPixels=function(e,t,i,n,r,a){if(e&&e.isWebGLRenderTarget){var s=z.get(e).__webglFramebuffer;if(s){var o=!1;s!==he&&(Oe.bindFramebuffer(36160,s),o=!0);try{var l=e.texture,c=l.format,h=l.type;1023!==c&&$.convert(c)!==Oe.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===h||$.convert(h)===Oe.getParameter(35738)||1015===h&&(D.isWebGL2||I.get("OES_texture_float")||I.get("WEBGL_color_buffer_float"))||1016===h&&(D.isWebGL2?I.get("EXT_color_buffer_float"):I.get("EXT_color_buffer_half_float"))?36053===Oe.checkFramebufferStatus(36160)?0<=t&&t<=e.width-n&&0<=i&&i<=e.height-r&&Oe.readPixels(t,i,n,r,$.convert(c),$.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&Oe.bindFramebuffer(36160,he)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,i){var n=t.image.width,r=t.image.height,a=$.convert(t.format);this.setTexture2D(t,0),Oe.copyTexImage2D(3553,i||0,a,e.x,e.y,n,r,0)},this.copyTextureToTexture=function(e,t,i,n){var r=t.image.width,a=t.image.height,s=$.convert(i.format),o=$.convert(i.type);this.setTexture2D(i,0),t.isDataTexture?Oe.texSubImage2D(3553,n||0,e.x,e.y,r,a,s,o,t.image.data):Oe.texSubImage2D(3553,n||0,e.x,e.y,s,o,t.image)}}function xt(e,t){this.name="",this.color=new _(e),this.density=void 0!==t?t:25e-5}function bt(e,t,i){this.name="",this.color=new _(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3}function wt(){M.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function Tt(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Et(e,t,i,n){this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===n}function Mt(e){j.call(this),this.type="SpriteMaterial",this.color=new _(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function St(e){if(M.call(this),this.type="Sprite",void 0===go){go=new H;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);t=new Tt(t,5),go.setIndex([0,1,2,0,2,3]),go.addAttribute("position",new Et(t,3,0,!1)),go.addAttribute("uv",new Et(t,2,3,!1))}this.geometry=go,this.material=void 0!==e?e:new Mt,this.center=new i(.5,.5)}function Ct(){M.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function At(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),$.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new n,this.bindMatrixInverse=new n}function Pt(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new n)}function Lt(){M.call(this),this.type="Bone"}function Rt(e){j.call(this),this.type="LineBasicMaterial",this.color=new _(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(e)}function Ot(e,t,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),M.call(this),this.type="Line",this.geometry=void 0!==e?e:new H,this.material=void 0!==t?t:new Rt({color:16777215*Math.random()})}function It(e,t){Ot.call(this,e,t),this.type="LineSegments"}function Dt(e,t){Ot.call(this,e,t),this.type="LineLoop"}function kt(e){j.call(this),this.type="PointsMaterial",this.color=new _(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=this.morphTargets=!1,this.setValues(e)}function Nt(e,t){M.call(this),this.type="Points",this.geometry=void 0!==e?e:new H,this.material=void 0!==t?t:new kt({color:16777215*Math.random()})}function zt(e,t,i,n,r,a,s,l,c){o.call(this,e,t,i,n,r,a,s,l,c),this.format=void 0!==s?s:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1}function Bt(e,t,i,n,r,a,s,l,c,h,u,d){o.call(this,null,a,s,l,c,h,n,r,u,d),this.image={width:t,height:i},this.mipmaps=e,this.generateMipmaps=this.flipY=!1}function Ht(e,t,i,n,r,a,s,l,c){o.call(this,e,t,i,n,r,a,s,l,c),this.needsUpdate=!0}function Ft(e,t,i,n,r,a,s,l,c,h){if(1026!==(h=void 0!==h?h:1026)&&1027!==h)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===h&&(i=1012),void 0===i&&1027===h&&(i=1020),o.call(this,null,n,r,a,s,l,h,i,c),this.image={width:e,height:t},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==l?l:1003,this.generateMipmaps=this.flipY=!1}function Ut(e){H.call(this),this.type="WireframeGeometry";var t,i,n,r=[],s=[0,0],o={},l=["a","b","c"];if(e&&e.isGeometry){var c=e.faces,h=0;for(i=c.length;h<i;h++){var u=c[h];for(t=0;t<3;t++){var d=u[l[t]],p=u[l[(t+1)%3]];s[0]=Math.min(d,p),s[1]=Math.max(d,p),void 0===o[d=s[0]+","+s[1]]&&(o[d]={index1:s[0],index2:s[1]})}}for(d in o)h=o[d],l=e.vertices[h.index1],r.push(l.x,l.y,l.z),l=e.vertices[h.index2],r.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry)if(l=new a,null!==e.index){c=e.attributes.position,u=e.index;var f=e.groups;for(0===f.length&&(f=[{start:0,count:u.count,materialIndex:0}]),e=0,n=f.length;e<n;++e)for(t=(h=f[e]).start,i=h.count,i=(h=t)+i;h<i;h+=3)for(t=0;t<3;t++)d=u.getX(h+t),p=u.getX(h+(t+1)%3),s[0]=Math.min(d,p),s[1]=Math.max(d,p),void 0===o[d=s[0]+","+s[1]]&&(o[d]={index1:s[0],index2:s[1]});for(d in o)h=o[d],l.fromBufferAttribute(c,h.index1),r.push(l.x,l.y,l.z),l.fromBufferAttribute(c,h.index2),r.push(l.x,l.y,l.z)}else for(h=0,i=(c=e.attributes.position).count/3;h<i;h++)for(t=0;t<3;t++)o=3*h+t,l.fromBufferAttribute(c,o),r.push(l.x,l.y,l.z),o=3*h+(t+1)%3,l.fromBufferAttribute(c,o),r.push(l.x,l.y,l.z);this.addAttribute("position",new k(r,3))}function Gt(e,t,i){S.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new Vt(e,t,i)),this.mergeVertices()}function Vt(e,t,i){H.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};var n,r,s=[],o=[],l=[],c=[],h=new a,u=new a,d=new a,p=new a,f=new a;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(n=0;n<=i;n++){var g=n/i;for(r=0;r<=t;r++){var v=r/t;e(v,g,u),o.push(u.x,u.y,u.z),0<=v-1e-5?(e(v-1e-5,g,d),p.subVectors(u,d)):(e(v+1e-5,g,d),p.subVectors(d,u)),0<=g-1e-5?(e(v,g-1e-5,d),f.subVectors(u,d)):(e(v,g+1e-5,d),f.subVectors(d,u)),h.crossVectors(p,f).normalize(),l.push(h.x,h.y,h.z),c.push(v,g)}}for(n=0;n<i;n++)for(r=0;r<t;r++)e=n*m+r+1,h=(n+1)*m+r+1,u=(n+1)*m+r,s.push(n*m+r,e,u),s.push(e,h,u);this.setIndex(s),this.addAttribute("position",new k(o,3)),this.addAttribute("normal",new k(l,3)),this.addAttribute("uv",new k(c,2))}function jt(e,t,i,n){S.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},this.fromBufferGeometry(new Wt(e,t,i,n)),this.mergeVertices()}function Wt(e,t,n,r){function s(e){c.push(e.x,e.y,e.z)}function o(t,i){t*=3,i.x=e[t+0],i.y=e[t+1],i.z=e[t+2]}function l(e,t,i,n){n<0&&1===e.x&&(h[t]=e.x-1),0===i.x&&0===i.z&&(h[t]=n/2/Math.PI+.5)}H.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var c=[],h=[];!function(e){for(var i=new a,n=new a,r=new a,l=0;l<t.length;l+=3){o(t[l+0],i),o(t[l+1],n),o(t[l+2],r);var c,h,u=i,d=n,p=r,f=Math.pow(2,e),m=[];for(h=0;h<=f;h++){m[h]=[];var g=u.clone().lerp(p,h/f),v=d.clone().lerp(p,h/f),y=f-h;for(c=0;c<=y;c++)m[h][c]=0===c&&h===f?g:g.clone().lerp(v,c/y)}for(h=0;h<f;h++)for(c=0;c<2*(f-h)-1;c++)u=Math.floor(c/2),0==c%2?(s(m[h][u+1]),s(m[h+1][u]),s(m[h][u])):(s(m[h][u+1]),s(m[h+1][u+1]),s(m[h+1][u]))}}(r=r||0),function(e){for(var t=new a,i=0;i<c.length;i+=3)t.x=c[i+0],t.y=c[i+1],t.z=c[i+2],t.normalize().multiplyScalar(e),c[i+0]=t.x,c[i+1]=t.y,c[i+2]=t.z}(n),function(){for(var e=new a,t=0;t<c.length;t+=3)e.x=c[t+0],e.y=c[t+1],e.z=c[t+2],h.push(Math.atan2(e.z,-e.x)/2/Math.PI+.5,1-(Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5));e=new a,t=new a;for(var n=new a,r=new a,s=new i,o=new i,u=new i,d=0,p=0;d<c.length;d+=9,p+=6){e.set(c[d+0],c[d+1],c[d+2]),t.set(c[d+3],c[d+4],c[d+5]),n.set(c[d+6],c[d+7],c[d+8]),s.set(h[p+0],h[p+1]),o.set(h[p+2],h[p+3]),u.set(h[p+4],h[p+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=Math.atan2(r.z,-r.x);l(s,p+0,e,f),l(o,p+2,t,f),l(u,p+4,n,f)}for(e=0;e<h.length;e+=6)t=h[e+0],n=h[e+2],r=h[e+4],s=Math.min(t,n,r),.9<Math.max(t,n,r)&&s<.1&&(t<.2&&(h[e+0]+=1),n<.2&&(h[e+2]+=1),r<.2&&(h[e+4]+=1))}(),this.addAttribute("position",new k(c,3)),this.addAttribute("normal",new k(c.slice(),3)),this.addAttribute("uv",new k(h,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Xt(e,t){S.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Yt(e,t)),this.mergeVertices()}function Yt(e,t){Wt.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function qt(e,t){S.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new $t(e,t)),this.mergeVertices()}function $t(e,t){Wt.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Zt(e,t){S.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Jt(e,t)),this.mergeVertices()}function Jt(e,t){var i=(1+Math.sqrt(5))/2;Wt.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Kt(e,t){S.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Qt(e,t)),this.mergeVertices()}function Qt(e,t){var i=(1+Math.sqrt(5))/2,n=1/i;Wt.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ei(e,t,i,n,r,a){S.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed."),e=new ti(e,t,i,n,r),this.tangents=e.tangents,this.normals=e.normals,this.binormals=e.binormals,this.fromBufferGeometry(e),this.mergeVertices()}function ti(e,t,n,r,s){function o(i){f=e.getPointAt(i/t,f);var a=l.normals[i];for(i=l.binormals[i],h=0;h<=r;h++){var s=h/r*Math.PI*2,o=Math.sin(s);s=-Math.cos(s),d.x=s*a.x+o*i.x,d.y=s*a.y+o*i.y,d.z=s*a.z+o*i.z,d.normalize(),g.push(d.x,d.y,d.z),u.x=f.x+n*d.x,u.y=f.y+n*d.y,u.z=f.z+n*d.z,m.push(u.x,u.y,u.z)}}H.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s},t=t||64,n=n||1,r=r||8,s=s||!1;var l=e.computeFrenetFrames(t,s);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var c,h,u=new a,d=new a,p=new i,f=new a,m=[],g=[],v=[],y=[];for(c=0;c<t;c++)o(c);for(o(!1===s?t:0),c=0;c<=t;c++)for(h=0;h<=r;h++)p.x=c/t,p.y=h/r,v.push(p.x,p.y);!function(){for(h=1;h<=t;h++)for(c=1;c<=r;c++){var e=(r+1)*h+(c-1),i=(r+1)*h+c,n=(r+1)*(h-1)+c;y.push((r+1)*(h-1)+(c-1),e,n),y.push(e,i,n)}}(),this.setIndex(y),this.addAttribute("position",new k(m,3)),this.addAttribute("normal",new k(g,3)),this.addAttribute("uv",new k(v,2))}function ii(e,t,i,n,r,a,s){S.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ni(e,t,i,n,r,a)),this.mergeVertices()}function ni(e,t,i,n,r,s){function o(e,t,i,n,r){var a=Math.sin(e);t=i/t*e,i=Math.cos(t),r.x=n*(2+i)*.5*Math.cos(e),r.y=n*(2+i)*a*.5,r.z=n*Math.sin(t)*.5}H.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:s},e=e||1,t=t||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,s=s||3;var l,c=[],h=[],u=[],d=[],p=new a,f=new a,m=new a,g=new a,v=new a,y=new a,_=new a;for(l=0;l<=i;++l){var x=l/i*r*Math.PI*2;for(o(x,r,s,e,m),o(x+.01,r,s,e,g),y.subVectors(g,m),_.addVectors(g,m),v.crossVectors(y,_),_.crossVectors(v,y),v.normalize(),_.normalize(),x=0;x<=n;++x){var b=x/n*Math.PI*2,w=-t*Math.cos(b);b=t*Math.sin(b),p.x=m.x+(w*_.x+b*v.x),p.y=m.y+(w*_.y+b*v.y),p.z=m.z+(w*_.z+b*v.z),h.push(p.x,p.y,p.z),f.subVectors(p,m).normalize(),u.push(f.x,f.y,f.z),d.push(l/i),d.push(x/n)}}for(x=1;x<=i;x++)for(l=1;l<=n;l++)e=(n+1)*x+(l-1),t=(n+1)*x+l,r=(n+1)*(x-1)+l,c.push((n+1)*(x-1)+(l-1),e,r),c.push(e,t,r);this.setIndex(c),this.addAttribute("position",new k(h,3)),this.addAttribute("normal",new k(u,3)),this.addAttribute("uv",new k(d,2))}function ri(e,t,i,n,r){S.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new ai(e,t,i,n,r)),this.mergeVertices()}function ai(e,t,i,n,r){H.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},e=e||1,t=t||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var s,o,l=[],c=[],h=[],u=[],d=new a,p=new a,f=new a;for(s=0;s<=i;s++)for(o=0;o<=n;o++){var m=o/n*r,g=s/i*Math.PI*2;p.x=(e+t*Math.cos(g))*Math.cos(m),p.y=(e+t*Math.cos(g))*Math.sin(m),p.z=t*Math.sin(g),c.push(p.x,p.y,p.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),f.subVectors(p,d).normalize(),h.push(f.x,f.y,f.z),u.push(o/n),u.push(s/i)}for(s=1;s<=i;s++)for(o=1;o<=n;o++)e=(n+1)*(s-1)+o-1,t=(n+1)*(s-1)+o,r=(n+1)*s+o,l.push((n+1)*s+o-1,e,r),l.push(e,t,r);this.setIndex(l),this.addAttribute("position",new k(c,3)),this.addAttribute("normal",new k(h,3)),this.addAttribute("uv",new k(u,2))}function si(e,t,i,n,r){for(var a,s=0,o=t,l=i-n;o<i;o+=n)s+=(e[l]-e[o])*(e[o+1]+e[l+1]),l=o;if(r===0<s)for(r=t;r<i;r+=n)a=yi(r,e[r],e[r+1],a);else for(r=i-n;t<=r;r-=n)a=yi(r,e[r],e[r+1],a);return a&&fi(a,a.next)&&(_i(a),a=a.next),a}function oi(e,t){if(!e)return e;t||(t=e);do{var i=!1;if(e.steiner||!fi(e,e.next)&&0!==pi(e.prev,e,e.next))e=e.next;else{if(_i(e),(e=t=e.prev)===e.next)break;i=!0}}while(i||e!==t);return t}function li(e,t){return e.x-t.x}function ci(e,t){var i=t,n=e.x,r=e.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var s=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&a<s){if((a=s)===n){if(r===i.y)return i;if(r===i.next.y)return i.next}var o=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!o)return null;if(n===a)return o.prev;s=(t=o).x;var l=o.y,c=1/0;for(i=o.next;i!==t;){if(n>=i.x&&i.x>=s&&n!==i.x&&di(r<l?n:a,r,s,l,r<l?a:n,r,i.x,i.y)){var h=Math.abs(r-i.y)/(n-i.x);(h<c||h===c&&i.x>o.x)&&gi(i,e)&&(o=i,c=h)}i=i.next}return o}function hi(e,t,i,n,r){return 1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1)|(1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ui(e){for(var t=e,i=e;t.x<i.x&&(i=t),(t=t.next)!==e;);return i}function di(e,t,i,n,r,a,s,o){return 0<=(r-s)*(t-o)-(e-s)*(a-o)&&0<=(e-s)*(n-o)-(i-s)*(t-o)&&0<=(i-s)*(a-o)-(r-s)*(n-o)}function pi(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function fi(e,t){return e.x===t.x&&e.y===t.y}function mi(e,t,i,n){return!!(fi(e,t)&&fi(i,n)||fi(e,n)&&fi(i,t))||0<pi(e,t,i)!=0<pi(e,t,n)&&0<pi(i,n,e)!=0<pi(i,n,t)}function gi(e,t){return pi(e.prev,e,e.next)<0?0<=pi(e,t,e.next)&&0<=pi(e,e.prev,t):pi(e,t,e.prev)<0||pi(e,e.next,t)<0}function vi(e,t){var i=new xi(e.i,e.x,e.y),n=new xi(t.i,t.x,t.y),r=e.next,a=t.prev;return(e.next=t).prev=e,(i.next=r).prev=i,(n.next=i).prev=n,(a.next=n).prev=a,n}function yi(e,t,i,n){return e=new xi(e,t,i),n?(e.next=n.next,(e.prev=n).next.prev=e,n.next=e):(e.prev=e).next=e,e}function _i(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xi(e,t,i){this.i=e,this.x=t,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function bi(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function wi(e,t){for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}function Ti(e,t){S.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Ei(e,t)),this.mergeVertices()}function Ei(e,t){function n(e){function n(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}function l(e,t,n){var r=e.x-t.x,a=e.y-t.y,s=n.x-e.x,o=n.y-e.y,l=r*r+a*a;if(Math.abs(r*o-a*s)>Number.EPSILON){var c=Math.sqrt(l),h=Math.sqrt(s*s+o*o);if(l=t.x-a/c,t=t.y+r/c,(a=(s=l+r*(o=((n.x-o/h-l)*o-(n.y+s/h-t)*s)/(r*o-a*s))-e.x)*s+(r=t+a*o-e.y)*r)<=2)return new i(s,r);a=Math.sqrt(a/2)}else e=!1,r>Number.EPSILON?s>Number.EPSILON&&(e=!0):r<-Number.EPSILON?s<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(o)&&(e=!0),a=e?(s=-a,Math.sqrt(l)):(s=r,r=a,Math.sqrt(l/2));return new i(s/a,r/a)}function c(e,t){for(F=e.length;0<=--F;){var i=F,n=F-1;n<0&&(n=e.length-1);var a,o=g+2*b;for(a=0;a<o;a++){var l=B*a,c=B*(a+1),h=t+n+l,u=t+n+c;c=t+i+c,d(t+i+l),d(h),d(c),d(h),d(u),d(c),l=s.length/3,p((l=T.generateSideWallUV(r,s,l-6,l-3,l-2,l-1))[0]),p(l[1]),p(l[3]),p(l[1]),p(l[2]),p(l[3])}}}function h(e,t,i){f.push(e),f.push(t),f.push(i)}function u(e,t,i){d(e),d(t),d(i),e=s.length/3,p((e=T.generateTopUV(r,s,e-3,e-2,e-1))[0]),p(e[1]),p(e[2])}function d(e){s.push(f[3*e]),s.push(f[3*e+1]),s.push(f[3*e+2])}function p(e){o.push(e.x),o.push(e.y)}var f=[],m=void 0!==t.curveSegments?t.curveSegments:12,g=void 0!==t.steps?t.steps:1,v=void 0!==t.depth?t.depth:100,y=void 0===t.bevelEnabled||t.bevelEnabled,_=void 0!==t.bevelThickness?t.bevelThickness:6,x=void 0!==t.bevelSize?t.bevelSize:_-2,b=void 0!==t.bevelSegments?t.bevelSegments:3,w=t.extrudePath,T=void 0!==t.UVGenerator?t.UVGenerator:ko;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),v=t.amount);var E,M=!1;if(w){var S=w.getSpacedPoints(g);y=!(M=!0);var C=w.computeFrenetFrames(g,!1),A=new a,P=new a,L=new a}y||(x=_=b=0),e=(m=e.extractPoints(m)).shape;var R=m.holes;if(!Do.isClockWise(e)){e=e.reverse();var O=0;for(E=R.length;O<E;O++){var I=R[O];Do.isClockWise(I)&&(R[O]=I.reverse())}}var D=Do.triangulateShape(e,R),k=e;for(O=0,E=R.length;O<E;O++)I=R[O],e=e.concat(I);var N,z,B=e.length,H=D.length;m=[];var F=0,U=k.length,G=U-1;for(N=F+1;F<U;F++,G++,N++)G===U&&(G=0),N===U&&(N=0),m[F]=l(k[F],k[G],k[N]);w=[];var V=m.concat();for(O=0,E=R.length;O<E;O++){I=R[O];var j=[];for(F=0,G=(U=I.length)-1,N=F+1;F<U;F++,G++,N++)G===U&&(G=0),N===U&&(N=0),j[F]=l(I[F],I[G],I[N]);w.push(j),V=V.concat(j)}for(G=0;G<b;G++){U=G/b;var W=_*Math.cos(U*Math.PI/2);for(N=x*Math.sin(U*Math.PI/2),F=0,U=k.length;F<U;F++){var X=n(k[F],m[F],N);h(X.x,X.y,-W)}for(O=0,E=R.length;O<E;O++)for(I=R[O],j=w[O],F=0,U=I.length;F<U;F++)h((X=n(I[F],j[F],N)).x,X.y,-W)}for(N=x,F=0;F<B;F++)X=y?n(e[F],V[F],N):e[F],M?(P.copy(C.normals[0]).multiplyScalar(X.x),A.copy(C.binormals[0]).multiplyScalar(X.y),L.copy(S[0]).add(P).add(A),h(L.x,L.y,L.z)):h(X.x,X.y,0);for(U=1;U<=g;U++)for(F=0;F<B;F++)X=y?n(e[F],V[F],N):e[F],M?(P.copy(C.normals[U]).multiplyScalar(X.x),A.copy(C.binormals[U]).multiplyScalar(X.y),L.copy(S[U]).add(P).add(A),h(L.x,L.y,L.z)):h(X.x,X.y,v/g*U);for(G=b-1;0<=G;G--){for(U=G/b,W=_*Math.cos(U*Math.PI/2),N=x*Math.sin(U*Math.PI/2),F=0,U=k.length;F<U;F++)h((X=n(k[F],m[F],N)).x,X.y,v+W);for(O=0,E=R.length;O<E;O++)for(I=R[O],j=w[O],F=0,U=I.length;F<U;F++)X=n(I[F],j[F],N),M?h(X.x,X.y+S[g-1].y,S[g-1].x+W):h(X.x,X.y,v+W)}!function(){var e=s.length/3;if(y){var t=0*B;for(F=0;F<H;F++)u((z=D[F])[2]+t,z[1]+t,z[0]+t);for(t=B*(g+2*b),F=0;F<H;F++)u((z=D[F])[0]+t,z[1]+t,z[2]+t)}else{for(F=0;F<H;F++)u((z=D[F])[2],z[1],z[0]);for(F=0;F<H;F++)u((z=D[F])[0]+B*g,z[1]+B*g,z[2]+B*g)}r.addGroup(e,s.length/3-e,0)}(),function(){var e=s.length/3,t=0;for(c(k,t),t+=k.length,O=0,E=R.length;O<E;O++)c(I=R[O],t),t+=I.length;r.addGroup(e,s.length/3-e,1)}()}H.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var r=this,s=[],o=[],l=0,c=e.length;l<c;l++)n(e[l]);this.addAttribute("position",new k(s,3)),this.addAttribute("uv",new k(o,2)),this.computeVertexNormals()}function Mi(e,t,i){if(i.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++)i.shapes.push(e[n].uuid);else i.shapes.push(e.uuid);return void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON()),i}function Si(e,t){S.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Ci(e,t)),this.mergeVertices()}function Ci(e,t){var i=(t=t||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S;e=i.generateShapes(e,t.size),t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Ei.call(this,e,t),this.type="TextBufferGeometry"}function Ai(e,t,i,n,r,a,s){S.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Pi(e,t,i,n,r,a,s)),this.mergeVertices()}function Pi(e,t,i,n,r,s,o){H.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:s,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var l,c,h=(s=void 0!==s?s:0)+(o=void 0!==o?o:Math.PI),u=0,d=[],p=new a,f=new a,m=[],g=[],v=[],y=[];for(c=0;c<=i;c++){var _=[],x=c/i;for(l=0;l<=t;l++){var b=l/t;p.x=-e*Math.cos(n+b*r)*Math.sin(s+x*o),p.y=e*Math.cos(s+x*o),p.z=e*Math.sin(n+b*r)*Math.sin(s+x*o),g.push(p.x,p.y,p.z),f.set(p.x,p.y,p.z).normalize(),v.push(f.x,f.y,f.z),y.push(b,1-x),_.push(u++)}d.push(_)}for(c=0;c<i;c++)for(l=0;l<t;l++)e=d[c][l+1],n=d[c][l],r=d[c+1][l],o=d[c+1][l+1],(0!==c||0<s)&&m.push(e,n,o),(c!==i-1||h<Math.PI)&&m.push(n,r,o);this.setIndex(m),this.addAttribute("position",new k(g,3)),this.addAttribute("normal",new k(v,3)),this.addAttribute("uv",new k(y,2))}function Li(e,t,i,n,r,a){S.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Ri(e,t,i,n,r,a)),this.mergeVertices()}function Ri(e,t,n,r,s,o){H.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},e=e||.5,t=t||1,s=void 0!==s?s:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var l,c,h=[],u=[],d=[],p=[],f=e,m=(t-e)/(r=void 0!==r?Math.max(1,r):1),g=new a,v=new i;for(l=0;l<=r;l++){for(c=0;c<=n;c++)e=s+c/n*o,g.x=f*Math.cos(e),g.y=f*Math.sin(e),u.push(g.x,g.y,g.z),d.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,p.push(v.x,v.y);f+=m}for(l=0;l<r;l++)for(t=l*(n+1),c=0;c<n;c++)s=(e=c+t)+n+1,o=e+n+2,f=e+1,h.push(e,s,f),h.push(s,o,f);this.setIndex(h),this.addAttribute("position",new k(u,3)),this.addAttribute("normal",new k(d,3)),this.addAttribute("uv",new k(p,2))}function Oi(e,t,i,n){S.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},this.fromBufferGeometry(new Ii(e,t,i,n)),this.mergeVertices()}function Ii(e,t,n,r){H.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=ya.clamp(r,0,2*Math.PI);var s,o=[],l=[],c=[],h=1/t,u=new a,d=new i;for(s=0;s<=t;s++){var p=n+s*h*r,f=Math.sin(p),m=Math.cos(p);for(p=0;p<=e.length-1;p++)u.x=e[p].x*f,u.y=e[p].y,u.z=e[p].x*m,l.push(u.x,u.y,u.z),d.x=s/t,d.y=p/(e.length-1),c.push(d.x,d.y)}for(s=0;s<t;s++)for(p=0;p<e.length-1;p++)h=(n=p+s*e.length)+e.length,u=n+e.length+1,d=n+1,o.push(n,h,d),o.push(h,u,d);if(this.setIndex(o),this.addAttribute("position",new k(l,3)),this.addAttribute("uv",new k(c,2)),this.computeVertexNormals(),r===2*Math.PI)for(r=this.attributes.normal.array,o=new a,l=new a,c=new a,n=t*e.length*3,p=s=0;s<e.length;s++,p+=3)o.x=r[p+0],o.y=r[p+1],o.z=r[p+2],l.x=r[n+p+0],l.y=r[n+p+1],l.z=r[n+p+2],c.addVectors(o,l).normalize(),r[p+0]=r[n+p+0]=c.x,r[p+1]=r[n+p+1]=c.y,r[p+2]=r[n+p+2]=c.z}function Di(e,t){S.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ki(e,t)),this.mergeVertices()}function ki(e,t){function i(e){var i,o=r.length/3,c=(e=e.extractPoints(t)).shape,h=e.holes;for(!1===Do.isClockWise(c)&&(c=c.reverse()),e=0,i=h.length;e<i;e++){var u=h[e];!0===Do.isClockWise(u)&&(h[e]=u.reverse())}var d=Do.triangulateShape(c,h);for(e=0,i=h.length;e<i;e++)u=h[e],c=c.concat(u);for(e=0,i=c.length;e<i;e++)u=c[e],r.push(u.x,u.y,0),a.push(0,0,1),s.push(u.x,u.y);for(e=0,i=d.length;e<i;e++)c=d[e],n.push(c[0]+o,c[1]+o,c[2]+o),l+=3}H.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],a=[],s=[],o=0,l=0;if(!1===Array.isArray(e))i(e);else for(var c=0;c<e.length;c++)i(e[c]),this.addGroup(o,l,c),o+=l,l=0;this.setIndex(n),this.addAttribute("position",new k(r,3)),this.addAttribute("normal",new k(a,3)),this.addAttribute("uv",new k(s,2))}function Ni(e,t){if(t.shapes=[],Array.isArray(e))for(var i=0,n=e.length;i<n;i++)t.shapes.push(e[i].uuid);else t.shapes.push(e.uuid);return t}function zi(e,t){H.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t};var i=[];t=Math.cos(ya.DEG2RAD*(void 0!==t?t:1));var n=[0,0],r={},a=["a","b","c"];if(e.isBufferGeometry){var s=new S;s.fromBufferGeometry(e)}else s=e.clone();s.mergeVertices(),s.computeFaceNormals(),e=s.vertices;for(var o=0,l=(s=s.faces).length;o<l;o++)for(var c=s[o],h=0;h<3;h++){var u=c[a[h]],d=c[a[(h+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d),void 0===r[u=n[0]+","+n[1]]?r[u]={index1:n[0],index2:n[1],face1:o,face2:void 0}:r[u].face2=o}for(u in r)(void 0===(n=r[u]).face2||s[n.face1].normal.dot(s[n.face2].normal)<=t)&&(a=e[n.index1],i.push(a.x,a.y,a.z),a=e[n.index2],i.push(a.x,a.y,a.z));this.addAttribute("position",new k(i,3))}function Bi(e,t,i,n,r,a,s,o){S.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Hi(e,t,i,n,r,a,s,o)),this.mergeVertices()}function Hi(e,t,n,r,s,o,l,c){function h(n){var s,o=new i,h=new a,v=0,x=!0===n?e:t,b=!0===n?1:-1,w=g;for(s=1;s<=r;s++)p.push(0,y*b,0),f.push(0,b,0),m.push(.5,.5),g++;var T=g;for(s=0;s<=r;s++){var E=s/r*c+l,M=Math.cos(E);E=Math.sin(E),h.x=x*E,h.y=y*b,h.z=x*M,p.push(h.x,h.y,h.z),f.push(0,b,0),o.x=.5*M+.5,o.y=.5*E*b+.5,m.push(o.x,o.y),g++}for(s=0;s<r;s++)o=w+s,h=T+s,!0===n?d.push(h,h+1,o):d.push(h+1,h,o),v+=3;u.addGroup(_,v,!0===n?1:2),_+=v}H.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};var u=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,s=Math.floor(s)||1,o=void 0!==o&&o,l=void 0!==l?l:0,c=void 0!==c?c:2*Math.PI;var d=[],p=[],f=[],m=[],g=0,v=[],y=n/2,_=0;!function(){var i,o,h=new a,x=new a,b=0,w=(t-e)/n;for(o=0;o<=s;o++){var T=[],E=o/s,M=E*(t-e)+e;for(i=0;i<=r;i++){var S=i/r,C=S*c+l,A=Math.sin(C);C=Math.cos(C),x.x=M*A,x.y=-E*n+y,x.z=M*C,p.push(x.x,x.y,x.z),h.set(A,w,C).normalize(),f.push(h.x,h.y,h.z),m.push(S,1-E),T.push(g++)}v.push(T)}for(i=0;i<r;i++)for(o=0;o<s;o++)h=v[o+1][i],x=v[o+1][i+1],w=v[o][i+1],d.push(v[o][i],h,w),d.push(h,x,w),b+=6;u.addGroup(_,b,0),_+=b}(),!1===o&&(0<e&&h(!0),0<t&&h(!1)),this.setIndex(d),this.addAttribute("position",new k(p,3)),this.addAttribute("normal",new k(f,3)),this.addAttribute("uv",new k(m,2))}function Fi(e,t,i,n,r,a,s){Bi.call(this,0,e,t,i,n,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}function Ui(e,t,i,n,r,a,s){Hi.call(this,0,e,t,i,n,r,a,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}function Gi(e,t,i,n){S.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new Vi(e,t,i,n)),this.mergeVertices()}function Vi(e,t,n,r){H.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var s,o=[],l=[],c=[],h=[],u=new a,d=new i;l.push(0,0,0),c.push(0,0,1),h.push(.5,.5);var p=0;for(s=3;p<=t;p++,s+=3){var f=n+p/t*r;u.x=e*Math.cos(f),u.y=e*Math.sin(f),l.push(u.x,u.y,u.z),c.push(0,0,1),d.x=(l[s]/e+1)/2,d.y=(l[s+1]/e+1)/2,h.push(d.x,d.y)}for(s=1;s<=t;s++)o.push(s,s+1,0);this.setIndex(o),this.addAttribute("position",new k(l,3)),this.addAttribute("normal",new k(c,3)),this.addAttribute("uv",new k(h,2))}function ji(e){j.call(this),this.type="ShadowMaterial",this.color=new _(0),this.transparent=!0,this.setValues(e)}function Wi(e){W.call(this,e),this.type="RawShaderMaterial"}function Xi(e){j.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Yi(e){Xi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(e)}function qi(e){j.call(this),this.type="MeshPhongMaterial",this.color=new _(16777215),this.specular=new _(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function $i(e){qi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Zi(e){j.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(e)}function Ji(e){j.call(this),this.type="MeshLambertMaterial",this.color=new _(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Ki(e){j.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.lights=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Qi(e){Rt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function en(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function tn(e,t,i,n){en.call(this,e,t,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function nn(e,t,i,n){en.call(this,e,t,i,n)}function rn(e,t,i,n){en.call(this,e,t,i,n)}function an(e,t,i,n){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bo.convertArray(t,this.TimeBufferType),this.values=Bo.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function sn(e,t,i){an.call(this,e,t,i)}function on(e,t,i,n){an.call(this,e,t,i,n)}function ln(e,t,i,n){an.call(this,e,t,i,n)}function cn(e,t,i,n){en.call(this,e,t,i,n)}function hn(e,t,i,n){an.call(this,e,t,i,n)}function un(e,t,i,n){an.call(this,e,t,i,n)}function dn(e,t,i,n){an.call(this,e,t,i,n)}function pn(e,t,i){this.name=e,this.tracks=i,this.duration=void 0!==t?t:-1,this.uuid=ya.generateUUID(),this.duration<0&&this.resetDuration()}function fn(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ln;case"vector":case"vector2":case"vector3":case"vector4":return dn;case"color":return on;case"quaternion":return hn;case"bool":case"boolean":return sn;case"string":return un}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var i=[],n=[];Bo.flattenJSON(e.keys,i,n,"value"),e.times=i,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function mn(e,t,i){var n=this,r=!1,a=0,s=0,o=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){s++,!1===r&&void 0!==n.onStart&&n.onStart(e,a,s),r=!0},this.itemEnd=function(e){a++,void 0!==n.onProgress&&n.onProgress(e,a,s),a===s&&(r=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this}}function gn(e){this.manager=void 0!==e?e:Fo}function vn(e){this.manager=void 0!==e?e:Fo}function yn(e){this.manager=void 0!==e?e:Fo,this._parser=null}function _n(e){this.manager=void 0!==e?e:Fo,this._parser=null}function xn(e){this.manager=void 0!==e?e:Fo}function bn(e){this.manager=void 0!==e?e:Fo}function wn(e){this.manager=void 0!==e?e:Fo}function Tn(){this.type="Curve",this.arcLengthDivisions=200}function En(e,t,i,n,r,a,s,o){Tn.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=s||!1,this.aRotation=o||0}function Mn(e,t,i,n,r,a){En.call(this,e,t,i,i,n,r,a),this.type="ArcCurve"}function Sn(){var e=0,t=0,i=0,n=0;return{initCatmullRom:function(r,a,s,o,l){i=-3*(e=a)+3*s-2*(t=r=l*(s-r))-(o=l*(o-a)),n=2*a-2*s+r+o},initNonuniformCatmullRom:function(r,a,s,o,l,c,h){i=-3*(e=a)+3*s-2*(t=r=((a-r)/l-(s-r)/(l+c)+(s-a)/c)*c)-(o=((s-a)/c-(o-a)/(c+h)+(o-s)/h)*c),n=2*a-2*s+r+o},calc:function(r){var a=r*r;return e+t*r+i*a+n*a*r}}}function Cn(e,t,i,n){Tn.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=i||"centripetal",this.tension=n||.5}function An(e,t,i,n,r){var a=e*e;return(2*i-2*n+(t=.5*(n-t))+(r=.5*(r-i)))*e*a+(-3*i+3*n-2*t-r)*a+t*e+i}function Pn(e,t,i,n){var r=1-e;return r*r*t+2*(1-e)*e*i+e*e*n}function Ln(e,t,i,n,r){var a=1-e,s=1-e;return a*a*a*t+3*s*s*e*i+3*(1-e)*e*e*n+e*e*e*r}function Rn(e,t,n,r){Tn.call(this),this.type="CubicBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i,this.v3=r||new i}function On(e,t,i,n){Tn.call(this),this.type="CubicBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=i||new a,this.v3=n||new a}function In(e,t){Tn.call(this),this.type="LineCurve",this.v1=e||new i,this.v2=t||new i}function Dn(e,t){Tn.call(this),this.type="LineCurve3",this.v1=e||new a,this.v2=t||new a}function kn(e,t,n){Tn.call(this),this.type="QuadraticBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i}function Nn(e,t,i){Tn.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new a,this.v1=t||new a,this.v2=i||new a}function zn(e){Tn.call(this),this.type="SplineCurve",this.points=e||[]}function Bn(){Tn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Hn(e){Bn.call(this),this.type="Path",this.currentPoint=new i,e&&this.setFromPoints(e)}function Fn(e){Hn.call(this,e),this.uuid=ya.generateUUID(),this.type="Shape",this.holes=[]}function Un(e,t){M.call(this),this.type="Light",this.color=new _(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Gn(e,t,i){Un.call(this,e,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(M.DefaultUp),this.updateMatrix(),this.groundColor=new _(t)}function Vn(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new n}function jn(){Vn.call(this,new ft(50,1,.5,500))}function Wn(e,t,i,n,r,a){Un.call(this,e,t),this.type="SpotLight",this.position.copy(M.DefaultUp),this.updateMatrix(),this.target=new M,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new jn}function Xn(e,t,i,n){Un.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Vn(new ft(90,1,.5,500))}function Yn(e,t,i,n,r,a){pt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function qn(){Vn.call(this,new Yn(-5,5,5,-5,.5,500))}function $n(e,t){Un.call(this,e,t),this.type="DirectionalLight",this.position.copy(M.DefaultUp),this.updateMatrix(),this.target=new M,this.shadow=new qn}function Zn(e,t){Un.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Jn(e,t,i,n){Un.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function Kn(e){this.manager=void 0!==e?e:Fo,this.textures={}}function Qn(e){this.manager=void 0!==e?e:Fo}function er(e){this.manager=void 0!==e?e:Fo,this.resourcePath=""}function tr(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Fo,this.options=void 0}function ir(){this.type="ShapePath",this.color=new _,this.subPaths=[],this.currentPath=null}function nr(e){this.type="Font",this.data=e}function rr(e){this.manager=void 0!==e?e:Fo}function ar(){}function sr(e){this.manager=void 0!==e?e:Fo}function or(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ft,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ft,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function lr(e,t,i,n){M.call(this),this.type="CubeCamera";var r=new ft(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new a(1,0,0)),this.add(r);var s=new ft(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new a(-1,0,0)),this.add(s);var o=new ft(90,1,e,t);o.up.set(0,0,1),o.lookAt(new a(0,1,0)),this.add(o);var l=new ft(90,1,e,t);l.up.set(0,0,-1),l.lookAt(new a(0,-1,0)),this.add(l);var c=new ft(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new a(0,0,1)),this.add(c);var h=new ft(90,1,e,t);h.up.set(0,-1,0),h.lookAt(new a(0,0,-1)),this.add(h),n=n||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new u(i,i,n),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var i=e.getRenderTarget(),n=this.renderTarget,a=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,s,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,l,n),n.activeCubeFace=4,e.render(t,c,n),n.texture.generateMipmaps=a,n.activeCubeFace=5,e.render(t,h,n),e.setRenderTarget(i)},this.clear=function(e,t,i,n){for(var r=e.getRenderTarget(),a=this.renderTarget,s=0;s<6;s++)a.activeCubeFace=s,e.setRenderTarget(a),e.clear(t,i,n);e.setRenderTarget(r)}}function cr(e){this.autoStart=void 0===e||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function hr(){M.call(this),this.type="AudioListener",this.context=$l.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function ur(e){M.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function dr(e){ur.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function pr(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function fr(e,t,i){switch(this.binding=e,this.valueSize=i,e=Float64Array,t){case"quaternion":t=this._slerp;break;case"string":case"bool":e=Array,t=this._select;break;default:t=this._lerp}this.buffer=new e(4*i),this._mixBufferRegion=t,this.referenceCount=this.useCount=this.cumulativeWeight=0}function mr(e,t,i){i=i||gr.parseTrackName(t),this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function gr(e,t,i){this.path=t,this.parsedPath=i||gr.parseTrackName(t),this.node=gr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function vr(){this.uuid=ya.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function yr(e,t,i){this._mixer=e,this._clip=t,this._localRoot=i||null,t=(e=t.tracks).length,i=Array(t);for(var n={endingStart:2400,endingEnd:2400},r=0;r!==t;++r){var a=e[r].createInterpolant(null);(i[r]=a).settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(t),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function _r(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function xr(e,t){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=t),this.value=e}function br(){H.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function wr(e,t,i){Tt.call(this,e,t),this.meshPerAttribute=i||1}function Tr(e,t,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),C.call(this,e,t,i),this.meshPerAttribute=n||1}function Er(e,t,i,n){this.ray=new X(e,t),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Mr(e,t){return e.distance-t.distance}function Sr(e,t,i,n){if(!1!==e.visible&&(e.raycast(t,i),!0===n)){n=0;for(var r=(e=e.children).length;n<r;n++)Sr(e[n],t,i,!0)}}function Cr(e,t,i){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==i?i:0,this}function Ar(e,t,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==i?i:0,this}function Pr(e,t){this.min=void 0!==e?e:new i(1/0,1/0),this.max=void 0!==t?t:new i(-1/0,-1/0)}function Lr(e,t){this.start=void 0!==e?e:new a,this.end=void 0!==t?t:new a}function Rr(e){M.call(this),this.material=e,this.render=function(){}}function Or(e,t,i,n){this.object=e,this.size=void 0!==t?t:1,e=void 0!==i?i:16711680,n=void 0!==n?n:1,t=0,(i=this.object.geometry)&&i.isGeometry?t=3*i.faces.length:i&&i.isBufferGeometry&&(t=i.attributes.normal.count),i=new H,t=new k(6*t,3),i.addAttribute("position",t),It.call(this,i,new Rt({color:e,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function Ir(e,t){M.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e=new H,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,n=1;i<32;i++,n++){var r=i/32*Math.PI*2,a=n/32*Math.PI*2;t.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}e.addAttribute("position",new k(t,3)),t=new Rt({fog:!1}),this.cone=new It(e,t),this.add(this.cone),this.update()}function Dr(e){for(var t=function e(t){var i=[];t&&t.isBone&&i.push(t);for(var n=0;n<t.children.length;n++)i.push.apply(i,e(t.children[n]));return i}(e),i=new H,n=[],r=[],a=new _(0,0,1),s=new _(0,1,0),o=0;o<t.length;o++){var l=t[o];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}i.addAttribute("position",new k(n,3)),i.addAttribute("color",new k(r,3)),n=new Rt({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),It.call(this,i,n),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function kr(e,t,i){this.light=e,this.light.updateMatrixWorld(),this.color=i,e=new Pi(t,4,2),t=new q({wireframe:!0,fog:!1}),$.call(this,e,t),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Nr(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t,(e=new H).addAttribute("position",new k([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),e.computeBoundingSphere(),t=new Rt({fog:!1}),Ot.call(this,e,t),(e=new H).addAttribute("position",new k([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),e.computeBoundingSphere(),this.add(new $(e,new q({side:1,fog:!1}))),this.update()}function zr(e,t,i){M.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(e=new $t(t)).rotateY(.5*Math.PI),this.material=new q({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),t=e.getAttribute("position"),t=new Float32Array(3*t.count),e.addAttribute("color",new C(t,3)),this.add(new $(e,this.material)),this.update()}function Br(e,t,i,n){e=e||10,t=t||10,i=new _(void 0!==i?i:4473924),n=new _(void 0!==n?n:8947848);var r=t/2,a=e/t,s=e/2;e=[];for(var o=[],l=0,c=0,h=-s;l<=t;l++,h+=a){e.push(-s,0,h,s,0,h),e.push(h,0,-s,h,0,s);var u=l===r?i:n;u.toArray(o,c),c+=3,u.toArray(o,c),c+=3,u.toArray(o,c),c+=3,u.toArray(o,c),c+=3}(t=new H).addAttribute("position",new k(e,3)),t.addAttribute("color",new k(o,3)),i=new Rt({vertexColors:2}),It.call(this,t,i)}function Hr(e,t,i,n,r,a){e=e||10,t=t||16,i=i||8,n=n||64,r=new _(void 0!==r?r:4473924),a=new _(void 0!==a?a:8947848);var s,o=[],l=[];for(s=0;s<=t;s++){var c=s/t*2*Math.PI,h=Math.sin(c)*e;c=Math.cos(c)*e,o.push(0,0,0),o.push(h,0,c);var u=1&s?r:a;l.push(u.r,u.g,u.b),l.push(u.r,u.g,u.b)}for(s=0;s<=i;s++){u=1&s?r:a;var d=e-e/i*s;for(t=0;t<n;t++)c=t/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,o.push(h,0,c),l.push(u.r,u.g,u.b),c=(t+1)/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,o.push(h,0,c),l.push(u.r,u.g,u.b)}(e=new H).addAttribute("position",new k(o,3)),e.addAttribute("color",new k(l,3)),o=new Rt({vertexColors:2}),It.call(this,e,o)}function Fr(e,t,i,n){this.object=e,this.size=void 0!==t?t:1,e=void 0!==i?i:16776960,n=void 0!==n?n:1,t=0,(i=this.object.geometry)&&i.isGeometry?t=i.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),i=new H,t=new k(6*t,3),i.addAttribute("position",t),It.call(this,i,new Rt({color:e,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function Ur(e,t,i){M.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===t&&(t=1),(e=new H).addAttribute("position",new k([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),t=new Rt({fog:!1}),this.lightPlane=new Ot(e,t),this.add(this.lightPlane),(e=new H).addAttribute("position",new k([0,0,0,0,0,1],3)),this.targetLine=new Ot(e,t),this.add(this.targetLine),this.update()}function Gr(e){function t(e,t,n){i(e,n),i(t,n)}function i(e,t){a.push(0,0,0),s.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(a.length/3-1)}var n=new H,r=new Rt({color:16777215,vertexColors:1}),a=[],s=[],o={},l=new _(16755200),c=new _(16711680),h=new _(43775),u=new _(16777215),d=new _(3355443);t("n1","n2",l),t("n2","n4",l),t("n4","n3",l),t("n3","n1",l),t("f1","f2",l),t("f2","f4",l),t("f4","f3",l),t("f3","f1",l),t("n1","f1",l),t("n2","f2",l),t("n3","f3",l),t("n4","f4",l),t("p","n1",c),t("p","n2",c),t("p","n3",c),t("p","n4",c),t("u1","u2",h),t("u2","u3",h),t("u3","u1",h),t("c","t",u),t("p","c",d),t("cn1","cn2",d),t("cn3","cn4",d),t("cf1","cf2",d),t("cf3","cf4",d),n.addAttribute("position",new k(a,3)),n.addAttribute("color",new k(s,3)),It.call(this,n,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Vr(e,t){this.object=e,void 0===t&&(t=16776960),e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new H;n.setIndex(new C(e,1)),n.addAttribute("position",new C(i,3)),It.call(this,n,new Rt({color:t})),this.matrixAutoUpdate=!1,this.update()}function jr(e,t){this.type="Box3Helper",this.box=e,e=void 0!==t?t:16776960,t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new H;i.setIndex(new C(t,1)),i.addAttribute("position",new k([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),It.call(this,i,new Rt({color:e})),this.geometry.computeBoundingSphere()}function Wr(e,t,i){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t,e=void 0!==i?i:16776960,(t=new H).addAttribute("position",new k([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),t.computeBoundingSphere(),Ot.call(this,t,new Rt({color:e})),(t=new H).addAttribute("position",new k([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),t.computeBoundingSphere(),this.add(new $(t,new q({color:e,opacity:.2,transparent:!0,depthWrite:!1})))}function Xr(e,t,i,n,r,s){M.call(this),void 0===e&&(e=new a(0,0,1)),void 0===t&&(t=new a(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===r&&(r=.2*i),void 0===s&&(s=.2*r),void 0===jl&&((jl=new H).addAttribute("position",new k([0,0,0,0,1,0],3)),(Wl=new Hi(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Ot(jl,new Rt({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new $(Wl,new q({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,s)}function Yr(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e];(e=new H).addAttribute("position",new k(t,3)),e.addAttribute("color",new k([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),t=new Rt({vertexColors:2}),It.call(this,e,t)}function qr(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Cn.call(this,e),this.type="catmullrom",this.closed=!0}function $r(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Cn.call(this,e),this.type="catmullrom"}function Zr(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Cn.call(this,e),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:0<e?1:+e}),0=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){void 0!==this._listeners&&void 0!==(e=this._listeners[e])&&-1!==(t=e.indexOf(t))&&e.splice(t,1)},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=0,n=(t=t.slice(0)).length;i<n;i++)t[i].call(this,e)}}}});var Jr,Kr,Qr,ea,ta,ia,na,ra,aa,sa,oa,la,ca,ha,ua,da,pa,fa,ma,ga,va,ya={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*ya.DEG2RAD},radToDeg:function(e){return e*ya.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(i.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,i=this.y;return e=e.elements,this.x=e[0]*t+e[3]*i+e[6],this.y=e[1]*t+e[4]*i+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(Jr=new i,Kr=new i,function(e,t){return Jr.set(e,e),Kr.set(t,t),this.clamp(Jr,Kr)}),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return t*t+(e=this.y-e.y)*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var i=Math.cos(t);t=Math.sin(t);var n=this.x-e.x,r=this.y-e.y;return this.x=n*i-r*t+e.x,this.y=n*t+r*i+e.y,this}}),Object.assign(n.prototype,{isMatrix4:!0,set:function(e,t,i,n,r,a,s,o,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new n).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:(oa=new a,function(e){var t=this.elements,i=e.elements,n=1/oa.setFromMatrixColumn(e,0).length(),r=1/oa.setFromMatrixColumn(e,1).length();return e=1/oa.setFromMatrixColumn(e,2).length(),t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*e,t[9]=i[9]*e,t[10]=i[10]*e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,n=e.y,r=e.z,a=Math.cos(i);i=Math.sin(i);var s=Math.cos(n);n=Math.sin(n);var o=Math.cos(r);if(r=Math.sin(r),"XYZ"===e.order){e=a*o;var l=a*r,c=i*o,h=i*r;t[0]=s*o,t[4]=-s*r,t[8]=n,t[1]=l+c*n,t[5]=e-h*n,t[9]=-i*s,t[2]=h-e*n,t[6]=c+l*n,t[10]=a*s}else"YXZ"===e.order?(e=s*o,l=s*r,c=n*o,h=n*r,t[0]=e+h*i,t[4]=c*i-l,t[8]=a*n,t[1]=a*r,t[5]=a*o,t[9]=-i,t[2]=l*i-c,t[6]=h+e*i,t[10]=a*s):"ZXY"===e.order?(e=s*o,l=s*r,c=n*o,h=n*r,t[0]=e-h*i,t[4]=-a*r,t[8]=c+l*i,t[1]=l+c*i,t[5]=a*o,t[9]=h-e*i,t[2]=-a*n,t[6]=i,t[10]=a*s):"ZYX"===e.order?(e=a*o,l=a*r,c=i*o,h=i*r,t[0]=s*o,t[4]=c*n-l,t[8]=e*n+h,t[1]=s*r,t[5]=h*n+e,t[9]=l*n-c,t[2]=-n,t[6]=i*s,t[10]=a*s):"YZX"===e.order?(e=a*s,l=a*n,c=i*s,h=i*n,t[0]=s*o,t[4]=h-e*r,t[8]=c*r+l,t[1]=r,t[5]=a*o,t[9]=-i*o,t[2]=-n*o,t[6]=l*r+c,t[10]=e-h*r):"XZY"===e.order&&(e=a*s,l=a*n,c=i*s,h=i*n,t[0]=s*o,t[4]=-r,t[8]=n*o,t[1]=e*r+h,t[5]=a*o,t[9]=l*r-c,t[2]=c*r-l,t[6]=i*o,t[10]=h*r+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(aa=new a(0,0,0),sa=new a(1,1,1),function(e){return this.compose(aa,e,sa)}),lookAt:(ia=new a,na=new a,ra=new a,function(e,t,i){var n=this.elements;return ra.subVectors(e,t),0===ra.lengthSq()&&(ra.z=1),ra.normalize(),ia.crossVectors(i,ra),0===ia.lengthSq()&&(1===Math.abs(i.z)?ra.x+=1e-4:ra.z+=1e-4,ra.normalize(),ia.crossVectors(i,ra)),ia.normalize(),na.crossVectors(ra,ia),n[0]=ia.x,n[4]=na.x,n[8]=ra.x,n[1]=ia.y,n[5]=na.y,n[9]=ra.y,n[2]=ia.z,n[6]=na.z,n[10]=ra.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements;t=this.elements,e=i[0];var r=i[4],a=i[8],s=i[12],o=i[1],l=i[5],c=i[9],h=i[13],u=i[2],d=i[6],p=i[10],f=i[14],m=i[3],g=i[7],v=i[11];i=i[15];var y=n[0],_=n[4],x=n[8],b=n[12],w=n[1],T=n[5],E=n[9],M=n[13],S=n[2],C=n[6],A=n[10],P=n[14],L=n[3],R=n[7],O=n[11];return n=n[15],t[0]=e*y+r*w+a*S+s*L,t[4]=e*_+r*T+a*C+s*R,t[8]=e*x+r*E+a*A+s*O,t[12]=e*b+r*M+a*P+s*n,t[1]=o*y+l*w+c*S+h*L,t[5]=o*_+l*T+c*C+h*R,t[9]=o*x+l*E+c*A+h*O,t[13]=o*b+l*M+c*P+h*n,t[2]=u*y+d*w+p*S+f*L,t[6]=u*_+d*T+p*C+f*R,t[10]=u*x+d*E+p*A+f*O,t[14]=u*b+d*M+p*P+f*n,t[3]=m*y+g*w+v*S+i*L,t[7]=m*_+g*T+v*C+i*R,t[11]=m*x+g*E+v*A+i*O,t[15]=m*b+g*M+v*P+i*n,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:(ta=new a,function(e){for(var t=0,i=e.count;t<i;t++)ta.x=e.getX(t),ta.y=e.getY(t),ta.z=e.getZ(t),ta.applyMatrix4(this),e.setXYZ(t,ta.x,ta.y,ta.z);return e}),determinant:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],h=e[6],u=e[10],d=e[14];return e[3]*(+r*o*h-n*l*h-r*s*u+i*l*u+n*s*d-i*o*d)+e[7]*(+t*o*d-t*l*u+r*a*u-n*a*d+n*l*c-r*o*c)+e[11]*(+t*l*h-t*s*d-r*a*h+i*a*d+r*s*c-i*l*c)+e[15]*(-n*s*c-t*o*h+t*s*u+n*a*h-i*a*u+i*o*c)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,n=e.elements;e=n[0];var r=n[1],a=n[2],s=n[3],o=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=d*v*h-g*p*h+g*c*f-l*v*f-d*c*(n=n[15])+l*p*n,_=m*p*h-u*v*h-m*c*f+o*v*f+u*c*n-o*p*n,x=u*g*h-m*d*h+m*l*f-o*g*f-u*l*n+o*d*n,b=m*d*c-u*g*c-m*l*p+o*g*p+u*l*v-o*d*v,w=e*y+r*_+a*x+s*b;if(0!==w)return t=1/w,i[0]=y*t,i[1]=(g*p*s-d*v*s-g*a*f+r*v*f+d*a*n-r*p*n)*t,i[2]=(l*v*s-g*c*s+g*a*h-r*v*h-l*a*n+r*c*n)*t,i[3]=(d*c*s-l*p*s-d*a*h+r*p*h+l*a*f-r*c*f)*t,i[4]=_*t,i[5]=(u*v*s-m*p*s+m*a*f-e*v*f-u*a*n+e*p*n)*t,i[6]=(m*c*s-o*v*s-m*a*h+e*v*h+o*a*n-e*c*n)*t,i[7]=(o*p*s-u*c*s+u*a*h-e*p*h-o*a*f+e*c*f)*t,i[8]=x*t,i[9]=(m*d*s-u*g*s-m*r*f+e*g*f+u*r*n-e*d*n)*t,i[10]=(o*g*s-m*l*s+m*r*h-e*g*h-o*r*n+e*l*n)*t,i[11]=(u*l*s-o*d*s-u*r*h+e*d*h+o*r*f-e*l*f)*t,i[12]=b*t,i[13]=(u*g*a-m*d*a+m*r*p-e*g*p-u*r*v+e*d*v)*t,i[14]=(m*l*a-o*g*a-m*r*c+e*g*c+o*r*v-e*l*v)*t,i[15]=(o*d*a-u*l*a+u*r*c-e*d*c-o*r*p+e*l*p)*t,this;if(!0===t)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()},scale:function(e){var t=this.elements,i=e.x,n=e.y;return e=e.z,t[0]*=i,t[4]*=n,t[8]*=e,t[1]*=i,t[5]*=n,t[9]*=e,t[2]*=i,t[6]*=n,t[10]*=e,t[3]*=i,t[7]*=n,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t);t=Math.sin(t);var n=1-i,r=e.x,a=e.y;e=e.z;var s=n*r,o=n*a;return this.set(s*r+i,s*a-t*e,s*e+t*a,0,s*a+t*e,o*a+i,o*e-t*r,0,s*e-t*a,o*e+t*r,n*e*e+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,i){var n=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,h=s+s;t=r*l;var u=r*c;r*=h;var d=a*c;a*=h,s*=h,l*=o,c*=o,o*=h,h=i.x;var p=i.y;return i=i.z,n[0]=(1-(d+s))*h,n[1]=(u+o)*h,n[2]=(r-c)*h,n[3]=0,n[4]=(u-o)*p,n[5]=(1-(t+s))*p,n[6]=(a+l)*p,n[7]=0,n[8]=(r+c)*i,n[9]=(a-l)*i,n[10]=(1-(t+d))*i,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:(Qr=new a,ea=new n,function(e,t,i){var n=this.elements,r=Qr.set(n[0],n[1],n[2]).length(),a=Qr.set(n[4],n[5],n[6]).length(),s=Qr.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],ea.copy(this),e=1/r,n=1/a;var o=1/s;return ea.elements[0]*=e,ea.elements[1]*=e,ea.elements[2]*=e,ea.elements[4]*=n,ea.elements[5]*=n,ea.elements[6]*=n,ea.elements[8]*=o,ea.elements[9]*=o,ea.elements[10]*=o,t.setFromRotationMatrix(ea),i.x=r,i.y=a,i.z=s,this}),makePerspective:function(e,t,i,n,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements;return s[0]=2*r/(t-e),s[4]=0,s[8]=(t+e)/(t-e),s[12]=0,s[1]=0,s[5]=2*r/(i-n),s[9]=(i+n)/(i-n),s[13]=0,s[2]=0,s[6]=0,s[10]=-(a+r)/(a-r),s[14]=-2*a*r/(a-r),s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,i,n,r,a){var s=this.elements,o=1/(t-e),l=1/(i-n),c=1/(a-r);return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-(t+e)*o,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-(i+n)*l,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-(a+r)*c,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){var t=this.elements;e=e.elements;for(var i=0;i<16;i++)if(t[i]!==e[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<16;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}),Object.assign(r,{slerp:function(e,t,i,n){return i.copy(e).slerp(t,n)},slerpFlat:function(e,t,i,n,r,a,s){var o=i[n+0],l=i[n+1],c=i[n+2];i=i[n+3],n=r[a+0];var h=r[a+1],u=r[a+2];if(i!==(r=r[a+3])||o!==n||l!==h||c!==u){a=1-s;var d=o*n+l*h+c*u+i*r,p=0<=d?1:-1,f=1-d*d;f>Number.EPSILON&&(f=Math.sqrt(f),d=Math.atan2(f,d*p),a=Math.sin(a*d)/f,s=Math.sin(s*d)/f),o=o*a+n*(p*=s),l=l*a+h*p,c=c*a+u*p,i=i*a+r*p,a===1-s&&(o*=s=1/Math.sqrt(o*o+l*l+c*c+i*i),l*=s,c*=s,i*=s)}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=i}}),Object.defineProperties(r.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(r.prototype,{isQuaternion:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,n=e._y,r=e._z;e=e.order;var a=Math.cos,s=Math.sin,o=a(i/2),l=a(n/2);return a=a(r/2),i=s(i/2),n=s(n/2),r=s(r/2),"XYZ"===e?(this._x=i*l*a+o*n*r,this._y=o*n*a-i*l*r,this._z=o*l*r+i*n*a,this._w=o*l*a-i*n*r):"YXZ"===e?(this._x=i*l*a+o*n*r,this._y=o*n*a-i*l*r,this._z=o*l*r-i*n*a,this._w=o*l*a+i*n*r):"ZXY"===e?(this._x=i*l*a-o*n*r,this._y=o*n*a+i*l*r,this._z=o*l*r+i*n*a,this._w=o*l*a-i*n*r):"ZYX"===e?(this._x=i*l*a-o*n*r,this._y=o*n*a+i*l*r,this._z=o*l*r-i*n*a,this._w=o*l*a+i*n*r):"YZX"===e?(this._x=i*l*a+o*n*r,this._y=o*n*a+i*l*r,this._z=o*l*r-i*n*a,this._w=o*l*a-i*n*r):"XZY"===e&&(this._x=i*l*a-o*n*r,this._y=o*n*a-i*l*r,this._z=o*l*r+i*n*a,this._w=o*l*a+i*n*r),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){t/=2;var i=Math.sin(t);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(t),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,i=t[0];e=t[4];var n=t[8],r=t[1],a=t[5],s=t[9],o=t[2],l=t[6],c=i+a+(t=t[10]);return this._z=0<c?(i=.5/Math.sqrt(c+1),this._w=.25/i,this._x=(l-s)*i,this._y=(n-o)*i,(r-e)*i):a<i&&t<i?(i=2*Math.sqrt(1+i-a-t),this._w=(l-s)/i,this._x=.25*i,this._y=(e+r)/i,(n+o)/i):t<a?(i=2*Math.sqrt(1+a-i-t),this._w=(n-o)/i,this._x=(e+r)/i,this._y=.25*i,(s+l)/i):(i=2*Math.sqrt(1+t-i-a),this._w=(r-e)/i,this._x=(n+o)/i,this._y=(s+l)/i,.25*i),this.onChangeCallback(),this},setFromUnitVectors:(ca=new a,function(e,t){return void 0===ca&&(ca=new a),(la=e.dot(t)+1)<1e-6?(la=0,Math.abs(e.x)>Math.abs(e.z)?ca.set(-e.y,e.x,0):ca.set(0,-e.z,e.y)):ca.crossVectors(e,t),this._x=ca.x,this._y=ca.y,this._z=ca.z,this._w=la,this.normalize()}),angleTo:function(e){return 2*Math.acos(Math.abs(ya.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var i=this.angleTo(e);return 0===i||this.slerp(e,Math.min(1,t/i)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,r=e._z;e=e._w;var a=t._x,s=t._y,o=t._z;return t=t._w,this._x=i*t+e*a+n*o-r*s,this._y=n*t+e*s+r*a-i*o,this._z=r*t+e*o+i*s-n*a,this._w=e*t-i*a-n*s-r*o,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,n=this._y,r=this._z,a=this._w,s=a*e._w+i*e._x+n*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s)return this._w=a,this._x=i,this._y=n,this._z=r,this;if((e=1-s*s)<=Number.EPSILON)return s=1-t,this._w=s*a+t*this._w,this._x=s*i+t*this._x,this._y=s*n+t*this._y,this._z=s*r+t*this._z,this.normalize();e=Math.sqrt(e);var o=Math.atan2(e,s);return s=Math.sin((1-t)*o)/e,t=Math.sin(t*o)/e,this._w=a*s+this._w*t,this._x=i*s+this._x*t,this._y=n*s+this._y*t,this._z=r*s+this._z*t,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(a.prototype,{isVector3:!0,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(ga=new r,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ga.setFromEuler(e))}),applyAxisAngle:(ma=new r,function(e,t){return this.applyQuaternion(ma.setFromAxisAngle(e,t))}),applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[3]*i+e[6]*n,this.y=e[1]*t+e[4]*i+e[7]*n,this.z=e[2]*t+e[5]*i+e[8]*n,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=1/((e=e.elements)[3]*t+e[7]*i+e[11]*n+e[15]);return this.x=(e[0]*t+e[4]*i+e[8]*n+e[12])*r,this.y=(e[1]*t+e[5]*i+e[9]*n+e[13])*r,this.z=(e[2]*t+e[6]*i+e[10]*n+e[14])*r,this},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,s=e.z,o=(e=e.w)*t+a*n-s*i,l=e*i+s*t-r*n,c=e*n+r*i-a*t;return t=-r*t-a*i-s*n,this.x=o*e+t*-r+l*-s-c*-a,this.y=l*e+t*-a+c*-r-o*-s,this.z=c*e+t*-s+o*-a-l*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:(fa=new n,function(e){return this.applyMatrix4(fa.getInverse(e.projectionMatrix)).applyMatrix4(e.matrixWorld)}),transformDirection:function(e){var t=this.x,i=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*n,this.y=e[1]*t+e[5]*i+e[9]*n,this.z=e[2]*t+e[6]*i+e[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:(da=new a,pa=new a,function(e,t){return da.set(e,e,e),pa.set(t,t,t),this.clamp(da,pa)}),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var i=e.x,n=e.y;e=e.z;var r=t.x,a=t.y;return t=t.z,this.x=n*t-e*a,this.y=e*r-i*t,this.z=i*a-n*r,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:(ua=new a,function(e){return ua.copy(this).projectOnVector(e),this.sub(ua)}),reflect:(ha=new a,function(e){return this.sub(ha.copy(e).multiplyScalar(2*this.dot(e)))}),angleTo:function(e){return e=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq()),Math.acos(ya.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i+(e=this.z-e.z)*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,i){var n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=t,this.y=i,this.z=e,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(s.prototype,{isMatrix3:!0,set:function(e,t,i,n,r,a,s,o,l){var c=this.elements;return c[0]=e,c[1]=n,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:(va=new a,function(e){for(var t=0,i=e.count;t<i;t++)va.x=e.getX(t),va.y=e.getY(t),va.z=e.getZ(t),va.applyMatrix3(this),e.setXYZ(t,va.x,va.y,va.z);return e}),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements;t=this.elements,e=i[0];var r=i[3],a=i[6],s=i[1],o=i[4],l=i[7],c=i[2],h=i[5];i=i[8];var u=n[0],d=n[3],p=n[6],f=n[1],m=n[4],g=n[7],v=n[2],y=n[5];return n=n[8],t[0]=e*u+r*f+a*v,t[3]=e*d+r*m+a*y,t[6]=e*p+r*g+a*n,t[1]=s*u+o*f+l*v,t[4]=s*d+o*m+l*y,t[7]=s*p+o*g+l*n,t[2]=c*u+h*f+i*v,t[5]=c*d+h*m+i*y,t[8]=c*p+h*g+i*n,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7];return t*a*(e=e[8])-t*s*l-i*r*e+i*s*o+n*r*l-n*a*o},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=e.elements;e=this.elements;var n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=i[5],c=i[6],h=i[7],u=(i=i[8])*o-l*h,d=l*c-i*s,p=h*s-o*c,f=n*u+r*d+a*p;if(0!==f)return t=1/f,e[0]=u*t,e[1]=(a*h-i*r)*t,e[2]=(l*r-a*o)*t,e[3]=d*t,e[4]=(i*n-a*c)*t,e[5]=(a*s-l*n)*t,e[6]=p*t,e[7]=(r*c-h*n)*t,e[8]=(o*n-r*s)*t,this;if(!0===t)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,i,n,r,a,s){var o=Math.cos(r);r=Math.sin(r),this.set(i*o,i*r,-i*(o*a+r*s)+a+e,-n*r,n*o,-n*(-r*a+o*s)+s+t,0,0,1)},scale:function(e,t){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this},rotate:function(e){var t=Math.cos(e);e=Math.sin(e);var i=this.elements,n=i[0],r=i[3],a=i[6],s=i[1],o=i[4],l=i[7];return i[0]=t*n+e*s,i[3]=t*r+e*o,i[6]=t*a+e*l,i[1]=-e*n+t*s,i[4]=-e*r+t*o,i[7]=-e*a+t*l,this},translate:function(e,t){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this},equals:function(e){var t=this.elements;e=e.elements;for(var i=0;i<9;i++)if(t[i]!==e[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<9;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}});var _a,xa,ba,wa,Ta,Ea,Ma,Sa,Ca,Aa,Pa,La,Ra,Oa,Ia,Da,ka,Na={getDataURL:function(e){if("undefined"==typeof HTMLCanvasElement)return e.src;if(!(e instanceof HTMLCanvasElement)){void 0===_a&&(_a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_a.width=e.width,_a.height=e.height;var t=_a.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),e=_a}return 2048<e.width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},za=0;o.DEFAULT_IMAGE=void 0,o.DEFAULT_MAPPING=300,o.prototype=Object.assign(Object.create(t.prototype),{constructor:o,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=ya.generateUUID()),!t&&void 0===e.images[n.uuid]){if(Array.isArray(n))for(var r=[],a=0,s=n.length;a<s;a++)r.push(Na.getDataURL(n[a]));else r=Na.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return t||(e.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(o.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(l.prototype,{isVector4:!0,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=this.w;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*n+e[12]*r,this.y=e[1]*t+e[5]*i+e[9]*n+e[13]*r,this.z=e[2]*t+e[6]*i+e[10]*n+e[14]*r,this.w=e[3]*t+e[7]*i+e[11]*n+e[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return this.z=t<1e-4?(this.x=1,this.y=0):(this.x=e.x/t,this.y=e.y/t,e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t=(e=e.elements)[0],i=e[4],n=e[8],r=e[1],a=e[5],s=e[9],o=e[2],l=e[6],c=e[10];return Math.abs(i-r)<.01&&Math.abs(n-o)<.01&&Math.abs(s-l)<.01?Math.abs(i+r)<.1&&Math.abs(n+o)<.1&&Math.abs(s+l)<.1&&Math.abs(t+a+c-3)<.1?this.set(1,0,0,0):(e=Math.PI,c=(c+1)/2,i=(i+r)/4,n=(n+o)/4,s=(s+l)/4,(a=(a+1)/2)<(t=(t+1)/2)&&c<t?i=t<.01?(l=0,o=.707106781):(o=i/(l=Math.sqrt(t)),n/l):c<a?i=a<.01?(o=0,l=.707106781):(l=i/(o=Math.sqrt(a)),s/o):c<.01?(o=l=.707106781,i=0):(l=n/(i=Math.sqrt(c)),o=s/i),this.set(l,o,i,e)):(e=Math.sqrt((l-s)*(l-s)+(n-o)*(n-o)+(r-i)*(r-i)),Math.abs(e)<.001&&(e=1),this.x=(l-s)/e,this.y=(n-o)/e,this.z=(r-i)/e,this.w=Math.acos((t+a+c-1)/2)),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return void 0===xa&&(xa=new l,ba=new l),xa.set(e,e,e,e),ba.set(t,t,t,t),this.clamp(xa,ba)},clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),c.prototype=Object.assign(Object.create(t.prototype),{constructor:c,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),h.prototype=Object.assign(Object.create(c.prototype),{constructor:h,isWebGLMultisampleRenderTarget:!0,copy:function(e){return c.prototype.copy.call(this,e),this.samples=e.samples,this}}),((u.prototype=Object.create(c.prototype)).constructor=u).prototype.isWebGLRenderTargetCube=!0,((d.prototype=Object.create(o.prototype)).constructor=d).prototype.isDataTexture=!0,Object.assign(p.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=e.length;o<l;o+=3){var c=e[o],h=e[o+1],u=e[o+2];c<t&&(t=c),h<i&&(i=h),u<n&&(n=u),r<c&&(r=c),a<h&&(a=h),s<u&&(s=u)}return this.min.set(t,i,n),this.max.set(r,a,s),this},setFromBufferAttribute:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=e.count;o<l;o++){var c=e.getX(o),h=e.getY(o),u=e.getZ(o);c<t&&(t=c),h<i&&(i=h),u<n&&(n=u),r<c&&(r=c),a<h&&(a=h),s<u&&(s=u)}return this.min.set(t,i,n),this.max.set(r,a,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(Sa=new a,function(e,t){return t=Sa.copy(t).multiplyScalar(.5),this.min.copy(e).sub(t),this.max.copy(e).add(t),this}),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new a),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new a),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function e(e){var a=e.geometry;if(void 0!==a)if(a.isGeometry)for(a=a.vertices,i=0,n=a.length;i<n;i++)r.copy(a[i]),r.applyMatrix4(e.matrixWorld),t.expandByPoint(r);else if(a.isBufferGeometry&&void 0!==(a=a.attributes.position))for(i=0,n=a.count;i<n;i++)r.fromBufferAttribute(a,i).applyMatrix4(e.matrixWorld),t.expandByPoint(r)}var t,i,n,r=new a;return function(i){return t=this,i.updateMatrixWorld(!0),i.traverse(e),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new a),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Ma=new a,function(e){return this.clampPoint(e.center,Ma),Ma.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){if(0<e.normal.x)var t=e.normal.x*this.min.x,i=e.normal.x*this.max.x;else t=e.normal.x*this.max.x,i=e.normal.x*this.min.x;return 0<e.normal.y?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant},intersectsTriangle:function(){function e(e){var r,a=0;for(r=e.length-3;a<=r;a+=3){l.fromArray(e,a);var s=h.x*Math.abs(l.x)+h.y*Math.abs(l.y)+h.z*Math.abs(l.z),o=t.dot(l),c=i.dot(l),u=n.dot(l);if(Math.max(-Math.max(o,c,u),Math.min(o,c,u))>s)return!1}return!0}var t=new a,i=new a,n=new a,r=new a,s=new a,o=new a,l=new a,c=new a,h=new a,u=new a;return function(a){return!this.isEmpty()&&(this.getCenter(c),h.subVectors(this.max,c),t.subVectors(a.a,c),i.subVectors(a.b,c),n.subVectors(a.c,c),r.subVectors(i,t),s.subVectors(n,i),o.subVectors(t,n),!!e(a=[0,-r.z,r.y,0,-s.z,s.y,0,-o.z,o.y,r.z,0,-r.x,s.z,0,-s.x,o.z,0,-o.x,-r.y,r.x,0,-s.y,s.x,0,-o.y,o.x,0])&&!!e(a=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(r,s),e(a=[u.x,u.y,u.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new a),t.copy(e).clamp(this.min,this.max)},distanceToPoint:(Ea=new a,function(e){return Ea.copy(e).clamp(this.min,this.max).sub(e).length()}),getBoundingSphere:(Ta=new a,function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new f),this.getCenter(e.center),e.radius=.5*this.getSize(Ta).length(),e}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(wa=[new a,new a,new a,new a,new a,new a,new a,new a],function(e){return this.isEmpty()||(wa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wa)),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(f.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Ca=new p,function(e,t){var i=this.center;void 0!==t?i.copy(t):Ca.setFromPoints(e).getCenter(i);for(var n=t=0,r=e.length;n<r;n++)t=Math.max(t,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new a),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new p),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(m.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:(Ra=new a,Oa=new a,function(e,t,i){return t=Ra.subVectors(i,t).cross(Oa.subVectors(e,t)).normalize(),this.setFromNormalAndCoplanarPoint(t,e),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new a),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:(La=new a,function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new a);var i=e.delta(La),n=this.normal.dot(i);if(0===n){if(0===this.distanceToPoint(e.start))return t.copy(e.start)}else if(!((n=-(e.start.dot(this.normal)+this.constant)/n)<0||1<n))return t.copy(i).multiplyScalar(n).add(e.start)}),intersectsLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),t<0&&0<e||e<0&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new a),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(Aa=new a,Pa=new s,function(e,t){return t=t||Pa.getNormalMatrix(e),e=this.coplanarPoint(Aa).applyMatrix4(e),t=this.normal.applyMatrix3(t).normalize(),this.constant=-e.dot(t),this}),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(g.prototype,{set:function(e,t,i,n,r,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,i=0;i<6;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements;e=i[0];var n=i[1],r=i[2],a=i[3],s=i[4],o=i[5],l=i[6],c=i[7],h=i[8],u=i[9],d=i[10],p=i[11],f=i[12],m=i[13],g=i[14];return i=i[15],t[0].setComponents(a-e,c-s,p-h,i-f).normalize(),t[1].setComponents(a+e,c+s,p+h,i+f).normalize(),t[2].setComponents(a+n,c+o,p+u,i+m).normalize(),t[3].setComponents(a-n,c-o,p-u,i-m).normalize(),t[4].setComponents(a-r,c-l,p-d,i-g).normalize(),t[5].setComponents(a+r,c+l,p+d,i+g).normalize(),this},intersectsObject:(ka=new f,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),ka.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ka)}),intersectsSprite:(Da=new f,function(e){return Da.center.set(0,0,0),Da.radius=.7071067811865476,Da.applyMatrix4(e.matrixWorld),this.intersectsSphere(Da)}),intersectsSphere:function(e){var t=this.planes,i=e.center;e=-e.radius;for(var n=0;n<6;n++)if(t[n].distanceToPoint(i)<e)return!1;return!0},intersectsBox:(Ia=new a,function(e){for(var t=this.planes,i=0;i<6;i++){var n=t[i];if(Ia.x=0<n.normal.x?e.max.x:e.min.x,Ia.y=0<n.normal.y?e.max.y:e.min.y,Ia.z=0<n.normal.z?e.max.z:e.min.z,n.distanceToPoint(Ia)<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}});var Ba,Ha,Fa,Ua={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Ga={clone:v,merge:y},Va={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(_.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(){function e(e,t,i){return i<0&&(i+=1),1<i&&--i,i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}return function(t,i,n){return t=ya.euclideanModulo(t,1),i=ya.clamp(i,0,1),n=ya.clamp(n,0,1),0===i?this.r=this.g=this.b=n:(n=2*n-(i=n<=.5?n*(1+i):n+i-n*i),this.r=e(n,i,t+1/3),this.g=e(n,i,t),this.b=e(n,i,t-1/3)),this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(i[1])/360;var r=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(n,r,a)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(e)){if(3===(n=(i=i[1]).length))return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&0<e.length&&(void 0!==(i=Va[e])?this.setHex(i):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){return void 0===t&&(t=2),t=0<t?1/t:1,this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,i=this.r,n=this.g,r=this.b,a=Math.max(i,n,r),s=Math.min(i,n,r),o=(s+a)/2;if(s===a)s=t=0;else{var l=a-s;switch(s=o<=.5?l/(a+s):l/(2-a-s),a){case i:t=(n-r)/l+(n<r?6:0);break;case n:t=(r-i)/l+2;break;case r:t=(i-n)/l+4}t/=6}return e.h=t,e.s=s,e.l=o,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(Fa={},function(e,t,i){return this.getHSL(Fa),Fa.h+=e,Fa.s+=t,Fa.l+=i,this.setHSL(Fa.h,Fa.s,Fa.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:(Ba={h:0,s:0,l:0},Ha={h:0,s:0,l:0},function(e,t){this.getHSL(Ba),e.getHSL(Ha),e=ya.lerp(Ba.h,Ha.h,t);var i=ya.lerp(Ba.s,Ha.s,t);return t=ya.lerp(Ba.l,Ha.l,t),this.setHSL(e,i,t),this}),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var ja,Wa,Xa={common:{diffuse:{value:new _(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new s},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new _(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new s}},sprite:{diffuse:{value:new _(15658734)},opacity:{value:1},center:{value:new i(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new s}}},Ya={basic:{uniforms:y([Xa.common,Xa.specularmap,Xa.envmap,Xa.aomap,Xa.lightmap,Xa.fog]),vertexShader:Ua.meshbasic_vert,fragmentShader:Ua.meshbasic_frag},lambert:{uniforms:y([Xa.common,Xa.specularmap,Xa.envmap,Xa.aomap,Xa.lightmap,Xa.emissivemap,Xa.fog,Xa.lights,{emissive:{value:new _(0)}}]),vertexShader:Ua.meshlambert_vert,fragmentShader:Ua.meshlambert_frag},phong:{uniforms:y([Xa.common,Xa.specularmap,Xa.envmap,Xa.aomap,Xa.lightmap,Xa.emissivemap,Xa.bumpmap,Xa.normalmap,Xa.displacementmap,Xa.gradientmap,Xa.fog,Xa.lights,{emissive:{value:new _(0)},specular:{value:new _(1118481)},shininess:{value:30}}]),vertexShader:Ua.meshphong_vert,fragmentShader:Ua.meshphong_frag},standard:{uniforms:y([Xa.common,Xa.envmap,Xa.aomap,Xa.lightmap,Xa.emissivemap,Xa.bumpmap,Xa.normalmap,Xa.displacementmap,Xa.roughnessmap,Xa.metalnessmap,Xa.fog,Xa.lights,{emissive:{value:new _(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ua.meshphysical_vert,fragmentShader:Ua.meshphysical_frag},matcap:{uniforms:y([Xa.common,Xa.bumpmap,Xa.normalmap,Xa.displacementmap,Xa.fog,{matcap:{value:null}}]),vertexShader:Ua.meshmatcap_vert,fragmentShader:Ua.meshmatcap_frag},points:{uniforms:y([Xa.points,Xa.fog]),vertexShader:Ua.points_vert,fragmentShader:Ua.points_frag},dashed:{uniforms:y([Xa.common,Xa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ua.linedashed_vert,fragmentShader:Ua.linedashed_frag},depth:{uniforms:y([Xa.common,Xa.displacementmap]),vertexShader:Ua.depth_vert,fragmentShader:Ua.depth_frag},normal:{uniforms:y([Xa.common,Xa.bumpmap,Xa.normalmap,Xa.displacementmap,{opacity:{value:1}}]),vertexShader:Ua.normal_vert,fragmentShader:Ua.normal_frag},sprite:{uniforms:y([Xa.sprite,Xa.fog]),vertexShader:Ua.sprite_vert,fragmentShader:Ua.sprite_frag},background:{uniforms:{uvTransform:{value:new s},t2D:{value:null}},vertexShader:Ua.background_vert,fragmentShader:Ua.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ua.cube_vert,fragmentShader:Ua.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ua.equirect_vert,fragmentShader:Ua.equirect_frag},distanceRGBA:{uniforms:y([Xa.common,Xa.displacementmap,{referencePosition:{value:new a},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ua.distanceRGBA_vert,fragmentShader:Ua.distanceRGBA_frag},shadow:{uniforms:y([Xa.lights,Xa.fog,{color:{value:new _(0)},opacity:{value:1}}]),vertexShader:Ua.shadow_vert,fragmentShader:Ua.shadow_frag}};Ya.physical={uniforms:y([Ya.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ua.meshphysical_vert,fragmentShader:Ua.meshphysical_frag},Object.assign(w.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),T.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),T.DefaultOrder="XYZ",Object.defineProperties(T.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(T.prototype,{isEuler:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var n=ya.clamp,r=e.elements;e=r[0];var a=r[4],s=r[8],o=r[1],l=r[5],c=r[9],h=r[2],u=r[6];return r=r[10],"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,r),this._z=Math.atan2(-a,e)):(this._x=Math.atan2(u,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,r),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-h,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(-h,r),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,e))):"ZYX"===t?(this._y=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(u,r),this._z=Math.atan2(o,e)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,e)):(this._x=0,this._y=Math.atan2(s,r))):"XZY"===t?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,e)):(this._x=Math.atan2(-c,r),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:(Wa=new n,function(e,t,i){return Wa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Wa,t,i)}),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(ja=new r,function(e){return ja.setFromEuler(this),this.setFromQuaternion(ja,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new a(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(E.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var qa,$a,Za,Ja,Ka,Qa,es,ts,is,ns,rs,as,ss,os,ls,cs,hs,us,ds=0;M.DefaultUp=new a(0,1,0),M.DefaultMatrixAutoUpdate=!0,M.prototype=Object.assign(Object.create(t.prototype),{constructor:M,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(us=new r,function(e,t){return us.setFromAxisAngle(e,t),this.quaternion.multiply(us),this}),rotateOnWorldAxis:(hs=new r,function(e,t){return hs.setFromAxisAngle(e,t),this.quaternion.premultiply(hs),this}),rotateX:(cs=new a(1,0,0),function(e){return this.rotateOnAxis(cs,e)}),rotateY:(ls=new a(0,1,0),function(e){return this.rotateOnAxis(ls,e)}),rotateZ:(os=new a(0,0,1),function(e){return this.rotateOnAxis(os,e)}),translateOnAxis:(ss=new a,function(e,t){return ss.copy(e).applyQuaternion(this.quaternion),this.position.add(ss.multiplyScalar(t)),this}),translateX:(as=new a(1,0,0),function(e){return this.translateOnAxis(as,e)}),translateY:(rs=new a(0,1,0),function(e){return this.translateOnAxis(rs,e)}),translateZ:(ns=new a(0,0,1),function(e){return this.translateOnAxis(ns,e)}),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(is=new n,function(e){return e.applyMatrix4(is.getInverse(this.matrixWorld))}),lookAt:(Ka=new r,Qa=new n,es=new a,ts=new a,function(e,t,i){e.isVector3?es.copy(e):es.set(e,t,i),e=this.parent,this.updateWorldMatrix(!0,!1),ts.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qa.lookAt(ts,es,this.up):Qa.lookAt(es,ts,this.up),this.quaternion.setFromRotationMatrix(Qa),e&&(Qa.extractRotation(e.matrixWorld),Ka.setFromRotationMatrix(Qa),this.quaternion.premultiply(Ka.inverse()))}),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}return-1!==(t=this.children.indexOf(e))&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(t,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new a),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Za=new a,Ja=new a,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new r),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Za,e,Ja),e}),getWorldScale:(qa=new a,$a=new r,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(qa,$a,e),e}),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new a),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(t=0,i=(e=this.children).length;t<i;t++)e[t].updateWorldMatrix(!1,!0)},toJSON:function(e){function t(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}function i(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}var n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(a.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){a.geometry=t(e.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes)if(s=s.shapes,Array.isArray(s))for(var o=0,l=s.length;o<l;o++)t(e.shapes,s[o]);else t(e.shapes,s)}if(void 0!==this.material)if(Array.isArray(this.material)){for(s=[],o=0,l=this.material.length;o<l;o++)s.push(t(e.materials,this.material[o]));a.material=s}else a.material=t(e.materials,this.material);if(0<this.children.length)for(a.children=[],o=0;o<this.children.length;o++)a.children.push(this.children[o].toJSON(e).object);if(n){n=i(e.geometries),o=i(e.materials),l=i(e.textures);var c=i(e.images);s=i(e.shapes),0<n.length&&(r.geometries=n),0<o.length&&(r.materials=o),0<l.length&&(r.textures=l),0<c.length&&(r.images=c),0<s.length&&(r.shapes=s)}return r.object=a,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(t=0;t<e.children.length;t++)this.add(e.children[t].clone());return this}});var ps,fs,ms,gs,vs,ys,_s,xs=0;S.prototype=Object.assign(Object.create(t.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(e){for(var t=(new s).getNormalMatrix(e),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(e);for(i=0,n=this.faces.length;i<n;i++){(e=this.faces[i]).normal.applyMatrix3(t).normalize();for(var r=0,a=e.vertexNormals.length;r<a;r++)e.vertexNormals[r].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:(_s=new n,function(e){return _s.makeRotationX(e),this.applyMatrix(_s),this}),rotateY:(ys=new n,function(e){return ys.makeRotationY(e),this.applyMatrix(ys),this}),rotateZ:(vs=new n,function(e){return vs.makeRotationZ(e),this.applyMatrix(vs),this}),translate:(gs=new n,function(e,t,i){return gs.makeTranslation(e,t,i),this.applyMatrix(gs),this}),scale:(ms=new n,function(e,t,i){return ms.makeScale(e,t,i),this.applyMatrix(ms),this}),lookAt:(fs=new M,function(e){fs.lookAt(e),fs.updateMatrix(),this.applyMatrix(fs.matrix)}),fromBufferGeometry:function(e){function t(e,t,r,s){var o=void 0===c?[]:[n.colors[e].clone(),n.colors[t].clone(),n.colors[r].clone()];s=new w(e,t,r,void 0===l?[]:[(new a).fromArray(l,3*e),(new a).fromArray(l,3*t),(new a).fromArray(l,3*r)],o,s),n.faces.push(s),void 0!==h&&n.faceVertexUvs[0].push([(new i).fromArray(h,2*e),(new i).fromArray(h,2*t),(new i).fromArray(h,2*r)]),void 0!==u&&n.faceVertexUvs[1].push([(new i).fromArray(u,2*e),(new i).fromArray(u,2*t),(new i).fromArray(u,2*r)])}var n=this,r=null!==e.index?e.index.array:void 0,s=e.attributes,o=s.position.array,l=void 0!==s.normal?s.normal.array:void 0,c=void 0!==s.color?s.color.array:void 0,h=void 0!==s.uv?s.uv.array:void 0,u=void 0!==s.uv2?s.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var d=s=0;s<o.length;s+=3,d+=2)n.vertices.push((new a).fromArray(o,s)),void 0!==c&&n.colors.push((new _).fromArray(c,s));var p=e.groups;if(0<p.length)for(s=0;s<p.length;s++){var f=(o=p[s]).start;for(d=f,f+=o.count;d<f;d+=3)void 0!==r?t(r[d],r[d+1],r[d+2],o.materialIndex):t(d,d+1,d+2,o.materialIndex)}else if(void 0!==r)for(s=0;s<r.length;s+=3)t(r[s],r[s+1],r[s+2]);else for(s=0;s<o.length/3;s+=3)t(s,s+1,s+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(ps=new a,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ps).negate(),this.translate(ps.x,ps.y,ps.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius;t=0===t?1:1/t;var i=new n;return i.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new a,t=new a,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],s=this.vertices[r.a],o=this.vertices[r.b];e.subVectors(this.vertices[r.c],o),t.subVectors(s,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t;void 0===e&&(e=!0);var i=Array(this.vertices.length),n=0;for(t=this.vertices.length;n<t;n++)i[n]=new a;if(e){var r=new a,s=new a;for(e=0,n=this.faces.length;e<n;e++){t=this.faces[e];var o=this.vertices[t.a],l=this.vertices[t.b],c=this.vertices[t.c];r.subVectors(c,l),s.subVectors(o,l),r.cross(s),i[t.a].add(r),i[t.b].add(r),i[t.c].add(r)}}else for(this.computeFaceNormals(),e=0,n=this.faces.length;e<n;e++)i[(t=this.faces[e]).a].add(t.normal),i[t.b].add(t.normal),i[t.c].add(t.normal);for(n=0,t=this.vertices.length;n<t;n++)i[n].normalize();for(e=0,n=this.faces.length;e<n;e++)3===(o=(t=this.faces[e]).vertexNormals).length?(o[0].copy(i[t.a]),o[1].copy(i[t.b]),o[2].copy(i[t.c])):(o[0]=i[t.a].clone(),o[1]=i[t.b].clone(),o[2]=i[t.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var t=0;for(e=this.faces.length;t<e;t++){var i=this.faces[t],n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i=0;for(t=this.faces.length;i<t;i++){var n=this.faces[i];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var r=0;for(e=n.vertexNormals.length;r<e;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var s=new S;for(s.faces=this.faces,r=0,e=this.morphTargets.length;r<e;r++){if(!this.morphNormals[r]){this.morphNormals[r]={},this.morphNormals[r].faceNormals=[],this.morphNormals[r].vertexNormals=[],n=this.morphNormals[r].faceNormals;var o=this.morphNormals[r].vertexNormals;for(i=0,t=this.faces.length;i<t;i++){var l=new a,c={a:new a,b:new a,c:new a};n.push(l),o.push(c)}}for(o=this.morphNormals[r],s.vertices=this.morphTargets[r].vertices,s.computeFaceNormals(),s.computeVertexNormals(),i=0,t=this.faces.length;i<t;i++)n=this.faces[i],l=o.faceNormals[i],c=o.vertexNormals[i],l.copy(n.normal),c.a.copy(n.vertexNormals[0]),c.b.copy(n.vertexNormals[1]),c.c.copy(n.vertexNormals[2])}for(i=0,t=this.faces.length;i<t;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new f),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e&&e.isGeometry){var n,r=this.vertices.length,a=this.vertices,o=e.vertices,l=this.faces,c=e.faces,h=this.faceVertexUvs[0],u=e.faceVertexUvs[0],d=this.colors,p=e.colors;void 0===i&&(i=0),void 0!==t&&(n=(new s).getNormalMatrix(t)),e=0;for(var f=o.length;e<f;e++){var m=o[e].clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(e=0,f=p.length;e<f;e++)d.push(p[e].clone());for(e=0,f=c.length;e<f;e++){var g=(o=c[e]).vertexNormals;for(p=o.vertexColors,(d=new w(o.a+r,o.b+r,o.c+r)).normal.copy(o.normal),void 0!==n&&d.normal.applyMatrix3(n).normalize(),t=0,a=g.length;t<a;t++)m=g[t].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),d.vertexNormals.push(m);for(d.color.copy(o.color),t=0,a=p.length;t<a;t++)m=p[t],d.vertexColors.push(m.clone());d.materialIndex=o.materialIndex+i,l.push(d)}for(e=0,f=u.length;e<f;e++)if(n=[],void 0!==(i=u[e])){for(t=0,a=i.length;t<a;t++)n.push(i[t].clone());h.push(n)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t={},i=[],n=[],r=Math.pow(10,4),a=0;for(e=this.vertices.length;a<e;a++){var s=this.vertices[a];void 0===t[s=Math.round(s.x*r)+"_"+Math.round(s.y*r)+"_"+Math.round(s.z*r)]?(t[s]=a,i.push(this.vertices[a]),n[a]=i.length-1):n[a]=n[t[s]]}for(t=[],a=0,e=this.faces.length;a<e;a++)for((r=this.faces[a]).a=n[r.a],r.b=n[r.b],r.c=n[r.c],r=[r.a,r.b,r.c],s=0;s<3;s++)if(r[s]===r[(s+1)%3]){t.push(a);break}for(a=t.length-1;0<=a;a--)for(r=t[a],this.faces.splice(r,1),n=0,e=this.faceVertexUvs.length;n<e;n++)this.faceVertexUvs[n].splice(r,1);return a=this.vertices.length-i.length,this.vertices=i,a},setFromPoints:function(e){this.vertices=[];for(var t=0,i=e.length;t<i;t++){var n=e[t];this.vertices.push(new a(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,i=0;i<t;i++)e[i]._id=i;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var n,r,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];for(a&&a.length===t&&(n=[]),s&&s.length===t&&(r=[]),i=0;i<t;i++){var o=e[i]._id;n&&n.push(a[o]),r&&r.push(s[o])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function e(e,t,i){return i?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]||(c[t]=l.length/3,l.push(e.x,e.y,e.z)),c[t]}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]||(u[t]=h.length,h.push(e.getHex())),u[t]}function n(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]||(p[t]=d.length/2,d.push(e.x,e.y)),p[t]}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a,s=this.parameters;for(a in s)void 0!==s[a]&&(r[a]=s[a]);return r}for(s=[],a=0;a<this.vertices.length;a++){var o=this.vertices[a];s.push(o.x,o.y,o.z)}o=[];var l=[],c={},h=[],u={},d=[],p={};for(a=0;a<this.faces.length;a++){var f=this.faces[a],m=void 0!==this.faceVertexUvs[0][a],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,_=0<f.vertexColors.length,x=0;x=e(x=e(x=e(x=e(x=e(x=e(x=e(x=e(x,0,0),1,!0),2,!1),3,m),4,g),5,v),6,y),7,_),o.push(x),o.push(f.a,f.b,f.c),o.push(f.materialIndex),m&&(m=this.faceVertexUvs[0][a],o.push(n(m[0]),n(m[1]),n(m[2]))),g&&o.push(t(f.normal)),v&&(g=f.vertexNormals,o.push(t(g[0]),t(g[1]),t(g[2]))),y&&o.push(i(f.color)),_&&(f=f.vertexColors,o.push(i(f[0]),i(f[1]),i(f[2])))}return r.data={},r.data.vertices=s,r.data.normals=l,0<h.length&&(r.data.colors=h),0<d.length&&(r.data.uvs=[d]),r.data.faces=o,r},clone:function(){return(new S).copy(this)},copy:function(e){var t,i,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var r=e.vertices,a=0;for(t=r.length;a<t;a++)this.vertices.push(r[a].clone());for(a=0,t=(r=e.colors).length;a<t;a++)this.colors.push(r[a].clone());for(a=0,t=(r=e.faces).length;a<t;a++)this.faces.push(r[a].clone());for(a=0,t=e.faceVertexUvs.length;a<t;a++){var s=e.faceVertexUvs[a];for(void 0===this.faceVertexUvs[a]&&(this.faceVertexUvs[a]=[]),r=0,i=s.length;r<i;r++){var o=s[r],l=[],c=0;for(n=o.length;c<n;c++)l.push(o[c].clone());this.faceVertexUvs[a].push(l)}}for(a=0,t=(c=e.morphTargets).length;a<t;a++){if((n={}).name=c[a].name,void 0!==c[a].vertices)for(n.vertices=[],r=0,i=c[a].vertices.length;r<i;r++)n.vertices.push(c[a].vertices[r].clone());if(void 0!==c[a].normals)for(n.normals=[],r=0,i=c[a].normals.length;r<i;r++)n.normals.push(c[a].normals[r].clone());this.morphTargets.push(n)}for(a=0,t=(c=e.morphNormals).length;a<t;a++){if(n={},void 0!==c[a].vertexNormals)for(n.vertexNormals=[],r=0,i=c[a].vertexNormals.length;r<i;r++)s=c[a].vertexNormals[r],(o={}).a=s.a.clone(),o.b=s.b.clone(),o.c=s.c.clone(),n.vertexNormals.push(o);if(void 0!==c[a].faceNormals)for(n.faceNormals=[],r=0,i=c[a].faceNormals.length;r<i;r++)n.faceNormals.push(c[a].faceNormals[r].clone());this.morphNormals.push(n)}for(a=0,t=(r=e.skinWeights).length;a<t;a++)this.skinWeights.push(r[a].clone());for(a=0,t=(r=e.skinIndices).length;a<t;a++)this.skinIndices.push(r[a].clone());for(a=0,t=(r=e.lineDistances).length;a<t;a++)this.lineDistances.push(r[a]);return null!==(a=e.boundingBox)&&(this.boundingBox=a.clone()),null!==(a=e.boundingSphere)&&(this.boundingSphere=a.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(C.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(C.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new _),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var s=e[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new i),t[n++]=s.x,t[n++]=s.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var s=e[n];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),s=new a),t[i++]=s.x,t[i++]=s.y,t[i++]=s.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new l),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(A.prototype=Object.create(C.prototype)).constructor=A,(P.prototype=Object.create(C.prototype)).constructor=P,(L.prototype=Object.create(C.prototype)).constructor=L,(R.prototype=Object.create(C.prototype)).constructor=R,(O.prototype=Object.create(C.prototype)).constructor=O,(I.prototype=Object.create(C.prototype)).constructor=I,(D.prototype=Object.create(C.prototype)).constructor=D,(k.prototype=Object.create(C.prototype)).constructor=k,(N.prototype=Object.create(C.prototype)).constructor=N,Object.assign(z.prototype,{computeGroups:function(e){var t=[],i=void 0;e=e.faces;for(var n=0;n<e.length;n++){var r=e[n];if(r.materialIndex!==i){i=r.materialIndex,void 0!==a&&(a.count=3*n-a.start,t.push(a));var a={start:3*n,materialIndex:i}}}void 0!==a&&(a.count=3*n-a.start,t.push(a)),this.groups=t},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,a=r[0]&&0<r[0].length,s=r[1]&&0<r[1].length,o=e.morphTargets,l=o.length;if(0<l){for(var c=[],h=0;h<l;h++)c[h]={name:o[h].name,data:[]};this.morphTargets.position=c}var u=e.morphNormals,d=u.length;if(0<d){var p=[];for(h=0;h<d;h++)p[h]={name:u[h].name,data:[]};this.morphTargets.normal=p}var f=e.skinIndices,m=e.skinWeights,g=f.length===n.length,v=m.length===n.length;for(0<n.length&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),h=0;h<t.length;h++){var y=t[h];this.vertices.push(n[y.a],n[y.b],n[y.c]);var _=y.vertexNormals;for(3===_.length?this.normals.push(_[0],_[1],_[2]):(_=y.normal,this.normals.push(_,_,_)),3===(_=y.vertexColors).length?this.colors.push(_[0],_[1],_[2]):(_=y.color,this.colors.push(_,_,_)),!0===a&&(void 0!==(_=r[0][h])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",h),this.uvs.push(new i,new i,new i))),!0===s&&(void 0!==(_=r[1][h])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",h),this.uvs2.push(new i,new i,new i))),_=0;_<l;_++){var x=o[_].vertices;c[_].data.push(x[y.a],x[y.b],x[y.c])}for(_=0;_<d;_++)x=u[_].vertexNormals[h],p[_].data.push(x.a,x.b,x.c);g&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var bs,ws,Ts,Es,Ms,Ss,Cs,As,Ps,Ls,Rs=1;H.prototype=Object.assign(Object.create(t.prototype),{constructor:H,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<B(e)?D:O)(e,1):this.index=e},addAttribute:function(e,t,i){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?("index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t)):this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new C(t,i)))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;return void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0),void 0!==(t=this.attributes.normal)&&((new s).getNormalMatrix(e).applyToBufferAttribute(t),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:(Ls=new n,function(e){return Ls.makeRotationX(e),this.applyMatrix(Ls),this}),rotateY:(Ps=new n,function(e){return Ps.makeRotationY(e),this.applyMatrix(Ps),this}),rotateZ:(As=new n,function(e){return As.makeRotationZ(e),this.applyMatrix(As),this}),translate:(Cs=new n,function(e,t,i){return Cs.makeTranslation(e,t,i),this.applyMatrix(Cs),this}),scale:(Ss=new n,function(e,t,i){return Ss.makeScale(e,t,i),this.applyMatrix(Ss),this}),lookAt:(Ms=new M,function(e){Ms.lookAt(e),Ms.updateMatrix(),this.applyMatrix(Ms.matrix)}),center:(Es=new a,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Es).negate(),this.translate(Es.x,Es.y,Es.z),this}),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){e=new k(3*t.vertices.length,3);var i=new k(3*t.colors.length,3);this.addAttribute("position",e.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new k(t.lineDistances.length,1),this.addAttribute("lineDistance",e.copyArray(t.lineDistances))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new k(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var i=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(i=void 0,t.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(t);i.verticesNeedUpdate=t.verticesNeedUpdate,i.normalsNeedUpdate=t.normalsNeedUpdate,i.colorsNeedUpdate=t.colorsNeedUpdate,i.uvsNeedUpdate=t.uvsNeedUpdate,i.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=i}return!0===t.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(void 0!==(i=this.attributes.normal)&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new z).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);for(var i in this.addAttribute("position",new C(t,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.addAttribute("normal",new C(t,3).copyVector3sArray(e.normals))),0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.addAttribute("color",new C(t,3).copyColorsArray(e.colors))),0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.addAttribute("uv",new C(t,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.addAttribute("uv2",new C(t,2).copyVector2sArray(e.uvs2))),this.groups=e.groups,e.morphTargets){t=[];for(var n=e.morphTargets[i],r=0,a=n.length;r<a;r++){var s=n[r],o=new k(3*s.data.length,3);o.name=s.name,t.push(o.copyVector3sArray(s.data))}this.morphAttributes[i]=t}return 0<e.skinIndices.length&&(i=new k(4*e.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(i=new k(4*e.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(e.skinWeights))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:(ws=new p,Ts=new a,function(){null===this.boundingSphere&&(this.boundingSphere=new f);var e=this.attributes.position;if(e){var t=this.boundingSphere.center;ws.setFromBufferAttribute(e),ws.getCenter(t);for(var i=0,n=0,r=e.count;n<r;n++)Ts.x=e.getX(n),Ts.y=e.getY(n),Ts.z=e.getZ(n),i=Math.max(i,t.distanceToSquared(Ts));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new C(new Float32Array(i.length),3));else for(var n=t.normal.array,r=0,s=n.length;r<s;r++)n[r]=0;n=t.normal.array;var o=new a,l=new a,c=new a,h=new a,u=new a;if(e){var d=e.array;for(r=0,s=e.count;r<s;r+=3){e=3*d[r+0];var p=3*d[r+1],f=3*d[r+2];o.fromArray(i,e),l.fromArray(i,p),c.fromArray(i,f),h.subVectors(c,l),u.subVectors(o,l),h.cross(u),n[e]+=h.x,n[e+1]+=h.y,n[e+2]+=h.z,n[p]+=h.x,n[p+1]+=h.y,n[p+2]+=h.z,n[f]+=h.x,n[f+1]+=h.y,n[f+2]+=h.z}}else for(r=0,s=i.length;r<s;r+=9)o.fromArray(i,r),l.fromArray(i,r+3),c.fromArray(i,r+6),h.subVectors(c,l),u.subVectors(o,l),h.cross(u),n[r]=h.x,n[r+1]=h.y,n[r+2]=h.z,n[r+3]=h.x,n[r+4]=h.y,n[r+5]=h.z,n[r+6]=h.x,n[r+7]=h.y,n[r+8]=h.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i,n=this.attributes;for(i in n)if(void 0!==e.attributes[i]){var r=n[i].array,a=e.attributes[i],s=a.array,o=0;for(a=a.itemSize*t;o<s.length;o++,a++)r[a]=s[o]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:(bs=new a,function(){for(var e=this.attributes.normal,t=0,i=e.count;t<i;t++)bs.x=e.getX(t),bs.y=e.getY(t),bs.z=e.getZ(t),bs.normalize(),e.setXYZ(t,bs.x,bs.y,bs.z)}),toNonIndexed:function(){function e(e,t){var i=e.array;e=e.itemSize;for(var n,r=new i.constructor(t.length*e),a=0,s=0,o=t.length;s<o;s++){n=t[s]*e;for(var l=0;l<e;l++)r[a++]=i[n++]}return new C(r,e)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,i=new H,n=this.index.array,r=this.attributes;for(t in r){var a=r[t];a=e(a,n),i.addAttribute(t,a)}var s=this.morphAttributes;for(t in s){var o=[],l=s[t];r=0;for(var c=l.length;r<c;r++)a=e(a=l[r],n),o.push(a);i.morphAttributes[t]=o}for(r=0,t=(n=this.groups).length;r<t;r++)a=n[r],i.addGroup(a.start,a.count,a.materialIndex);return i},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),0<Object.keys(this.userData).length&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var i=this.index;for(r in null!==i&&(t=Array.prototype.slice.call(i.array),e.data.index={type:i.array.constructor.name,array:t}),i=this.attributes){var n=i[r];t=Array.prototype.slice.call(n.array),e.data.attributes[r]={itemSize:n.itemSize,type:n.array.constructor.name,array:t,normalized:n.normalized}}var r=this.groups;return 0<r.length&&(e.data.groups=JSON.parse(JSON.stringify(r))),null!==(r=this.boundingSphere)&&(e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),e},clone:function(){return(new H).copy(this)},copy:function(e){var t;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var i=e.index;for(s in null!==i&&this.setIndex(i.clone()),i=e.attributes)this.addAttribute(s,i[s].clone());var n=e.morphAttributes;for(s in n){var r=[],a=n[s];for(i=0,t=a.length;i<t;i++)r.push(a[i].clone());this.morphAttributes[s]=r}var s=e.groups;for(i=0,t=s.length;i<t;i++)n=s[i],this.addGroup(n.start,n.count,n.materialIndex);return null!==(s=e.boundingBox)&&(this.boundingBox=s.clone()),null!==(s=e.boundingSphere)&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(F.prototype=Object.create(S.prototype)).constructor=F,(U.prototype=Object.create(H.prototype)).constructor=U,(G.prototype=Object.create(S.prototype)).constructor=G,(V.prototype=Object.create(H.prototype)).constructor=V;var Os,Is,Ds,ks,Ns,zs,Bs,Hs,Fs,Us,Gs,Vs,js,Ws,Xs,Ys,qs,$s,Zs,Js,Ks,Qs,eo,to,io,no=0;j.prototype=Object.assign(Object.create(t.prototype),{constructor:j,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0===i)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"===t)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else{var n=this[t];void 0===n?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i}}},toJSON:function(e){function t(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}var i=void 0===e||"string"==typeof e;i&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),i&&(i=t(e.textures),e=t(e.images),0<i.length&&(n.textures=i),0<e.length&&(n.images=e)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(null!==t){var n=t.length;i=Array(n);for(var r=0;r!==n;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),((W.prototype=Object.create(j.prototype)).constructor=W).prototype.isShaderMaterial=!0,W.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=v(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},W.prototype.toJSON=function(e){var t=j.prototype.toJSON.call(this,e);for(var i in t.uniforms={},this.uniforms){var n=this.uniforms[i].value;t.uniforms[i]=n&&n.isTexture?{type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}for(var r in 0<Object.keys(this.defines).length&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,e={},this.extensions)!0===this.extensions[r]&&(e[r]=!0);return 0<Object.keys(e).length&&(t.extensions=e),t},Object.assign(X.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new a),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:(Gs=new a,function(e){return this.origin.copy(this.at(e,Gs)),this}),closestPointToPoint:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new a),t.subVectors(e,this.origin),(e=t.dot(this.direction))<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:(Us=new a,function(e){var t=Us.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Us.copy(this.direction).multiplyScalar(t).add(this.origin),Us.distanceToSquared(e))}),distanceSqToSegment:(Bs=new a,Hs=new a,Fs=new a,function(e,t,i,n){Bs.copy(e).add(t).multiplyScalar(.5),Hs.copy(t).sub(e).normalize(),Fs.copy(this.origin).sub(Bs);var r=.5*e.distanceTo(t),a=-this.direction.dot(Hs),s=Fs.dot(this.direction),o=-Fs.dot(Hs),l=Fs.lengthSq(),c=Math.abs(1-a*a);if(0<c){t=a*s-o;var h=r*c;a=0<=(e=a*o-s)?-h<=t?t<=h?(e*=r=1/c)*(e+a*(t*=r)+2*s)+t*(a*e+t+2*o)+l:(t=r,-(e=Math.max(0,-(a*t+s)))*e+t*(t+2*o)+l):(t=-r,-(e=Math.max(0,-(a*t+s)))*e+t*(t+2*o)+l):t<=-h?-(e=Math.max(0,-(-a*r+s)))*e+(t=0<e?-r:Math.min(Math.max(-r,-o),r))*(t+2*o)+l:t<=h?(e=0,(t=Math.min(Math.max(-r,-o),r))*(t+2*o)+l):-(e=Math.max(0,-(a*r+s)))*e+(t=0<e?r:Math.min(Math.max(-r,-o),r))*(t+2*o)+l}else t=0<a?-r:r,a=-(e=Math.max(0,-(a*t+s)))*e+t*(t+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(e).add(this.origin),n&&n.copy(Hs).multiplyScalar(t).add(Bs),a}),intersectSphere:(zs=new a,function(e,t){zs.subVectors(e.center,this.origin);var i=zs.dot(this.direction),n=zs.dot(zs)-i*i;return(e=e.radius*e.radius)<n?null:(n=i-(e=Math.sqrt(e-n)),i+=e,n<0&&i<0?null:n<0?this.at(i,t):this.at(n,t))}),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:0<=(e=-(this.origin.dot(e.normal)+e.constant)/t)?e:null},intersectPlane:function(e,t){return null===(e=this.distanceToPlane(e))?null:this.at(e,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var i=1/this.direction.x,n=1/this.direction.y,r=1/this.direction.z,a=this.origin;if(0<=i){var s=(e.min.x-a.x)*i;i*=e.max.x-a.x}else s=(e.max.x-a.x)*i,i*=e.min.x-a.x;if(0<=n){var o=(e.min.y-a.y)*n;n*=e.max.y-a.y}else o=(e.max.y-a.y)*n,n*=e.min.y-a.y;return n<s||i<o?null:((s<o||s!=s)&&(s=o),(n<i||i!=i)&&(i=n),(e=0<=r?(o=(e.min.z-a.z)*r,(e.max.z-a.z)*r):(o=(e.max.z-a.z)*r,(e.min.z-a.z)*r))<s||i<o?null:((s<o||s!=s)&&(s=o),(e<i||i!=i)&&(i=e),i<0?null:this.at(0<=s?s:i,t)))},intersectsBox:(Ns=new a,function(e){return null!==this.intersectBox(e,Ns)}),intersectTriangle:(Os=new a,Is=new a,Ds=new a,ks=new a,function(e,t,i,n,r){if(Is.subVectors(t,e),Ds.subVectors(i,e),ks.crossVectors(Is,Ds),0<(t=this.direction.dot(ks))){if(n)return null;n=1}else{if(!(t<0))return null;n=-1,t=-t}return Os.subVectors(this.origin,e),(e=n*this.direction.dot(Ds.crossVectors(Os,Ds)))<0?null:(i=n*this.direction.dot(Is.cross(Os)))<0||t<e+i?null:(e=-n*Os.dot(ks))<0?null:this.at(e/t,r)}),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Y,{getNormal:(qs=new a,function(e,t,i,n){return void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new a),n.subVectors(i,t),qs.subVectors(e,t),n.cross(qs),0<(e=n.lengthSq())?n.multiplyScalar(1/Math.sqrt(e)):n.set(0,0,0)}),getBarycoord:(Ws=new a,Xs=new a,Ys=new a,function(e,t,i,n,r){Ws.subVectors(n,t),Xs.subVectors(i,t),Ys.subVectors(e,t),e=Ws.dot(Ws),t=Ws.dot(Xs),i=Ws.dot(Ys);var s=Xs.dot(Xs);n=Xs.dot(Ys);var o=e*s-t*t;return void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new a),0===o?r.set(-2,-1,-1):(s=(s*i-t*n)*(o=1/o),e=(e*n-t*i)*o,r.set(1-s-e,e,s))}),containsPoint:(js=new a,function(e,t,i,n){return Y.getBarycoord(e,t,i,n,js),0<=js.x&&0<=js.y&&js.x+js.y<=1}),getUV:(Vs=new a,function(e,t,i,n,r,a,s,o){return this.getBarycoord(e,t,i,n,Vs),o.set(0,0),o.addScaledVector(r,Vs.x),o.addScaledVector(a,Vs.y),o.addScaledVector(s,Vs.z),o})}),Object.assign(Y.prototype,{set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:(to=new a,io=new a,function(){return to.subVectors(this.c,this.b),io.subVectors(this.a,this.b),.5*to.cross(io).length()}),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new a),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Y.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new a),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Y.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Y.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,i,n,r){return Y.getUV(e,this.a,this.b,this.c,t,i,n,r)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:($s=new a,Zs=new a,Js=new a,Ks=new a,Qs=new a,eo=new a,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new a);var i=this.a,n=this.b,r=this.c;$s.subVectors(n,i),Zs.subVectors(r,i),Ks.subVectors(e,i);var s=$s.dot(Ks),o=Zs.dot(Ks);if(s<=0&&o<=0)return t.copy(i);Qs.subVectors(e,n);var l=$s.dot(Qs),c=Zs.dot(Qs);if(0<=l&&c<=l)return t.copy(n);var h=s*c-l*o;if(h<=0&&0<=s&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector($s,n);eo.subVectors(e,r),e=$s.dot(eo);var u=Zs.dot(eo);return 0<=u&&e<=u?t.copy(r):(s=e*o-s*u)<=0&&0<=o&&u<=0?(h=o/(o-u),t.copy(i).addScaledVector(Zs,h)):(o=l*u-e*c)<=0&&0<=c-l&&0<=e-u?(Js.subVectors(r,n),h=(c-l)/(c-l+(e-u)),t.copy(n).addScaledVector(Js,h)):(n=s*(r=1/(o+s+h)),h*=r,t.copy(i).addScaledVector($s,n).addScaledVector(Zs,h))}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),((q.prototype=Object.create(j.prototype)).constructor=q).prototype.isMeshBasicMaterial=!0,q.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},$.prototype=Object.assign(Object.create(M.prototype),{constructor:$,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return M.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var i=e[t[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=i.length;e<t;e++){var n=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}else void 0!==(e=e.morphTargets)&&0<e.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(){function e(e,t,i,n,r,a,s,o){return null===(1===t.side?n.intersectTriangle(s,a,r,!0,o):n.intersectTriangle(r,a,s,2!==t.side,o))?null:(_.copy(o),_.applyMatrix4(e.matrixWorld),(t=i.ray.origin.distanceTo(_))<i.near||t>i.far?null:{distance:t,point:_.clone(),object:e})}function t(t,n,r,a,s,o,u,d,p){return l.fromBufferAttribute(s,u),c.fromBufferAttribute(s,d),h.fromBufferAttribute(s,p),(t=e(t,n,r,a,l,c,h,y))&&(o&&(m.fromBufferAttribute(o,u),g.fromBufferAttribute(o,d),v.fromBufferAttribute(o,p),t.uv=Y.getUV(y,l,c,h,m,g,v,new i)),o=new w(u,d,p),Y.getNormal(l,c,h,o.normal),t.face=o),t}var r=new n,s=new X,o=new f,l=new a,c=new a,h=new a,u=new a,d=new a,p=new a,m=new i,g=new i,v=new i,y=new a,_=new a;return function(n,a){var f=this.geometry,_=this.material,x=this.matrixWorld;if(void 0!==_&&(null===f.boundingSphere&&f.computeBoundingSphere(),o.copy(f.boundingSphere),o.applyMatrix4(x),!1!==n.ray.intersectsSphere(o)&&(r.getInverse(x),s.copy(n.ray).applyMatrix4(r),null===f.boundingBox||!1!==s.intersectsBox(f.boundingBox))))if(f.isBufferGeometry){var b,w,T=f.index,E=f.attributes.position,M=f.attributes.uv,S=f.groups;if(f=f.drawRange,null!==T)if(Array.isArray(_)){var C=0;for(b=S.length;C<b;C++){var A=S[C],P=_[A.materialIndex],L=Math.max(A.start,f.start);for(w=x=Math.min(A.start+A.count,f.start+f.count);L<w;L+=3){x=T.getX(L);var R=T.getX(L+1),O=T.getX(L+2);(x=t(this,P,n,s,E,M,x,R,O))&&(x.faceIndex=Math.floor(L/3),x.face.materialIndex=A.materialIndex,a.push(x))}}}else for(C=L=Math.max(0,f.start),b=x=Math.min(T.count,f.start+f.count);C<b;C+=3)x=T.getX(C),R=T.getX(C+1),O=T.getX(C+2),(x=t(this,_,n,s,E,M,x,R,O))&&(x.faceIndex=Math.floor(C/3),a.push(x));else if(void 0!==E)if(Array.isArray(_))for(C=0,b=S.length;C<b;C++)for(P=_[(A=S[C]).materialIndex],L=Math.max(A.start,f.start),w=x=Math.min(A.start+A.count,f.start+f.count);L<w;L+=3)(x=t(this,P,n,s,E,M,x=L,R=L+1,O=L+2))&&(x.faceIndex=Math.floor(L/3),x.face.materialIndex=A.materialIndex,a.push(x));else for(C=L=Math.max(0,f.start),b=x=Math.min(E.count,f.start+f.count);C<b;C+=3)(x=t(this,_,n,s,E,M,x=C,R=C+1,O=C+2))&&(x.faceIndex=Math.floor(C/3),a.push(x))}else if(f.isGeometry)for(E=Array.isArray(_),M=f.vertices,S=f.faces,0<(x=f.faceVertexUvs[0]).length&&(T=x),P=0,L=S.length;P<L;P++)if(w=S[P],void 0!==(x=E?_[w.materialIndex]:_)){if(C=M[w.a],b=M[w.b],A=M[w.c],!0===x.morphTargets){R=f.morphTargets,O=this.morphTargetInfluences,l.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var I=0,D=R.length;I<D;I++){var k=O[I];if(0!==k){var N=R[I].vertices;l.addScaledVector(u.subVectors(N[w.a],C),k),c.addScaledVector(d.subVectors(N[w.b],b),k),h.addScaledVector(p.subVectors(N[w.c],A),k)}}l.add(C),c.add(b),h.add(A),C=l,b=c,A=h}(x=e(this,x,n,s,C,b,A,y))&&(T&&T[P]&&(R=T[P],m.copy(R[0]),g.copy(R[1]),v.copy(R[2]),x.uv=Y.getUV(y,C,b,A,m,g,v,new i)),x.face=w,x.faceIndex=P,a.push(x))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),((oe.prototype=Object.create(o.prototype)).constructor=oe).prototype.isCubeTexture=!0,Object.defineProperty(oe.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),((le.prototype=Object.create(o.prototype)).constructor=le).prototype.isDataTexture3D=!0;var ro=new o,ao=new le,so=new oe,oo=[],lo=[],co=new Float32Array(16),ho=new Float32Array(9),uo=new Float32Array(4);Be.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),ue(t,e)},He.prototype.setValue=function(e,t,i){for(var n=this.seq,r=0,a=n.length;r!==a;++r){var s=n[r];s.setValue(e,t[s.id],i)}};var po=/([\w\d_]+)(\])?(\[|\.)?/g;Fe.prototype.setValue=function(e,t,i){void 0!==(t=this.map[t])&&t.setValue(e,i,this.renderer)},Fe.prototype.setOptional=function(e,t,i){void 0!==(t=t[i])&&this.setValue(e,i,t)},Fe.upload=function(e,t,i,n){for(var r=0,a=t.length;r!==a;++r){var s=t[r],o=i[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,n)}},Fe.seqWithValue=function(e,t){for(var i=[],n=0,r=e.length;n!==r;++n){var a=e[n];a.id in t&&i.push(a)}return i};var fo=0,mo=0;((st.prototype=Object.create(j.prototype)).constructor=st).prototype.isMeshDepthMaterial=!0,st.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},((ot.prototype=Object.create(j.prototype)).constructor=ot).prototype.isMeshDistanceMaterial=!0,ot.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},dt.prototype=Object.assign(Object.create(M.prototype),{constructor:dt,isGroup:!0}),pt.prototype=Object.assign(Object.create(M.prototype),{constructor:pt,isCamera:!0,copy:function(e,t){return M.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new a),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){M.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ft.prototype=Object.assign(Object.create(pt.prototype),{constructor:ft,isPerspectiveCamera:!0,copy:function(e,t){return pt.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*ya.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*ya.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*ya.RAD2DEG*Math.atan(Math.tan(.5*ya.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,n,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*ya.DEG2RAD*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var s=a.fullWidth,o=a.fullHeight;r+=a.offsetX*n/s,t-=a.offsetY*i/o,n*=a.width/s,i*=a.height/o}0!==(a=this.filmOffset)&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return(e=M.prototype.toJSON.call(this,e)).object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),mt.prototype=Object.assign(Object.create(ft.prototype),{constructor:mt,isArrayCamera:!0});var go,vo,yo,_o,xo,bo,wo,To,Eo,Mo,So,Co,Ao,Po,Lo,Ro,Oo=new a,Io=new a;xt.prototype.isFogExp2=!0,xt.prototype.clone=function(){return new xt(this.color,this.density)},xt.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},bt.prototype.isFog=!0,bt.prototype.clone=function(){return new bt(this.color,this.near,this.far)},bt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},wt.prototype=Object.assign(Object.create(M.prototype),{constructor:wt,isScene:!0,copy:function(e,t){return M.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=M.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Tt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Tt.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(var n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Et.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Et.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}}),((Mt.prototype=Object.create(j.prototype)).constructor=Mt).prototype.isSpriteMaterial=!0,Mt.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},St.prototype=Object.assign(Object.create(M.prototype),{constructor:St,isSprite:!0,raycast:function(){function e(e,t,i,n,r,a){o.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(l.x=a*o.x-r*o.y,l.y=r*o.x+a*o.y):l.copy(o),e.copy(t),e.x+=l.x,e.y+=l.y,e.applyMatrix4(c)}var t=new a,r=new a,s=new a,o=new i,l=new i,c=new n,h=new a,u=new a,d=new a,p=new i,f=new i,m=new i;return function(n,a){r.setFromMatrixScale(this.matrixWorld),c.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),s.setFromMatrixPosition(this.modelViewMatrix);var o=this.material.rotation;if(0!==o)var l=Math.cos(o),g=Math.sin(o);o=this.center,e(h.set(-.5,-.5,0),s,o,r,g,l),e(u.set(.5,-.5,0),s,o,r,g,l),e(d.set(.5,.5,0),s,o,r,g,l),p.set(0,0),f.set(1,0),m.set(1,1);var v=n.ray.intersectTriangle(h,u,d,!1,t);null===v&&(e(u.set(-.5,.5,0),s,o,r,g,l),f.set(0,1),null===(v=n.ray.intersectTriangle(h,d,u,!1,t)))||(g=n.ray.origin.distanceTo(t))<n.near||g>n.far||a.push({distance:g,point:t.clone(),uv:Y.getUV(t,h,u,d,p,f,m,new i),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return M.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Ct.prototype=Object.assign(Object.create(M.prototype),{constructor:Ct,copy:function(e){M.prototype.copy.call(this,e,!1);for(var t=0,i=(e=e.levels).length;t<i;t++){var n=e[t];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=this.levels,n=0;n<i.length&&!(t<i[n].distance);n++);i.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,i=1,n=t.length;i<n&&!(e<t[i].distance);i++);return t[i-1].object},raycast:(_o=new a,function(e,t){_o.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(_o);this.getObjectForDistance(i).raycast(e,t)}),update:(vo=new a,yo=new a,function(e){var t=this.levels;if(1<t.length){vo.setFromMatrixPosition(e.matrixWorld),yo.setFromMatrixPosition(this.matrixWorld),e=vo.distanceTo(yo),t[0].object.visible=!0;for(var i=1,n=t.length;i<n&&e>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(;i<n;i++)t[i].object.visible=!1}}),toJSON:function(e){(e=M.prototype.toJSON.call(this,e)).object.levels=[];for(var t=this.levels,i=0,n=t.length;i<n;i++){var r=t[i];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}}),At.prototype=Object.assign(Object.create($.prototype),{constructor:At,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new l,t=this.geometry.attributes.skinWeight,i=0,n=t.count;i<n;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);var r=1/e.manhattanLength();1/0!==r?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){$.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(Pt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new n;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},pose:function(){var e,t,i=0;for(t=this.bones.length;i<t;i++)(e=this.bones[i])&&e.matrixWorld.getInverse(this.boneInverses[i]);for(i=0,t=this.bones.length;i<t;i++)(e=this.bones[i])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(xo=new n,bo=new n,function(){for(var e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,a=e.length;r<a;r++)xo.multiplyMatrices(e[r]?e[r].matrixWorld:bo,t[r]),xo.toArray(i,16*r);void 0!==n&&(n.needsUpdate=!0)}),clone:function(){return new Pt(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,i=this.bones.length;t<i;t++){var n=this.bones[t];if(n.name===e)return n}}}),Lt.prototype=Object.assign(Object.create(M.prototype),{constructor:Lt,isBone:!0}),((Rt.prototype=Object.create(j.prototype)).constructor=Rt).prototype.isLineBasicMaterial=!0,Rt.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Ot.prototype=Object.assign(Object.create(M.prototype),{constructor:Ot,isLine:!0,computeLineDistances:(Mo=new a,So=new a,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[0],n=1,r=t.count;n<r;n++)Mo.fromBufferAttribute(t,n-1),So.fromBufferAttribute(t,n),i[n]=i[n-1],i[n]+=Mo.distanceTo(So);e.addAttribute("lineDistance",new k(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(t=e.vertices,(i=e.lineDistances)[0]=0,n=1,r=t.length;n<r;n++)i[n]=i[n-1],i[n]+=t[n-1].distanceTo(t[n]);return this}),raycast:(wo=new n,To=new X,Eo=new f,function(e,t){var i=e.linePrecision,n=this.geometry,r=this.matrixWorld;if(null===n.boundingSphere&&n.computeBoundingSphere(),Eo.copy(n.boundingSphere),Eo.applyMatrix4(r),Eo.radius+=i,!1!==e.ray.intersectsSphere(Eo)){wo.getInverse(r),To.copy(e.ray).applyMatrix4(wo),i/=(this.scale.x+this.scale.y+this.scale.z)/3,i*=i;var s=new a,o=new a;r=new a;var l=new a,c=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var h=n.index,u=n.attributes.position.array;if(null!==h){n=0;for(var d=(h=h.array).length-1;n<d;n+=c){var p=h[n+1];s.fromArray(u,3*h[n]),o.fromArray(u,3*p),i<(p=To.distanceSqToSegment(s,o,l,r))||(l.applyMatrix4(this.matrixWorld),(p=e.ray.origin.distanceTo(l))<e.near||p>e.far||t.push({distance:p,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(n=0,d=u.length/3-1;n<d;n+=c)s.fromArray(u,3*n),o.fromArray(u,3*n+3),i<(p=To.distanceSqToSegment(s,o,l,r))||(l.applyMatrix4(this.matrixWorld),(p=e.ray.origin.distanceTo(l))<e.near||p>e.far||t.push({distance:p,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(o=(s=n.vertices).length,n=0;n<o-1;n+=c)i<(p=To.distanceSqToSegment(s[n],s[n+1],l,r))||(l.applyMatrix4(this.matrixWorld),(p=e.ray.origin.distanceTo(l))<e.near||p>e.far||t.push({distance:p,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}),copy:function(e){return M.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),It.prototype=Object.assign(Object.create(Ot.prototype),{constructor:It,isLineSegments:!0,computeLineDistances:(Co=new a,Ao=new a,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[],n=0,r=t.count;n<r;n+=2)Co.fromBufferAttribute(t,n),Ao.fromBufferAttribute(t,n+1),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+Co.distanceTo(Ao);e.addAttribute("lineDistance",new k(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(t=e.vertices,i=e.lineDistances,n=0,r=t.length;n<r;n+=2)Co.copy(t[n]),Ao.copy(t[n+1]),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+Co.distanceTo(Ao);return this})}),Dt.prototype=Object.assign(Object.create(Ot.prototype),{constructor:Dt,isLineLoop:!0}),((kt.prototype=Object.create(j.prototype)).constructor=kt).prototype.isPointsMaterial=!0,kt.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Nt.prototype=Object.assign(Object.create(M.prototype),{constructor:Nt,isPoints:!0,raycast:(Po=new n,Lo=new X,Ro=new f,function(e,t){function i(i,r){var a=Lo.distanceSqToPoint(i);a<l&&(Lo.closestPointToPoint(i,c),c.applyMatrix4(s),(i=e.ray.origin.distanceTo(c))<e.near||i>e.far||t.push({distance:i,distanceToRay:Math.sqrt(a),point:c.clone(),index:r,face:null,object:n}))}var n=this,r=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold;if(null===r.boundingSphere&&r.computeBoundingSphere(),Ro.copy(r.boundingSphere),Ro.applyMatrix4(s),Ro.radius+=o,!1!==e.ray.intersectsSphere(Ro)){Po.getInverse(s),Lo.copy(e.ray).applyMatrix4(Po);var l=(o/=(this.scale.x+this.scale.y+this.scale.z)/3)*o;o=new a;var c=new a;if(r.isBufferGeometry){var h=r.index;if(r=r.attributes.position.array,null!==h){var u=h.array;h=0;for(var d=u.length;h<d;h++){var p=u[h];o.fromArray(r,3*p),i(o,p)}}else for(h=0,u=r.length/3;h<u;h++)o.fromArray(r,3*h),i(o,h)}else for(h=0,u=(o=r.vertices).length;h<u;h++)i(o[h],h)}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),zt.prototype=Object.assign(Object.create(o.prototype),{constructor:zt,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),((Bt.prototype=Object.create(o.prototype)).constructor=Bt).prototype.isCompressedTexture=!0,((Ht.prototype=Object.create(o.prototype)).constructor=Ht).prototype.isCanvasTexture=!0,((Ft.prototype=Object.create(o.prototype)).constructor=Ft).prototype.isDepthTexture=!0,(Ut.prototype=Object.create(H.prototype)).constructor=Ut,(Gt.prototype=Object.create(S.prototype)).constructor=Gt,(Vt.prototype=Object.create(H.prototype)).constructor=Vt,(jt.prototype=Object.create(S.prototype)).constructor=jt,(Wt.prototype=Object.create(H.prototype)).constructor=Wt,(Xt.prototype=Object.create(S.prototype)).constructor=Xt,(Yt.prototype=Object.create(Wt.prototype)).constructor=Yt,(qt.prototype=Object.create(S.prototype)).constructor=qt,($t.prototype=Object.create(Wt.prototype)).constructor=$t,(Zt.prototype=Object.create(S.prototype)).constructor=Zt,(Jt.prototype=Object.create(Wt.prototype)).constructor=Jt,(Kt.prototype=Object.create(S.prototype)).constructor=Kt,(Qt.prototype=Object.create(Wt.prototype)).constructor=Qt,(ei.prototype=Object.create(S.prototype)).constructor=ei,(ti.prototype=Object.create(H.prototype)).constructor=ti,(ii.prototype=Object.create(S.prototype)).constructor=ii,(ni.prototype=Object.create(H.prototype)).constructor=ni,(ri.prototype=Object.create(S.prototype)).constructor=ri,(ai.prototype=Object.create(H.prototype)).constructor=ai;var Do={area:function(e){for(var t=e.length,i=0,n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i},isClockWise:function(e){return Do.area(e)<0},triangulateShape:function(e,t){var i=[],n=[],r=[];bi(e),wi(i,e);var a=e.length;for(t.forEach(bi),e=0;e<t.length;e++)n.push(a),a+=t[e].length,wi(i,t[e]);for(t=function(e,t,i){i=i||2;var n,r=t&&t.length,a=r?t[0]*i:e.length,s=si(e,0,a,i,!0),o=[];if(!s)return o;if(r){var l,c=i;r=[];var h=0;for(l=t.length;h<l;h++){var u=t[h]*c;(u=si(e,u,h<l-1?t[h+1]*c:e.length,c,!1))===u.next&&(u.steiner=!0),r.push(ui(u))}for(r.sort(li),h=0;h<r.length;h++)(c=ci(t=r[h],c=s))&&oi(t=vi(c,t),t.next),s=oi(s,s.next)}if(e.length>80*i){var d=n=e[0],p=r=e[1];for(c=i;c<a;c+=i)(h=e[c])<d&&(d=h),(t=e[c+1])<p&&(p=t),n<h&&(n=h),r<t&&(r=t);n=0!==(n=Math.max(n-d,r-p))?1/n:0}return function e(t,i,n,r,a,s,o){if(t){if(!o&&s){for(var l=t,c=l;null===c.z&&(c.z=hi(c.x,c.y,r,a,s)),c.prevZ=c.prev,(c=c.nextZ=c.next)!==l;);c.prevZ.nextZ=null,c.prevZ=null,l=c;var h,u,d,p,f=1;do{c=l;var m=l=null;for(u=0;c;){u++;var g=c;for(h=d=0;h<f&&(d++,g=g.nextZ);h++);for(p=f;0<d||0<p&&g;)0!==d&&(0===p||!g||c.z<=g.z)?(c=(h=c).nextZ,d--):(g=(h=g).nextZ,p--),m?m.nextZ=h:l=h,h.prevZ=m,m=h;c=g}m.nextZ=null,f*=2}while(1<u)}for(l=t;t.prev!==t.next;){if(c=t.prev,g=t.next,s)e:{p=r;var v=a,y=s;if(0<=pi(u=(m=t).prev,d=m,f=m.next))m=!1;else{var _=u.x>d.x?u.x>f.x?u.x:f.x:d.x>f.x?d.x:f.x,x=u.y>d.y?u.y>f.y?u.y:f.y:d.y>f.y?d.y:f.y;for(h=hi(u.x<d.x?u.x<f.x?u.x:f.x:d.x<f.x?d.x:f.x,u.y<d.y?u.y<f.y?u.y:f.y:d.y<f.y?d.y:f.y,p,v,y),p=hi(_,x,p,v,y),v=m.nextZ;v&&v.z<=p;){if(v!==m.prev&&v!==m.next&&di(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=pi(v.prev,v,v.next)){m=!1;break e}v=v.nextZ}for(v=m.prevZ;v&&v.z>=h;){if(v!==m.prev&&v!==m.next&&di(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=pi(v.prev,v,v.next)){m=!1;break e}v=v.prevZ}m=!0}}else e:if(m=t,u=m.prev,d=m,f=m.next,0<=pi(u,d,f))m=!1;else{for(h=m.next.next;h!==m.prev;){if(di(u.x,u.y,d.x,d.y,f.x,f.y,h.x,h.y)&&0<=pi(h.prev,h,h.next)){m=!1;break e}h=h.next}m=!0}if(m)i.push(c.i/n),i.push(t.i/n),i.push(g.i/n),_i(t),l=t=g.next;else if((t=g)===l){if(o){if(1===o){for(o=i,l=n,c=t;!fi(g=c.prev,m=c.next.next)&&mi(g,c,c.next,m)&&gi(g,m)&&gi(m,g)&&(o.push(g.i/l),o.push(c.i/l),o.push(m.i/l),_i(c),_i(c.next),c=t=m),(c=c.next)!==t;);e(t=c,i,n,r,a,s,2)}else if(2===o)e:{o=t;do{for(l=o.next.next;l!==o.prev;){if(c=o.i!==l.i){if(g=l,m=(c=o).next.i!==g.i&&c.prev.i!==g.i){t:{m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==g.i&&m.next.i!==g.i&&mi(m,m.next,c,g)){m=!0;break t}m=m.next}while(m!==c);m=!1}m=!m}if(m=m&&gi(c,g)&&gi(g,c)){for(u=!1,d=((m=c).x+g.x)/2,g=(c.y+g.y)/2;m.y>g!=m.next.y>g&&m.next.y!==m.y&&d<(m.next.x-m.x)*(g-m.y)/(m.next.y-m.y)+m.x&&(u=!u),(m=m.next)!==c;);m=u}c=m}if(c){t=vi(o,l),o=oi(o,o.next),t=oi(t,t.next),e(o,i,n,r,a,s),e(t,i,n,r,a,s);break e}l=l.next}o=o.next}while(o!==t)}}else e(oi(t),i,n,r,a,s,1);break}}}}(s,o,i,d,p,n),o}(i,n),e=0;e<t.length;e+=3)r.push(t.slice(e,e+3));return r}};((Ti.prototype=Object.create(S.prototype)).constructor=Ti).prototype.toJSON=function(){var e=S.prototype.toJSON.call(this);return Mi(this.parameters.shapes,this.parameters.options,e)},((Ei.prototype=Object.create(H.prototype)).constructor=Ei).prototype.toJSON=function(){var e=H.prototype.toJSON.call(this);return Mi(this.parameters.shapes,this.parameters.options,e)};var ko={generateTopUV:function(e,t,n,r,a){e=t[3*r],r=t[3*r+1];var s=t[3*a];return a=t[3*a+1],[new i(t[3*n],t[3*n+1]),new i(e,r),new i(s,a)]},generateSideWallUV:function(e,t,n,r,a,s){e=t[3*n];var o=t[3*n+1];n=t[3*n+2];var l=t[3*r],c=t[3*r+1];r=t[3*r+2];var h=t[3*a],u=t[3*a+1];a=t[3*a+2];var d=t[3*s],p=t[3*s+1];return t=t[3*s+2],Math.abs(o-c)<.01?[new i(e,1-n),new i(l,1-r),new i(h,1-a),new i(d,1-t)]:[new i(o,1-n),new i(c,1-r),new i(u,1-a),new i(p,1-t)]}};(Si.prototype=Object.create(S.prototype)).constructor=Si,(Ci.prototype=Object.create(Ei.prototype)).constructor=Ci,(Ai.prototype=Object.create(S.prototype)).constructor=Ai,(Pi.prototype=Object.create(H.prototype)).constructor=Pi,(Li.prototype=Object.create(S.prototype)).constructor=Li,(Ri.prototype=Object.create(H.prototype)).constructor=Ri,(Oi.prototype=Object.create(S.prototype)).constructor=Oi,(Ii.prototype=Object.create(H.prototype)).constructor=Ii,((Di.prototype=Object.create(S.prototype)).constructor=Di).prototype.toJSON=function(){var e=S.prototype.toJSON.call(this);return Ni(this.parameters.shapes,e)},((ki.prototype=Object.create(H.prototype)).constructor=ki).prototype.toJSON=function(){var e=H.prototype.toJSON.call(this);return Ni(this.parameters.shapes,e)},(zi.prototype=Object.create(H.prototype)).constructor=zi,(Bi.prototype=Object.create(S.prototype)).constructor=Bi,(Hi.prototype=Object.create(H.prototype)).constructor=Hi,(Fi.prototype=Object.create(Bi.prototype)).constructor=Fi,(Ui.prototype=Object.create(Hi.prototype)).constructor=Ui,(Gi.prototype=Object.create(S.prototype)).constructor=Gi,(Vi.prototype=Object.create(H.prototype)).constructor=Vi;var No=Object.freeze({WireframeGeometry:Ut,ParametricGeometry:Gt,ParametricBufferGeometry:Vt,TetrahedronGeometry:Xt,TetrahedronBufferGeometry:Yt,OctahedronGeometry:qt,OctahedronBufferGeometry:$t,IcosahedronGeometry:Zt,IcosahedronBufferGeometry:Jt,DodecahedronGeometry:Kt,DodecahedronBufferGeometry:Qt,PolyhedronGeometry:jt,PolyhedronBufferGeometry:Wt,TubeGeometry:ei,TubeBufferGeometry:ti,TorusKnotGeometry:ii,TorusKnotBufferGeometry:ni,TorusGeometry:ri,TorusBufferGeometry:ai,TextGeometry:Si,TextBufferGeometry:Ci,SphereGeometry:Ai,SphereBufferGeometry:Pi,RingGeometry:Li,RingBufferGeometry:Ri,PlaneGeometry:G,PlaneBufferGeometry:V,LatheGeometry:Oi,LatheBufferGeometry:Ii,ShapeGeometry:Di,ShapeBufferGeometry:ki,ExtrudeGeometry:Ti,ExtrudeBufferGeometry:Ei,EdgesGeometry:zi,ConeGeometry:Fi,ConeBufferGeometry:Ui,CylinderGeometry:Bi,CylinderBufferGeometry:Hi,CircleGeometry:Gi,CircleBufferGeometry:Vi,BoxGeometry:F,BoxBufferGeometry:U});((ji.prototype=Object.create(j.prototype)).constructor=ji).prototype.isShadowMaterial=!0,ji.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this},((Wi.prototype=Object.create(W.prototype)).constructor=Wi).prototype.isRawShaderMaterial=!0,((Xi.prototype=Object.create(j.prototype)).constructor=Xi).prototype.isMeshStandardMaterial=!0,Xi.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Yi.prototype=Object.create(Xi.prototype)).constructor=Yi).prototype.isMeshPhysicalMaterial=!0,Yi.prototype.copy=function(e){return Xi.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},((qi.prototype=Object.create(j.prototype)).constructor=qi).prototype.isMeshPhongMaterial=!0,qi.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(($i.prototype=Object.create(qi.prototype)).constructor=$i).prototype.isMeshToonMaterial=!0,$i.prototype.copy=function(e){return qi.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},((Zi.prototype=Object.create(j.prototype)).constructor=Zi).prototype.isMeshNormalMaterial=!0,Zi.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Ji.prototype=Object.create(j.prototype)).constructor=Ji).prototype.isMeshLambertMaterial=!0,Ji.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Ki.prototype=Object.create(j.prototype)).constructor=Ki).prototype.isMeshMatcapMaterial=!0,Ki.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Qi.prototype=Object.create(Rt.prototype)).constructor=Qi).prototype.isLineDashedMaterial=!0,Qi.prototype.copy=function(e){return Rt.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var zo=Object.freeze({ShadowMaterial:ji,SpriteMaterial:Mt,RawShaderMaterial:Wi,ShaderMaterial:W,PointsMaterial:kt,MeshPhysicalMaterial:Yi,MeshStandardMaterial:Xi,MeshPhongMaterial:qi,MeshToonMaterial:$i,MeshNormalMaterial:Zi,MeshLambertMaterial:Ji,MeshDepthMaterial:st,MeshDistanceMaterial:ot,MeshBasicMaterial:q,MeshMatcapMaterial:Ki,LineDashedMaterial:Qi,LineBasicMaterial:Rt,Material:j}),Bo={arraySlice:function(e,t,i){return Bo.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,i=Array(t),n=0;n!==t;++n)i[n]=n;return i.sort(function(t,i){return e[t]-e[i]}),i},sortedArray:function(e,t,i){for(var n=e.length,r=new e.constructor(n),a=0,s=0;s!==n;++a)for(var o=i[a]*t,l=0;l!==t;++l)r[s++]=e[o+l];return r},flattenJSON:function(e,t,i,n){for(var r=1,a=e[0];void 0!==a&&void 0===a[n];)a=e[r++];if(void 0!==a){var s=a[n];if(void 0!==s)if(Array.isArray(s))for(;void 0!==(s=a[n])&&(t.push(a.time),i.push.apply(i,s)),void 0!==(a=e[r++]););else if(void 0!==s.toArray)for(;void 0!==(s=a[n])&&(t.push(a.time),s.toArray(i,i.length)),void 0!==(a=e[r++]););else for(;void 0!==(s=a[n])&&(t.push(a.time),i.push(s)),void 0!==(a=e[r++]););}}};Object.assign(en.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{i:{n:if(!(e<n)){for(var a=i+2;;){if(void 0===n){if(e<r)break n;return this._cachedIndex=i=t.length,this.afterEnd_(i-1,e,r)}if(i===a)break;if(r=n,e<(n=t[++i]))break t}n=t.length;break i}if(r<=e)break e;for(e<(a=t[1])&&(i=2,r=a),a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(i===a)break;if(n=r,(r=t[--i-1])<=e)break t}n=i,i=0}for(;i<n;)e<t[r=i+n>>>1]?n=r:i=r+1;if(n=t[i],void 0===(r=t[i-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return this._cachedIndex=i=t.length,this.afterEnd_(i-1,r,e)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize;e*=n;for(var r=0;r!==n;++r)t[r]=i[e+r];return t},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(en.prototype,{beforeStart_:en.prototype.copySampleValue_,afterEnd_:en.prototype.copySampleValue_}),tn.prototype=Object.assign(Object.create(en.prototype),{constructor:tn,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,i){var n=this.parameterPositions,r=e-2,a=e+1,s=n[r],o=n[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=e,s=2*t-i;break;case 2402:s=t+n[r=n.length-2]-n[r+1];break;default:r=e,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*i-t;break;case 2402:o=i+n[a=1]-n[0];break;default:a=e-1,o=t}e=.5*(i-t),n=this.valueSize,this._weightPrev=e/(t-s),this._weightNext=e/(o-i),this._offsetPrev=r*n,this._offsetNext=a*n},interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(e*=s)-s,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,u=this._weightNext,d=(i-t)/(n-t);for(t=-h*(n=(i=d*d)*d)+2*h*i-h*d,h=(1+h)*n+(-1.5-2*h)*i+(-.5+h)*d+1,d=(-1-u)*n+(1.5+u)*i+.5*d,u=u*n-u*i,i=0;i!==s;++i)r[i]=t*a[l+i]+h*a[o+i]+d*a[e+i]+u*a[c+i];return r}}),nn.prototype=Object.assign(Object.create(en.prototype),{constructor:nn,interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(e*=s)-s;for(i=1-(t=(i-t)/(n-t)),n=0;n!==s;++n)r[n]=a[o+n]*i+a[e+n]*t;return r}}),rn.prototype=Object.assign(Object.create(en.prototype),{constructor:rn,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(an,{toJSON:function(e){var t=e.constructor;if(void 0!==t.toJSON)t=t.toJSON(e);else{t={name:e.name,times:Bo.convertArray(e.times,Array),values:Bo.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(an.prototype,{constructor:an,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new rn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new nn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new tn(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)return this.createInterpolant=t,this;if(t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,n=i.length,r=0,a=n-1;r!==n&&i[r]<e;)++r;for(;-1!==a&&i[a]>t;)--a;return++a,0===r&&a===n||(a<=r&&(r=(a=Math.max(a,1))-1),e=this.getValueSize(),this.times=Bo.arraySlice(i,r,a),this.values=Bo.arraySlice(this.values,r*e,a*e)),this},validate:function(){var e=!0,t=this.getValueSize();0!=t-Math.floor(t)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var i=this.times;t=this.values;var n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var r=null,a=0;a!==n;a++){var s=i[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==r&&s<r){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,r),e=!1;break}r=s}if(void 0!==t&&Bo.isTypedArray(t))for(a=0,i=t.length;a!==i;++a)if(n=t[a],isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,n),e=!1;break}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,a=e.length-1,s=1;s<a;++s){var o=!1,l=e[s];if(l!==e[s+1]&&(1!==s||l!==l[0]))if(n)o=!0;else{var c=s*i,h=c-i,u=c+i;for(l=0;l!==i;++l){var d=t[c+l];if(d!==t[h+l]||d!==t[u+l]){o=!0;break}}}if(o){if(s!==r)for(e[r]=e[s],o=s*i,c=r*i,l=0;l!==i;++l)t[c+l]=t[o+l];++r}}if(0<a){for(e[r]=e[a],o=a*i,c=r*i,l=0;l!==i;++l)t[c+l]=t[o+l];++r}return r!==e.length&&(this.times=Bo.arraySlice(e,0,r),this.values=Bo.arraySlice(t,0,r*i)),this},clone:function(){var e=Bo.arraySlice(this.times,0),t=Bo.arraySlice(this.values,0);return(e=new this.constructor(this.name,e,t)).createInterpolant=this.createInterpolant,e}}),sn.prototype=Object.assign(Object.create(an.prototype),{constructor:sn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),on.prototype=Object.assign(Object.create(an.prototype),{constructor:on,ValueTypeName:"color"}),ln.prototype=Object.assign(Object.create(an.prototype),{constructor:ln,ValueTypeName:"number"}),cn.prototype=Object.assign(Object.create(en.prototype),{constructor:cn,interpolate_:function(e,t,i,n){var a=this.resultBuffer,s=this.sampleValues,o=this.valueSize;for(t=(i-t)/(n-t),i=(e*=o)+o;e!==i;e+=4)r.slerpFlat(a,0,s,e-o,s,e,t);return a}}),hn.prototype=Object.assign(Object.create(an.prototype),{constructor:hn,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new cn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),un.prototype=Object.assign(Object.create(an.prototype),{constructor:un,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),dn.prototype=Object.assign(Object.create(an.prototype),{constructor:dn,ValueTypeName:"vector"}),Object.assign(pn,{parse:function(e){for(var t=[],i=e.tracks,n=1/(e.fps||1),r=0,a=i.length;r!==a;++r)t.push(fn(i[r]).scale(n));return new pn(e.name,e.duration,t)},toJSON:function(e){var t=[],i=e.tracks;e={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid};for(var n=0,r=i.length;n!==r;++n)t.push(an.toJSON(i[n]));return e},CreateFromMorphTargetSequence:function(e,t,i,n){for(var r=t.length,a=[],s=0;s<r;s++){var o=[],l=[];o.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);var c=Bo.getKeyframeOrder(o);o=Bo.sortedArray(o,1,c),l=Bo.sortedArray(l,1,c),n||0!==o[0]||(o.push(r),l.push(l[0])),a.push(new ln(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/i))}return new pn(e,-1,a)},findByName:function(e,t){var i=e;for(Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations),e=0;e<i.length;e++)if(i[e].name===t)return i[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,a=0,s=e.length;a<s;a++){var o=e[a],l=o.name.match(r);if(l&&1<l.length){var c=l[1];(l=n[c])||(n[c]=l=[]),l.push(o)}}for(c in e=[],n)e.push(pn.CreateFromMorphTargetSequence(c,n[c],t,i));return e},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var i=function(e,t,i,n,r){if(0!==i.length){var a=[],s=[];Bo.flattenJSON(i,a,s,n),0!==a.length&&r.push(new e(t,a,s))}},n=[],r=e.name||"default",a=e.length||-1,s=e.fps||30;e=e.hierarchy||[];for(var o=0;o<e.length;o++){var l=e[o].keys;if(l&&0!==l.length)if(l[0].morphTargets){a={};for(var c=0;c<l.length;c++)if(l[c].morphTargets)for(var h=0;h<l[c].morphTargets.length;h++)a[l[c].morphTargets[h]]=-1;for(var u in a){var d=[],p=[];for(h=0;h!==l[c].morphTargets.length;++h){var f=l[c];d.push(f.time),p.push(f.morphTarget===u?1:0)}n.push(new ln(".morphTargetInfluence["+u+"]",d,p))}a=a.length*(s||1)}else i(dn,(c=".bones["+t[o].name+"]")+".position",l,"pos",n),i(hn,c+".quaternion",l,"rot",n),i(dn,c+".scale",l,"scl",n)}return 0===n.length?null:new pn(r,a,n)}}),Object.assign(pn.prototype,{resetDuration:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new pn(this.name,this.duration,e)}});var Ho={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Fo=new mn,Uo={};Object.assign(gn.prototype,{load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Ho.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;if(void 0===Uo[e]){var s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){i=s[1];var o=!!s[2];s=s[3],s=decodeURIComponent(s),o&&(s=atob(s));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":var c=new Uint8Array(s.length);for(o=0;o<s.length;o++)c[o]=s.charCodeAt(o);var h="blob"===l?new Blob([c.buffer],{type:i}):c.buffer;break;case"document":h=(new DOMParser).parseFromString(s,i);break;case"json":h=JSON.parse(s);break;default:h=s}setTimeout(function(){t&&t(h),r.manager.itemEnd(e)},0)}catch(t){setTimeout(function(){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else{Uo[e]=[],Uo[e].push({onLoad:t,onProgress:i,onError:n});var u=new XMLHttpRequest;for(o in u.open("GET",e,!0),u.addEventListener("load",function(t){var i=this.response;Ho.add(e,i);var n=Uo[e];if(delete Uo[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,s=n.length;a<s;a++){var o=n[a];o.onLoad&&o.onLoad(i)}}else{for(a=0,s=n.length;a<s;a++)(o=n[a]).onError&&o.onError(t);r.manager.itemError(e)}r.manager.itemEnd(e)},!1),u.addEventListener("progress",function(t){for(var i=Uo[e],n=0,r=i.length;n<r;n++){var a=i[n];a.onProgress&&a.onProgress(t)}},!1),u.addEventListener("error",function(t){var i=Uo[e];delete Uo[e];for(var n=0,a=i.length;n<a;n++){var s=i[n];s.onError&&s.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),u.addEventListener("abort",function(t){var i=Uo[e];delete Uo[e];for(var n=0,a=i.length;n<a;n++){var s=i[n];s.onError&&s.onError(t)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),void 0!==this.responseType&&(u.responseType=this.responseType),void 0!==this.withCredentials&&(u.withCredentials=this.withCredentials),u.overrideMimeType&&u.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)u.setRequestHeader(o,this.requestHeader[o]);u.send(null)}return r.manager.itemStart(e),u}Uo[e].push({onLoad:t,onProgress:i,onError:n})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(vn.prototype,{load:function(e,t,i,n){var r=this,a=new gn(r.manager);a.setPath(r.path),a.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},parse:function(e,t){for(var i=[],n=0;n<e.length;n++){var r=pn.parse(e[n]);i.push(r)}t(i)},setPath:function(e){return this.path=e,this}}),Object.assign(yn.prototype,{load:function(e,t,i,n){function r(r){l.load(e[r],function(e){e=a._parser(e,!0),s[r]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},6===(c+=1)&&(1===e.mipmapCount&&(o.minFilter=1006),o.format=e.format,o.needsUpdate=!0,t&&t(o))},i,n)}var a=this,s=[],o=new Bt;o.image=s;var l=new gn(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,h=0,u=e.length;h<u;++h)r(h);else l.load(e,function(e){if((e=a._parser(e,!0)).isCubemap)for(var i=e.mipmaps.length/e.mipmapCount,n=0;n<i;n++){s[n]={mipmaps:[]};for(var r=0;r<e.mipmapCount;r++)s[n].mipmaps.push(e.mipmaps[n*e.mipmapCount+r]),s[n].format=e.format,s[n].width=e.width,s[n].height=e.height}else o.image.width=e.width,o.image.height=e.height,o.mipmaps=e.mipmaps;1===e.mipmapCount&&(o.minFilter=1006),o.format=e.format,o.needsUpdate=!0,t&&t(o)},i,n);return o},setPath:function(e){return this.path=e,this}}),Object.assign(_n.prototype,{load:function(e,t,i,n){var r=this,a=new d,s=new gn(this.manager);return s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(e,function(e){(e=r._parser(e))&&(void 0!==e.image?a.image=e.image:void 0!==e.data&&(a.image.width=e.width,a.image.height=e.height,a.image.data=e.data),a.wrapS=void 0!==e.wrapS?e.wrapS:1001,a.wrapT=void 0!==e.wrapT?e.wrapT:1001,a.magFilter=void 0!==e.magFilter?e.magFilter:1006,a.minFilter=void 0!==e.minFilter?e.minFilter:1008,a.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(a.format=e.format),void 0!==e.type&&(a.type=e.type),void 0!==e.mipmaps&&(a.mipmaps=e.mipmaps),1===e.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,t&&t(a,e))},i,n),a},setPath:function(e){return this.path=e,this}}),Object.assign(xn.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){function r(){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),Ho.add(e,this),t&&t(this),s.manager.itemEnd(e)}function a(t){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),n&&n(t),s.manager.itemError(e),s.manager.itemEnd(e)}void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var s=this,o=Ho.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");return l.addEventListener("load",r,!1),l.addEventListener("error",a,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(bn.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){function r(i){s.load(e[i],function(e){a.images[i]=e,6==++o&&(a.needsUpdate=!0,t&&t(a))},void 0,n)}var a=new oe,s=new xn(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var o=0;for(i=0;i<e.length;++i)r(i);return a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(wn.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){var r=new o,a=new xn(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(i){r.image=i,i=0<e.search(/\.jpe?g($|\?)/i)||0===e.search(/^data:image\/jpeg/),r.format=i?1022:1023,r.needsUpdate=!0,void 0!==t&&t(r)},i,n),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Tn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){return e=this.getUtoTmapping(e),this.getPoint(e,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i=[],n=this.getPoint(0),r=0;for(i.push(0),t=1;t<=e;t++){var a=this.getPoint(t/e);r+=a.distanceTo(n),i.push(r),n=a}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var i=this.getLengths(),n=i.length;t=t||e*i[n-1];for(var r,a=0,s=n-1;a<=s;)if((r=i[e=Math.floor(a+(s-a)/2)]-t)<0)a=e+1;else{if(!(0<r)){s=e;break}s=e-1}return i[e=s]===t?e/(n-1):(e+(t-(a=i[e]))/(i[e+1]-a))/(n-1)},getTangent:function(e){var t=e-1e-4;return t<0&&(t=0),1<(e+=1e-4)&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},computeFrenetFrames:function(e,t){var i,r=new a,s=[],o=[],l=[],c=new a,h=new n;for(i=0;i<=e;i++){var u=i/e;s[i]=this.getTangentAt(u),s[i].normalize()}o[0]=new a,l[0]=new a,i=Number.MAX_VALUE,u=Math.abs(s[0].x);var d=Math.abs(s[0].y),p=Math.abs(s[0].z);for(u<=i&&(i=u,r.set(1,0,0)),d<=i&&(i=d,r.set(0,1,0)),p<=i&&r.set(0,0,1),c.crossVectors(s[0],r).normalize(),o[0].crossVectors(s[0],c),l[0].crossVectors(s[0],o[0]),i=1;i<=e;i++)o[i]=o[i-1].clone(),l[i]=l[i-1].clone(),c.crossVectors(s[i-1],s[i]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(ya.clamp(s[i-1].dot(s[i]),-1,1)),o[i].applyMatrix4(h.makeRotationAxis(c,r))),l[i].crossVectors(s[i],o[i]);if(!0===t)for(r=Math.acos(ya.clamp(o[0].dot(o[e]),-1,1)),r/=e,0<s[0].dot(c.crossVectors(o[0],o[e]))&&(r=-r),i=1;i<=e;i++)o[i].applyMatrix4(h.makeRotationAxis(s[i],r*i)),l[i].crossVectors(s[i],o[i]);return{tangents:s,normals:o,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),((En.prototype=Object.create(Tn.prototype)).constructor=En).prototype.isEllipseCurve=!0,En.prototype.getPoint=function(e,t){t=t||new i;for(var n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;n<r;)r-=n;r<Number.EPSILON&&(r=a?0:n),!0!==this.aClockwise||a||(r=r===n?-n:r-n),n=this.aStartAngle+e*r,e=this.aX+this.xRadius*Math.cos(n);var s=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(n=Math.cos(this.aRotation),r=Math.sin(this.aRotation),e=(a=e-this.aX)*n-(s-=this.aY)*r+this.aX,s=a*r+s*n+this.aY),t.set(e,s)},En.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},En.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},En.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},((Mn.prototype=Object.create(En.prototype)).constructor=Mn).prototype.isArcCurve=!0;var Go=new a,Vo=new Sn,jo=new Sn,Wo=new Sn;((Cn.prototype=Object.create(Tn.prototype)).constructor=Cn).prototype.isCatmullRomCurve3=!0,Cn.prototype.getPoint=function(e,t){t=t||new a;var i=this.points,n=i.length;e*=n-(this.closed?0:1);var r=Math.floor(e);if(e-=r,this.closed?r+=0<r?0:(Math.floor(Math.abs(r)/n)+1)*n:0===e&&r===n-1&&(r=n-2,e=1),this.closed||0<r)var s=i[(r-1)%n];else Go.subVectors(i[0],i[1]).add(i[0]),s=Go;var o=i[r%n],l=i[(r+1)%n];if(i=this.closed||r+2<n?i[(r+2)%n]:(Go.subVectors(i[n-1],i[n-2]).add(i[n-1]),Go),"centripetal"===this.curveType||"chordal"===this.curveType){var c="chordal"===this.curveType?.5:.25;n=Math.pow(s.distanceToSquared(o),c),(r=Math.pow(o.distanceToSquared(l),c))<1e-4&&(r=1),n<1e-4&&(n=r),(c=Math.pow(l.distanceToSquared(i),c))<1e-4&&(c=r),Vo.initNonuniformCatmullRom(s.x,o.x,l.x,i.x,n,r,c),jo.initNonuniformCatmullRom(s.y,o.y,l.y,i.y,n,r,c),Wo.initNonuniformCatmullRom(s.z,o.z,l.z,i.z,n,r,c)}else"catmullrom"===this.curveType&&(Vo.initCatmullRom(s.x,o.x,l.x,i.x,this.tension),jo.initCatmullRom(s.y,o.y,l.y,i.y,this.tension),Wo.initCatmullRom(s.z,o.z,l.z,i.z,this.tension));return t.set(Vo.calc(e),jo.calc(e),Wo.calc(e)),t},Cn.prototype.copy=function(e){Tn.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Cn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Cn.prototype.fromJSON=function(e){Tn.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push((new a).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},((Rn.prototype=Object.create(Tn.prototype)).constructor=Rn).prototype.isCubicBezierCurve=!0,Rn.prototype.getPoint=function(e,t){t=t||new i;var n=this.v0,r=this.v1,a=this.v2,s=this.v3;return t.set(Ln(e,n.x,r.x,a.x,s.x),Ln(e,n.y,r.y,a.y,s.y)),t},Rn.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Rn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Rn.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((On.prototype=Object.create(Tn.prototype)).constructor=On).prototype.isCubicBezierCurve3=!0,On.prototype.getPoint=function(e,t){t=t||new a;var i=this.v0,n=this.v1,r=this.v2,s=this.v3;return t.set(Ln(e,i.x,n.x,r.x,s.x),Ln(e,i.y,n.y,r.y,s.y),Ln(e,i.z,n.z,r.z,s.z)),t},On.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},On.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},On.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((In.prototype=Object.create(Tn.prototype)).constructor=In).prototype.isLineCurve=!0,In.prototype.getPoint=function(e,t){return t=t||new i,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},In.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},In.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},In.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},In.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},In.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((Dn.prototype=Object.create(Tn.prototype)).constructor=Dn).prototype.isLineCurve3=!0,Dn.prototype.getPoint=function(e,t){return t=t||new a,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},Dn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Dn.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Dn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Dn.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((kn.prototype=Object.create(Tn.prototype)).constructor=kn).prototype.isQuadraticBezierCurve=!0,kn.prototype.getPoint=function(e,t){t=t||new i;var n=this.v0,r=this.v1,a=this.v2;return t.set(Pn(e,n.x,r.x,a.x),Pn(e,n.y,r.y,a.y)),t},kn.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},kn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},kn.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((Nn.prototype=Object.create(Tn.prototype)).constructor=Nn).prototype.isQuadraticBezierCurve3=!0,Nn.prototype.getPoint=function(e,t){t=t||new a;var i=this.v0,n=this.v1,r=this.v2;return t.set(Pn(e,i.x,n.x,r.x),Pn(e,i.y,n.y,r.y),Pn(e,i.z,n.z,r.z)),t},Nn.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Nn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Nn.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((zn.prototype=Object.create(Tn.prototype)).constructor=zn).prototype.isSplineCurve=!0,zn.prototype.getPoint=function(e,t){t=t||new i;var n=this.points,r=(n.length-1)*e;r-=e=Math.floor(r);var a=n[0===e?e:e-1],s=n[e],o=n[e>n.length-2?n.length-1:e+1];return n=n[e>n.length-3?n.length-1:e+2],t.set(An(r,a.x,s.x,o.x,n.x),An(r,a.y,s.y,o.y,n.y)),t},zn.prototype.copy=function(e){Tn.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this},zn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e},zn.prototype.fromJSON=function(e){Tn.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new i).fromArray(r))}return this};var Xo=Object.freeze({ArcCurve:Mn,CatmullRomCurve3:Cn,CubicBezierCurve:Rn,CubicBezierCurve3:On,EllipseCurve:En,LineCurve:In,LineCurve3:Dn,QuadraticBezierCurve:kn,QuadraticBezierCurve3:Nn,SplineCurve:zn});Bn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Bn,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new In(t,e))},getPoint:function(e){var t=e*this.getLength(),i=this.getCurveLengths();for(e=0;e<i.length;){if(i[e]>=t)return t=i[e]-t,i=(e=this.curves[e]).getLength(),e.getPointAt(0===i?0:1-t/i);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,i=[],n=0,r=this.curves;n<r.length;n++){var a=r[n];a=a.getPoints(a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e);for(var s=0;s<a.length;s++){var o=a[s];t&&t.equals(o)||(i.push(o),t=o)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(e){Tn.prototype.copy.call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=Tn.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){Tn.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var n=e.curves[t];this.curves.push((new Xo[n.type]).fromJSON(n))}return this}}),Hn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Hn,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new In(this.currentPoint.clone(),new i(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){e=new kn(this.currentPoint.clone(),new i(e,t),new i(n,r)),this.curves.push(e),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,a,s){e=new Rn(this.currentPoint.clone(),new i(e,t),new i(n,r),new i(a,s)),this.curves.push(e),this.currentPoint.set(a,s)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);t=new zn(t),this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,n,r,a){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,a)},absarc:function(e,t,i,n,r,a){this.absellipse(e,t,i,i,n,r,a)},ellipse:function(e,t,i,n,r,a,s,o){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,a,s,o)},absellipse:function(e,t,i,n,r,a,s,o){e=new En(e,t,i,n,r,a,s,o),0<this.curves.length&&((t=e.getPoint(0)).equals(this.currentPoint)||this.lineTo(t.x,t.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e)},copy:function(e){return Bn.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Bn.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Bn.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Fn.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Fn,getPointsHoles:function(e){for(var t=[],i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Hn.prototype.copy.call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=Hn.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){Hn.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var n=e.holes[t];this.holes.push((new Hn).fromJSON(n))}return this}}),Un.prototype=Object.assign(Object.create(M.prototype),{constructor:Un,isLight:!0,copy:function(e){return M.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return(e=M.prototype.toJSON.call(this,e)).object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Gn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Gn,isHemisphereLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Vn.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),jn.prototype=Object.assign(Object.create(Vn.prototype),{constructor:jn,isSpotLightShadow:!0,update:function(e){var t=this.camera,i=2*ya.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height;e=e.distance||t.far,i===t.fov&&n===t.aspect&&e===t.far||(t.fov=i,t.aspect=n,t.far=e,t.updateProjectionMatrix())}}),Wn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Wn,isSpotLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Xn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Xn,isPointLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Yn.prototype=Object.assign(Object.create(pt.prototype),{constructor:Yn,isOrthographicCamera:!0,copy:function(e,t){return pt.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e;if(i+=e,e=n+t,t=n-t,null!==this.view&&this.view.enabled){i=this.zoom/(this.view.width/this.view.fullWidth),t=this.zoom/(this.view.height/this.view.fullHeight);var a=(this.right-this.left)/this.view.width;n=(this.top-this.bottom)/this.view.height,i=(r+=this.view.offsetX/i*a)+this.view.width/i*a,t=(e-=this.view.offsetY/t*n)-this.view.height/t*n}this.projectionMatrix.makeOrthographic(r,i,e,t,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return(e=M.prototype.toJSON.call(this,e)).object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),qn.prototype=Object.assign(Object.create(Vn.prototype),{constructor:qn}),$n.prototype=Object.assign(Object.create(Un.prototype),{constructor:$n,isDirectionalLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Zn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Zn,isAmbientLight:!0}),Jn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Jn,isRectAreaLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return(e=Un.prototype.toJSON.call(this,e)).object.width=this.width,e.object.height=this.height,e}}),Object.assign(Kn.prototype,{load:function(e,t,i,n){var r=this,a=new gn(r.manager);a.setPath(r.path),a.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},parse:function(e){function t(e){return void 0===r[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),r[e]}var r=this.textures,o=new zo[e.type];if(void 0!==e.uuid&&(o.uuid=e.uuid),void 0!==e.name&&(o.name=e.name),void 0!==e.color&&o.color.setHex(e.color),void 0!==e.roughness&&(o.roughness=e.roughness),void 0!==e.metalness&&(o.metalness=e.metalness),void 0!==e.emissive&&o.emissive.setHex(e.emissive),void 0!==e.specular&&o.specular.setHex(e.specular),void 0!==e.shininess&&(o.shininess=e.shininess),void 0!==e.clearCoat&&(o.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(o.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(o.vertexColors=e.vertexColors),void 0!==e.fog&&(o.fog=e.fog),void 0!==e.flatShading&&(o.flatShading=e.flatShading),void 0!==e.blending&&(o.blending=e.blending),void 0!==e.combine&&(o.combine=e.combine),void 0!==e.side&&(o.side=e.side),void 0!==e.opacity&&(o.opacity=e.opacity),void 0!==e.transparent&&(o.transparent=e.transparent),void 0!==e.alphaTest&&(o.alphaTest=e.alphaTest),void 0!==e.depthTest&&(o.depthTest=e.depthTest),void 0!==e.depthWrite&&(o.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(o.colorWrite=e.colorWrite),void 0!==e.wireframe&&(o.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(o.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(o.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(o.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(o.rotation=e.rotation),1!==e.linewidth&&(o.linewidth=e.linewidth),void 0!==e.dashSize&&(o.dashSize=e.dashSize),void 0!==e.gapSize&&(o.gapSize=e.gapSize),void 0!==e.scale&&(o.scale=e.scale),void 0!==e.polygonOffset&&(o.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(o.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(o.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(o.skinning=e.skinning),void 0!==e.morphTargets&&(o.morphTargets=e.morphTargets),void 0!==e.dithering&&(o.dithering=e.dithering),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.uniforms)for(var c in e.uniforms){var h=e.uniforms[c];switch(o.uniforms[c]={},h.type){case"t":o.uniforms[c].value=t(h.value);break;case"c":o.uniforms[c].value=(new _).setHex(h.value);break;case"v2":o.uniforms[c].value=(new i).fromArray(h.value);break;case"v3":o.uniforms[c].value=(new a).fromArray(h.value);break;case"v4":o.uniforms[c].value=(new l).fromArray(h.value);break;case"m3":o.uniforms[c].value=(new s).fromArray(h.value);case"m4":o.uniforms[c].value=(new n).fromArray(h.value);break;default:o.uniforms[c].value=h.value}}if(void 0!==e.defines&&(o.defines=e.defines),void 0!==e.vertexShader&&(o.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(o.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var u in e.extensions)o.extensions[u]=e.extensions[u];return void 0!==e.shading&&(o.flatShading=1===e.shading),void 0!==e.size&&(o.size=e.size),void 0!==e.sizeAttenuation&&(o.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(o.map=t(e.map)),void 0!==e.alphaMap&&(o.alphaMap=t(e.alphaMap),o.transparent=!0),void 0!==e.bumpMap&&(o.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(o.bumpScale=e.bumpScale),void 0!==e.normalMap&&(o.normalMap=t(e.normalMap)),void 0!==e.normalMapType&&(o.normalMapType=e.normalMapType),void 0!==e.normalScale&&(c=e.normalScale,!1===Array.isArray(c)&&(c=[c,c]),o.normalScale=(new i).fromArray(c)),void 0!==e.displacementMap&&(o.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(o.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(o.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(o.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(o.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(o.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(o.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(o.specularMap=t(e.specularMap)),void 0!==e.envMap&&(o.envMap=t(e.envMap)),void 0!==e.envMapIntensity&&(o.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(o.reflectivity=e.reflectivity),void 0!==e.lightMap&&(o.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(o.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(o.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(o.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(o.gradientMap=t(e.gradientMap)),o},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var Yo={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};Object.assign(Qn.prototype,{load:function(e,t,i,n){var r=this,a=new gn(r.manager);a.setPath(r.path),a.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},parse:function(e){var t=new H,i=e.data.index;void 0!==i&&(i=new qo[i.type](i.array),t.setIndex(new C(i,1)));var n=e.data.attributes;for(s in n){var r=n[s];i=new qo[r.type](r.array),t.addAttribute(s,new C(i,r.itemSize,r.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(i=0,n=s.length;i!==n;++i)r=s[i],t.addGroup(r.start,r.count,r.materialIndex);return void 0!==(s=e.data.boundingSphere)&&(i=new a,void 0!==s.center&&i.fromArray(s.center),t.boundingSphere=new f(i,s.radius)),e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var qo={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(er.prototype,{crossOrigin:"anonymous",load:function(e,t,i,n){var r=this,a=void 0===this.path?Yo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a,(a=new gn(r.manager)).setPath(this.path),a.load(e,function(i){var a=null;try{a=JSON.parse(i)}catch(i){return void 0!==n&&n(i),void console.error("THREE:ObjectLoader: Can't parse "+e+".",i.message)}void 0===(i=a.metadata)||void 0===i.type||"geometry"===i.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+e):r.parse(a,t)},i,n)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var i=this.parseShape(e.shapes);i=this.parseGeometries(e.geometries,i);var n=this.parseImages(e.images,function(){void 0!==t&&t(r)});n=this.parseTextures(e.textures,n),n=this.parseMaterials(e.materials,n);var r=this.parseObject(e.object,i,n);return e.animations&&(r.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0===t||t(r),r},parseShape:function(e){var t={};if(void 0!==e)for(var i=0,n=e.length;i<n;i++){var r=(new Fn).fromJSON(e[i]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var i={};if(void 0!==e)for(var n=new Qn,r=0,a=e.length;r<a;r++){var s=e[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":var o=new No[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new No[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new No[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new No[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new No[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new No[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new No[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new No[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new No[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new No[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new No[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new No[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":o=[];for(var l=0,c=s.shapes.length;l<c;l++){var h=t[s.shapes[l]];o.push(h)}o=new No[s.type](o,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(o=[],l=0,c=s.shapes.length;l<c;l++)h=t[s.shapes[l]],o.push(h);void 0!==(l=s.options.extrudePath)&&(s.options.extrudePath=(new Xo[l.type]).fromJSON(l)),o=new No[s.type](o,s.options);break;case"BufferGeometry":o=n.parse(s);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),i[s.uuid]=o}return i},parseMaterials:function(e,t){var i={},n={};if(void 0!==e){var r=new Kn;r.setTextures(t),t=0;for(var a=e.length;t<a;t++){var s=e[t];if("MultiMaterial"===s.type){for(var o=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===i[c.uuid]&&(i[c.uuid]=r.parse(c)),o.push(i[c.uuid])}n[s.uuid]=o}else void 0===i[s.uuid]&&(i[s.uuid]=r.parse(s)),n[s.uuid]=i[s.uuid]}}return n},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],r=pn.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),t.push(r)}return t},parseImages:function(e,t){function i(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}var n=this,r={};if(void 0!==e&&0<e.length){var a=new xn(t=new mn(t));a.setCrossOrigin(this.crossOrigin),t=0;for(var s=e.length;t<s;t++){var o=e[t],l=o.url;if(Array.isArray(l)){r[o.uuid]=[];for(var c=0,h=l.length;c<h;c++){var u=l[c];u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u,r[o.uuid].push(i(u))}}else u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o.url)?o.url:n.resourcePath+o.url,r[o.uuid]=i(u)}}return r},parseTextures:function(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var l=Array.isArray(t[s.image])?new oe(t[s.image]):new o(t[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=i(s.mapping,Qo)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=i(s.wrap[0],el),l.wrapT=i(s.wrap[1],el)),void 0!==s.format&&(l.format=s.format),void 0!==s.type&&(l.type=s.type),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=i(s.minFilter,tl)),void 0!==s.magFilter&&(l.magFilter=i(s.magFilter,tl)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),n[s.uuid]=l}return n},parseObject:function(e,t,i){function n(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function r(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];void 0===i[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(i[a])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}switch(e.type){case"Scene":var a=new wt;void 0!==e.background&&Number.isInteger(e.background)&&(a.background=new _(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new bt(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new xt(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new ft(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Yn(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Zn(e.color,e.intensity);break;case"DirectionalLight":a=new $n(e.color,e.intensity);break;case"PointLight":a=new Xn(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Jn(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Wn(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Gn(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":a=n(e.geometry);var s=r(e.material);a=a.bones&&0<a.bones.length?new At(a,s):new $(a,s),void 0!==e.drawMode&&a.setDrawMode(e.drawMode);break;case"LOD":a=new Ct;break;case"Line":a=new Ot(n(e.geometry),r(e.material),e.mode);break;case"LineLoop":a=new Dt(n(e.geometry),r(e.material));break;case"LineSegments":a=new It(n(e.geometry),r(e.material));break;case"PointCloud":case"Points":a=new Nt(n(e.geometry),r(e.material));break;case"Sprite":a=new St(r(e.material));break;case"Group":a=new dt;break;default:a=new M}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){s=e.children;for(var o=0;o<s.length;o++)a.add(this.parseObject(s[o],t,i))}if("LOD"===e.type)for(e=e.levels,s=0;s<e.length;s++){o=e[s];var l=a.getObjectByProperty("uuid",o.object);void 0!==l&&a.addLevel(l,o.distance)}return a}});var $o,Zo,Jo,Ko,Qo={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},el={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},tl={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};tr.prototype={constructor:tr,setOptions:function(e){return this.options=e,this},load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Ho.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(i){Ho.add(e,i),t&&t(i),r.manager.itemEnd(e)}).catch(function(t){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(ir.prototype,{moveTo:function(e,t){this.currentPath=new Hn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,n){this.currentPath.quadraticCurveTo(e,t,i,n)},bezierCurveTo:function(e,t,i,n,r,a){this.currentPath.bezierCurveTo(e,t,i,n,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i],a=new Fn;a.curves=r.curves,t.push(a)}return t}function n(e,t){for(var i=t.length,n=!1,r=i-1,a=0;a<i;r=a++){var s=t[r],o=t[a],l=o.x-s.x,c=o.y-s.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(s=t[a],l=-l,o=t[r],c=-c),!(e.y<s.y||e.y>o.y))if(e.y===s.y){if(e.x===s.x)return!0}else{if(0==(r=c*(e.x-s.x)-l*(e.y-s.y)))return!0;r<0||(n=!n)}}else if(e.y===s.y&&(o.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=o.x))return!0}return n}var r=Do.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return i(a);if(t=[],1===a.length){var s=a[0],o=new Fn;return o.curves=s.curves,t.push(o),t}var l=!r(a[0].getPoints());l=e?!l:l,o=[];var c=[],h=[],u=0;c[u]=void 0,h[u]=[];for(var d=0,p=a.length;d<p;d++){var f=(s=a[d]).getPoints(),m=r(f);(m=e?!m:m)?(!l&&c[u]&&u++,c[u]={s:new Fn,p:f},c[u].s.curves=s.curves,l&&u++,h[u]=[]):h[u].push({h:s,p:f[0]})}if(!c[0])return i(a);if(1<c.length){for(d=!1,e=[],r=0,a=c.length;r<a;r++)o[r]=[];for(r=0,a=c.length;r<a;r++)for(s=h[r],m=0;m<s.length;m++){for(l=s[m],u=!0,f=0;f<c.length;f++)n(l.p,c[f].p)&&(r!==f&&e.push({froms:r,tos:f,hole:m}),u?(u=!1,o[f].push(l)):d=!0);u&&o[r].push(l)}0<e.length&&(d||(h=o))}for(d=0,r=c.length;d<r;d++)for(o=c[d].s,t.push(o),a=0,s=(e=h[d]).length;a<s;a++)o.holes.push(e[a].h);return t}}),Object.assign(nr.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);var i=[],n=t;t=this.data;var r=Array.from?Array.from(e):String(e).split("");n/=t.resolution;var a=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*n;e=[];for(var s=0,o=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,o-=a;else{var h=n,u=s,d=o;if(c=t.glyphs[c]||t.glyphs["?"]){var p=new ir;if(c.o)for(var f=c._cachedOutline||(c._cachedOutline=c.o.split(" ")),m=0,g=f.length;m<g;)switch(f[m++]){case"m":var v=f[m++]*h+u,y=f[m++]*h+d;p.moveTo(v,y);break;case"l":v=f[m++]*h+u,y=f[m++]*h+d,p.lineTo(v,y);break;case"q":var _=f[m++]*h+u,x=f[m++]*h+d,b=f[m++]*h+u,w=f[m++]*h+d;p.quadraticCurveTo(b,w,_,x);break;case"b":_=f[m++]*h+u,x=f[m++]*h+d,b=f[m++]*h+u,w=f[m++]*h+d,v=f[m++]*h+u,y=f[m++]*h+d,p.bezierCurveTo(b,w,v,y,_,x)}h={offsetX:c.ha*h,path:p}}else h=void 0;s+=h.offsetX,e.push(h.path)}}for(t=0,r=e.length;t<r;t++)Array.prototype.push.apply(i,e[t].toShapes());return i}}),Object.assign(rr.prototype,{load:function(e,t,i,n){var r=this,a=new gn(this.manager);a.setPath(this.path),a.load(e,function(e){try{var i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}e=r.parse(i),t&&t(e)},i,n)},parse:function(e){return new nr(e)},setPath:function(e){return this.path=e,this}}),ar.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,n=t.length;i<n;i+=2){var r=t[i+1];if(t[i].test(e))return r}return null}},Object.assign(ar.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,i){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t,i);return n},createMaterial:($o={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},Zo=new _,Jo=new wn,Ko=new Kn,function(e,t,i){function n(e,n,r,s,o){e=t+e;var l=ar.Handlers.get(e);return e=null!==l?l.load(e):(Jo.setCrossOrigin(i),Jo.load(e)),void 0!==n&&(e.repeat.fromArray(n),1!==n[0]&&(e.wrapS=1e3),1!==n[1]&&(e.wrapT=1e3)),void 0!==r&&e.offset.fromArray(r),void 0!==s&&("repeat"===s[0]&&(e.wrapS=1e3),"mirror"===s[0]&&(e.wrapS=1002),"repeat"===s[1]&&(e.wrapT=1e3),"mirror"===s[1]&&(e.wrapT=1002)),void 0!==o&&(e.anisotropy=o),n=ya.generateUUID(),a[n]=e,n}var r,a={},s={uuid:ya.generateUUID(),type:"MeshLambertMaterial"};for(r in e){var o=e[r];switch(r){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":s.name=o;break;case"blending":s.blending=$o[o];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",r,"is no longer supported.");break;case"colorDiffuse":s.color=Zo.fromArray(o).getHex();break;case"colorSpecular":s.specular=Zo.fromArray(o).getHex();break;case"colorEmissive":s.emissive=Zo.fromArray(o).getHex();break;case"specularCoef":s.shininess=o;break;case"shading":"basic"===o.toLowerCase()&&(s.type="MeshBasicMaterial"),"phong"===o.toLowerCase()&&(s.type="MeshPhongMaterial"),"standard"===o.toLowerCase()&&(s.type="MeshStandardMaterial");break;case"mapDiffuse":s.map=n(o,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":s.emissiveMap=n(o,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":s.lightMap=n(o,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":s.aoMap=n(o,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":s.bumpMap=n(o,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":s.bumpScale=o;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":s.normalMap=n(o,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":s.normalScale=o;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":s.specularMap=n(o,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":s.metalnessMap=n(o,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":s.roughnessMap=n(o,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":s.alphaMap=n(o,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":s.side=1;break;case"doubleSided":s.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),s.opacity=o;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":s[r]=o;break;case"vertexColors":!0===o&&(s.vertexColors=2),"face"===o&&(s.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",r,o)}}return"MeshBasicMaterial"===s.type&&delete s.emissive,"MeshPhongMaterial"!==s.type&&delete s.specular,s.opacity<1&&(s.transparent=!0),Ko.setTextures(a),Ko.parse(s)})});var il,nl,rl,al,sl,ol,ll,cl,hl,ul,dl,pl,fl,ml,gl,vl,yl,_l,xl,bl,wl,Tl,El,Ml,Sl,Cl,Al,Pl,Ll,Rl,Ol,Il,Dl,kl,Nl,zl,Bl,Hl,Fl,Ul,Gl,Vl,jl,Wl,Xl,Yl,ql,$l={getContext:function(){return void 0===il&&(il=new(window.AudioContext||window.webkitAudioContext)),il},setContext:function(e){il=e}};Object.assign(sr.prototype,{load:function(e,t,i,n){var r=new gn(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(e,function(e){e=e.slice(0),$l.getContext().decodeAudioData(e,function(e){t(e)})},i,n)},setPath:function(e){return this.path=e,this}}),Object.assign(or.prototype,{update:(ul=new n,dl=new n,function(e){if(nl!==this||rl!==e.focus||al!==e.fov||sl!==e.aspect*this.aspect||ol!==e.near||ll!==e.far||cl!==e.zoom||hl!==this.eyeSep){nl=this,rl=e.focus,al=e.fov,sl=e.aspect*this.aspect,ol=e.near,ll=e.far,cl=e.zoom;var t=e.projectionMatrix.clone(),i=(hl=this.eyeSep/2)*ol/rl,n=ol*Math.tan(ya.DEG2RAD*al*.5)/cl;dl.elements[12]=-hl,ul.elements[12]=hl;var r=-n*sl+i,a=n*sl+i;t.elements[0]=2*ol/(a-r),t.elements[8]=(a+r)/(a-r),this.cameraL.projectionMatrix.copy(t),r=-n*sl-i,a=n*sl-i,t.elements[0]=2*ol/(a-r),t.elements[8]=(a+r)/(a-r),this.cameraR.projectionMatrix.copy(t)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(dl),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ul)})}),(lr.prototype=Object.create(M.prototype)).constructor=lr,Object.assign(cr.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),hr.prototype=Object.assign(Object.create(M.prototype),{constructor:hr,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:(pl=new a,fl=new r,ml=new a,gl=new a,vl=new cr,function(e){M.prototype.updateMatrixWorld.call(this,e),e=this.context.listener;var t=this.up;if(this.timeDelta=vl.getDelta(),this.matrixWorld.decompose(pl,fl,ml),gl.set(0,0,-1).applyQuaternion(fl),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(pl.x,i),e.positionY.linearRampToValueAtTime(pl.y,i),e.positionZ.linearRampToValueAtTime(pl.z,i),e.forwardX.linearRampToValueAtTime(gl.x,i),e.forwardY.linearRampToValueAtTime(gl.y,i),e.forwardZ.linearRampToValueAtTime(gl.z,i),e.upX.linearRampToValueAtTime(t.x,i),e.upY.linearRampToValueAtTime(t.y,i),e.upZ.linearRampToValueAtTime(t.z,i)}else e.setPosition(pl.x,pl.y,pl.z),e.setOrientation(gl.x,gl.y,gl.z,t.x,t.y,t.z)})}),ur.prototype=Object.assign(Object.create(M.prototype),{constructor:ur,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),dr.prototype=Object.assign(Object.create(ur.prototype),{constructor:dr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this},updateMatrixWorld:(yl=new a,_l=new r,xl=new a,bl=new a,function(e){if(M.prototype.updateMatrixWorld.call(this,e),!1!==this.isPlaying)if(this.matrixWorld.decompose(yl,_l,xl),bl.set(0,0,1).applyQuaternion(_l),(e=this.panner).positionX){var t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(yl.x,t),e.positionY.linearRampToValueAtTime(yl.y,t),e.positionZ.linearRampToValueAtTime(yl.z,t),e.orientationX.linearRampToValueAtTime(bl.x,t),e.orientationY.linearRampToValueAtTime(bl.y,t),e.orientationZ.linearRampToValueAtTime(bl.z,t)}else e.setPosition(yl.x,yl.y,yl.z),e.setOrientation(bl.x,bl.y,bl.z)})}),Object.assign(pr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}),Object.assign(fr.prototype,{accumulate:function(e,t){var i=this.buffer,n=this.valueSize;e=e*n+n;var r=this.cumulativeWeight;if(0===r){for(r=0;r!==n;++r)i[e+r]=i[r];r=t}else r+=t,this._mixBufferRegion(i,e,0,t/r,n);this.cumulativeWeight=r},apply:function(e){var t=this.valueSize,i=this.buffer;e=e*t+t;var n=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,n<1&&this._mixBufferRegion(i,e,3*t,1-n,t);for(var a=(n=t)+t;n!==a;++n)if(i[n]!==i[n+t]){r.setValue(i,e);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,i=3*t;this.binding.getValue(e,i);for(var n=t;n!==i;++n)e[n]=e[i+n%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,i,n,r){if(.5<=n)for(n=0;n!==r;++n)e[t+n]=e[i+n]},_slerp:function(e,t,i,n){r.slerpFlat(e,t,e,t,e,i,n)},_lerp:function(e,t,i,n,r){for(var a=1-n,s=0;s!==r;++s){var o=t+s;e[o]=e[o]*a+e[i+s]*n}}}),Object.assign(mr.prototype,{getValue:function(e,t){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(gr,{Composite:mr,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new gr.Composite(e,t,i):new gr(e,t,i)},sanitizeNodeName:(wl=/[\[\]\.:\/]/g,function(e){return e.replace(/\s/g,"_").replace(wl,"")}),parseTrackName:function(){var e="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",t=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");e=/(WCOD+)?/.source.replace("WCOD",e);var i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),n=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),r=new RegExp("^"+t+e+i+n+"$"),a=["material","materials","bones"];return function(e){var t=r.exec(e);if(!t)throw Error("PropertyBinding: Cannot parse trackName: "+e);var i=(t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]}).nodeName&&t.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=t.nodeName.substring(i+1);-1!==a.indexOf(n)&&(t.nodeName=t.nodeName.substring(0,i),t.objectName=n)}if(null===t.propertyName||0===t.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){var n=function(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.name===t||r.uuid===t||(r=n(r.children)))return r}return null};if(e=n(e.children))return e}return null}}),Object.assign(gr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)e[t++]=i[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(e||(this.node=e=gr.findNode(this.rootNode,t.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var a=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(e=e.skeleton.bones,i=0;i<e.length;i++)if(e[i].name===a){a=i;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}if(void 0===(a=e[n]))console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+n+" but it wasn't found.",e);else{if(t=this.Versioning.None,void 0!==(this.targetObject=e).needsUpdate?t=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(t=this.Versioning.MatrixWorldNeedsUpdate),i=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(i=0;i<this.node.geometry.morphAttributes.position.length;i++)if(e.geometry.morphAttributes.position[i].name===r){r=i;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(i=0;i<this.node.geometry.morphTargets.length;i++)if(e.geometry.morphTargets[i].name===r){r=i;break}}}i=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(i=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][t]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(gr.prototype,{_getValue_unbound:gr.prototype.getValue,_setValue_unbound:gr.prototype.setValue}),Object.assign(vr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid,p=n[d];if(void 0===p){p=t++,n[d]=p,e.push(u),d=0;for(var f=o;d!==f;++d)s[d].push(new gr(u,r[d],a[d]))}else if(p<i){l=e[p];var m=--i;for(e[n[(f=e[m]).uuid]=p]=f,e[n[d]=m]=u,d=0,f=o;d!==f;++d){var g=s[d],v=g[p];g[p]=g[m],void 0===v&&(v=new gr(u,r[d],a[d])),g[m]=v}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,a=0,s=arguments.length;a!==s;++a){var o=arguments[a],l=o.uuid,c=i[l];if(void 0!==c&&t<=c){var h=t++,u=e[h];for(e[i[u.uuid]=c]=u,e[i[l]=h]=o,o=0,l=r;o!==l;++o){var d=(u=n[o])[c];u[c]=u[h],u[h]=d}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,a=r.length,s=0,o=arguments.length;s!==o;++s){var l=arguments[s].uuid,c=n[l];if(void 0!==c)if(delete n[l],c<i){var h=e[l=--i],u=--t,d=e[u];for(e[n[h.uuid]=c]=h,e[n[d.uuid]=l]=d,e.pop(),h=0,d=a;h!==d;++h){var p=r[h],f=p[u];p[c]=p[l],p[l]=f,p.pop()}}else for(e[n[(d=e[u=--t]).uuid]=c]=d,e.pop(),h=0,d=a;h!==d;++h)(p=r[h])[c]=p[u],p.pop()}this.nCachedObjects_=i},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,n=i[e],r=this._bindings;if(void 0!==n)return r[n];var a=this._paths,s=this._parsedPaths,o=this._objects,l=this.nCachedObjects_,c=Array(o.length);for(n=r.length,i[e]=n,a.push(e),s.push(t),r.push(c),i=l,n=o.length;i!==n;++i)c[i]=new gr(o[i],e,t);return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){var n=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];a[t[e[s]]=i]=o,a.pop(),r[i]=r[s],r.pop(),n[i]=n[s],n.pop()}}}),Object.assign(yr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){i=this._clip.duration;var n=e._clip.duration,r=i/n;e.warp(1,n/i,t),this.warp(r,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var n=this._mixer,r=n.time,a=this._timeScaleInterpolant,s=this.timeScale;return null===a&&(this._timeScaleInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,n[1]=r+i,a[0]=e/s,a[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,n){if(this.enabled){var r=this._startTime;if(null!==r){if((t=(e-r)*i)<0||0===i)return;this._startTime=null,t*=i}if(t*=this._updateTimeScale(e),i=this._updateTime(t),0<(e=this._updateWeight(e))){t=this._interpolants,r=this._propertyBindings;for(var a=0,s=t.length;a!==s;++a)t[a].evaluate(i),r[a].accumulate(n,e)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e,i=this._clip.duration,n=this.loop,r=this._loopCount,a=2202===n;if(0===e)return-1===r?t:a&&1==(1&r)?i-t:t;if(2200===n)e:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),i<=t)t=i;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}else{if(-1===r&&(0<=e?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i<=t||t<0){t-=i*(n=Math.floor(t/i)),r+=Math.abs(n);var s=this.repetitions-r;s<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<e?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(1===s?(e=e<0,this._setEndings(e,!e,a)):this._setEndings(!1,!1,a),this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n}))}if(a&&1==(1&r))return i-(this.time=t)}return this.time=t},_setEndings:function(e,t,i){var n=this._interpolantSettings;n.endingEnd=i?n.endingStart=2401:(n.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,i){var n=this._mixer,r=n.time,a=this._weightInterpolant;return null===a&&(this._weightInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,a[0]=t,n[1]=r+e,a[1]=i,this}}),_r.prototype=Object.assign(Object.create(t.prototype),{constructor:_r,_bindAction:function(e,t){var i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,a=e._propertyBindings;e=e._interpolants;var s=i.uuid,o=this._bindingsByRootAndName,l=o[s];for(void 0===l&&(l={},o[s]=l),o=0;o!==r;++o){var c=n[o],h=c.name,u=l[h];if(void 0===u){if(void 0!==(u=a[o])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,h));continue}++(u=new fr(gr.create(i,h,t&&t._propertyBindings[o].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(u,s,h)}a[o]=u,e[o].resultBuffer=u.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}for(i=0,n=(t=e._propertyBindings).length;i!==n;++i){var r=t[i];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return null!==(e=e._cacheIndex)&&e<this._nActiveActions},_addInactiveAction:function(e,t,i){var n=this._actions,r=this._actionsByClip,a=r[t];void 0===a?(a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a):(t=a.knownActions,e._byClipCacheIndex=t.length,t.push(e)),e._cacheIndex=n.length,n.push(e),a.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex;t[i._cacheIndex=n]=i,t.pop(),e._cacheIndex=null,t=e._clip.uuid;var r=(n=(i=this._actionsByClip)[t]).knownActions,a=r[r.length-1],s=e._byClipCacheIndex;r[a._byClipCacheIndex=s]=a,r.pop(),e._byClipCacheIndex=null,delete n.actionByRoot[(e._localRoot||this._root).uuid],0===r.length&&delete i[t],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=0,i=(e=e._propertyBindings).length;t!==i;++t){var n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r},_addInactiveBinding:function(e,t,i){var n=this._bindingsByRootAndName,r=n[t],a=this._bindings;void 0===r&&(r={},n[t]=r),(r[i]=e)._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid;i=i.path;var r=this._bindingsByRootAndName,a=r[n],s=t[t.length-1];e=e._cacheIndex,t[s._cacheIndex=e]=s,t.pop(),delete a[i];e:{for(var o in a)break e;delete r[n]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&(e[(i=new nn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t]=i),i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];t[e.__cacheIndex=n]=e,t[r.__cacheIndex=i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,n=i.uuid;e=null!==(i="string"==typeof e?pn.findByName(i,e):e)?i.uuid:e;var r=this._actionsByClip[e],a=null;if(void 0!==r){if(void 0!==(a=r.actionByRoot[n]))return a;a=r.knownActions[0],null===i&&(i=a._clip)}return null===i?null:(t=new yr(this,i,t),this._bindAction(t,a),this._addInactiveAction(t,e,n),t)},existingAction:function(e,t){var i=t||this._root;return t=i.uuid,i="string"==typeof e?pn.findByName(i,e):e,void 0!==(e=this._actionsByClip[i?i.uuid:e])&&e.actionByRoot[t]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==t;++r)e[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,s=0;s!==i;++s)t[s]._update(n,e,r,a);for(e=this._bindings,t=this._nActiveBindings,s=0;s!==t;++s)e[s].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions;e=e.uuid;var i=this._actionsByClip,n=i[e];if(void 0!==n){for(var r=0,a=(n=n.knownActions).length;r!==a;++r){var s=n[r];this._deactivateAction(s);var o=s._cacheIndex,l=t[t.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,t[l._cacheIndex=o]=l,t.pop(),this._removeInactiveBindingsForAction(s)}delete i[e]}},uncacheRoot:function(e){e=e.uuid;var t=this._actionsByClip;for(n in t){var i=t[n].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[e];if(void 0!==n)for(var r in n)(e=n[r]).restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,t){null!==(e=this.existingAction(e,t))&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),xr.prototype.clone=function(){return new xr(void 0===this.value.clone?this.value:this.value.clone())},br.prototype=Object.assign(Object.create(H.prototype),{constructor:br,isInstancedBufferGeometry:!0,copy:function(e){return H.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),wr.prototype=Object.assign(Object.create(Tt.prototype),{constructor:wr,isInstancedInterleavedBuffer:!0,copy:function(e){return Tt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Tr.prototype=Object.assign(Object.create(C.prototype),{constructor:Tr,isInstancedBufferAttribute:!0,copy:function(e){return C.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Er.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,i){return Sr(e,this,i=i||[],t),i.sort(Mr),i},intersectObjects:function(e,t,i){if(i=i||[],!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=e.length;n<r;n++)Sr(e[n],this,i,t);return i.sort(Mr),i}}),Object.assign(Cr.prototype,{set:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(e,i),this.phi=Math.acos(ya.clamp(t/this.radius,-1,1))),this}}),Object.assign(Ar.prototype,{set:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}}),Object.assign(Pr.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(El=new i,function(e,t){return t=El.copy(t).multiplyScalar(.5),this.min.copy(e).sub(t),this.max.copy(e).add(t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new i),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new i),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new i),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new i),t.copy(e).clamp(this.min,this.max)},distanceToPoint:(Tl=new i,function(e){return Tl.copy(e).clamp(this.min,this.max).sub(e).length()}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Lr.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new a),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new a),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new a),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Ml=new a,Sl=new a,function(e,t){return Ml.subVectors(e,this.start),Sl.subVectors(this.end,this.start),e=Sl.dot(Sl),e=Sl.dot(Ml)/e,t&&(e=ya.clamp(e,0,1)),e}),closestPointToPoint:function(e,t,i){return e=this.closestPointToPointParameter(e,t),void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new a),this.delta(i).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),((Rr.prototype=Object.create(M.prototype)).constructor=Rr).prototype.isImmediateRenderObject=!0,((Or.prototype=Object.create(It.prototype)).constructor=Or).prototype.update=(Cl=new a,Al=new a,Pl=new s,function(){var e=["a","b","c"];this.object.updateMatrixWorld(!0),Pl.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,i=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var r=n.vertices,a=n.faces,s=n=0,o=a.length;s<o;s++)for(var l=a[s],c=0,h=l.vertexNormals.length;c<h;c++){var u=l.vertexNormals[c];Cl.copy(r[l[e[c]]]).applyMatrix4(t),Al.copy(u).applyMatrix3(Pl).normalize().multiplyScalar(this.size).add(Cl),i.setXYZ(n,Cl.x,Cl.y,Cl.z),n+=1,i.setXYZ(n,Al.x,Al.y,Al.z),n+=1}else if(n&&n.isBufferGeometry)for(e=n.attributes.position,r=n.attributes.normal,c=n=0,h=e.count;c<h;c++)Cl.set(e.getX(c),e.getY(c),e.getZ(c)).applyMatrix4(t),Al.set(r.getX(c),r.getY(c),r.getZ(c)),Al.applyMatrix3(Pl).normalize().multiplyScalar(this.size).add(Cl),i.setXYZ(n,Cl.x,Cl.y,Cl.z),n+=1,i.setXYZ(n,Al.x,Al.y,Al.z),n+=1;i.needsUpdate=!0}),((Ir.prototype=Object.create(M.prototype)).constructor=Ir).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ir.prototype.update=(Ll=new a,function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Ll.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Ll),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}),((Dr.prototype=Object.create(It.prototype)).constructor=Dr).prototype.updateMatrixWorld=(Rl=new a,Ol=new n,Il=new n,function(e){var t=this.bones,i=this.geometry,n=i.getAttribute("position");Il.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<t.length;r++){var s=t[r];s.parent&&s.parent.isBone&&(Ol.multiplyMatrices(Il,s.matrixWorld),Rl.setFromMatrixPosition(Ol),n.setXYZ(a,Rl.x,Rl.y,Rl.z),Ol.multiplyMatrices(Il,s.parent.matrixWorld),Rl.setFromMatrixPosition(Ol),n.setXYZ(a+1,Rl.x,Rl.y,Rl.z),a+=2)}i.getAttribute("position").needsUpdate=!0,M.prototype.updateMatrixWorld.call(this,e)}),((kr.prototype=Object.create($.prototype)).constructor=kr).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},kr.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},((Nr.prototype=Object.create(Ot.prototype)).constructor=Nr).prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);1<t&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},Nr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},((zr.prototype=Object.create(M.prototype)).constructor=zr).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},zr.prototype.update=(Dl=new a,kl=new _,Nl=new _,function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");kl.copy(this.light.color),Nl.copy(this.light.groundColor);for(var i=0,n=t.count;i<n;i++){var r=i<n/2?kl:Nl;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(Dl.setFromMatrixPosition(this.light.matrixWorld).negate())}),(Br.prototype=Object.create(It.prototype)).constructor=Br,(Hr.prototype=Object.create(It.prototype)).constructor=Hr,((Fr.prototype=Object.create(It.prototype)).constructor=Fr).prototype.update=(zl=new a,Bl=new a,Hl=new s,function(){this.object.updateMatrixWorld(!0),Hl.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,i=this.object.geometry,n=i.vertices,r=0,a=0,s=(i=i.faces).length;a<s;a++){var o=i[a],l=o.normal;zl.copy(n[o.a]).add(n[o.b]).add(n[o.c]).divideScalar(3).applyMatrix4(e),Bl.copy(l).applyMatrix3(Hl).normalize().multiplyScalar(this.size).add(zl),t.setXYZ(r,zl.x,zl.y,zl.z),r+=1,t.setXYZ(r,Bl.x,Bl.y,Bl.z),r+=1}t.needsUpdate=!0}),((Ur.prototype=Object.create(M.prototype)).constructor=Ur).prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Ur.prototype.update=(Fl=new a,Ul=new a,Gl=new a,function(){Fl.setFromMatrixPosition(this.light.matrixWorld),Ul.setFromMatrixPosition(this.light.target.matrixWorld),Gl.subVectors(Ul,Fl),this.lightPlane.lookAt(Ul),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ul),this.targetLine.scale.z=Gl.length()}),((Gr.prototype=Object.create(It.prototype)).constructor=Gr).prototype.update=function(){function e(e,a,s,o){if(n.set(a,s,o).unproject(r),void 0!==(e=i[e]))for(a=t.getAttribute("position"),s=0,o=e.length;s<o;s++)a.setXYZ(e[s],n.x,n.y,n.z)}var t,i,n=new a,r=new pt;return function(){t=this.geometry,i=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),((Vr.prototype=Object.create(It.prototype)).constructor=Vr).prototype.update=(Vl=new p,function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Vl.setFromObject(this.object),!Vl.isEmpty()){e=Vl.min;var t=Vl.max,i=this.geometry.attributes.position,n=i.array;n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=t.y,n[5]=t.z,n[6]=e.x,n[7]=e.y,n[8]=t.z,n[9]=t.x,n[10]=e.y,n[11]=t.z,n[12]=t.x,n[13]=t.y,n[14]=e.z,n[15]=e.x,n[16]=t.y,n[17]=e.z,n[18]=e.x,n[19]=e.y,n[20]=e.z,n[21]=t.x,n[22]=e.y,n[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}),Vr.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Vr.prototype.copy=function(e){return It.prototype.copy.call(this,e),this.object=e.object,this},Vr.prototype.clone=function(){return(new this.constructor).copy(this)},((jr.prototype=Object.create(It.prototype)).constructor=jr).prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),M.prototype.updateMatrixWorld.call(this,e))},((Wr.prototype=Object.create(Ot.prototype)).constructor=Wr).prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),M.prototype.updateMatrixWorld.call(this,e)},((Xr.prototype=Object.create(M.prototype)).constructor=Xr).prototype.setDirection=(Yl=new a,function(e){.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Yl.set(e.z,0,-e.x).normalize(),Xl=Math.acos(e.y),this.quaternion.setFromAxisAngle(Yl,Xl))}),Xr.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},Xr.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Xr.prototype.copy=function(e){return M.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Xr.prototype.clone=function(){return(new this.constructor).copy(this)},(Yr.prototype=Object.create(It.prototype)).constructor=Yr,Tn.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Tn.prototype),(e.prototype.constructor=e).prototype.getPoint=t,e},Object.assign(Bn.prototype,{createPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new S,i=0,n=e.length;i<n;i++){var r=e[i];t.vertices.push(new a(r.x,r.y,r.z||0))}return t}}),Object.assign(Hn.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),qr.prototype=Object.create(Cn.prototype),$r.prototype=Object.create(Cn.prototype),Zr.prototype=Object.create(Cn.prototype),Object.assign(Zr.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Br.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Dr.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(ar.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Yo.extractUrlBase(e)}}),Object.assign(er.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Pr.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(p.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Lr.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(ya,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ya.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ya.ceilPowerOfTwo(e)}}),Object.assign(s.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(n.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return void 0===ql&&(ql=new a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),ql.setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,n,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,i,r,a)}}),m.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},r.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(X.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Y.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Y,{barycoordFromPoint:function(e,t,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Y.getBarycoord(e,t,i,n,r)},normal:function(e,t,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Y.getNormal(e,t,i,n)}}),Object.assign(Fn.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ti(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Di(this,e)}}),Object.assign(i.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(l.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(M.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(M.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ct.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Pt.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),At.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Tn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),ft.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Un.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(C.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(H.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(H.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Ei.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(xr.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(j.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(qi.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(W.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(_t.prototype,{clearTarget:function(e,t,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,i,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(_t.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(lt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(c.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(vt.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),ur.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new sr).load(e,function(e){t.setBuffer(e)}),this},pr.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},lr.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Na.crossOrigin=void 0,Na.loadTexture=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new wn;return r.setCrossOrigin(this.crossOrigin),e=r.load(e,i,void 0,n),t&&(e.mapping=t),e},Na.loadTextureCube=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new bn;return r.setCrossOrigin(this.crossOrigin),e=r.load(e,i,void 0,n),t&&(e.mapping=t),e},Na.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Na.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},e.WebGLMultisampleRenderTarget=h,e.WebGLRenderTargetCube=u,e.WebGLRenderTarget=c,e.WebGLRenderer=_t,e.ShaderLib=Ya,e.UniformsLib=Xa,e.UniformsUtils=Ga,e.ShaderChunk=Ua,e.FogExp2=xt,e.Fog=bt,e.Scene=wt,e.Sprite=St,e.LOD=Ct,e.SkinnedMesh=At,e.Skeleton=Pt,e.Bone=Lt,e.Mesh=$,e.LineSegments=It,e.LineLoop=Dt,e.Line=Ot,e.Points=Nt,e.Group=dt,e.VideoTexture=zt,e.DataTexture=d,e.DataTexture3D=le,e.CompressedTexture=Bt,e.CubeTexture=oe,e.CanvasTexture=Ht,e.DepthTexture=Ft,e.Texture=o,e.AnimationLoader=vn,e.CompressedTextureLoader=yn,e.DataTextureLoader=_n,e.CubeTextureLoader=bn,e.TextureLoader=wn,e.ObjectLoader=er,e.MaterialLoader=Kn,e.BufferGeometryLoader=Qn,e.DefaultLoadingManager=Fo,e.LoadingManager=mn,e.ImageLoader=xn,e.ImageBitmapLoader=tr,e.FontLoader=rr,e.FileLoader=gn,e.Loader=ar,e.LoaderUtils=Yo,e.Cache=Ho,e.AudioLoader=sr,e.SpotLightShadow=jn,e.SpotLight=Wn,e.PointLight=Xn,e.RectAreaLight=Jn,e.HemisphereLight=Gn,e.DirectionalLightShadow=qn,e.DirectionalLight=$n,e.AmbientLight=Zn,e.LightShadow=Vn,e.Light=Un,e.StereoCamera=or,e.PerspectiveCamera=ft,e.OrthographicCamera=Yn,e.CubeCamera=lr,e.ArrayCamera=mt,e.Camera=pt,e.AudioListener=hr,e.PositionalAudio=dr,e.AudioContext=$l,e.AudioAnalyser=pr,e.Audio=ur,e.VectorKeyframeTrack=dn,e.StringKeyframeTrack=un,e.QuaternionKeyframeTrack=hn,e.NumberKeyframeTrack=ln,e.ColorKeyframeTrack=on,e.BooleanKeyframeTrack=sn,e.PropertyMixer=fr,e.PropertyBinding=gr,e.KeyframeTrack=an,e.AnimationUtils=Bo,e.AnimationObjectGroup=vr,e.AnimationMixer=_r,e.AnimationClip=pn,e.Uniform=xr,e.InstancedBufferGeometry=br,e.BufferGeometry=H,e.Geometry=S,e.InterleavedBufferAttribute=Et,e.InstancedInterleavedBuffer=wr,e.InterleavedBuffer=Tt,e.InstancedBufferAttribute=Tr,e.Face3=w,e.Object3D=M,e.Raycaster=Er,e.Layers=E,e.EventDispatcher=t,e.Clock=cr,e.QuaternionLinearInterpolant=cn,e.LinearInterpolant=nn,e.DiscreteInterpolant=rn,e.CubicInterpolant=tn,e.Interpolant=en,e.Triangle=Y,e.Math=ya,e.Spherical=Cr,e.Cylindrical=Ar,e.Plane=m,e.Frustum=g,e.Sphere=f,e.Ray=X,e.Matrix4=n,e.Matrix3=s,e.Box3=p,e.Box2=Pr,e.Line3=Lr,e.Euler=T,e.Vector4=l,e.Vector3=a,e.Vector2=i,e.Quaternion=r,e.Color=_,e.ImmediateRenderObject=Rr,e.VertexNormalsHelper=Or,e.SpotLightHelper=Ir,e.SkeletonHelper=Dr,e.PointLightHelper=kr,e.RectAreaLightHelper=Nr,e.HemisphereLightHelper=zr,e.GridHelper=Br,e.PolarGridHelper=Hr,e.FaceNormalsHelper=Fr,e.DirectionalLightHelper=Ur,e.CameraHelper=Gr,e.BoxHelper=Vr,e.Box3Helper=jr,e.PlaneHelper=Wr,e.ArrowHelper=Xr,e.AxesHelper=Yr,e.Shape=Fn,e.Path=Hn,e.ShapePath=ir,e.Font=nr,e.CurvePath=Bn,e.Curve=Tn,e.ImageUtils=Na,e.ShapeUtils=Do,e.WebGLUtils=ut,e.WireframeGeometry=Ut,e.ParametricGeometry=Gt,e.ParametricBufferGeometry=Vt,e.TetrahedronGeometry=Xt,e.TetrahedronBufferGeometry=Yt,e.OctahedronGeometry=qt,e.OctahedronBufferGeometry=$t,e.IcosahedronGeometry=Zt,e.IcosahedronBufferGeometry=Jt,e.DodecahedronGeometry=Kt,e.DodecahedronBufferGeometry=Qt,e.PolyhedronGeometry=jt,e.PolyhedronBufferGeometry=Wt,e.TubeGeometry=ei,e.TubeBufferGeometry=ti,e.TorusKnotGeometry=ii,e.TorusKnotBufferGeometry=ni,e.TorusGeometry=ri,e.TorusBufferGeometry=ai,e.TextGeometry=Si,e.TextBufferGeometry=Ci,e.SphereGeometry=Ai,e.SphereBufferGeometry=Pi,e.RingGeometry=Li,e.RingBufferGeometry=Ri,e.PlaneGeometry=G,e.PlaneBufferGeometry=V,e.LatheGeometry=Oi,e.LatheBufferGeometry=Ii,e.ShapeGeometry=Di,e.ShapeBufferGeometry=ki,e.ExtrudeGeometry=Ti,e.ExtrudeBufferGeometry=Ei,e.EdgesGeometry=zi,e.ConeGeometry=Fi,e.ConeBufferGeometry=Ui,e.CylinderGeometry=Bi,e.CylinderBufferGeometry=Hi,e.CircleGeometry=Gi,e.CircleBufferGeometry=Vi,e.BoxGeometry=F,e.CubeGeometry=F,e.BoxBufferGeometry=U,e.ShadowMaterial=ji,e.SpriteMaterial=Mt,e.RawShaderMaterial=Wi,e.ShaderMaterial=W,e.PointsMaterial=kt,e.MeshPhysicalMaterial=Yi,e.MeshStandardMaterial=Xi,e.MeshPhongMaterial=qi,e.MeshToonMaterial=$i,e.MeshNormalMaterial=Zi,e.MeshLambertMaterial=Ji,e.MeshDepthMaterial=st,e.MeshDistanceMaterial=ot,e.MeshBasicMaterial=q,e.MeshMatcapMaterial=Ki,e.LineDashedMaterial=Qi,e.LineBasicMaterial=Rt,e.Material=j,e.Float64BufferAttribute=N,e.Float32BufferAttribute=k,e.Uint32BufferAttribute=D,e.Int32BufferAttribute=I,e.Uint16BufferAttribute=O,e.Int16BufferAttribute=R,e.Uint8ClampedBufferAttribute=L,e.Uint8BufferAttribute=P,e.Int8BufferAttribute=A,e.BufferAttribute=C,e.ArcCurve=Mn,e.CatmullRomCurve3=Cn,e.CubicBezierCurve=Rn,e.CubicBezierCurve3=On,e.EllipseCurve=En,e.LineCurve=In,e.LineCurve3=Dn,e.QuadraticBezierCurve=kn,e.QuadraticBezierCurve3=Nn,e.SplineCurve=zn,e.REVISION="101",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=0,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.FrontSide=0,e.BackSide=1,e.DoubleSide=2,e.FlatShading=1,e.SmoothShading=2,e.NoColors=0,e.FaceColors=1,e.VertexColors=2,e.NoBlending=0,e.NormalBlending=1,e.AdditiveBlending=2,e.SubtractiveBlending=3,e.MultiplyBlending=4,e.CustomBlending=5,e.AddEquation=100,e.SubtractEquation=101,e.ReverseSubtractEquation=102,e.MinEquation=103,e.MaxEquation=104,e.ZeroFactor=200,e.OneFactor=201,e.SrcColorFactor=202,e.OneMinusSrcColorFactor=203,e.SrcAlphaFactor=204,e.OneMinusSrcAlphaFactor=205,e.DstAlphaFactor=206,e.OneMinusDstAlphaFactor=207,e.DstColorFactor=208,e.OneMinusDstColorFactor=209,e.SrcAlphaSaturateFactor=210,e.NeverDepth=0,e.AlwaysDepth=1,e.LessDepth=2,e.LessEqualDepth=3,e.EqualDepth=4,e.GreaterEqualDepth=5,e.GreaterDepth=6,e.NotEqualDepth=7,e.MultiplyOperation=0,e.MixOperation=1,e.AddOperation=2,e.NoToneMapping=0,e.LinearToneMapping=1,e.ReinhardToneMapping=2,e.Uncharted2ToneMapping=3,e.CineonToneMapping=4,e.ACESFilmicToneMapping=5,e.UVMapping=300,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.SphericalReflectionMapping=305,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.RepeatWrapping=1e3,e.ClampToEdgeWrapping=1001,e.MirroredRepeatWrapping=1002,e.NearestFilter=1003,e.NearestMipMapNearestFilter=1004,e.NearestMipMapLinearFilter=1005,e.LinearFilter=1006,e.LinearMipMapNearestFilter=1007,e.LinearMipMapLinearFilter=1008,e.UnsignedByteType=1009,e.ByteType=1010,e.ShortType=1011,e.UnsignedShortType=1012,e.IntType=1013,e.UnsignedIntType=1014,e.FloatType=1015,e.HalfFloatType=1016,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedInt248Type=1020,e.AlphaFormat=1021,e.RGBFormat=1022,e.RGBAFormat=1023,e.LuminanceFormat=1024,e.LuminanceAlphaFormat=1025,e.RGBEFormat=1023,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.RedFormat=1028,e.RGB_S3TC_DXT1_Format=33776,e.RGBA_S3TC_DXT1_Format=33777,e.RGBA_S3TC_DXT3_Format=33778,e.RGBA_S3TC_DXT5_Format=33779,e.RGB_PVRTC_4BPPV1_Format=35840,e.RGB_PVRTC_2BPPV1_Format=35841,e.RGBA_PVRTC_4BPPV1_Format=35842,e.RGBA_PVRTC_2BPPV1_Format=35843,e.RGB_ETC1_Format=36196,e.RGBA_ASTC_4x4_Format=37808,e.RGBA_ASTC_5x4_Format=37809,e.RGBA_ASTC_5x5_Format=37810,e.RGBA_ASTC_6x5_Format=37811,e.RGBA_ASTC_6x6_Format=37812,e.RGBA_ASTC_8x5_Format=37813,e.RGBA_ASTC_8x6_Format=37814,e.RGBA_ASTC_8x8_Format=37815,e.RGBA_ASTC_10x5_Format=37816,e.RGBA_ASTC_10x6_Format=37817,e.RGBA_ASTC_10x8_Format=37818,e.RGBA_ASTC_10x10_Format=37819,e.RGBA_ASTC_12x10_Format=37820,e.RGBA_ASTC_12x12_Format=37821,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=0,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=3e3,e.sRGBEncoding=3001,e.GammaEncoding=3007,e.RGBEEncoding=3002,e.LogLuvEncoding=3003,e.RGBM7Encoding=3004,e.RGBM16Encoding=3005,e.RGBDEncoding=3006,e.BasicDepthPacking=3200,e.RGBADepthPacking=3201,e.TangentSpaceNormalMap=0,e.ObjectSpaceNormalMap=1,e.Face4=function(e,t,i,n,r,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new w(e,t,i,r,a,s)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,(e.materials=e).clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Nt(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new St(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Nt(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new kt(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new kt(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new kt(e)},e.Vertex=function(e,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new a(e,t,i)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new C(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new A(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new P(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new L(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new R(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new O(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new I(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new D(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new k(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new N(e,t)},e.ClosedSplineCurve3=qr,e.SplineCurve3=$r,e.Spline=Zr,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Yr(e)},e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Vr(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new It(new zi(e.geometry),new Rt({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new It(new Ut(e.geometry),new Rt({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new gn(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new _n(e)},e.GeometryUtils={merge:function(e,t,i){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();var n=t.matrix;t=t.geometry}e.merge(t,n,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},e.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.dat={})}(this,function(e){"use strict";function t(e,t){var i=e.__state.conversionName.toString(),n=Math.round(e.r),r=Math.round(e.g),a=Math.round(e.b),s=e.a,o=Math.round(e.h),l=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===i||"SIX_CHAR_HEX"===i){for(var h=e.hex.toString(16);h.length<6;)h="0"+h;return"#"+h}return"CSS_RGB"===i?"rgb("+n+","+r+","+a+")":"CSS_RGBA"===i?"rgba("+n+","+r+","+a+","+s+")":"HEX"===i?"0x"+e.hex.toString(16):"RGB_ARRAY"===i?"["+n+","+r+","+a+"]":"RGBA_ARRAY"===i?"["+n+","+r+","+a+","+s+"]":"RGB_OBJ"===i?"{r:"+n+",g:"+r+",b:"+a+"}":"RGBA_OBJ"===i?"{r:"+n+",g:"+r+",b:"+a+",a:"+s+"}":"HSV_OBJ"===i?"{h:"+o+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===i?"{h:"+o+",s:"+l+",v:"+c+",a:"+s+"}":"unknown format"}var i=Array.prototype.forEach,n=Array.prototype.slice,r={BREAK:{},extend:function(e){return this.each(n.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(i){this.isUndefined(t[i])||(e[i]=t[i])}.bind(this))},this),e},defaults:function(e){return this.each(n.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(i){this.isUndefined(e[i])&&(e[i]=t[i])}.bind(this))},this),e},compose:function(){var e=n.call(arguments);return function(){for(var t=n.call(arguments),i=e.length-1;0<=i;i--)t=[e[i].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(i&&e.forEach&&e.forEach===i)e.forEach(t,n);else if(e.length===e.length+0){var r,a=void 0;for(a=0,r=e.length;a<r;a++)if(a in e&&t.call(n,e[a],a)===this.BREAK)return}else for(var s in e)if(t.call(n,e[s],s)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var n=void 0;return function(){var r=this,a=arguments,s=i||!n;clearTimeout(n),n=setTimeout(function(){n=null,i||e.apply(r,a)},t),s&&e.apply(r,a)}},toArray:function(e){return e.toArray?e.toArray():n.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},a=[{litmus:r.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:t},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:t},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:t},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:t}}},{litmus:r.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:r.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:r.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(r.isNumber(e.r)&&r.isNumber(e.g)&&r.isNumber(e.b)&&r.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(r.isNumber(e.r)&&r.isNumber(e.g)&&r.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(r.isNumber(e.h)&&r.isNumber(e.s)&&r.isNumber(e.v)&&r.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(r.isNumber(e.h)&&r.isNumber(e.s)&&r.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],s=void 0,o=void 0,l=function(){o=!1;var e=1<arguments.length?r.toArray(arguments):arguments[0];return r.each(a,function(t){if(t.litmus(e))return r.each(t.conversions,function(t,i){if(s=t.read(e),!1===o&&!1!==s)return(o=s).conversionName=i,s.conversion=t,r.BREAK}),r.BREAK}),o},c=void 0,h={hsv_to_rgb:function(e,t,i){var n=Math.floor(e/60)%6,r=e/60-Math.floor(e/60),a=i*(1-t),s=i*(1-r*t),o=i*(1-(1-r)*t),l=[[i,o,a],[s,i,a],[a,i,o],[a,s,i],[o,a,i],[i,a,s]][n];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,i){var n=Math.min(e,t,i),r=Math.max(e,t,i),a=r-n,s=void 0;return 0===r?{h:NaN,s:0,v:0}:(s=e===r?(t-i)/a:t===r?2+(i-e)/a:4+(e-t)/a,(s/=6)<0&&(s+=1),{h:360*s,s:a/r,v:r/255})},rgb_to_hex:function(e,t,i){var n=this.hex_with_component(0,2,e);return n=this.hex_with_component(n,1,t),this.hex_with_component(n,0,i)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,i){return i<<(c=8*t)|e&~(255<<c)}},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),f=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0},m=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},v=function(){function e(){if(d(this,e),this.__state=l.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return p(e,[{key:"toString",value:function(){return t(this)}},{key:"toHexString",value:function(){return t(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function y(e,t,i){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||v.recalculateRGB(this,t,i),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(v.recalculateRGB(this,t,i),this.__state.space="RGB"),this.__state[t]=e}})}function _(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||v.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(v.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}v.recalculateRGB=function(e,t,i){if("HEX"===e.__state.space)e.__state[t]=h.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");r.extend(e.__state,h.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},v.recalculateHSV=function(e){var t=h.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:t.s,v:t.v}),r.isNaN(t.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},v.COMPONENTS=["r","g","b","h","s","v","hex","a"],y(v.prototype,"r",2),y(v.prototype,"g",1),y(v.prototype,"b",0),_(v.prototype,"h"),_(v.prototype,"s"),_(v.prototype,"v"),Object.defineProperty(v.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(v.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=h.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var x=function(){function e(t,i){d(this,e),this.initialValue=t[i],this.domElement=document.createElement("div"),this.object=t,this.property=i,this.__onChange=void 0,this.__onFinishChange=void 0}return p(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),b={};r.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){r.each(e,function(e){b[e]=t})});var w=/(\d+(\.\d+)?)px/;function T(e){if("0"===e||r.isUndefined(e))return 0;var t=e.match(w);return r.isNull(t)?0:parseFloat(t[1])}var E={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,i){var n=i,a=t;r.isUndefined(a)&&(a=!0),r.isUndefined(n)&&(n=!0),e.style.position="absolute",a&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,i,n){var a=i||{},s=b[t];if(!s)throw new Error("Event type "+t+" not supported.");var o=document.createEvent(s);switch(s){case"MouseEvents":var l=a.x||a.clientX||0,c=a.y||a.clientY||0;o.initMouseEvent(t,a.bubbles||!1,a.cancelable||!0,window,a.clickCount||1,0,0,l,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var h=o.initKeyboardEvent||o.initKeyEvent;r.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),h(t,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break;default:o.initEvent(t,a.bubbles||!1,a.cancelable||!0)}r.defaults(o,n),e.dispatchEvent(o)},bind:function(e,t,i,n){var r=n||!1;return e.addEventListener?e.addEventListener(t,i,r):e.attachEvent&&e.attachEvent("on"+t,i),E},unbind:function(e,t,i,n){var r=n||!1;return e.removeEventListener?e.removeEventListener(t,i,r):e.detachEvent&&e.detachEvent("on"+t,i),E},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var i=e.className.split(/ +/);-1===i.indexOf(t)&&(i.push(t),e.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return E},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var i=e.className.split(/ +/),n=i.indexOf(t);-1!==n&&(i.splice(n,1),e.className=i.join(" "))}else e.className=void 0;return E},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return T(t["border-left-width"])+T(t["border-right-width"])+T(t["padding-left"])+T(t["padding-right"])+T(t.width)},getHeight:function(e){var t=getComputedStyle(e);return T(t["border-top-width"])+T(t["border-bottom-width"])+T(t["padding-top"])+T(t["padding-bottom"])+T(t.height)},getOffset:function(e){var t=e,i={left:0,top:0};if(t.offsetParent)for(;i.left+=t.offsetLeft,i.top+=t.offsetTop,t=t.offsetParent;);return i},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},M=function(e){function t(e,i){d(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),r=n;return n.__prev=n.getValue(),n.__checkbox=document.createElement("input"),n.__checkbox.setAttribute("type","checkbox"),E.bind(n.__checkbox,"change",function(){r.setValue(!r.__prev)},!1),n.domElement.appendChild(n.__checkbox),n.updateDisplay(),n}return m(t,x),p(t,[{key:"setValue",value:function(e){var i=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),i}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),S=function(e){function t(e,i,n){d(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),s=n,o=a;if(a.__select=document.createElement("select"),r.isArray(s)){var l={};r.each(s,function(e){l[e]=e}),s=l}return r.each(s,function(e,t){var i=document.createElement("option");i.innerHTML=t,i.setAttribute("value",e),o.__select.appendChild(i)}),a.updateDisplay(),E.bind(a.__select,"change",function(){var e=this.options[this.selectedIndex].value;o.setValue(e)}),a.domElement.appendChild(a.__select),a}return m(t,x),p(t,[{key:"setValue",value:function(e){var i=f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),i}},{key:"updateDisplay",value:function(){return E.isActive(this.__select)?this:(this.__select.value=this.getValue(),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(),C=function(e){function t(e,i){d(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),r=n;function a(){r.setValue(r.__input.value)}return n.__input=document.createElement("input"),n.__input.setAttribute("type","text"),E.bind(n.__input,"keyup",a),E.bind(n.__input,"change",a),E.bind(n.__input,"blur",function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),E.bind(n.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),n.updateDisplay(),n.domElement.appendChild(n.__input),n}return m(t,x),p(t,[{key:"updateDisplay",value:function(){return E.isActive(this.__input)||(this.__input.value=this.getValue()),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function A(e){var t=e.toString();return-1<t.indexOf(".")?t.length-t.indexOf(".")-1:0}var P=function(e){function t(e,i,n){d(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),s=n||{};return a.__min=s.min,a.__max=s.max,a.__step=s.step,r.isUndefined(a.__step)?0===a.initialValue?a.__impliedStep=1:a.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(a.initialValue))/Math.LN10))/10:a.__impliedStep=a.__step,a.__precision=A(a.__impliedStep),a}return m(t,x),p(t,[{key:"setValue",value:function(e){var i=e;return void 0!==this.__min&&i<this.__min?i=this.__min:void 0!==this.__max&&i>this.__max&&(i=this.__max),void 0!==this.__step&&i%this.__step!=0&&(i=Math.round(i/this.__step)*this.__step),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,i)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=A(e),this}}]),t}(),L=function(e){function t(e,i,n){d(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n));a.__truncationSuspended=!1;var s=a,o=void 0;function l(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(e){var t=o-e.clientY;s.setValue(s.getValue()+t*s.__impliedStep),o=e.clientY}function h(){E.unbind(window,"mousemove",c),E.unbind(window,"mouseup",h),l()}return a.__input=document.createElement("input"),a.__input.setAttribute("type","text"),E.bind(a.__input,"change",function(){var e=parseFloat(s.__input.value);r.isNaN(e)||s.setValue(e)}),E.bind(a.__input,"blur",function(){l()}),E.bind(a.__input,"mousedown",function(e){E.bind(window,"mousemove",c),E.bind(window,"mouseup",h),o=e.clientY}),E.bind(a.__input,"keydown",function(e){13===e.keyCode&&(s.__truncationSuspended=!0,this.blur(),s.__truncationSuspended=!1,l())}),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return m(t,P),p(t,[{key:"updateDisplay",value:function(){var e,i,n;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),i=this.__precision,n=Math.pow(10,i),Math.round(e*n)/n),f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function R(e,t,i,n,r){return n+(e-t)/(i-t)*(r-n)}var O=function(e){function t(e,i,n,r,a){d(this,t);var s=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,{min:n,max:r,step:a})),o=s;function l(e){e.preventDefault();var t=o.__background.getBoundingClientRect();return o.setValue(R(e.clientX,t.left,t.right,o.__min,o.__max)),!1}function c(){E.unbind(window,"mousemove",l),E.unbind(window,"mouseup",c),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function h(e){var t=e.touches[0].clientX,i=o.__background.getBoundingClientRect();o.setValue(R(t,i.left,i.right,o.__min,o.__max))}function u(){E.unbind(window,"touchmove",h),E.unbind(window,"touchend",u),o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}return s.__background=document.createElement("div"),s.__foreground=document.createElement("div"),E.bind(s.__background,"mousedown",function(e){document.activeElement.blur(),E.bind(window,"mousemove",l),E.bind(window,"mouseup",c),l(e)}),E.bind(s.__background,"touchstart",function(e){1===e.touches.length&&(E.bind(window,"touchmove",h),E.bind(window,"touchend",u),h(e))}),E.addClass(s.__background,"slider"),E.addClass(s.__foreground,"slider-fg"),s.updateDisplay(),s.__background.appendChild(s.__foreground),s.domElement.appendChild(s.__background),s}return m(t,P),p(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),I=function(e){function t(e,i,n){d(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i)),a=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===n?"Fire":n,E.bind(r.__button,"click",function(e){return e.preventDefault(),a.fire(),!1}),E.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return m(t,x),p(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),D=function(e){function t(e,i){d(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));n.__color=new v(n.getValue()),n.__temp=new v(0);var a=n;n.domElement=document.createElement("div"),E.makeSelectable(n.domElement,!1),n.__selector=document.createElement("div"),n.__selector.className="selector",n.__saturation_field=document.createElement("div"),n.__saturation_field.className="saturation-field",n.__field_knob=document.createElement("div"),n.__field_knob.className="field-knob",n.__field_knob_border="2px solid ",n.__hue_knob=document.createElement("div"),n.__hue_knob.className="hue-knob",n.__hue_field=document.createElement("div"),n.__hue_field.className="hue-field",n.__input=document.createElement("input"),n.__input.type="text",n.__input_textShadow="0 1px 1px ",E.bind(n.__input,"keydown",function(e){13===e.keyCode&&f.call(this)}),E.bind(n.__input,"blur",f),E.bind(n.__selector,"mousedown",function(){E.addClass(this,"drag").bind(window,"mouseup",function(){E.removeClass(a.__selector,"drag")})}),E.bind(n.__selector,"touchstart",function(){E.addClass(this,"drag").bind(window,"touchend",function(){E.removeClass(a.__selector,"drag")})});var s,o=document.createElement("div");function c(e){y(e),E.bind(window,"mousemove",y),E.bind(window,"touchmove",y),E.bind(window,"mouseup",u),E.bind(window,"touchend",u)}function h(e){_(e),E.bind(window,"mousemove",_),E.bind(window,"touchmove",_),E.bind(window,"mouseup",p),E.bind(window,"touchend",p)}function u(){E.unbind(window,"mousemove",y),E.unbind(window,"touchmove",y),E.unbind(window,"mouseup",u),E.unbind(window,"touchend",u),m()}function p(){E.unbind(window,"mousemove",_),E.unbind(window,"touchmove",_),E.unbind(window,"mouseup",p),E.unbind(window,"touchend",p),m()}function f(){var e=l(this.value);!1!==e?(a.__color.__state=e,a.setValue(a.__color.toOriginal())):this.value=a.__color.toString()}function m(){a.__onFinishChange&&a.__onFinishChange.call(a,a.__color.toOriginal())}function y(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=a.__saturation_field.getBoundingClientRect(),i=e.touches&&e.touches[0]||e,n=i.clientX,r=i.clientY,s=(n-t.left)/(t.right-t.left),o=1-(r-t.top)/(t.bottom-t.top);return 1<o?o=1:o<0&&(o=0),1<s?s=1:s<0&&(s=0),a.__color.v=o,a.__color.s=s,a.setValue(a.__color.toOriginal()),!1}function _(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=a.__hue_field.getBoundingClientRect(),i=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return 1<i?i=1:i<0&&(i=0),a.__color.h=360*i,a.setValue(a.__color.toOriginal()),!1}return r.extend(n.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),r.extend(n.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:n.__field_knob_border+(n.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),r.extend(n.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),r.extend(n.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),r.extend(o.style,{width:"100%",height:"100%",background:"none"}),N(o,"top","rgba(0,0,0,0)","#000"),r.extend(n.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(s=n.__hue_field).style.background="",s.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",s.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",r.extend(n.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:n.__input_textShadow+"rgba(0,0,0,0.7)"}),E.bind(n.__saturation_field,"mousedown",c),E.bind(n.__saturation_field,"touchstart",c),E.bind(n.__field_knob,"mousedown",c),E.bind(n.__field_knob,"touchstart",c),E.bind(n.__hue_field,"mousedown",h),E.bind(n.__hue_field,"touchstart",h),n.__saturation_field.appendChild(o),n.__selector.appendChild(n.__field_knob),n.__selector.appendChild(n.__saturation_field),n.__selector.appendChild(n.__hue_field),n.__hue_field.appendChild(n.__hue_knob),n.domElement.appendChild(n.__input),n.domElement.appendChild(n.__selector),n.updateDisplay(),n}return m(t,x),p(t,[{key:"updateDisplay",value:function(){var e=l(this.getValue());if(!1!==e){var t=!1;r.each(v.COMPONENTS,function(i){if(!r.isUndefined(e[i])&&!r.isUndefined(this.__color.__state[i])&&e[i]!==this.__color.__state[i])return t=!0,{}},this),t&&r.extend(this.__color.__state,e)}r.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var i=this.__color.v<.5||.5<this.__color.s?255:0,n=255-i;r.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+i+","+i+","+i+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,N(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),r.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+i+","+i+","+i+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}}]),t}(),k=["-moz-","-o-","-webkit-","-ms-",""];function N(e,t,i,n){e.style.background="",r.each(k,function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+i+" 0%, "+n+" 100%); "})}var z=function(e,t){var i=e[t];return r.isArray(arguments[2])||r.isObject(arguments[2])?new S(e,t,arguments[2]):r.isNumber(i)?r.isNumber(arguments[2])&&r.isNumber(arguments[3])?r.isNumber(arguments[4])?new O(e,t,arguments[2],arguments[3],arguments[4]):new O(e,t,arguments[2],arguments[3]):r.isNumber(arguments[4])?new L(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new L(e,t,{min:arguments[2],max:arguments[3]}):r.isString(i)?new C(e,t):r.isFunction(i)?new I(e,t,""):r.isBoolean(i)?new M(e,t):null},B=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},H=function(){function e(){d(this,e),this.backgroundElement=document.createElement("div"),r.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),E.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),r.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;E.bind(this.backgroundElement,"click",function(){t.hide()})}return p(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),r.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",E.unbind(e.domElement,"webkitTransitionEnd",t),E.unbind(e.domElement,"transitionend",t),E.unbind(e.domElement,"oTransitionEnd",t)};E.bind(this.domElement,"webkitTransitionEnd",t),E.bind(this.domElement,"transitionend",t),E.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-E.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-E.getHeight(this.domElement)/2+"px"}}]),e}();!function(e,t){var i=t||document,n=document.createElement("style");n.type="text/css",n.innerHTML=e;var r=i.getElementsByTagName("head")[0];try{r.appendChild(n)}catch(e){}}(function(e){if("undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var F="Default",U=function(){try{return!!window.localStorage}catch(e){return!1}}(),G=void 0,V=!0,j=void 0,W=!1,X=[],Y=function e(t){var i=this,n=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),E.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=r.defaults(n,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),n=r.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),r.isUndefined(n.load)?n.load={preset:F}:n.preset&&(n.load.preset=n.preset),r.isUndefined(n.parent)&&n.hideable&&X.push(this),n.resizable=r.isUndefined(n.parent)&&n.resizable,n.autoPlace&&r.isUndefined(n.scrollable)&&(n.scrollable=!0);var a,s=U&&"true"===localStorage.getItem(Q(this,"isLocal")),o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return i.parent?i.getRoot().preset:n.load.preset},set:function(e){i.parent?i.getRoot().preset=e:n.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),i.revert()}},width:{get:function(){return n.width},set:function(e){n.width=e,ie(i,e)}},name:{get:function(){return n.name},set:function(e){n.name=e,titleRowName&&(titleRowName.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(t){n.closed=t,n.closed?E.addClass(i.__ul,e.CLASS_CLOSED):E.removeClass(i.__ul,e.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return s},set:function(e){U&&((s=e)?E.bind(window,"unload",o):E.unbind(window,"unload",o),localStorage.setItem(Q(i,"isLocal"),e))}}}),r.isUndefined(n.parent)){if(n.closed=!1,E.addClass(this.domElement,e.CLASS_MAIN),E.makeSelectable(this.domElement,!1),U&&s){i.useLocalStorage=!0;var l=localStorage.getItem(Q(this,"gui"));l&&(n.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,E.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),n.closeOnTop?(E.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(E.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),E.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{void 0===n.closed&&(n.closed=!0);var c=document.createTextNode(n.name);E.addClass(c,"controller-name");var h=q(i,c);E.addClass(this.__ul,e.CLASS_CLOSED),E.addClass(h,"title"),E.bind(h,"click",function(e){return e.preventDefault(),i.closed=!i.closed,!1}),n.closed||(this.closed=!1)}n.autoPlace&&(r.isUndefined(n.parent)&&(V&&(j=document.createElement("div"),E.addClass(j,"dg"),E.addClass(j,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(j),V=!1),j.appendChild(this.domElement),E.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||ie(i,n.width)),this.__resizeHandler=function(){i.onResizeDebounced()},E.bind(window,"resize",this.__resizeHandler),E.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),E.bind(this.__ul,"transitionend",this.__resizeHandler),E.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&function(e){var t=void 0;function i(i){return i.preventDefault(),e.width+=t-i.clientX,e.onResize(),t=i.clientX,!1}function n(){E.removeClass(e.__closeButton,Y.CLASS_DRAG),E.unbind(window,"mousemove",i),E.unbind(window,"mouseup",n)}function a(r){return r.preventDefault(),t=r.clientX,E.addClass(e.__closeButton,Y.CLASS_DRAG),E.bind(window,"mousemove",i),E.bind(window,"mouseup",n),!1}e.__resize_handle=document.createElement("div"),r.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),E.bind(e.__resize_handle,"mousedown",a),E.bind(e.__closeButton,"mousedown",a),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),o=function(){U&&"true"===localStorage.getItem(Q(i,"isLocal"))&&localStorage.setItem(Q(i,"gui"),JSON.stringify(i.getSaveObject()))},this.saveToLocalStorageIfPossible=o,n.parent||((a=i.getRoot()).width+=1,r.defer(function(){a.width-=1}))};function q(e,t,i){var n=document.createElement("li");return t&&n.appendChild(t),i?e.__ul.insertBefore(n,i):e.__ul.appendChild(n),e.onResize(),n}function $(e){E.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&E.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function Z(e,t){var i=e.__preset_select[e.__preset_select.selectedIndex];i.innerHTML=t?i.value+"*":i.value}function J(e,t){var i=e.getRoot(),n=i.__rememberedObjects.indexOf(t.object);if(-1!==n){var r=i.__rememberedObjectIndecesToControllers[n];if(void 0===r&&(r={},i.__rememberedObjectIndecesToControllers[n]=r),r[t.property]=t,i.load&&i.load.remembered){var a=i.load.remembered,s=void 0;if(a[e.preset])s=a[e.preset];else{if(!a[F])return;s=a[F]}if(s[n]&&void 0!==s[n][t.property]){var o=s[n][t.property];t.initialValue=o,t.setValue(o)}}}}function K(e,t,i,n){if(void 0===t[i])throw new Error('Object "'+t+'" has no property "'+i+'"');var a=void 0;if(n.color)a=new D(t,i);else{var s=[t,i].concat(n.factoryArgs);a=z.apply(e,s)}n.before instanceof x&&(n.before=n.before.__li),J(e,a),E.addClass(a.domElement,"c");var o=document.createElement("span");E.addClass(o,"property-name"),o.innerHTML=a.property;var l=document.createElement("div");l.appendChild(o),l.appendChild(a.domElement);var c=q(e,l,n.before);return E.addClass(c,Y.CLASS_CONTROLLER_ROW),a instanceof D?E.addClass(c,"color"):E.addClass(c,u(a.getValue())),function(e,t,i){if(i.__li=t,i.__gui=e,r.extend(i,{options:function(t){if(1<arguments.length){var n=i.__li.nextElementSibling;return i.remove(),K(e,i.object,i.property,{before:n,factoryArgs:[r.toArray(arguments)]})}if(r.isArray(t)||r.isObject(t)){var a=i.__li.nextElementSibling;return i.remove(),K(e,i.object,i.property,{before:a,factoryArgs:[t]})}},name:function(e){return i.__li.firstElementChild.firstElementChild.innerHTML=e,i},listen:function(){return i.__gui.listen(i),i},remove:function(){return i.__gui.remove(i),i}}),i instanceof O){var n=new L(i.object,i.property,{min:i.__min,max:i.__max,step:i.__step});r.each(["updateDisplay","onChange","onFinishChange","step"],function(e){var t=i[e],r=n[e];i[e]=n[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(n,e),t.apply(i,e)}}),E.addClass(t,"has-slider"),i.domElement.insertBefore(n.domElement,i.domElement.firstElementChild)}else if(i instanceof L){var a=function(t){if(r.isNumber(i.__min)&&r.isNumber(i.__max)){var n=i.__li.firstElementChild.firstElementChild.innerHTML,a=-1<i.__gui.__listening.indexOf(i);i.remove();var s=K(e,i.object,i.property,{before:i.__li.nextElementSibling,factoryArgs:[i.__min,i.__max,i.__step]});return s.name(n),a&&s.listen(),s}return t};i.min=r.compose(a,i.min),i.max=r.compose(a,i.max)}else i instanceof M?(E.bind(t,"click",function(){E.fakeEvent(i.__checkbox,"click")}),E.bind(i.__checkbox,"click",function(e){e.stopPropagation()})):i instanceof I?(E.bind(t,"click",function(){E.fakeEvent(i.__button,"click")}),E.bind(t,"mouseover",function(){E.addClass(i.__button,"hover")}),E.bind(t,"mouseout",function(){E.removeClass(i.__button,"hover")})):i instanceof D&&(E.addClass(t,"color"),i.updateDisplay=r.compose(function(e){return t.style.borderLeftColor=i.__color.toString(),e},i.updateDisplay),i.updateDisplay());i.setValue=r.compose(function(t){return e.getRoot().__preset_select&&i.isModified()&&Z(e.getRoot(),!0),t},i.setValue)}(e,c,a),e.__controllers.push(a),a}function Q(e,t){return document.location.href+"."+t}function ee(e,t,i){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.__preset_select.appendChild(n),i&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function te(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ie(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function ne(e,t){var i={};return r.each(e.__rememberedObjects,function(n,a){var s={},o=e.__rememberedObjectIndecesToControllers[a];r.each(o,function(e,i){s[i]=t?e.initialValue:e.getValue()}),i[a]=s}),i}Y.toggleHide=function(){W=!W,r.each(X,function(e){e.domElement.style.display=W?"none":""})},Y.CLASS_AUTO_PLACE="a",Y.CLASS_AUTO_PLACE_CONTAINER="ac",Y.CLASS_MAIN="main",Y.CLASS_CONTROLLER_ROW="cr",Y.CLASS_TOO_TALL="taller-than-window",Y.CLASS_CLOSED="closed",Y.CLASS_CLOSE_BUTTON="close-button",Y.CLASS_CLOSE_TOP="close-top",Y.CLASS_CLOSE_BOTTOM="close-bottom",Y.CLASS_DRAG="drag",Y.DEFAULT_WIDTH=245,Y.TEXT_CLOSED="Close Controls",Y.TEXT_OPEN="Open Controls",Y._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||Y.toggleHide()},E.bind(window,"keydown",Y._keydownHandler,!1),r.extend(Y.prototype,{add:function(e,t){return K(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return K(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;r.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&j.removeChild(this.domElement);var e=this;r.each(this.__folders,function(t){e.removeFolder(t)}),E.unbind(window,"keydown",Y._keydownHandler,!1),$(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var i=new Y(t);this.__folders[e]=i;var n=q(this,i.domElement);return E.addClass(n,"folder"),i},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],$(e);var t=this;r.each(e.__folders,function(t){e.removeFolder(t)}),r.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=E.getOffset(e.__ul).top,i=0;r.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(i+=E.getHeight(t))}),window.innerHeight-t-20<i?(E.addClass(e.domElement,Y.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(E.removeClass(e.domElement,Y.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&r.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:r.debounce(function(){this.onResize()},50),remember:function(){if(r.isUndefined(G)&&((G=new H).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;r.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");E.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),E.addClass(t,"save-row");var i=document.createElement("span");i.innerHTML="&nbsp;",E.addClass(i,"button gears");var n=document.createElement("span");n.innerHTML="Save",E.addClass(n,"button"),E.addClass(n,"save");var a=document.createElement("span");a.innerHTML="New",E.addClass(a,"button"),E.addClass(a,"save-as");var s=document.createElement("span");s.innerHTML="Revert",E.addClass(s,"button"),E.addClass(s,"revert");var o=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?r.each(e.load.remembered,function(t,i){ee(e,i,i===e.preset)}):ee(e,F,!1),E.bind(o,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(o),t.appendChild(i),t.appendChild(n),t.appendChild(a),t.appendChild(s),U){var l=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(Q(0,"isLocal"))&&c.setAttribute("checked","checked"),te(e,l),E.bind(c,"change",function(){e.useLocalStorage=!e.useLocalStorage,te(e,l)})}var h=document.getElementById("dg-new-constructor");E.bind(h,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||G.hide()}),E.bind(i,"click",function(){h.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),G.show(),h.focus(),h.select()}),E.bind(n,"click",function(){e.save()}),E.bind(a,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),E.bind(s,"click",function(){e.revert()})}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&ie(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,0<this.__rememberedObjects.length&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=ne(this)),e.folders={},r.each(this.__folders,function(t,i){e.folders[i]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=ne(this),Z(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[F]=ne(this,!0)),this.load.remembered[e]=ne(this),this.preset=e,ee(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){r.each(this.__controllers,function(t){this.getRoot().load.remembered?J(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),r.each(this.__folders,function(e){e.revert(e)}),e||Z(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&B.call(window,function(){e(t)}),r.each(t,function(e){e.updateDisplay()})}(this.__listening)},updateDisplay:function(){r.each(this.__controllers,function(e){e.updateDisplay()}),r.each(this.__folders,function(e){e.updateDisplay()})}});var re={Color:v,math:h,interpret:l},ae={Controller:x,BooleanController:M,OptionController:S,StringController:C,NumberController:P,NumberControllerBox:L,NumberControllerSlider:O,FunctionController:I,ColorController:D},se={dom:E},oe={GUI:Y},le=Y,ce={color:re,controllers:ae,dom:se,gui:oe,GUI:le};e.color=re,e.controllers=ae,e.dom=se,e.gui=oe,e.GUI=le,e.default=ce,Object.defineProperty(e,"__esModule",{value:!0})}),function(){function e(e){var t,i=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(r){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":if("function"!=typeof THREE.TGALoader)return void console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");null===THREE.Loader.Handlers.get(".tga")&&THREE.Loader.Handlers.add(/\.tga$/i,new THREE.TGALoader),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof i)return"data:"+t+";base64,"+i;var a=new Uint8Array(i);return window.URL.createObjectURL(new Blob([a],{type:t}))}function t(e,t,i,n){var r=function(e,t,i,n){var r,a,s=t.path,o=n.get(e.id).children;return void 0!==o&&0<o.length&&void 0!==i[o[0].ID]&&(0!==(r=i[o[0].ID]).indexOf("blob:")&&0!==r.indexOf("data:")||t.setPath(void 0)),a="tga"===e.FileName.slice(-3).toLowerCase()?THREE.Loader.Handlers.get(".tga").load(r):t.load(r),t.setPath(s),a}(e,t,i,n);r.ID=e.id,r.name=e.attrName;var a=e.WrapModeU,s=e.WrapModeV,o=void 0!==a?a.value:0,l=void 0!==s?s.value:0;if(r.wrapS=0===o?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,r.wrapT=0===l?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in e){var c=e.Scaling.value;r.repeat.x=c[0],r.repeat.y=c[1]}return r}function i(e,t,i,r){var a=t.id,s=t.attrName,o=t.ShadingModel;if("object"==typeof o&&(o=o.value),!r.has(a))return null;var l,c=function(e,t,i,r,a){var s={};return t.BumpFactor&&(s.bumpScale=t.BumpFactor.value),t.Diffuse?s.color=(new THREE.Color).fromArray(t.Diffuse.value):t.DiffuseColor&&"Color"===t.DiffuseColor.type&&(s.color=(new THREE.Color).fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(s.displacementScale=t.DisplacementFactor.value),t.Emissive?s.emissive=(new THREE.Color).fromArray(t.Emissive.value):t.EmissiveColor&&"Color"===t.EmissiveColor.type&&(s.emissive=(new THREE.Color).fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(s.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(s.opacity=parseFloat(t.Opacity.value)),s.opacity<1&&(s.transparent=!0),t.ReflectionFactor&&(s.reflectivity=t.ReflectionFactor.value),t.Shininess&&(s.shininess=t.Shininess.value),t.Specular?s.specular=(new THREE.Color).fromArray(t.Specular.value):t.SpecularColor&&"Color"===t.SpecularColor.type&&(s.specular=(new THREE.Color).fromArray(t.SpecularColor.value)),a.get(r).children.forEach(function(t){var r=t.relationship;switch(r){case"Bump":s.bumpMap=i.get(t.ID);break;case"DiffuseColor":s.map=n(e,i,t.ID,a);break;case"DisplacementColor":s.displacementMap=n(e,i,t.ID,a);break;case"EmissiveColor":s.emissiveMap=n(e,i,t.ID,a);break;case"NormalMap":s.normalMap=n(e,i,t.ID,a);break;case"ReflectionColor":s.envMap=n(e,i,t.ID,a),s.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":s.specularMap=n(e,i,t.ID,a);break;case"TransparentColor":s.alphaMap=n(e,i,t.ID,a),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}}),s}(e,t,i,a,r);switch(o.toLowerCase()){case"phong":l=new THREE.MeshPhongMaterial;break;case"lambert":l=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),l=new THREE.MeshPhongMaterial({color:3342591})}return l.setValues(c),l.name=s,l}function n(e,t,i,n){return"LayeredTexture"in e.Objects&&i in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),i=n.get(i).children[0].ID),t.get(i)}function r(e,t){var i=[];return e.children.forEach(function(e){var n=t[e.ID];if("Cluster"===n.attrType){var r={ID:e.ID,indices:[],weights:[],transform:(new THREE.Matrix4).fromArray(n.Transform.a),transformLink:(new THREE.Matrix4).fromArray(n.TransformLink.a),linkMode:n.Mode};"Indexes"in n&&(r.indices=n.Indexes.a,r.weights=n.Weights.a),i.push(r)}}),{rawBones:i,bones:[]}}function a(e,t,i,n){for(var r=[],a=0;a<e.children.length;a++){if(8===a){console.warn("FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.");break}var s=e.children[a],o=i[s.ID],l={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;n.get(parseInt(s.ID)).children.forEach(function(e){"DeformPercent"===e.relationship?l.weightCurveID=e.ID:l.geoID=e.ID}),r.push(l)}return r}function s(e,t,i,n){switch(i.attrType){case"Mesh":return function(e,t,i,n){var r=n.skeletons,a=n.morphTargets,s=t.parents.map(function(t){return e.Objects.Model[t.ID]});if(0!==s.length){var c=t.children.reduce(function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e},null),h=t.children.reduce(function(e,t){return void 0!==a[t.ID]&&(e=a[t.ID]),e},null),u=new THREE.Matrix4,d=s[0];if("GeometricRotation"in d){var p=d.GeometricRotation.value.map(THREE.Math.degToRad);p[3]="ZYX",u.makeRotationFromEuler((new THREE.Euler).fromArray(p))}return"GeometricTranslation"in d&&u.setPosition((new THREE.Vector3).fromArray(d.GeometricTranslation.value)),"GeometricScaling"in d&&u.scale((new THREE.Vector3).fromArray(d.GeometricScaling.value)),function(e,t,i,n,r){var a=new THREE.BufferGeometry;t.attrName&&(a.name=t.attrName);var s,c,h,u,d,p=function(e,t){var i={};if(i.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],i.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Colors.a,r=[];return"IndexToDirect"===i&&(r=e.ColorIndex.a),{dataSize:4,buffer:n,indices:r,mappingType:t,referenceType:i}}(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};for(var n=e.Materials.a,r=[],a=0;a<n.length;++a)r.push(a);return{dataSize:1,buffer:n,indices:r,mappingType:t,referenceType:i}}(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Normals.a,r=[];return"IndexToDirect"===i&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:r,mappingType:t,referenceType:i}}(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];for(var n=0;e.LayerElementUV[n];)i.uv.push(l(e.LayerElementUV[n])),n++}return i.weightTable={},null!==t&&(i.skeleton=t).rawBones.forEach(function(e,t){e.indices.forEach(function(n,r){void 0===i.weightTable[n]&&(i.weightTable[n]=[]),i.weightTable[n].push({id:t,weight:e.weights[r]})})}),i}(t,i),f=o(p),m=new THREE.Float32BufferAttribute(f.vertex,3);if(r.applyToBufferAttribute(m),a.addAttribute("position",m),0<f.colors.length&&a.addAttribute("color",new THREE.Float32BufferAttribute(f.colors,3)),i&&(a.addAttribute("skinIndex",new THREE.Uint16BufferAttribute(f.weightsIndices,4)),a.addAttribute("skinWeight",new THREE.Float32BufferAttribute(f.vertexWeights,4)),a.FBX_Deformer=i),0<f.normal.length){var g=new THREE.Float32BufferAttribute(f.normal,3);(new THREE.Matrix3).getNormalMatrix(r).applyToBufferAttribute(g),a.addAttribute("normal",g)}if(f.uvs.forEach(function(e,t){var i="uv"+(t+1).toString();0===t&&(i="uv"),a.addAttribute(i,new THREE.Float32BufferAttribute(f.uvs[t],2))}),p.material&&"AllSame"!==p.material.mappingType){var v=f.materialIndex[0],y=0;if(f.materialIndex.forEach(function(e,t){e!==v&&(a.addGroup(y,t-y,v),v=e,y=t)}),0<a.groups.length){var _=a.groups[a.groups.length-1],x=_.start+_.count;x!==f.materialIndex.length&&a.addGroup(x,f.materialIndex.length-x,v)}0===a.groups.length&&a.addGroup(0,f.materialIndex.length,f.materialIndex[0])}return s=e,c=a,h=t,d=r,null!==(u=n)&&(c.morphAttributes.position=[],c.morphAttributes.normal=[],u.rawTargets.forEach(function(e){var t=s.Objects.Geometry[e.geoID];void 0!==t&&function(e,t,i,n){var r=new THREE.BufferGeometry;i.attrName&&(r.name=i.attrName);for(var a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==t.Vertices?t.Vertices.a.slice():[],l=void 0!==i.Vertices?i.Vertices.a:[],c=void 0!==i.Indexes?i.Indexes.a:[],h=0;h<c.length;h++){var u=3*c[h];s[u]+=l[3*h],s[u+1]+=l[3*h+1],s[u+2]+=l[3*h+2]}var d=o({vertexIndices:a,vertexPositions:s}),p=new THREE.Float32BufferAttribute(d.vertex,3);p.name=i.attrName,n.applyToBufferAttribute(p),e.morphAttributes.position.push(p)}(c,h,t,d)})),a}(e,i,c,h,u)}}(e,t,i,n);case"NurbsCurve":return function(e){if(void 0===THREE.NURBSCurve)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new THREE.BufferGeometry;for(var i,n,r=t-1,a=e.KnotVector.a,s=[],o=e.Points.a,l=0,c=o.length;l<c;l+=4)s.push((new THREE.Vector4).fromArray(o,l));if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){i=r,n=a.length-1-i;for(l=0;l<r;++l)s.push(s[l])}var h=new THREE.NURBSCurve(r,a,s,i,n).getPoints(7*s.length),u=new Float32Array(3*h.length);h.forEach(function(e,t){e.toArray(u,3*t)});var d=new THREE.BufferGeometry;return d.addAttribute("position",new THREE.BufferAttribute(u,3)),d}(i)}}function o(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,n=0,r=!1,a=[],s=[],o=[],l=[],c=[],u=[];return e.vertexIndices.forEach(function(d,p){var f=!1;d<0&&(d^=-1,f=!0);var m=[],g=[];if(a.push(3*d,3*d+1,3*d+2),e.color){var v=h(p,i,d,e.color);o.push(v[0],v[1],v[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach(function(e){g.push(e.weight),m.push(e.id)}),4<g.length){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);var y=[0,0,0,0],_=[0,0,0,0];g.forEach(function(e,t){var i=e,n=m[t];_.forEach(function(e,t,r){if(e<i){r[t]=i,i=e;var a=y[t];y[t]=n,n=a}})}),m=y,g=_}for(;g.length<4;)g.push(0),m.push(0);for(var x=0;x<4;++x)c.push(g[x]),u.push(m[x])}if(e.normal&&(v=h(p,i,d,e.normal),s.push(v[0],v[1],v[2])),e.material&&"AllSame"!==e.material.mappingType)var b=h(p,i,d,e.material)[0];e.uv&&e.uv.forEach(function(e,t){var n=h(p,i,d,e);void 0===l[t]&&(l[t]=[]),l[t].push(n[0]),l[t].push(n[1])}),n++,f&&(function(e,t,i,n,r,a,s,o,l,c){for(var h=2;h<c;h++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[3*(h-1)]]),e.vertex.push(t.vertexPositions[i[3*(h-1)+1]]),e.vertex.push(t.vertexPositions[i[3*(h-1)+2]]),e.vertex.push(t.vertexPositions[i[3*h]]),e.vertex.push(t.vertexPositions[i[3*h+1]]),e.vertex.push(t.vertexPositions[i[3*h+2]]),t.skeleton&&(e.vertexWeights.push(o[0]),e.vertexWeights.push(o[1]),e.vertexWeights.push(o[2]),e.vertexWeights.push(o[3]),e.vertexWeights.push(o[4*(h-1)]),e.vertexWeights.push(o[4*(h-1)+1]),e.vertexWeights.push(o[4*(h-1)+2]),e.vertexWeights.push(o[4*(h-1)+3]),e.vertexWeights.push(o[4*h]),e.vertexWeights.push(o[4*h+1]),e.vertexWeights.push(o[4*h+2]),e.vertexWeights.push(o[4*h+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(h-1)]),e.weightsIndices.push(l[4*(h-1)+1]),e.weightsIndices.push(l[4*(h-1)+2]),e.weightsIndices.push(l[4*(h-1)+3]),e.weightsIndices.push(l[4*h]),e.weightsIndices.push(l[4*h+1]),e.weightsIndices.push(l[4*h+2]),e.weightsIndices.push(l[4*h+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[3*(h-1)]),e.colors.push(a[3*(h-1)+1]),e.colors.push(a[3*(h-1)+2]),e.colors.push(a[3*h]),e.colors.push(a[3*h+1]),e.colors.push(a[3*h+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[3*(h-1)]),e.normal.push(r[3*(h-1)+1]),e.normal.push(r[3*(h-1)+2]),e.normal.push(r[3*h]),e.normal.push(r[3*h+1]),e.normal.push(r[3*h+2])),t.uv&&t.uv.forEach(function(t,i){void 0===e.uvs[i]&&(e.uvs[i]=[]),e.uvs[i].push(s[i][0]),e.uvs[i].push(s[i][1]),e.uvs[i].push(s[i][2*(h-1)]),e.uvs[i].push(s[i][2*(h-1)+1]),e.uvs[i].push(s[i][2*h]),e.uvs[i].push(s[i][2*h+1])})}(t,e,a,b,s,o,l,c,u,n),i++,n=0,a=[],s=[],o=[],l=[],c=[],u=[])}),t}function l(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.UV.a,r=[];return"IndexToDirect"===i&&(r=e.UVIndex.a),{dataSize:2,buffer:n,indices:r,mappingType:t,referenceType:i}}THREE.FBXLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},Object.assign(THREE.FBXLoader.prototype,{load:function(e,t,i,n){var r=this,a=THREE.LoaderUtils.extractUrlBase(e),s=new THREE.FileLoader(this.manager);s.setResponseType("arraybuffer"),s.load(e,function(i){try{var s=r.parse(i,a);t(s)}catch(i){window.setTimeout(function(){n&&n(i),r.manager.itemError(e)},0)}},i,n)},parse:function(n,o){var l,c,h;if(h="Kaydara FBX Binary  \0",(c=n).byteLength>=h.length&&h===P(c,0,h.length))l=(new T).parse(n);else{var y=P(n);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],i=0;function n(t){var n=e[t-1];return e=e.slice(i+t),i++,n}for(var r=0;r<t.length;++r){if(n(1)===t[r])return!1}return!0}(y))throw new Error("THREE.FBXLoader: Unknown format.");if(S(y)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+S(y));l=(new w).parse(y)}var _,x,b,E,M,A,L,R,O=function(e){var t=new Map;"Connections"in e&&e.Connections.connections.forEach(function(e){var i=e[0],n=e[1],r=e[2];t.has(i)||t.set(i,{parents:[],children:[]});var a={ID:n,relationship:r};t.get(i).parents.push(a),t.has(n)||t.set(n,{parents:[],children:[]});var s={ID:i,relationship:r};t.get(n).children.push(s)});return t}(l),I=function(t){var i={},n={};if("Video"in t.Objects){var r=t.Objects.Video;for(var a in r){var s=r[a];if(i[h=parseInt(a)]=s.RelativeFilename||s.Filename,"Content"in s){var o=s.Content instanceof ArrayBuffer&&0<s.Content.byteLength,l="string"==typeof s.Content&&""!==s.Content;if(o||l){var c=e(r[a]);n[s.RelativeFilename||s.Filename]=c}}}}for(var h in i){var u=i[h];void 0!==n[u]?i[h]=n[u]:i[h]=i[h].split("\\").pop()}return i}(l),D=function(e,t,n){var r=new Map;if("Material"in e.Objects){var a=e.Objects.Material;for(var s in a){var o=i(e,a[s],t,n);null!==o&&r.set(parseInt(s),o)}}return r}(l,function(e,i,n,r){var a=new Map;if("Texture"in e.Objects){var s=e.Objects.Texture;for(var o in s){var l=t(s[o],i,n,r);a.set(parseInt(o),l)}}return a}(l,new THREE.TextureLoader(this.manager).setPath(o),I,O),O),k=function(e,t){var i={},n={};if("Deformer"in e.Objects){var s=e.Objects.Deformer;for(var o in s){var l=s[o],c=t.get(parseInt(o));if("Skin"===l.attrType){var h=r(c,s);h.ID=o,1<c.parents.length&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),h.geometryID=c.parents[0].ID,i[o]=h}else if("BlendShape"===l.attrType){var u={id:o};u.rawTargets=a(c,0,s,t),u.id=o,1<c.parents.length&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),u.parentGeoID=c.parents[0].ID,n[o]=u}}}return{skeletons:i,morphTargets:n}}(l,O),N=function(e,t,i){var n=new Map;if("Geometry"in e.Objects){var r=e.Objects.Geometry;for(var a in r){var o=s(e,t.get(parseInt(a)),r[a],i);n.set(parseInt(a),o)}}return n}(l,O,k);return _=l,x=O,b=k.skeletons,E=N,M=D,A=new THREE.Group,L=function(e,t,i,n,r){var a=new Map,s=e.Objects.Model;for(var o in s){var l=parseInt(o),c=s[o],h=r.get(l),v=u(h,t,l,c.attrName);if(!v){switch(c.attrType){case"Camera":v=d(e,h);break;case"Light":v=p(e,h);break;case"Mesh":v=f(e,h,i,n);break;case"NurbsCurve":v=m(h,i);break;case"LimbNode":case"Null":default:v=new THREE.Group}v.name=THREE.PropertyBinding.sanitizeNodeName(c.attrName),v.ID=l}g(e,v,c),a.set(l,v)}return a}(_,b,E,M,x),R=_.Objects.Model,L.forEach(function(e){var t=R[e.ID];!function(e,t,i,n,r){"LookAtProperty"in i&&x.get(t.ID).children.forEach(function(i){if("LookAtProperty"===i.relationship){var n=e.Objects.Model[i.ID];if("Lcl_Translation"in n){var a=n.Lcl_Translation.value;void 0!==t.target?(t.target.position.fromArray(a),r.add(t.target)):t.lookAt((new THREE.Vector3).fromArray(a))}}})}(_,e,t,0,A),x.get(e.ID).parents.forEach(function(t){var i=L.get(t.ID);void 0!==i&&i.add(e)}),null===e.parent&&A.add(e)}),function(e,t,i,n,r){var a=function(e){var t={};if("Pose"in e.Objects){var i=e.Objects.Pose;for(var n in i)if("BindPose"===i[n].attrType){var r=i[n].PoseNode;Array.isArray(r)?r.forEach(function(e){t[e.Node]=(new THREE.Matrix4).fromArray(e.Matrix.a)}):t[r.Node]=(new THREE.Matrix4).fromArray(r.Matrix.a)}}return t}(e);for(var s in t){var o=t[s];r.get(parseInt(o.ID)).parents.forEach(function(e){if(i.has(e.ID)){var t=e.ID;r.get(t).parents.forEach(function(e){n.has(e.ID)&&n.get(e.ID).bind(new THREE.Skeleton(o.bones),a[e.ID])})}})}}(_,b,E,L,x),function(e,t,i){i.animations=[];var n=function(e,t){if(void 0!==e.Objects.AnimationCurve){var i=function(e){var t=e.Objects.AnimationCurveNode,i=new Map;for(var n in t){var r=t[n];if(null!==r.attrName.match(/S|R|T/)){var a={id:r.id,attr:r.attrName,curves:{}};i.set(a.id,a)}}return i}(e);!function(e,t,i){var n=e.Objects.AnimationCurve;for(var r in n){var a={id:n[r].id,times:n[r].KeyTime.a.map(C),values:n[r].KeyValueFloat.a},s=t.get(a.id);if(void 0!==s){var o=s.parents[0].ID,l=s.parents[0].relationship;l.match(/X/)?i.get(o).curves.x=a:l.match(/Y/)?i.get(o).curves.y=a:l.match(/Z/)&&(i.get(o).curves.z=a)}}}(e,t,i);var n=function(e,t,i){var n=e.Objects.AnimationLayer,r=new Map;for(var a in n){var s=[],o=t.get(parseInt(a));if(void 0!==o)o.children.forEach(function(n,r){if(i.has(n.ID)){var a=i.get(n.ID);if(void 0!==a.curves.x||void 0!==a.curves.y||void 0!==a.curves.z){if(void 0===s[r]){var o;t.get(n.ID).parents.forEach(function(e){void 0!==e.relationship&&(o=e.ID)});var l=e.Objects.Model[o.toString()],c={modelName:THREE.PropertyBinding.sanitizeNodeName(l.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};"Lcl_Translation"in l&&(c.initialPosition=l.Lcl_Translation.value),"Lcl_Rotation"in l&&(c.initialRotation=l.Lcl_Rotation.value),"Lcl_Scaling"in l&&(c.initialScale=l.Lcl_Scaling.value),"PreRotation"in l&&(c.preRotations=l.PreRotation.value),s[r]=c}s[r][a.attr]=a}}}),r.set(parseInt(a),s)}return r}(e,t,i);return function(e,t,i){var n=e.Objects.AnimationStack,r={};for(var a in n){var s=t.get(parseInt(a)).children;1<s.length&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var o=i.get(s[0].ID);r[a]={name:n[a].attrName,layer:o}}return r}(e,t,n)}}(e,t);if(void 0!==n)for(var r in n){var a=v(n[r]);i.animations.push(a)}}(_,x,A),function(e,t){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var i=e.GlobalSettings.AmbientColor.value,n=i[0],r=i[1],a=i[2];if(0!==n||0!==r||0!==a){var s=new THREE.Color(n,r,a);t.add(new THREE.AmbientLight(s,1))}}}(_,A),A}});var c=[];function h(e,t,i,n){var r;switch(n.mappingType){case"ByPolygonVertex":r=e;break;case"ByPolygon":r=t;break;case"ByVertice":r=i;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(r=n.indices[r]);var a=r*n.dataSize,s=a+n.dataSize;return function(e,t,i,n){for(var r=i,a=0;r<n;r++,a++)e[a]=t[r];return e}(c,n.buffer,a,s)}function u(e,t,i,n){var r=null;return e.parents.forEach(function(e){for(var a in t){var s=t[a];s.rawBones.forEach(function(t,a){if(t.ID===e.ID){var o=r;(r=new THREE.Bone).matrixWorld.copy(t.transformLink),r.name=THREE.PropertyBinding.sanitizeNodeName(n),r.ID=i,s.bones[a]=r,null!==o&&r.add(o)}})}}),r}function d(e,t){var i,n;if(t.children.forEach(function(t){var i=e.Objects.NodeAttribute[t.ID];void 0!==i&&(n=i)}),void 0===n)i=new THREE.Object3D;else{var r=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(r=1);var a=1;void 0!==n.NearPlane&&(a=n.NearPlane.value/1e3);var s=1e3;void 0!==n.FarPlane&&(s=n.FarPlane.value/1e3);var o=window.innerWidth,l=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(o=n.AspectWidth.value,l=n.AspectHeight.value);var c=o/l,h=45;void 0!==n.FieldOfView&&(h=n.FieldOfView.value);var u=n.FocalLength?n.FocalLength.value:null;switch(r){case 0:i=new THREE.PerspectiveCamera(h,c,a,s),null!==u&&i.setFocalLength(u);break;case 1:i=new THREE.OrthographicCamera(-o/2,o/2,l/2,-l/2,a,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),i=new THREE.Object3D}}return i}function p(e,t){var i,n;if(t.children.forEach(function(t){var i=e.Objects.NodeAttribute[t.ID];void 0!==i&&(n=i)}),void 0===n)i=new THREE.Object3D;else{var r;r=void 0===n.LightType?0:n.LightType.value;var a=16777215;void 0!==n.Color&&(a=(new THREE.Color).fromArray(n.Color.value));var s=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(s=0);var o=0;switch(void 0!==n.FarAttenuationEnd&&(o=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value),r){case 0:i=new THREE.PointLight(a,s,o,1);break;case 1:i=new THREE.DirectionalLight(a,s);break;case 2:var l=Math.PI/3;void 0!==n.InnerAngle&&(l=THREE.Math.degToRad(n.InnerAngle.value));var c=0;void 0!==n.OuterAngle&&(c=THREE.Math.degToRad(n.OuterAngle.value),c=Math.max(c,1)),i=new THREE.SpotLight(a,s,o,l,c,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a THREE.PointLight."),i=new THREE.PointLight(a,s)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(i.castShadow=!0)}return i}function f(e,t,i,n){var r=null,a=null,s=[];return t.children.forEach(function(e){i.has(e.ID)&&(r=i.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))}),1<s.length?a=s:0<s.length?a=s[0]:(a=new THREE.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in r.attributes&&s.forEach(function(e){e.vertexColors=THREE.VertexColors}),r.FBX_Deformer?(s.forEach(function(e){e.skinning=!0}),new THREE.SkinnedMesh(r,a)):new THREE.Mesh(r,a)}function m(e,t){var i=e.children.reduce(function(e,i){return t.has(i.ID)&&(e=t.get(i.ID)),e},null),n=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(i,n)}function g(e,t,i){if("RotationOrder"in i){var n=parseInt(i.RotationOrder.value,10);0<n&&n<6?console.warn("THREE.FBXLoader: unsupported Euler Order: %s. Currently only XYZ order is supported. Animations and rotations may be incorrect.",["XYZ","XZY","YZX","ZXY","YXZ","ZYX","SphericXYZ"][n]):6===n&&console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.")}if("Lcl_Translation"in i&&t.position.fromArray(i.Lcl_Translation.value),"Lcl_Rotation"in i){var r=i.Lcl_Rotation.value.map(THREE.Math.degToRad);r.push("ZYX"),t.quaternion.setFromEuler((new THREE.Euler).fromArray(r))}if("Lcl_Scaling"in i&&t.scale.fromArray(i.Lcl_Scaling.value),"PreRotation"in i){var a=i.PreRotation.value.map(THREE.Math.degToRad);a[3]="ZYX";var s=(new THREE.Euler).fromArray(a);s=(new THREE.Quaternion).setFromEuler(s),t.quaternion.premultiply(s)}}function v(e){var t=[];return e.layer.forEach(function(e){t=t.concat(function(e){var t=[];if(void 0!==e.T&&0<Object.keys(e.T.curves).length){var i=y(e.modelName,e.T.curves,e.initialPosition,"position");void 0!==i&&t.push(i)}if(void 0!==e.R&&0<Object.keys(e.R.curves).length){var n=function(e,t,i,n){void 0!==t.x&&(b(t.x),t.x.values=t.x.values.map(THREE.Math.degToRad)),void 0!==t.y&&(b(t.y),t.y.values=t.y.values.map(THREE.Math.degToRad)),void 0!==t.z&&(b(t.z),t.z.values=t.z.values.map(THREE.Math.degToRad));var r=x(t),a=_(r,t,i);void 0!==n&&((n=n.map(THREE.Math.degToRad)).push("ZYX"),n=(new THREE.Euler).fromArray(n),n=(new THREE.Quaternion).setFromEuler(n));for(var s=new THREE.Quaternion,o=new THREE.Euler,l=[],c=0;c<a.length;c+=3)o.set(a[c],a[c+1],a[c+2],"ZYX"),s.setFromEuler(o),void 0!==n&&s.premultiply(n),s.toArray(l,c/3*4);return new THREE.QuaternionKeyframeTrack(e+".quaternion",r,l)}(e.modelName,e.R.curves,e.initialRotation,e.preRotations);void 0!==n&&t.push(n)}if(void 0!==e.S&&0<Object.keys(e.S.curves).length){var r=y(e.modelName,e.S.curves,e.initialScale,"scale");void 0!==r&&t.push(r)}return t}(e))}),new THREE.AnimationClip(e.name,-1,t)}function y(e,t,i,n){var r=x(t),a=_(r,t,i);return new THREE.VectorKeyframeTrack(e+"."+n,r,a)}function _(e,t,i){var n=i,r=[],a=-1,s=-1,o=-1;return e.forEach(function(e){if(t.x&&(a=t.x.times.indexOf(e)),t.y&&(s=t.y.times.indexOf(e)),t.z&&(o=t.z.times.indexOf(e)),-1!==a){var i=t.x.values[a];r.push(i),n[0]=i}else r.push(n[0]);if(-1!==s){var l=t.y.values[s];r.push(l),n[1]=l}else r.push(n[1]);if(-1!==o){var c=t.z.values[o];r.push(c),n[2]=c}else r.push(n[2])}),r}function x(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t.sort(function(e,t){return e-t}).filter(function(e,t,i){return i.indexOf(e)==t})}function b(e){for(var t=1;t<e.values.length;t++){var i=e.values[t-1],n=e.values[t]-i,r=Math.abs(n);if(180<=r){for(var a=r/180,s=n/a,o=i+s,l=e.times[t-1],c=(e.times[t]-l)/a,h=l+c,u=[],d=[];h<e.times[t];)u.push(h),h+=c,d.push(o),o+=s;e.times=L(e.times,t,u),e.values=L(e.values,t,d)}}}function w(){}function T(){}function E(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function M(){}function S(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function C(e){return e/46186158e3}function A(e){return e.split(",").map(function(e){return parseFloat(e)})}function P(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=e.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(e,t,i))}function L(e,t,i){return e.slice(0,t).concat(i).concat(e.slice(t))}Object.assign(w.prototype,{getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new M,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,i=e.split("\n");return i.forEach(function(e,n){var r=e.match(/^[\s\t]*;/),a=e.match(/^[\s\t]*$/);if(!r&&!a){var s=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),o=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");s?t.parseNodeBegin(e,s):o?t.parseNodeProperty(e,o,i[++n]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}}),this.allNodes},parseNodeBegin:function(e,t){var i=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),r={name:i},a=this.parseNodeAttr(n),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,r):i in s?("PoseNode"===i?s.PoseNode.push(r):void 0!==s[i].id&&(s[i]={},s[i][s[i].id]=s[i]),""!==a.id&&(s[i][a.id]=r)):"number"==typeof a.id?(s[i]={},s[i][a.id]=r):"Properties70"!==i&&(s[i]="PoseNode"===i?[r]:r),"number"==typeof a.id&&(r.id=a.id),""!==a.name&&(r.attrName=a.name),""!==a.type&&(r.attrType=a.type),this.pushStack(r)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var i="",n="";return 1<e.length&&(i=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:i,type:n}},parseNodeProperty:function(e,t,i){var n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===r&&(r=i.replace(/"/g,"").replace(/,$/,"").trim());var a=this.getCurrentNode();if("Properties70"!==a.name){if("C"===n){var s=r.split(",").slice(1),o=parseInt(s[0]),l=parseInt(s[1]),c=r.split(",").slice(3);n="connections",function(e,t){for(var i=0,n=e.length,r=t.length;i<r;i++,n++)e[n]=t[i]}(r=[o,l],c=c.map(function(e){return e.trim().replace(/^"/,"")})),void 0===a[n]&&(a[n]=[])}"Node"===n&&(a.id=r),n in a&&Array.isArray(a[n])?a[n].push(r):"a"!==n?a[n]=r:a.a=r,this.setCurrentProp(a,n),"a"===n&&","!==r.slice(-1)&&(a.a=A(r))}else this.parseNodeSpecialProperty(e,n,r)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=A(t.a))},parseNodeSpecialProperty:function(e,t,i){var n=i.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),r=n[0],a=n[1],s=n[2],o=n[3],l=n[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=A(l)}this.getPrevNode()[r]={type:a,type2:s,flag:o,value:l},this.setCurrentProp(this.getPrevNode(),r)}}),Object.assign(T.prototype,{parse:function(e){var t=new E(e);t.skip(23);var i=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+i);for(var n=new M;!this.endOfContent(t);){var r=this.parseNode(t,i);null!==r&&n.add(r.name,r)}return n},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var i={},n=7500<=t?e.getUint64():e.getUint32(),r=7500<=t?e.getUint64():e.getUint32(),a=(7500<=t?e.getUint64():e.getUint32(),e.getUint8()),s=e.getString(a);if(0===n)return null;for(var o=[],l=0;l<r;l++)o.push(this.parseProperty(e));var c=0<o.length?o[0]:"",h=1<o.length?o[1]:"",u=2<o.length?o[2]:"";for(i.singleProperty=1===r&&e.getOffset()===n;n>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(s,i,d)}return i.propertyList=o,"number"==typeof c&&(i.id=c),""!==h&&(i.attrName=h),""!==u&&(i.attrType=u),""!==s&&(i.name=s),i},parseSubNode:function(e,t,i){if(!0===i.singleProperty){var n=i.propertyList[0];Array.isArray(n)?(t[i.name]=i).a=n:t[i.name]=n}else if("Connections"===e&&"C"===i.name){var r=[];i.propertyList.forEach(function(e,t){0!==t&&r.push(e)}),void 0===t.connections&&(t.connections=[]),t.connections.push(r)}else if("Properties70"===i.name)Object.keys(i).forEach(function(e){t[e]=i[e]});else if("Properties70"===e&&"P"===i.name){var a,s=i.propertyList[0],o=i.propertyList[1],l=i.propertyList[2],c=i.propertyList[3];0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),0===o.indexOf("Lcl ")&&(o=o.replace("Lcl ","Lcl_")),a="Color"===o||"ColorRGB"===o||"Vector"===o||"Vector3D"===o||0===o.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],t[s]={type:o,type2:l,flag:c,value:a}}else void 0===t[i.name]?"number"==typeof i.id?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:"PoseNode"===i.name?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):void 0===t[i.name][i.id]&&(t[i.name][i.id]=i)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var i=e.getUint32();return e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n=e.getUint32(),r=e.getUint32(),a=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}void 0===window.Zlib&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var s=new E(new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(a))).decompress().buffer);switch(t){case"b":case"c":return s.getBooleanArray(n);case"d":return s.getFloat64Array(n);case"f":return s.getFloat32Array(n);case"i":return s.getInt32Array(n);case"l":return s.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}),Object.assign(E.prototype,{getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295==(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=new Uint8Array(e),i=0;i<e;i++)t[i]=this.getUint8();var n=t.indexOf(0);return 0<=n&&(t=t.slice(0,n)),THREE.LoaderUtils.decodeText(t)}}),Object.assign(M.prototype,{add:function(e,t){this[e]=t}})}(),THREE.GLTFLoader=function(){function e(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.dracoLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,i,n){var r,a=this;r=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(e),a.manager.itemStart(e);var s=function(t){n?n(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},o=new THREE.FileLoader(a.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.load(e,function(i){try{a.parse(i,r,function(i){t(i),a.manager.itemEnd(e)},s)}catch(i){s(i)}},i,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,t,o,l){var p,f={};if("string"==typeof e)p=e;else if(THREE.LoaderUtils.decodeText(new Uint8Array(e,0,4))===s){try{f[i.KHR_BINARY_GLTF]=new c(e)}catch(e){return void(l&&l(e))}p=f[i.KHR_BINARY_GLTF].content}else p=THREE.LoaderUtils.decodeText(new Uint8Array(e));var m=JSON.parse(p);if(void 0===m.asset||m.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(m.extensionsUsed)for(var g=0;g<m.extensionsUsed.length;++g){var v=m.extensionsUsed[g],y=m.extensionsRequired||[];switch(v){case i.KHR_LIGHTS_PUNCTUAL:f[v]=new r(m);break;case i.KHR_MATERIALS_UNLIT:f[v]=new a(m);break;case i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:f[v]=new d(m);break;case i.KHR_DRACO_MESH_COMPRESSION:f[v]=new h(m,this.dracoLoader);break;case i.MSFT_TEXTURE_DDS:f[i.MSFT_TEXTURE_DDS]=new n;break;case i.KHR_TEXTURE_TRANSFORM:f[i.KHR_TEXTURE_TRANSFORM]=new u(m);break;default:0<=y.indexOf(v)&&console.warn('THREE.GLTFLoader: Unknown extension "'+v+'".')}}new P(m,f,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(o,l)}}};var i={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(){if(!THREE.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=i.MSFT_TEXTURE_DDS,this.ddsLoader=new THREE.DDSLoader}function r(e){this.name=i.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[i.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function a(e){this.name=i.KHR_MATERIALS_UNLIT}r.prototype.loadLight=function(e){var t,i=this.lightDefs[e],n=new THREE.Color(16777215);void 0!==i.color&&n.fromArray(i.color);var r=void 0!==i.range?i.range:0;switch(i.type){case"directional":(t=new THREE.DirectionalLight(n)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new THREE.PointLight(n)).distance=r;break;case"spot":(t=new THREE.SpotLight(n)).distance=r,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,t.angle=i.spot.outerConeAngle,t.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+i.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==i.intensity&&(t.intensity=i.intensity),t.name=i.name||"light_"+e,Promise.resolve(t)},a.prototype.getMaterialType=function(e){return THREE.MeshBasicMaterial},a.prototype.extendParams=function(e,t,i){var n=[];e.color=new THREE.Color(1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var a=r.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==r.baseColorTexture&&n.push(i.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(n)};var s="glTF",o=12,l={JSON:1313821514,BIN:5130562};function c(e){this.name=i.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,o);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var n=new DataView(e,o),r=0;r<n.byteLength;){var a=n.getUint32(r,!0);r+=4;var c=n.getUint32(r,!0);if(r+=4,c===l.JSON){var h=new Uint8Array(e,o+r,a);this.content=THREE.LoaderUtils.decodeText(h)}else if(c===l.BIN){var u=o+r;this.body=e.slice(u,u+a)}r+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=i.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function u(e){this.name=i.KHR_TEXTURE_TRANSFORM}function d(){return{name:i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(e,t,i){var n=t.extensions[this.name],r=THREE.ShaderLib.standard,a=THREE.UniformsUtils.clone(r.uniforms),s=["#ifdef USE_SPECULARMAP","   uniform sampler2D specularMap;","#endif"].join("\n"),o=["#ifdef USE_GLOSSINESSMAP","   uniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","   vec4 texelSpecular = texture2D( specularMap, vUv );","   texelSpecular = sRGBToLinear( texelSpecular );","   // reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","   specularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","   vec4 texelGlossiness = texture2D( glossinessMap, vUv );","   // reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","   glossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),u=r.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",h);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new THREE.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},e.vertexShader=r.vertexShader,e.fragmentShader=u,e.uniforms=a,e.defines={STANDARD:""},e.color=new THREE.Color(1,1,1),e.opacity=1;var d=[];if(Array.isArray(n.diffuseFactor)){var p=n.diffuseFactor;e.color.fromArray(p),e.opacity=p[3]}if(void 0!==n.diffuseTexture&&d.push(i.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new THREE.Color(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new THREE.Color(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var f=n.specularGlossinessTexture;d.push(i.assignTexture(e,"glossinessMap",f)),d.push(i.assignTexture(e,"specularMap",f))}return Promise.all(d)},createMaterial:function(e){var t=new THREE.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var i=this.specularGlossinessParams,n=0,r=i.length;n<r;n++)t[i[n]]=e[i[n]];return t},refreshUniforms:function(e,t,i,n,r,a){if(!0===r.isGLTFSpecularGlossinessMaterial){var s,o=r.uniforms,l=r.defines;o.opacity.value=r.opacity,o.diffuse.value.copy(r.color),o.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),o.map.value=r.map,o.specularMap.value=r.specularMap,o.alphaMap.value=r.alphaMap,o.lightMap.value=r.lightMap,o.lightMapIntensity.value=r.lightMapIntensity,o.aoMap.value=r.aoMap,o.aoMapIntensity.value=r.aoMapIntensity,r.map?s=r.map:r.specularMap?s=r.specularMap:r.displacementMap?s=r.displacementMap:r.normalMap?s=r.normalMap:r.bumpMap?s=r.bumpMap:r.glossinessMap?s=r.glossinessMap:r.alphaMap?s=r.alphaMap:r.emissiveMap&&(s=r.emissiveMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),o.uvTransform.value.copy(s.matrix)),r.envMap&&(o.envMap.value=r.envMap,o.envMapIntensity.value=r.envMapIntensity,o.flipEnvMap.value=r.envMap.isCubeTexture?-1:1,o.reflectivity.value=r.reflectivity,o.refractionRatio.value=r.refractionRatio,o.maxMipLevel.value=e.properties.get(r.envMap).__maxMipLevel),o.specular.value.copy(r.specular),o.glossiness.value=r.glossiness,o.glossinessMap.value=r.glossinessMap,o.emissiveMap.value=r.emissiveMap,o.bumpMap.value=r.bumpMap,o.normalMap.value=r.normalMap,o.displacementMap.value=r.displacementMap,o.displacementScale.value=r.displacementScale,o.displacementBias.value=r.displacementBias,null!==o.glossinessMap.value&&void 0===l.USE_GLOSSINESSMAP&&(l.USE_GLOSSINESSMAP="",l.USE_ROUGHNESSMAP=""),null===o.glossinessMap.value&&void 0!==l.USE_GLOSSINESSMAP&&(delete l.USE_GLOSSINESSMAP,delete l.USE_ROUGHNESSMAP)}}}}function p(e,t,i,n){THREE.Interpolant.call(this,e,t,i,n)}h.prototype.decodePrimitive=function(e,t){var i=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},l={};for(var c in a){var h=_[c]||c.toLowerCase();s[h]=a[c]}for(c in e.attributes)if(h=_[c]||c.toLowerCase(),void 0!==a[c]){var u=i.accessors[e.attributes[c]],d=m[u.componentType];l[h]=d,o[h]=!0===u.normalized}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(t){n.decodeDracoFile(e,function(e){for(var i in e.attributes){var n=e.attributes[i],r=o[i];void 0!==r&&(n.normalized=r)}t(e)},s,l)})})},u.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},((p.prototype=Object.create(THREE.Interpolant.prototype)).constructor=p).prototype.beforeStart_=p.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n*3+n,a=0;a!==n;a++)t[a]=i[r+a];return t},p.prototype.afterEnd_=p.prototype.copySampleValue_,p.prototype.interpolate_=function(e,t,i,n){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,l=3*s,c=n-t,h=(i-t)/c,u=h*h,d=u*h,p=e*l,f=p-l,m=-2*d+3*u,g=d-u,v=1-m,y=g-u+h,_=0;_!==s;_++){var x=a[f+_+s],b=a[f+_+o]*c,w=a[p+_+s],T=a[p+_]*c;r[_]=v*x+y*b+m*w+g*T}return r};var f,m=(Number,THREE.Matrix3,THREE.Matrix4,THREE.Vector2,THREE.Vector3,THREE.Vector4,THREE.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),g={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},v={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},y=(THREE.BackSide,THREE.FrontSide,THREE.NeverDepth,THREE.LessDepth,THREE.EqualDepth,THREE.LessEqualDepth,THREE.GreaterEqualDepth,THREE.NotEqualDepth,THREE.GreaterEqualDepth,THREE.AlwaysDepth,THREE.AddEquation,THREE.SubtractEquation,THREE.ReverseSubtractEquation,THREE.ZeroFactor,THREE.OneFactor,THREE.SrcColorFactor,THREE.OneMinusSrcColorFactor,THREE.SrcAlphaFactor,THREE.OneMinusSrcAlphaFactor,THREE.DstAlphaFactor,THREE.OneMinusDstAlphaFactor,THREE.DstColorFactor,THREE.OneMinusDstColorFactor,THREE.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),_={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},x={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},b={CUBICSPLINE:void 0,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},w={"image/png":THREE.RGBAFormat,"image/jpeg":THREE.RGBFormat};function T(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function E(e,t,i){for(var n in i.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=i.extensions[n])}function M(e,t){void 0!==t.extras&&("object"==typeof t.extras?e.userData=t.extras:console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function S(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var i=0,n=t.weights.length;i<n;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length)for(e.morphTargetDictionary={},i=0,n=r.length;i<n;i++)e.morphTargetDictionary[r[i]]=i;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function C(e){for(var t="",i=Object.keys(e).sort(),n=0,r=i.length;n<r;n++)t+=i[n]+":"+e[i[n]]+";";return t}function A(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,i=e.itemSize,n=e.array.slice(0,t*i),r=0,a=0;r<t;++r)n[a++]=e.getX(r),2<=i&&(n[a++]=e.getY(r)),3<=i&&(n[a++]=e.getZ(r)),4<=i&&(n[a++]=e.getW(r));return new THREE.BufferAttribute(n,i,e.normalized)}return e.clone()}function P(e,i,n){this.json=e||{},this.extensions=i||{},this.options=n||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function L(e,t,i){var n=t.attributes,r=[];function a(t,n){return i.getDependency("accessor",t).then(function(t){e.addAttribute(n,t)})}for(var s in n){var o=_[s]||s.toLowerCase();o in e.attributes||r.push(a(n[s],o))}if(void 0!==t.indices&&!e.index){var l=i.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});r.push(l)}return M(e,t),Promise.all(r).then(function(){return void 0!==t.targets?function(e,t,i){for(var n=!1,r=!1,a=0,s=t.length;a<s&&(void 0!==(c=t[a]).POSITION&&(n=!0),void 0!==c.NORMAL&&(r=!0),!n||!r);a++);if(!n&&!r)return Promise.resolve(e);var o=[],l=[];for(a=0,s=t.length;a<s;a++){var c=t[a];if(n){var h=void 0!==c.POSITION?i.getDependency("accessor",c.POSITION):e.attributes.position;o.push(h)}r&&(h=void 0!==c.NORMAL?i.getDependency("accessor",c.NORMAL):e.attributes.normal,l.push(h))}return Promise.all([Promise.all(o),Promise.all(l)]).then(function(i){for(var a=i[0],s=i[1],o=0,l=a.length;o<l;o++)e.attributes.position!==a[o]&&(a[o]=A(a[o]));for(o=0,l=s.length;o<l;o++)e.attributes.normal!==s[o]&&(s[o]=A(s[o]));for(o=0,l=t.length;o<l;o++){var c=t[o],h="morphTarget"+o;if(n&&void 0!==c.POSITION){var u=a[o];u.name=h;for(var d=e.attributes.position,p=0,f=u.count;p<f;p++)u.setXYZ(p,u.getX(p)+d.getX(p),u.getY(p)+d.getY(p),u.getZ(p)+d.getZ(p))}if(r&&void 0!==c.NORMAL){var m=s[o];m.name=h;var g=e.attributes.normal;for(p=0,f=m.count;p<f;p++)m.setXYZ(p,m.getX(p)+g.getX(p),m.getY(p)+g.getY(p),m.getZ(p)+g.getZ(p))}}return n&&(e.morphAttributes.position=a),r&&(e.morphAttributes.normal=s),e})}(e,t.targets,i):e})}return P.prototype.parse=function(e,t){var i=this,n=this.json,r=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(t){var a={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:i,userData:{}};E(r,a,n),e(a)}).catch(t)},P.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[],n={},r={},a=0,s=t.length;a<s;a++)for(var o=t[a].joints,l=0,c=o.length;l<c;l++)e[o[l]].isBone=!0;for(var h=0,u=e.length;h<u;h++){var d=e[h];void 0!==d.mesh&&(void 0===n[d.mesh]&&(n[d.mesh]=r[d.mesh]=0),n[d.mesh]++,void 0!==d.skin&&(i[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=n,this.json.meshUses=r},P.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[i.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r},P.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var i=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map(function(t,n){return i.getDependency(e,n)})),this.cache.add(e,t)}return t},P.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[i.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(e,i){n.load(T(t.uri,r.path),e,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})},P.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var i=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+i)})},P.prototype.loadAccessor=function(e){var t=this,i=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);var r=[];return void 0!==n.bufferView?r.push(this.getDependency("bufferView",n.bufferView)):r.push(null),void 0!==n.sparse&&(r.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(r).then(function(e){var r,a,s=e[0],o=y[n.type],l=m[n.componentType],c=l.BYTES_PER_ELEMENT,h=c*o,u=n.byteOffset||0,d=void 0!==n.bufferView?i.bufferViews[n.bufferView].byteStride:void 0,p=!0===n.normalized;if(d&&d!==h){var f="InterleavedBuffer:"+n.bufferView+":"+n.componentType,g=t.cache.get(f);g||(r=new l(s),g=new THREE.InterleavedBuffer(r,d/c),t.cache.add(f,g)),a=new THREE.InterleavedBufferAttribute(g,o,u/c,p)}else r=null===s?new l(n.count*o):new l(s,u,n.count*o),a=new THREE.BufferAttribute(r,o,p);if(void 0!==n.sparse){var v=y.SCALAR,_=m[n.sparse.indices.componentType],x=n.sparse.indices.byteOffset||0,b=n.sparse.values.byteOffset||0,w=new _(e[1],x,n.sparse.count*v),T=new l(e[2],b,n.sparse.count*o);null!==s&&a.setArray(a.array.slice());for(var E=0,M=w.length;E<M;E++){var S=w[E];if(a.setX(S,T[E*o]),2<=o&&a.setY(S,T[E*o+1]),3<=o&&a.setZ(S,T[E*o+2]),4<=o&&a.setW(S,T[E*o+3]),5<=o)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a})},P.prototype.loadTexture=function(e){var t,n=this,r=this.json,a=this.options,s=this.textureLoader,o=window.URL||window.webkitURL,l=r.textures[e],c=l.extensions||{},h=(t=c[i.MSFT_TEXTURE_DDS]?r.images[c[i.MSFT_TEXTURE_DDS].source]:r.images[l.source]).uri,u=!1;return void 0!==t.bufferView&&(h=n.getDependency("bufferView",t.bufferView).then(function(e){u=!0;var i=new Blob([e],{type:t.mimeType});return h=o.createObjectURL(i)})),Promise.resolve(h).then(function(e){var t=THREE.Loader.Handlers.get(e);return t||(t=c[i.MSFT_TEXTURE_DDS]?n.extensions[i.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise(function(i,n){t.load(T(e,a.path),i,void 0,n)})}).then(function(e){!0===u&&o.revokeObjectURL(h),e.flipY=!1,void 0!==l.name&&(e.name=l.name),t.mimeType in w&&(e.format=w[t.mimeType]);var i=(r.samplers||{})[l.sampler]||{};return e.magFilter=g[i.magFilter]||THREE.LinearFilter,e.minFilter=g[i.minFilter]||THREE.LinearMipMapLinearFilter,e.wrapS=v[i.wrapS]||THREE.RepeatWrapping,e.wrapT=v[i.wrapT]||THREE.RepeatWrapping,e})},P.prototype.assignTexture=function(e,t,n){var r=this;return this.getDependency("texture",n.index).then(function(a){switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":a.format=THREE.RGBFormat}if(r.extensions[i.KHR_TEXTURE_TRANSFORM]){var s=void 0!==n.extensions?n.extensions[i.KHR_TEXTURE_TRANSFORM]:void 0;s&&(a=r.extensions[i.KHR_TEXTURE_TRANSFORM].extendTexture(a,s))}e[t]=a})},P.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,r=this.extensions,a=void 0!==t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal,l=!0===e.isSkinnedMesh,c=0<Object.keys(t.morphAttributes).length,h=c&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+n.uuid,d=this.cache.get(u);d||(d=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,d.lights=!1,this.cache.add(u,d)),n=d}else if(e.isLine){u="LineBasicMaterial:"+n.uuid;var p=this.cache.get(u);p||(p=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(p,n),p.color.copy(n.color),p.lights=!1,this.cache.add(u,p)),n=p}if(a||s||o||l||c){u="ClonedMaterial:"+n.uuid+":",n.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),l&&(u+="skinning:"),a&&(u+="vertex-tangents:"),s&&(u+="vertex-colors:"),o&&(u+="flat-shading:"),c&&(u+="morph-targets:"),h&&(u+="morph-normals:");var f=this.cache.get(u);f||(f=n.isGLTFSpecularGlossinessMaterial?r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(n):n.clone(),l&&(f.skinning=!0),a&&(f.vertexTangents=!0),s&&(f.vertexColors=THREE.VertexColors),o&&(f.flatShading=!0),c&&(f.morphTargets=!0),h&&(f.morphNormals=!0),this.cache.add(u,f)),n=f}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),t.addAttribute("uv2",new THREE.BufferAttribute(t.attributes.uv.array,2))),n.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=n},P.prototype.loadMaterial=function(e){var t,n=this.json,r=this.extensions,a=n.materials[e],s={},o=a.extensions||{},l=[];if(o[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(a),l.push(c.extendParams(s,a,this))}else if(o[i.KHR_MATERIALS_UNLIT]){var h=r[i.KHR_MATERIALS_UNLIT];t=h.getMaterialType(a),l.push(h.extendParams(s,a,this))}else{t=THREE.MeshStandardMaterial;var u=a.pbrMetallicRoughness||{};if(s.color=new THREE.Color(1,1,1),s.opacity=1,Array.isArray(u.baseColorFactor)){var d=u.baseColorFactor;s.color.fromArray(d),s.opacity=d[3]}void 0!==u.baseColorTexture&&l.push(this.assignTexture(s,"map",u.baseColorTexture)),s.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,s.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(l.push(this.assignTexture(s,"metalnessMap",u.metallicRoughnessTexture)),l.push(this.assignTexture(s,"roughnessMap",u.metallicRoughnessTexture)))}!0===a.doubleSided&&(s.side=THREE.DoubleSide);var p=a.alphaMode||"OPAQUE";return"BLEND"===p?s.transparent=!0:(s.transparent=!1,"MASK"===p&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==THREE.MeshBasicMaterial&&(l.push(this.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new THREE.Vector2(1,1),void 0!==a.normalTexture.scale&&s.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&t!==THREE.MeshBasicMaterial&&(l.push(this.assignTexture(s,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==THREE.MeshBasicMaterial&&(s.emissive=(new THREE.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==THREE.MeshBasicMaterial&&l.push(this.assignTexture(s,"emissiveMap",a.emissiveTexture)),Promise.all(l).then(function(){var e;return e=t===THREE.ShaderMaterial?r[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),void 0!==a.name&&(e.name=a.name),e.map&&(e.map.encoding=THREE.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=THREE.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=THREE.sRGBEncoding),M(e,a),a.extensions&&E(r,e,a),e})},P.prototype.loadGeometries=function(e){var t=this,n=this.extensions,r=this.primitiveCache;function a(e){return n[i.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(i){return L(i,e,t)})}for(var s,o,l=[],c=0,h=e.length;c<h;c++){var u,d=e[c],p=(o=(s=d).extensions&&s.extensions[i.KHR_DRACO_MESH_COMPRESSION])?"draco:"+o.bufferView+":"+o.indices+":"+C(o.attributes):s.indices+":"+C(s.attributes)+":"+s.mode,f=r[p];f?l.push(f.promise):(u=d.extensions&&d.extensions[i.KHR_DRACO_MESH_COMPRESSION]?a(d):L(new THREE.BufferGeometry,d,t),r[p]={primitive:d,promise:u},l.push(u))}return Promise.all(l)},P.prototype.loadMesh=function(e){for(var t=this,i=this.json,n=(this.extensions,i.meshes[e]),r=n.primitives,a=[],s=0,o=r.length;s<o;s++){var l=void 0===r[s].material?f=f||new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide}):this.getDependency("material",r[s].material);a.push(l)}return Promise.all(a).then(function(i){return t.loadGeometries(r).then(function(a){for(var s=[],o=0,l=a.length;o<l;o++){var c,h=a[o],u=r[o],d=i[o];if(4===u.mode||5===u.mode||6===u.mode||void 0===u.mode)!0===(c=!0===n.isSkinnedMesh?new THREE.SkinnedMesh(h,d):new THREE.Mesh(h,d)).isSkinnedMesh&&c.normalizeSkinWeights(),5===u.mode?c.drawMode=THREE.TriangleStripDrawMode:6===u.mode&&(c.drawMode=THREE.TriangleFanDrawMode);else if(1===u.mode)c=new THREE.LineSegments(h,d);else if(3===u.mode)c=new THREE.Line(h,d);else if(2===u.mode)c=new THREE.LineLoop(h,d);else{if(0!==u.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);c=new THREE.Points(h,d)}0<Object.keys(c.geometry.morphAttributes).length&&S(c,n),c.name=n.name||"mesh_"+e,1<a.length&&(c.name+="_"+o),M(c,n),t.assignFinalMaterial(c),s.push(c)}if(1===s.length)return s[0];var p=new THREE.Group;for(o=0,l=s.length;o<l;o++)p.add(s[o]);return p})})},P.prototype.loadCamera=function(e){var t,i=this.json.cameras[e],n=i[i.type];if(n)return"perspective"===i.type?t=new THREE.PerspectiveCamera(THREE.Math.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===i.type&&(t=new THREE.OrthographicCamera(n.xmag/-2,n.xmag/2,n.ymag/2,n.ymag/-2,n.znear,n.zfar)),void 0!==i.name&&(t.name=i.name),M(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},P.prototype.loadSkin=function(e){var t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return i.inverseBindMatrices=e,i})},P.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],i=[],n=[],r=[],a=[],s=[],o=0,l=t.channels.length;o<l;o++){var c=t.channels[o],h=t.samplers[c.sampler],u=c.target,d=void 0!==u.node?u.node:u.id,f=void 0!==t.parameters?t.parameters[h.input]:h.input,m=void 0!==t.parameters?t.parameters[h.output]:h.output;i.push(this.getDependency("node",d)),n.push(this.getDependency("accessor",f)),r.push(this.getDependency("accessor",m)),a.push(h),s.push(u)}return Promise.all([Promise.all(i),Promise.all(n),Promise.all(r),Promise.all(a),Promise.all(s)]).then(function(i){for(var n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=[],c=0,h=n.length;c<h;c++){var u=n[c],d=r[c],f=a[c],m=s[c],g=o[c];if(void 0!==u){var v;switch(u.updateMatrix(),u.matrixAutoUpdate=!0,x[g.path]){case x.weights:v=THREE.NumberKeyframeTrack;break;case x.rotation:v=THREE.QuaternionKeyframeTrack;break;case x.position:case x.scale:default:v=THREE.VectorKeyframeTrack}var y=u.name?u.name:u.uuid,_=void 0!==m.interpolation?b[m.interpolation]:THREE.InterpolateLinear,w=[];x[g.path]===x.weights?u.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&w.push(e.name?e.name:e.uuid)}):w.push(y);for(var T=0,E=w.length;T<E;T++){var M=new v(w[T]+"."+x[g.path],d.array,f.array,_);"CUBICSPLINE"===m.interpolation&&(M.createInterpolant=function(e){return new p(this.times,this.values,this.getValueSize()/3,e)},M.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(M)}}}var S=void 0!==t.name?t.name:"animation_"+e;return new THREE.AnimationClip(S,void 0,l)})},P.prototype.loadNode=function(e){var t=this.json,n=this.extensions,r=this,a=t.meshReferences,s=t.meshUses,o=t.nodes[e];return(!0===o.isBone?Promise.resolve(new THREE.Bone):void 0!==o.mesh?r.getDependency("mesh",o.mesh).then(function(e){var t;if(1<a[o.mesh]){var i=s[o.mesh]++;(t=e.clone()).name+="_instance_"+i,t.onBeforeRender=e.onBeforeRender;for(var n=0,r=t.children.length;n<r;n++)t.children[n].name+="_instance_"+i,t.children[n].onBeforeRender=e.children[n].onBeforeRender}else t=e;return void 0!==o.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,i=o.weights.length;t<i;t++)e.morphTargetInfluences[t]=o.weights[t]}),t}):void 0!==o.camera?r.getDependency("camera",o.camera):o.extensions&&o.extensions[i.KHR_LIGHTS_PUNCTUAL]&&void 0!==o.extensions[i.KHR_LIGHTS_PUNCTUAL].light?r.getDependency("light",o.extensions[i.KHR_LIGHTS_PUNCTUAL].light):Promise.resolve(new THREE.Object3D)).then(function(e){if(void 0!==o.name&&(e.name=THREE.PropertyBinding.sanitizeNodeName(o.name)),M(e,o),o.extensions&&E(n,e,o),void 0!==o.matrix){var t=new THREE.Matrix4;t.fromArray(o.matrix),e.applyMatrix(t)}else void 0!==o.translation&&e.position.fromArray(o.translation),void 0!==o.rotation&&e.quaternion.fromArray(o.rotation),void 0!==o.scale&&e.scale.fromArray(o.scale);return e})},P.prototype.loadScene=function(){function e(t,i,n,r){var a=n.nodes[t];return r.getDependency("node",t).then(function(e){return void 0===a.skin?e:r.getDependency("skin",a.skin).then(function(e){for(var i=[],n=0,a=(t=e).joints.length;n<a;n++)i.push(r.getDependency("node",t.joints[n]));return Promise.all(i)}).then(function(i){for(var n=!0===e.isGroup?e.children:[e],r=0,a=n.length;r<a;r++){for(var s=n[r],o=[],l=[],c=0,h=i.length;c<h;c++){var u=i[c];if(u){o.push(u);var d=new THREE.Matrix4;void 0!==t.inverseBindMatrices&&d.fromArray(t.inverseBindMatrices.array,16*c),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}s.bind(new THREE.Skeleton(o,l),s.matrixWorld)}return e});var t}).then(function(t){i.add(t);var s=[];if(a.children)for(var o=a.children,l=0,c=o.length;l<c;l++){var h=o[l];s.push(e(h,t,n,r))}return Promise.all(s)})}return function(t){var i=this.json,n=this.extensions,r=this.json.scenes[t],a=new THREE.Scene;void 0!==r.name&&(a.name=r.name),M(a,r),r.extensions&&E(n,a,r);for(var s=r.nodes||[],o=[],l=0,c=s.length;l<c;l++)o.push(e(s[l],a,i,this));return Promise.all(o).then(function(){return a})}}(),e}(),function(e,t,i,n){"use strict";function r(e,t,i){return setTimeout(c(e,i),t)}function a(e,t,i){return!!Array.isArray(e)&&(s(e,i[t],i),!0)}function s(e,t,i){var r;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==n)for(r=0;r<e.length;)t.call(i,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(i,e[r],r,e)}function o(t,i,n){var r="DEPRECATED METHOD: "+i+"\n"+n+" AT \n";return function(){var i=new Error("get-stack-trace"),n=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=e.console&&(e.console.warn||e.console.log);return a&&a.call(e.console,r,n),t.apply(this,arguments)}}function l(e,t,i){var n,r=t.prototype;(n=e.prototype=Object.create(r)).constructor=e,n._super=r,i&&J(n,i)}function c(e,t){return function(){return e.apply(t,arguments)}}function h(e,t){return typeof e==ee?e.apply(t&&t[0]||n,t):e}function u(e,t){return e===n?t:e}function d(e,t,i){s(g(t),function(t){e.addEventListener(t,i,!1)})}function p(e,t,i){s(g(t),function(t){e.removeEventListener(t,i,!1)})}function f(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function m(e,t){return-1<e.indexOf(t)}function g(e){return e.trim().split(/\s+/g)}function v(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var n=0;n<e.length;){if(i&&e[n][i]==t||!i&&e[n]===t)return n;n++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function _(e,t,i){for(var n=[],r=[],a=0;a<e.length;){var s=t?e[a][t]:e[a];v(r,s)<0&&n.push(e[a]),r[a]=s,a++}return i&&(n=t?n.sort(function(e,i){return e[t]>i[t]}):n.sort()),n}function x(e,t){for(var i,r,a=t[0].toUpperCase()+t.slice(1),s=0;s<K.length;){if((r=(i=K[s])?i+a:t)in e)return r;s++}return n}function b(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}function w(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){h(e.options.enable,[e])&&i.handler(t)},this.init()}function T(e,t,i){var r=i.pointers.length,a=i.changedPointers.length,s=t&de&&r-a==0,o=t&(pe|fe)&&r-a==0;i.isFirst=!!s,i.isFinal=!!o,s&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,r=t.pointers,a=r.length;i.firstInput||(i.firstInput=E(t)),1<a&&!i.firstMultiple?i.firstMultiple=E(t):1===a&&(i.firstMultiple=!1);var s,o,l,c,h,u,d=i.firstInput,p=i.firstMultiple,m=p?p.center:d.center,g=t.center=M(r);t.timeStamp=ne(),t.deltaTime=t.timeStamp-d.timeStamp,t.angle=P(m,g),t.distance=A(m,g),s=i,l=(o=t).center,c=s.offsetDelta||{},h=s.prevDelta||{},u=s.prevInput||{},o.eventType!==de&&u.eventType!==pe||(h=s.prevDelta={x:u.deltaX||0,y:u.deltaY||0},c=s.offsetDelta={x:l.x,y:l.y}),o.deltaX=h.x+(l.x-c.x),o.deltaY=h.y+(l.y-c.y),t.offsetDirection=C(t.deltaX,t.deltaY);var v,y,_,x,b=S(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=b.x,t.overallVelocityY=b.y,t.overallVelocity=ie(b.x)>ie(b.y)?b.x:b.y,t.scale=p?(_=p.pointers,A((x=r)[0],x[1],Ee)/A(_[0],_[1],Ee)):1,t.rotation=p?(v=p.pointers,P((y=r)[1],y[0],Ee)+P(v[1],v[0],Ee)):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,function(e,t){var i,r,a,s,o=e.lastInterval||t,l=t.timeStamp-o.timeStamp;if(t.eventType!=fe&&(ue<l||o.velocity===n)){var c=t.deltaX-o.deltaX,h=t.deltaY-o.deltaY,u=S(l,c,h);r=u.x,a=u.y,i=ie(u.x)>ie(u.y)?u.x:u.y,s=C(c,h),e.lastInterval=t}else i=o.velocity,r=o.velocityX,a=o.velocityY,s=o.direction;t.velocity=i,t.velocityX=r,t.velocityY=a,t.direction=s}(i,t);var w=e.element;f(t.srcEvent.target,w)&&(w=t.srcEvent.target),t.target=w}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function E(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:te(e.pointers[i].clientX),clientY:te(e.pointers[i].clientY)},i++;return{timeStamp:ne(),pointers:t,center:M(t),deltaX:e.deltaX,deltaY:e.deltaY}}function M(e){var t=e.length;if(1===t)return{x:te(e[0].clientX),y:te(e[0].clientY)};for(var i=0,n=0,r=0;r<t;)i+=e[r].clientX,n+=e[r].clientY,r++;return{x:te(i/t),y:te(n/t)}}function S(e,t,i){return{x:t/e||0,y:i/e||0}}function C(e,t){return e===t?me:ie(e)>=ie(t)?e<0?ge:ve:t<0?ye:_e}function A(e,t,i){i||(i=Te);var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return Math.sqrt(n*n+r*r)}function P(e,t,i){i||(i=Te);var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return 180*Math.atan2(r,n)/Math.PI}function L(){this.evEl=Se,this.evWin=Ce,this.pressed=!1,w.apply(this,arguments)}function R(){this.evEl=Le,this.evWin=Re,w.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,w.apply(this,arguments)}function I(){this.evTarget=De,this.targetIds={},w.apply(this,arguments)}function D(){w.apply(this,arguments);var e=c(this.handler,this);this.touch=new I(this.manager,e),this.mouse=new L(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function k(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var e=n.indexOf(i);-1<e&&n.splice(e,1)},ke)}}function N(e,t){this.manager=e,this.set(t)}function z(e){this.options=J({},this.defaults,e||{}),this.id=se++,this.manager=null,this.options.enable=u(this.options.enable,!0),this.state=Ve,this.simultaneous={},this.requireFail=[]}function B(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function H(e){return e==_e?"down":e==ye?"up":e==ge?"left":e==ve?"right":""}function F(e,t){var i=t.manager;return i?i.get(e):e}function U(){z.apply(this,arguments)}function G(){U.apply(this,arguments),this.pX=null,this.pY=null}function V(){U.apply(this,arguments)}function j(){z.apply(this,arguments),this._timer=null,this._input=null}function W(){U.apply(this,arguments)}function X(){U.apply(this,arguments)}function Y(){z.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function q(e,t){return(t=t||{}).recognizers=u(t.recognizers,q.defaults.preset),new $(e,t)}function $(e,t){var i;this.options=J({},q.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((i=this).options.inputClass||(le?R:ce?I:oe?D:L))(i,T),this.touchAction=new N(this,this.options.touchAction),Z(this,!0),s(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Z(e,t){var i,n=e.element;n.style&&(s(e.options.cssProps,function(r,a){i=x(n.style,a),n.style[i]=t?(e.oldCssProps[i]=n.style[i],r):e.oldCssProps[i]||""}),t||(e.oldCssProps={}))}var J,K=["","webkit","Moz","MS","ms","o"],Q=t.createElement("div"),ee="function",te=Math.round,ie=Math.abs,ne=Date.now;J="function"!=typeof Object.assign?function(e){if(e===n||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(r!==n&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t}:Object.assign;var re=o(function(e,t,i){for(var r=Object.keys(t),a=0;a<r.length;)(!i||i&&e[r[a]]===n)&&(e[r[a]]=t[r[a]]),a++;return e},"extend","Use `assign`."),ae=o(function(e,t){return re(e,t,!0)},"merge","Use `assign`."),se=1,oe="ontouchstart"in e,le=x(e,"PointerEvent")!==n,ce=oe&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),he="touch",ue=25,de=1,pe=4,fe=8,me=1,ge=2,ve=4,ye=8,_e=16,xe=ge|ve,be=ye|_e,we=xe|be,Te=["x","y"],Ee=["clientX","clientY"];w.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(b(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(b(this.element),this.evWin,this.domHandler)}};var Me={mousedown:de,mousemove:2,mouseup:pe},Se="mousedown",Ce="mousemove mouseup";l(L,w,{handler:function(e){var t=Me[e.type];t&de&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=pe),this.pressed&&(t&pe&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Ae={pointerdown:de,pointermove:2,pointerup:pe,pointercancel:fe,pointerout:fe},Pe={2:he,3:"pen",4:"mouse",5:"kinect"},Le="pointerdown",Re="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Le="MSPointerDown",Re="MSPointerMove MSPointerUp MSPointerCancel"),l(R,w,{handler:function(e){var t=this.store,i=!1,n=e.type.toLowerCase().replace("ms",""),r=Ae[n],a=Pe[e.pointerType]||e.pointerType,s=a==he,o=v(t,e.pointerId,"pointerId");r&de&&(0===e.button||s)?o<0&&(t.push(e),o=t.length-1):r&(pe|fe)&&(i=!0),o<0||(t[o]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),i&&t.splice(o,1))}});var Oe={touchstart:de,touchmove:2,touchend:pe,touchcancel:fe};l(O,w,{handler:function(e){var t=Oe[e.type];if(t===de&&(this.started=!0),this.started){var i=function(e,t){var i=y(e.touches),n=y(e.changedTouches);return t&(pe|fe)&&(i=_(i.concat(n),"identifier",!0)),[i,n]}.call(this,e,t);t&(pe|fe)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:he,srcEvent:e})}}});var Ie={touchstart:de,touchmove:2,touchend:pe,touchcancel:fe},De="touchstart touchmove touchend touchcancel";l(I,w,{handler:function(e){var t=Ie[e.type],i=function(e,t){var i=y(e.touches),n=this.targetIds;if(t&(2|de)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,a,s=y(e.changedTouches),o=[],l=this.target;if(a=i.filter(function(e){return f(e.target,l)}),t===de)for(r=0;r<a.length;)n[a[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&o.push(s[r]),t&(pe|fe)&&delete n[s[r].identifier],r++;return o.length?[_(a.concat(o),"identifier",!0),o]:void 0}.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:he,srcEvent:e})}});var ke=2500;l(D,w,{handler:function(e,t,i){var n=i.pointerType==he,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(e,t){e&de?(this.primaryTouch=t.changedPointers[0].identifier,k.call(this,t)):e&(pe|fe)&&k.call(this,t)}).call(this,t,i);else if(r&&function(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],a=Math.abs(t-r.x),s=Math.abs(i-r.y);if(a<=25&&s<=25)return!0}return!1}.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ne=x(Q.style,"touchAction"),ze=Ne!==n,Be="manipulation",He="none",Fe="pan-x",Ue="pan-y",Ge=function(){if(!ze)return!1;var t={},i=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!i||e.CSS.supports("touch-action",n)}),t}();N.prototype={set:function(e){"compute"==e&&(e=this.compute()),ze&&this.manager.element.style&&Ge[e]&&(this.manager.element.style[Ne]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return s(this.manager.recognizers,function(t){h(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(m(e,He))return He;var t=m(e,Fe),i=m(e,Ue);return t&&i?He:t||i?t?Fe:Ue:m(e,Be)?Be:"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,r=m(n,He)&&!Ge.none,a=m(n,Ue)&&!Ge[Ue],s=m(n,Fe)&&!Ge[Fe];if(r){var o=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(o&&l&&c)return}return s&&a?void 0:r||a&&i&xe||s&&i&be?this.preventSrc(t):void 0}t.preventDefault()},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ve=1;z.prototype={defaults:{},set:function(e){return J(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(a(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=F(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return a(e,"dropRecognizeWith",this)||(e=F(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(a(e,"requireFailure",this))return this;var t=this.requireFail;return-1===v(t,e=F(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(a(e,"dropRequireFailure",this))return this;e=F(e,this);var t=v(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){i.manager.emit(t,e)}var i=this,n=this.state;n<8&&t(i.options.event+B(n)),t(i.options.event),e.additionalEvent&&t(e.additionalEvent),8<=n&&t(i.options.event+B(n))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Ve)))return!1;e++}return!0},recognize:function(e){var t=J({},e);return h(this.options.enable,[this,t])?(56&this.state&&(this.state=Ve),this.state=this.process(t),void(30&this.state&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(e){},getTouchAction:function(){},reset:function(){}},l(U,z,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,n=6&t,r=this.attrTest(e);return n&&(i&fe||!r)?16|t:n||r?i&pe?8|t:2&t?4|t:2:32}}),l(G,U,{defaults:{event:"pan",threshold:10,pointers:1,direction:we},getTouchAction:function(){var e=this.options.direction,t=[];return e&xe&&t.push(Ue),e&be&&t.push(Fe),t},directionTest:function(e){var t=this.options,i=!0,n=e.distance,r=e.direction,a=e.deltaX,s=e.deltaY;return r&t.direction||(n=t.direction&xe?(r=0===a?me:a<0?ge:ve,i=a!=this.pX,Math.abs(e.deltaX)):(r=0===s?me:s<0?ye:_e,i=s!=this.pY,Math.abs(e.deltaY))),e.direction=r,i&&n>t.threshold&&r&t.direction},attrTest:function(e){return U.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=H(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),l(V,U,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[He]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),l(j,z,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!n||!i||e.eventType&(pe|fe)&&!a)this.reset();else if(e.eventType&de)this.reset(),this._timer=r(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&pe)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&pe?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ne(),this.manager.emit(this.options.event,this._input)))}}),l(W,U,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[He]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),l(X,U,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:xe|be,pointers:1},getTouchAction:function(){return G.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(xe|be)?t=e.overallVelocity:i&xe?t=e.overallVelocityX:i&be&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ie(t)>this.options.velocity&&e.eventType&pe},emit:function(e){var t=H(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),l(Y,z,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Be]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&de&&0===this.count)return this.failTimeout();if(n&&a&&i){if(e.eventType!=pe)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||A(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&s?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=r(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=r(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),q.VERSION="2.0.8",q.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[W,{enable:!1}],[V,{enable:!1},["rotate"]],[X,{direction:xe}],[G,{direction:xe},["swipe"]],[Y],[Y,{event:"doubletap",taps:2},["tap"]],[j]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},$.prototype={set:function(e){return J(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,n=this.recognizers,r=t.curRecognizer;(!r||r&&8&r.state)&&(r=t.curRecognizer=null);for(var a=0;a<n.length;)i=n[a],2===t.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(e),!r&&14&i.state&&(r=t.curRecognizer=i),a++}},get:function(e){if(e instanceof z)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(a(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(a(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=v(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==n&&t!==n){var i=this.handlers;return s(g(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==n){var i=this.handlers;return s(g(e),function(e){t?i[e]&&i[e].splice(v(i[e],t),1):delete i[e]}),this}},emit:function(e,i){var n,r,a;this.options.domEvents&&(n=e,r=i,(a=t.createEvent("Event")).initEvent(n,!0,!0),(a.gesture=r).target.dispatchEvent(a));var s=this.handlers[e]&&this.handlers[e].slice();if(s&&s.length){i.type=e,i.preventDefault=function(){i.srcEvent.preventDefault()};for(var o=0;o<s.length;)s[o](i),o++}},destroy:function(){this.element&&Z(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},J(q,{INPUT_START:de,INPUT_MOVE:2,INPUT_END:pe,INPUT_CANCEL:fe,STATE_POSSIBLE:Ve,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:me,DIRECTION_LEFT:ge,DIRECTION_RIGHT:ve,DIRECTION_UP:ye,DIRECTION_DOWN:_e,DIRECTION_HORIZONTAL:xe,DIRECTION_VERTICAL:be,DIRECTION_ALL:we,Manager:$,Input:w,TouchAction:N,TouchInput:I,MouseInput:L,PointerEventInput:R,TouchMouseInput:D,SingleTouchInput:O,Recognizer:z,AttrRecognizer:U,Tap:Y,Pan:G,Swipe:X,Pinch:V,Rotate:W,Press:j,on:d,off:p,each:s,merge:ae,extend:re,assign:J,inherit:l,bindFn:c,prefixed:x}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=q,"function"==typeof define&&define.amd?define(function(){return q}):"undefined"!=typeof module&&module.exports?module.exports=q:e.Hammer=q}(window,document),function(){"use strict";var e=void 0,t=this;function i(i,n){var r,a=i.split("."),s=t;!(a[0]in s)&&s.execScript&&s.execScript("var "+a[0]);for(;a.length&&(r=a.shift());)a.length||n===e?s=s[r]?s[r]:s[r]={}:s[r]=n}var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function r(e){var t,i,r,a,s,o,l,c,h,u,d=e.length,p=0,f=Number.POSITIVE_INFINITY;for(c=0;c<d;++c)e[c]>p&&(p=e[c]),e[c]<f&&(f=e[c]);for(t=1<<p,i=new(n?Uint32Array:Array)(t),r=1,a=0,s=2;r<=p;){for(c=0;c<d;++c)if(e[c]===r){for(l=a,h=o=0;h<r;++h)o=o<<1|1&l,l>>=1;for(u=r<<16|c,h=o;h<t;h+=s)i[h]=u;++a}++r,a<<=1,s<<=1}return[i,p,f]}function a(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=n?new Uint8Array(e):e,this.m=!1,this.i=o,this.r=!1,(t||(t={},0))&&(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case s:this.b=32768,this.c=new(n?Uint8Array:Array)(32768+this.h+258);break;case o:this.b=0,this.c=new(n?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var s=0,o=1,l=s,c=o;a.prototype.k=function(){for(;!this.m;){var t=A(this,3);switch(1&t&&(this.m=!0),t>>>=1){case 0:var i=this.input,a=this.a,l=this.c,c=this.b,h=i.length,u=e,d=l.length,f=e;if(this.d=this.f=0,h<=a+1)throw Error("invalid uncompressed block header: LEN");if(u=i[a++]|i[a++]<<8,h<=a+1)throw Error("invalid uncompressed block header: NLEN");if(u===~(i[a++]|i[a++]<<8))throw Error("invalid uncompressed block header: length verify");if(a+u>i.length)throw Error("input buffer is broken");switch(this.i){case s:for(;c+u>l.length;){if(u-=f=d-c,n)l.set(i.subarray(a,a+f),c),c+=f,a+=f;else for(;f--;)l[c++]=i[a++];this.b=c,l=this.e(),c=this.b}break;case o:for(;c+u>l.length;)l=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(n)l.set(i.subarray(a,a+u),c),c+=u,a+=u;else for(;u--;)l[c++]=i[a++];this.a=a,this.b=c,this.c=l;break;case 1:this.j(M,C);break;case 2:var m,g,v,y,_=A(this,5)+257,x=A(this,5)+1,b=A(this,4)+4,w=new(n?Uint8Array:Array)(p.length),T=e,E=e,S=e,L=e,R=e;for(R=0;R<b;++R)w[p[R]]=A(this,3);if(!n)for(R=b,b=w.length;R<b;++R)w[p[R]]=0;for(m=r(w),T=new(n?Uint8Array:Array)(_+x),R=0,y=_+x;R<y;)switch(E=P(this,m),E){case 16:for(L=3+A(this,2);L--;)T[R++]=S;break;case 17:for(L=3+A(this,3);L--;)T[R++]=0;S=0;break;case 18:for(L=11+A(this,7);L--;)T[R++]=0;S=0;break;default:S=T[R++]=E}g=r(n?T.subarray(0,_):T.slice(0,_)),v=r(n?T.subarray(_):T.slice(_)),this.j(g,v);break;default:throw Error("unknown BTYPE: "+t)}}return this.n()};var h,u,d=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],p=n?new Uint16Array(d):d,f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],m=n?new Uint16Array(f):f,g=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],v=n?new Uint8Array(g):g,y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],_=n?new Uint16Array(y):y,x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b=n?new Uint8Array(x):x,w=new(n?Uint8Array:Array)(288);for(h=0,u=w.length;h<u;++h)w[h]=h<=143?8:h<=255?9:h<=279?7:8;var T,E,M=r(w),S=new(n?Uint8Array:Array)(30);for(T=0,E=S.length;T<E;++T)S[T]=5;var C=r(S);function A(e,t){for(var i,n=e.f,r=e.d,a=e.input,s=e.a,o=a.length;r<t;){if(o<=s)throw Error("input buffer is broken");n|=a[s++]<<r,r+=8}return i=n&(1<<t)-1,e.f=n>>>t,e.d=r-t,e.a=s,i}function P(e,t){for(var i,n,r=e.f,a=e.d,s=e.input,o=e.a,l=s.length,c=t[0],h=t[1];a<h&&!(l<=o);)r|=s[o++]<<a,a+=8;if(a<(n=(i=c[r&(1<<h)-1])>>>16))throw Error("invalid code length: "+n);return e.f=r>>n,e.d=a-n,e.a=o,65535&i}function L(e,t){var i,n;switch(this.input=e,this.a=0,(t||(t={},0))&&(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),i=e[this.a++],n=e[this.a++],15&i){case R:this.method=R;break;default:throw Error("unsupported compression method")}if(0!=((i<<8)+n)%31)throw Error("invalid fcheck flag:"+((i<<8)+n)%31);if(32&n)throw Error("fdict flag is not supported");this.q=new a(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}a.prototype.j=function(e,t){var i=this.c,n=this.b;this.o=e;for(var r,a,s,o,l=i.length-258;256!==(r=P(this,e));)if(r<256)l<=n&&(this.b=n,i=this.e(),n=this.b),i[n++]=r;else for(o=m[a=r-257],0<v[a]&&(o+=A(this,v[a])),r=P(this,t),s=_[r],0<b[r]&&(s+=A(this,b[r])),l<=n&&(this.b=n,i=this.e(),n=this.b);o--;)i[n]=i[n++-s];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},a.prototype.w=function(e,t){var i=this.c,n=this.b;this.o=e;for(var r,a,s,o,l=i.length;256!==(r=P(this,e));)if(r<256)l<=n&&(l=(i=this.e()).length),i[n++]=r;else for(o=m[a=r-257],0<v[a]&&(o+=A(this,v[a])),r=P(this,t),s=_[r],0<b[r]&&(s+=A(this,b[r])),l<n+o&&(l=(i=this.e()).length);o--;)i[n]=i[n++-s];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},a.prototype.e=function(){var e,t,i=new(n?Uint8Array:Array)(this.b-32768),r=this.b-32768,a=this.c;if(n)i.set(a.subarray(32768,i.length));else for(e=0,t=i.length;e<t;++e)i[e]=a[e+32768];if(this.g.push(i),this.l+=i.length,n)a.set(a.subarray(r,r+32768));else for(e=0;e<32768;++e)a[e]=a[r+e];return this.b=32768,a},a.prototype.z=function(e){var t,i,r,a=this.input.length/this.a+1|0,s=this.input,o=this.c;return e&&("number"==typeof e.p&&(a=e.p),"number"==typeof e.u&&(a+=e.u)),i=a<2?(r=(s.length-this.a)/this.o[2]/2*258|0)<o.length?o.length+r:o.length<<1:o.length*a,n?(t=new Uint8Array(i)).set(o):t=o,this.c=t},a.prototype.n=function(){var e,t,i,r,a,s=0,o=this.c,l=this.g,c=new(n?Uint8Array:Array)(this.l+(this.b-32768));if(0===l.length)return n?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,i=l.length;t<i;++t)for(r=0,a=(e=l[t]).length;r<a;++r)c[s++]=e[r];for(t=32768,i=this.b;t<i;++t)c[s++]=o[t];return this.g=[],this.buffer=c},a.prototype.v=function(){var e,t=this.b;return n?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},L.prototype.k=function(){var e,t,i=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var n=e;if("string"==typeof n){var r,a,s=n.split("");for(r=0,a=s.length;r<a;r++)s[r]=(255&s[r].charCodeAt(0))>>>0;n=s}for(var o,l=1,c=0,h=n.length,u=0;0<h;){for(h-=o=1024<h?1024:h;c+=l+=n[u++],--o;);l%=65521,c%=65521}if(t!==(c<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var R=8;i("Zlib.Inflate",L),i("Zlib.Inflate.prototype.decompress",L.prototype.k);var O,I,D,k,N={ADAPTIVE:c,BLOCK:l};if(Object.keys)O=Object.keys(N);else for(I in O=[],D=0,N)O[D++]=I;for(D=0,k=O.length;D<k;++D)i("Zlib.Inflate.BufferType."+(I=O[D]),N[I])}.call(this),THREE.OBJLoader=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,i=/^usemtl /;function n(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&0<t.length?t[t.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&1<this.materials.length)for(var i=this.materials.length-1;0<=i;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},i&&i.name&&"function"==typeof i.clone){var n=i.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var i=parseInt(e,10);return 3*(0<=i?i-1:i+t/3)},parseNormalIndex:function(e,t){var i=parseInt(e,10);return 3*(0<=i?i-1:i+t/3)},parseUVIndex:function(e,t){var i=parseInt(e,10);return 2*(0<=i?i-1:i+t/2)},addVertex:function(e,t,i){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){var n=this.normals,r=this.object.geometry.normals;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addColor:function(e,t,i){var n=this.colors,r=this.object.geometry.colors;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addUV:function(e,t,i){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[e+0],n[e+1]),r.push(n[t+0],n[t+1]),r.push(n[i+0],n[i+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,n,r,a,s,o,l){var c=this.vertices.length,h=this.parseVertexIndex(e,c),u=this.parseVertexIndex(t,c),d=this.parseVertexIndex(i,c);if(this.addVertex(h,u,d),void 0!==n&&""!==n){var p=this.uvs.length;h=this.parseUVIndex(n,p),u=this.parseUVIndex(r,p),d=this.parseUVIndex(a,p),this.addUV(h,u,d)}if(void 0!==s&&""!==s){var f=this.normals.length;h=this.parseNormalIndex(s,f),u=s===o?h:this.parseNormalIndex(o,f),d=s===l?h:this.parseNormalIndex(l,f),this.addNormal(h,u,d)}0<this.colors.length&&this.addColor(h,u,d)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,i=0,n=e.length;i<n;i++)this.addVertexPoint(this.parseVertexIndex(e[i],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var i=this.vertices.length,n=this.uvs.length,r=0,a=e.length;r<a;r++)this.addVertexLine(this.parseVertexIndex(e[r],i));var s=0;for(a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],n))}};return e.startObject("",!1),e}function r(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null}return r.prototype={constructor:r,load:function(e,t,i,n){var r=this,a=new THREE.FileLoader(r.manager);a.setPath(this.path),a.load(e,function(e){t(r.parse(e))},i,n)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(r){console.time("OBJLoader");var a=new n;-1!==r.indexOf("\r\n")&&(r=r.replace(/\r\n/g,"\n")),-1!==r.indexOf("\\\n")&&(r=r.replace(/\\\n/g,""));for(var s=r.split("\n"),o="",l="",c=[],h="function"==typeof"".trimLeft,u=0,d=s.length;u<d;u++)if(o=s[u],0!==(o=h?o.trimLeft():o.trim()).length&&"#"!==(l=o.charAt(0)))if("v"===l){var p=o.split(/\s+/);switch(p[0]){case"v":a.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),8===p.length&&a.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":a.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":a.uvs.push(parseFloat(p[1]),parseFloat(p[2]))}}else if("f"===l){for(var f=o.substr(1).trim().split(/\s+/),m=[],g=0,v=f.length;g<v;g++){var y=f[g];if(0<y.length){var _=y.split("/");m.push(_)}}var x=m[0];for(g=1,v=m.length-1;g<v;g++){var b=m[g],w=m[g+1];a.addFace(x[0],b[0],w[0],x[1],b[1],w[1],x[2],b[2],w[2])}}else if("l"===l){var T=o.substring(1).trim().split(" "),E=[],M=[];if(-1===o.indexOf("/"))E=T;else for(var S=0,C=T.length;S<C;S++){var A=T[S].split("/");""!==A[0]&&E.push(A[0]),""!==A[1]&&M.push(A[1])}a.addLineGeometry(E,M)}else if("p"===l){var P=o.substr(1).trim().split(" ");a.addPointGeometry(P)}else if(null!==(c=e.exec(o))){var L=(" "+c[0].substr(1).trim()).substr(1);a.startObject(L)}else if(i.test(o))a.object.startMaterial(o.substring(7).trim(),a.materialLibraries);else if(t.test(o))a.materialLibraries.push(o.substring(7).trim());else{if("s"!==l){if("\0"===o)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+o+'"')}if(1<(c=o.split(" ")).length){var R=c[1].trim().toLowerCase();a.object.smooth="0"!==R&&"off"!==R}else a.object.smooth=!0;(W=a.object.currentMaterial())&&(W.smooth=a.object.smooth)}a.finalize();var O=new THREE.Group;for(O.materialLibraries=[].concat(a.materialLibraries),u=0,d=a.objects.length;u<d;u++){var I=a.objects[u],D=I.geometry,k=I.materials,N="Line"===D.type,z="Points"===D.type,B=!1;if(0!==D.vertices.length){var H=new THREE.BufferGeometry;H.addAttribute("position",new THREE.Float32BufferAttribute(D.vertices,3)),0<D.normals.length?H.addAttribute("normal",new THREE.Float32BufferAttribute(D.normals,3)):H.computeVertexNormals(),0<D.colors.length&&(B=!0,H.addAttribute("color",new THREE.Float32BufferAttribute(D.colors,3))),0<D.uvs.length&&H.addAttribute("uv",new THREE.Float32BufferAttribute(D.uvs,2));for(var F,U=[],G=0,V=k.length;G<V;G++){var j=k[G],W=void 0;if(null!==this.materials)if(W=this.materials.create(j.name),!N||!W||W instanceof THREE.LineBasicMaterial){if(z&&W&&!(W instanceof THREE.PointsMaterial)){var X=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});Y.copy(W),W=X}}else{var Y=new THREE.LineBasicMaterial;Y.copy(W),Y.lights=!1,W=Y}W||((W=N?new THREE.LineBasicMaterial:z?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial).name=j.name),W.flatShading=!j.smooth,W.vertexColors=B?THREE.VertexColors:THREE.NoColors,U.push(W)}if(1<U.length){for(G=0,V=k.length;G<V;G++)j=k[G],H.addGroup(j.groupStart,j.groupCount,G);F=N?new THREE.LineSegments(H,U):z?new THREE.Points(H,U):new THREE.Mesh(H,U)}else F=N?new THREE.LineSegments(H,U[0]):z?new THREE.Points(H,U[0]):new THREE.Mesh(H,U[0]);F.name=I.name,O.add(F)}}return console.timeEnd("OBJLoader"),O}},r}(),THREE.OrbitControls=function(e,t){var i,n,r,a,s;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(l),o.update(),d=u.NONE},this.update=(i=new THREE.Vector3,n=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),r=n.clone().inverse(),a=new THREE.Vector3,s=new THREE.Quaternion,function(){var e=o.object.position;return i.copy(e).sub(o.target),i.applyQuaternion(n),f.setFromVector3(i),o.autoRotate&&d===u.NONE&&P(2*Math.PI/60/60*o.autoRotateSpeed),f.theta+=m.theta,f.phi+=m.phi,f.theta=Math.max(o.minAzimuthAngle,Math.min(o.maxAzimuthAngle,f.theta)),f.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=g,f.radius=Math.max(o.minDistance,Math.min(o.maxDistance,f.radius)),o.target.add(v),i.setFromSpherical(f),i.applyQuaternion(r),e.copy(o.target).add(i),o.object.lookAt(o.target),!0===o.enableDamping?(m.theta*=1-o.dampingFactor,m.phi*=1-o.dampingFactor,v.multiplyScalar(1-o.dampingFactor)):(m.set(0,0,0),v.set(0,0,0)),g=1,!(!(y||a.distanceToSquared(o.object.position)>p||8*(1-s.dot(o.object.quaternion))>p)||(o.dispatchEvent(l),a.copy(o.object.position),s.copy(o.object.quaternion),y=!1))}),this.dispose=function(){o.domElement.removeEventListener("contextmenu",Y,!1),o.domElement.removeEventListener("mousedown",H,!1),o.domElement.removeEventListener("wheel",G,!1),o.domElement.removeEventListener("touchstart",j,!1),o.domElement.removeEventListener("touchend",X,!1),o.domElement.removeEventListener("touchmove",W,!1),document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",U,!1),window.removeEventListener("keydown",V,!1)};var o=this,l={type:"change"},c={type:"start"},h={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},d=u.NONE,p=1e-6,f=new THREE.Spherical,m=new THREE.Spherical,g=1,v=new THREE.Vector3,y=!1,_=new THREE.Vector2,x=new THREE.Vector2,b=new THREE.Vector2,w=new THREE.Vector2,T=new THREE.Vector2,E=new THREE.Vector2,M=new THREE.Vector2,S=new THREE.Vector2,C=new THREE.Vector2;function A(){return Math.pow(.95,o.zoomSpeed)}function P(e){m.theta-=e}function L(e){m.phi-=e}var R,O,I,D=(R=new THREE.Vector3,function(e,t){R.setFromMatrixColumn(t,0),R.multiplyScalar(-e),v.add(R)}),k=(O=new THREE.Vector3,function(e,t){!0===o.screenSpacePanning?O.setFromMatrixColumn(t,1):(O.setFromMatrixColumn(t,0),O.crossVectors(o.object.up,O)),O.multiplyScalar(e),v.add(O)}),N=(I=new THREE.Vector3,function(e,t){var i=o.domElement===document?o.domElement.body:o.domElement;if(o.object.isPerspectiveCamera){var n=o.object.position;I.copy(n).sub(o.target);var r=I.length();r*=Math.tan(o.object.fov/2*Math.PI/180),D(2*e*r/i.clientHeight,o.object.matrix),k(2*t*r/i.clientHeight,o.object.matrix)}else o.object.isOrthographicCamera?(D(e*(o.object.right-o.object.left)/o.object.zoom/i.clientWidth,o.object.matrix),k(t*(o.object.top-o.object.bottom)/o.object.zoom/i.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)});function z(e){o.object.isPerspectiveCamera?g/=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function B(e){o.object.isPerspectiveCamera?g*=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function H(e){if(!1!==o.enabled){switch(e.preventDefault(),e.button){case o.mouseButtons.ORBIT:if(!1===o.enableRotate)return;n=e,_.set(n.clientX,n.clientY),d=u.ROTATE;break;case o.mouseButtons.ZOOM:if(!1===o.enableZoom)return;i=e,M.set(i.clientX,i.clientY),d=u.DOLLY;break;case o.mouseButtons.PAN:if(!1===o.enablePan)return;t=e,w.set(t.clientX,t.clientY),d=u.PAN}var t,i,n;d!==u.NONE&&(document.addEventListener("mousemove",F,!1),document.addEventListener("mouseup",U,!1),o.dispatchEvent(c))}}function F(e){var t,i;if(!1!==o.enabled)switch(e.preventDefault(),d){case u.ROTATE:if(!1===o.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),b.subVectors(x,_).multiplyScalar(o.rotateSpeed);var t=o.domElement===document?o.domElement.body:o.domElement;P(2*Math.PI*b.x/t.clientWidth),L(2*Math.PI*b.y/t.clientHeight),_.copy(x),o.update()}(e);break;case u.DOLLY:if(!1===o.enableZoom)return;i=e,S.set(i.clientX,i.clientY),C.subVectors(S,M),0<C.y?z(A()):C.y<0&&B(A()),M.copy(S),o.update();break;case u.PAN:if(!1===o.enablePan)return;t=e,T.set(t.clientX,t.clientY),E.subVectors(T,w).multiplyScalar(o.panSpeed),N(E.x,E.y),w.copy(T),o.update()}}function U(e){!1!==o.enabled&&(document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",U,!1),o.dispatchEvent(h),d=u.NONE)}function G(e){var t;!1===o.enabled||!1===o.enableZoom||d!==u.NONE&&d!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),o.dispatchEvent(c),(t=e).deltaY<0?B(A()):0<t.deltaY&&z(A()),o.update(),o.dispatchEvent(h))}function V(e){!1!==o.enabled&&!1!==o.enableKeys&&!1!==o.enablePan&&function(e){switch(e.keyCode){case o.keys.UP:N(0,o.keyPanSpeed),o.update();break;case o.keys.BOTTOM:N(0,-o.keyPanSpeed),o.update();break;case o.keys.LEFT:N(o.keyPanSpeed,0),o.update();break;case o.keys.RIGHT:N(-o.keyPanSpeed,0),o.update()}}(e)}function j(e){if(!1!==o.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===o.enableRotate)return;t=e,_.set(t.touches[0].pageX,t.touches[0].pageY),d=u.TOUCH_ROTATE;break;case 2:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){if(o.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);M.set(0,n)}if(o.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(r,a)}}(e),d=u.TOUCH_DOLLY_PAN;break;default:d=u.NONE}var t;d!==u.NONE&&o.dispatchEvent(c)}}function W(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===o.enableRotate)return;if(d!==u.TOUCH_ROTATE)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY),b.subVectors(x,_).multiplyScalar(o.rotateSpeed);var t=o.domElement===document?o.domElement.body:o.domElement;P(2*Math.PI*b.x/t.clientWidth),L(2*Math.PI*b.y/t.clientHeight),_.copy(x),o.update()}(e);break;case 2:if(!1===o.enableZoom&&!1===o.enablePan)return;if(d!==u.TOUCH_DOLLY_PAN)return;!function(e){if(o.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);S.set(0,n),C.set(0,Math.pow(S.y/M.y,o.zoomSpeed)),z(C.y),M.copy(S)}if(o.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);T.set(r,a),E.subVectors(T,w).multiplyScalar(o.panSpeed),N(E.x,E.y),w.copy(T)}o.update()}(e);break;default:d=u.NONE}}function X(e){!1!==o.enabled&&(o.dispatchEvent(h),d=u.NONE)}function Y(e){!1!==o.enabled&&e.preventDefault()}o.domElement.addEventListener("contextmenu",Y,!1),o.domElement.addEventListener("mousedown",H,!1),o.domElement.addEventListener("wheel",G,!1),o.domElement.addEventListener("touchstart",j,!1),o.domElement.addEventListener("touchend",X,!1),o.domElement.addEventListener("touchmove",W,!1),window.addEventListener("keydown",V,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Swiper=t()}(this,function(){"use strict";var e="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,t="undefined"==typeof window?{document:e,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,i=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function n(n,r){var a=[],s=0;if(n&&!r&&n instanceof i)return n;if(n)if("string"==typeof n){var o,l,c=n.trim();if(0<=c.indexOf("<")&&0<=c.indexOf(">")){var h="div";for(0===c.indexOf("<li")&&(h="ul"),0===c.indexOf("<tr")&&(h="tbody"),0!==c.indexOf("<td")&&0!==c.indexOf("<th")||(h="tr"),0===c.indexOf("<tbody")&&(h="table"),0===c.indexOf("<option")&&(h="select"),(l=e.createElement(h)).innerHTML=c,s=0;s<l.childNodes.length;s+=1)a.push(l.childNodes[s])}else for(o=r||"#"!==n[0]||n.match(/[ .<>:~]/)?(r||e).querySelectorAll(n.trim()):[e.getElementById(n.trim().split("#")[1])],s=0;s<o.length;s+=1)o[s]&&a.push(o[s])}else if(n.nodeType||n===t||n===e)a.push(n);else if(0<n.length&&n[0].nodeType)for(s=0;s<n.length;s+=1)a.push(n[s]);return new i(a)}function r(e){for(var t=[],i=0;i<e.length;i+=1)-1===t.indexOf(e[i])&&t.push(e[i]);return t}n.fn=i.prototype,n.Class=i,n.Dom7=i;var a={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var n=0;n<this.length;n+=1)void 0!==this[n]&&void 0!==this[n].classList&&this[n].classList.add(t[i]);return this},removeClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var n=0;n<this.length;n+=1)void 0!==this[n]&&void 0!==this[n].classList&&this[n].classList.remove(t[i]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var n=0;n<this.length;n+=1)void 0!==this[n]&&void 0!==this[n].classList&&this[n].classList.toggle(t[i]);return this},attr:function(e,t){var i=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===i.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var i;if(void 0!==t){for(var n=0;n<this.length;n+=1)(i=this[n]).dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t;return this}if(i=this[0])return i.dom7ElementDataStorage&&e in i.dom7ElementDataStorage?i.dom7ElementDataStorage[e]:i.getAttribute("data-"+e)||void 0},transform:function(e){for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransform=e,i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransitionDuration=e,i.transitionDuration=e}return this},on:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var r=t[0],a=t[1],s=t[2],o=t[3];function l(e){var t=e.target;if(t){var i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),n(t).is(a))s.apply(t,i);else for(var r=n(t).parents(),o=0;o<r.length;o+=1)n(r[o]).is(a)&&s.apply(r[o],i)}}function c(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),s.apply(this,t)}"function"==typeof t[1]&&(r=(e=t)[0],s=e[1],o=e[2],a=void 0),o||(o=!1);for(var h,u=r.split(" "),d=0;d<this.length;d+=1){var p=this[d];if(a)for(h=0;h<u.length;h+=1){var f=u[h];p.dom7LiveListeners||(p.dom7LiveListeners={}),p.dom7LiveListeners[f]||(p.dom7LiveListeners[f]=[]),p.dom7LiveListeners[f].push({listener:s,proxyListener:l}),p.addEventListener(f,l,o)}else for(h=0;h<u.length;h+=1){var m=u[h];p.dom7Listeners||(p.dom7Listeners={}),p.dom7Listeners[m]||(p.dom7Listeners[m]=[]),p.dom7Listeners[m].push({listener:s,proxyListener:c}),p.addEventListener(m,c,o)}}return this},off:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var n=t[0],r=t[1],a=t[2],s=t[3];"function"==typeof t[1]&&(n=(e=t)[0],a=e[1],s=e[2],r=void 0),s||(s=!1);for(var o=n.split(" "),l=0;l<o.length;l+=1)for(var c=o[l],h=0;h<this.length;h+=1){var u=this[h],d=void 0;if(!r&&u.dom7Listeners?d=u.dom7Listeners[c]:r&&u.dom7LiveListeners&&(d=u.dom7LiveListeners[c]),d&&d.length)for(var p=d.length-1;0<=p;p-=1){var f=d[p];a&&f.listener===a?(u.removeEventListener(c,f.proxyListener,s),d.splice(p,1)):a||(u.removeEventListener(c,f.proxyListener,s),d.splice(p,1))}}return this},trigger:function(){for(var i=[],n=arguments.length;n--;)i[n]=arguments[n];for(var r=i[0].split(" "),a=i[1],s=0;s<r.length;s+=1)for(var o=r[s],l=0;l<this.length;l+=1){var c=this[l],h=void 0;try{h=new t.CustomEvent(o,{detail:a,bubbles:!0,cancelable:!0})}catch(i){(h=e.createEvent("Event")).initEvent(o,!0,!0),h.detail=a}c.dom7EventData=i.filter(function(e,t){return 0<t}),c.dispatchEvent(h),c.dom7EventData=[],delete c.dom7EventData}return this},transitionEnd:function(e){var t,i=["webkitTransitionEnd","transitionend"],n=this;function r(a){if(a.target===this)for(e.call(this,a),t=0;t<i.length;t+=1)n.off(i[t],r)}if(e)for(t=0;t<i.length;t+=1)n.on(i[t],r);return this},outerWidth:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(0<this.length){var i=this[0],n=i.getBoundingClientRect(),r=e.body,a=i.clientTop||r.clientTop||0,s=i.clientLeft||r.clientLeft||0,o=i===t?t.scrollY:i.scrollTop,l=i===t?t.scrollX:i.scrollLeft;return{top:n.top+o-a,left:n.left+l-s}}return null},css:function(e,i){var n;if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n+=1)for(var r in e)this[n].style[r]=e[r];return this}if(this[0])return t.getComputedStyle(this[0],null).getPropertyValue(e)}if(2!==arguments.length||"string"!=typeof e)return this;for(n=0;n<this.length;n+=1)this[n].style[e]=i;return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(r){var a,s,o=this[0];if(!o||void 0===r)return!1;if("string"==typeof r){if(o.matches)return o.matches(r);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(r);if(o.msMatchesSelector)return o.msMatchesSelector(r);for(a=n(r),s=0;s<a.length;s+=1)if(a[s]===o)return!0;return!1}if(r===e)return o===e;if(r===t)return o===t;if(r.nodeType||r instanceof i){for(a=r.nodeType?[r]:r,s=0;s<a.length;s+=1)if(a[s]===o)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,n=this.length;return new i(n-1<e?[]:e<0?(t=n+e)<0?[]:[this[t]]:[this[e]])},append:function(){for(var t,n=[],r=arguments.length;r--;)n[r]=arguments[r];for(var a=0;a<n.length;a+=1){t=n[a];for(var s=0;s<this.length;s+=1)if("string"==typeof t){var o=e.createElement("div");for(o.innerHTML=t;o.firstChild;)this[s].appendChild(o.firstChild)}else if(t instanceof i)for(var l=0;l<t.length;l+=1)this[s].appendChild(t[l]);else this[s].appendChild(t)}return this},prepend:function(t){var n,r;for(n=0;n<this.length;n+=1)if("string"==typeof t){var a=e.createElement("div");for(a.innerHTML=t,r=a.childNodes.length-1;0<=r;r-=1)this[n].insertBefore(a.childNodes[r],this[n].childNodes[0])}else if(t instanceof i)for(r=0;r<t.length;r+=1)this[n].insertBefore(t[r],this[n].childNodes[0]);else this[n].insertBefore(t,this[n].childNodes[0]);return this},next:function(e){return 0<this.length?e?this[0].nextElementSibling&&n(this[0].nextElementSibling).is(e)?new i([this[0].nextElementSibling]):new i([]):this[0].nextElementSibling?new i([this[0].nextElementSibling]):new i([]):new i([])},nextAll:function(e){var t=[],r=this[0];if(!r)return new i([]);for(;r.nextElementSibling;){var a=r.nextElementSibling;e?n(a).is(e)&&t.push(a):t.push(a),r=a}return new i(t)},prev:function(e){if(0<this.length){var t=this[0];return e?t.previousElementSibling&&n(t.previousElementSibling).is(e)?new i([t.previousElementSibling]):new i([]):t.previousElementSibling?new i([t.previousElementSibling]):new i([])}return new i([])},prevAll:function(e){var t=[],r=this[0];if(!r)return new i([]);for(;r.previousElementSibling;){var a=r.previousElementSibling;e?n(a).is(e)&&t.push(a):t.push(a),r=a}return new i(t)},parent:function(e){for(var t=[],i=0;i<this.length;i+=1)null!==this[i].parentNode&&(e?n(this[i].parentNode).is(e)&&t.push(this[i].parentNode):t.push(this[i].parentNode));return n(r(t))},parents:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var a=this[i].parentNode;a;)e?n(a).is(e)&&t.push(a):t.push(a),a=a.parentNode;return n(r(t))},closest:function(e){var t=this;return void 0===e?new i([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var r=this[n].querySelectorAll(e),a=0;a<r.length;a+=1)t.push(r[a]);return new i(t)},children:function(e){for(var t=[],a=0;a<this.length;a+=1)for(var s=this[a].childNodes,o=0;o<s.length;o+=1)e?1===s[o].nodeType&&n(s[o]).is(e)&&t.push(s[o]):1===s[o].nodeType&&t.push(s[o]);return new i(r(t))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,r;for(i=0;i<e.length;i+=1){var a=n(e[i]);for(r=0;r<a.length;r+=1)this[this.length]=a[r],this.length+=1}return this},styles:function(){return this[0]?t.getComputedStyle(this[0],null):{}}};Object.keys(a).forEach(function(e){n.fn[e]=a[e]});var s,o,l,c={deleteProps:function(e){var t=e;Object.keys(t).forEach(function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,i){var n,r,a;void 0===i&&(i="x");var s=t.getComputedStyle(e,null);return t.WebKitCSSMatrix?(6<(r=s.transform||s.webkitTransform).split(",").length&&(r=r.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),a=new t.WebKitCSSMatrix("none"===r?"":r)):n=(a=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===i&&(r=t.WebKitCSSMatrix?a.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===i&&(r=t.WebKitCSSMatrix?a.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),r||0},parseUrlQuery:function(e){var i,n,r,a,s={},o=e||t.location.href;if("string"==typeof o&&o.length)for(a=(n=(o=-1<o.indexOf("?")?o.replace(/\S*\?/,""):"").split("&").filter(function(e){return""!==e})).length,i=0;i<a;i+=1)r=n[i].replace(/#\S+/g,"").split("="),s[decodeURIComponent(r[0])]=void 0===r[1]?void 0:decodeURIComponent(r[1])||"";return s},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=Object(e[0]),n=1;n<e.length;n+=1){var r=e[n];if(null!=r)for(var a=Object.keys(Object(r)),s=0,o=a.length;s<o;s+=1){var l=a[s],h=Object.getOwnPropertyDescriptor(r,l);void 0!==h&&h.enumerable&&(c.isObject(i[l])&&c.isObject(r[l])?c.extend(i[l],r[l]):!c.isObject(i[l])&&c.isObject(r[l])?(i[l]={},c.extend(i[l],r[l])):i[l]=r[l])}}return i}},h=(l=e.createElement("div"),{touch:t.Modernizr&&!0===t.Modernizr.touch||!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch),pointerEvents:!(!t.navigator.pointerEnabled&&!t.PointerEvent),prefixedPointerEvents:!!t.navigator.msPointerEnabled,transition:(o=l.style,"transition"in o||"webkitTransition"in o||"MozTransition"in o),transforms3d:t.Modernizr&&!0===t.Modernizr.csstransforms3d||(s=l.style,"webkitPerspective"in s||"MozPerspective"in s||"OPerspective"in s||"MsPerspective"in s||"perspective"in s),flexbox:function(){for(var e=l.style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),i=0;i<t.length;i+=1)if(t[i]in e)return!0;return!1}(),observer:"MutationObserver"in t||"WebkitMutationObserver"in t,passiveListener:function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testPassiveListener",null,i)}catch(e){}return e}(),gestures:"ongesturestart"in t}),u=function(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach(function(e){t.on(e,t.params.on[e])})},d={components:{configurable:!0}};u.prototype.on=function(e,t,i){var n=this;if("function"!=typeof t)return n;var r=i?"unshift":"push";return e.split(" ").forEach(function(e){n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][r](t)}),n},u.prototype.once=function(e,t,i){var n=this;return"function"!=typeof t?n:n.on(e,function i(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];t.apply(n,r),n.off(e,i)},i)},u.prototype.off=function(e,t){var i=this;return i.eventsListeners&&e.split(" ").forEach(function(e){void 0===t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].length&&i.eventsListeners[e].forEach(function(n,r){n===t&&i.eventsListeners[e].splice(r,1)})}),i},u.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n,r,a=this;return a.eventsListeners&&(r="string"==typeof e[0]||Array.isArray(e[0])?(i=e[0],n=e.slice(1,e.length),a):(i=e[0].events,n=e[0].data,e[0].context||a),(Array.isArray(i)?i:i.split(" ")).forEach(function(e){if(a.eventsListeners&&a.eventsListeners[e]){var t=[];a.eventsListeners[e].forEach(function(e){t.push(e)}),t.forEach(function(e){e.apply(r,n)})}})),a},u.prototype.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach(function(i){var n=t.modules[i];n.params&&c.extend(e,n.params)})},u.prototype.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach(function(i){var n=t.modules[i],r=e[i]||{};n.instance&&Object.keys(n.instance).forEach(function(e){var i=n.instance[e];t[e]="function"==typeof i?i.bind(t):i}),n.on&&t.on&&Object.keys(n.on).forEach(function(e){t.on(e,n.on[e])}),n.create&&n.create.bind(t)(r)})},d.components.set=function(e){this.use&&this.use(e)},u.installModule=function(e){for(var t=[],i=arguments.length-1;0<i--;)t[i]=arguments[i+1];var n=this;n.prototype.modules||(n.prototype.modules={});var r=e.name||Object.keys(n.prototype.modules).length+"_"+c.now();return(n.prototype.modules[r]=e).proto&&Object.keys(e.proto).forEach(function(t){n.prototype[t]=e.proto[t]}),e.static&&Object.keys(e.static).forEach(function(t){n[t]=e.static[t]}),e.install&&e.install.apply(n,t),n},u.use=function(e){for(var t=[],i=arguments.length-1;0<i--;)t[i]=arguments[i+1];var n=this;return Array.isArray(e)?(e.forEach(function(e){return n.installModule(e)}),n):n.installModule.apply(n,[e].concat(t))},Object.defineProperties(u,d);var p={updateSize:function(){var e,t,i=this.$el;e=void 0!==this.params.width?this.params.width:i[0].clientWidth,t=void 0!==this.params.height?this.params.height:i[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),t=t-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),c.extend(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this,i=e.params,n=e.$wrapperEl,r=e.size,a=e.rtlTranslate,s=e.wrongRTL,o=e.virtual&&i.virtual.enabled,l=o?e.virtual.slides.length:e.slides.length,u=n.children("."+e.params.slideClass),d=o?e.virtual.slides.length:u.length,p=[],f=[],m=[],g=i.slidesOffsetBefore;"function"==typeof g&&(g=i.slidesOffsetBefore.call(e));var v=i.slidesOffsetAfter;"function"==typeof v&&(v=i.slidesOffsetAfter.call(e));var y=e.snapGrid.length,_=e.snapGrid.length,x=i.spaceBetween,b=-g,w=0,T=0;if(void 0!==r){var E,M;"string"==typeof x&&0<=x.indexOf("%")&&(x=parseFloat(x.replace("%",""))/100*r),e.virtualSize=-x,a?u.css({marginLeft:"",marginTop:""}):u.css({marginRight:"",marginBottom:""}),1<i.slidesPerColumn&&(E=Math.floor(d/i.slidesPerColumn)===d/e.params.slidesPerColumn?d:Math.ceil(d/i.slidesPerColumn)*i.slidesPerColumn,"auto"!==i.slidesPerView&&"row"===i.slidesPerColumnFill&&(E=Math.max(E,i.slidesPerView*i.slidesPerColumn)));for(var S,C=i.slidesPerColumn,A=E/C,P=A-(i.slidesPerColumn*A-d),L=0;L<d;L+=1){M=0;var R=u.eq(L);if(1<i.slidesPerColumn){var O=void 0,I=void 0,D=void 0;"column"===i.slidesPerColumnFill?(D=L-(I=Math.floor(L/C))*C,(P<I||I===P&&D===C-1)&&C<=(D+=1)&&(D=0,I+=1),O=I+D*E/C,R.css({"-webkit-box-ordinal-group":O,"-moz-box-ordinal-group":O,"-ms-flex-order":O,"-webkit-order":O,order:O})):I=L-(D=Math.floor(L/A))*A,R.css("margin-"+(e.isHorizontal()?"top":"left"),0!==D&&i.spaceBetween&&i.spaceBetween+"px").attr("data-swiper-column",I).attr("data-swiper-row",D)}if("none"!==R.css("display")){if("auto"===i.slidesPerView){var k=t.getComputedStyle(R[0],null),N=R[0].style.transform,z=R[0].style.webkitTransform;N&&(R[0].style.transform="none"),z&&(R[0].style.webkitTransform="none"),M=i.roundLengths?e.isHorizontal()?R.outerWidth(!0):R.outerHeight(!0):e.isHorizontal()?R[0].getBoundingClientRect().width+parseFloat(k.getPropertyValue("margin-left"))+parseFloat(k.getPropertyValue("margin-right")):R[0].getBoundingClientRect().height+parseFloat(k.getPropertyValue("margin-top"))+parseFloat(k.getPropertyValue("margin-bottom")),N&&(R[0].style.transform=N),z&&(R[0].style.webkitTransform=z),i.roundLengths&&(M=Math.floor(M))}else M=(r-(i.slidesPerView-1)*x)/i.slidesPerView,i.roundLengths&&(M=Math.floor(M)),u[L]&&(e.isHorizontal()?u[L].style.width=M+"px":u[L].style.height=M+"px");u[L]&&(u[L].swiperSlideSize=M),m.push(M),i.centeredSlides?(b=b+M/2+w/2+x,0===w&&0!==L&&(b=b-r/2-x),0===L&&(b=b-r/2-x),Math.abs(b)<.001&&(b=0),i.roundLengths&&(b=Math.floor(b)),T%i.slidesPerGroup==0&&p.push(b),f.push(b)):(i.roundLengths&&(b=Math.floor(b)),T%i.slidesPerGroup==0&&p.push(b),f.push(b),b=b+M+x),e.virtualSize+=M+x,w=M,T+=1}}if(e.virtualSize=Math.max(e.virtualSize,r)+v,a&&s&&("slide"===i.effect||"coverflow"===i.effect)&&n.css({width:e.virtualSize+i.spaceBetween+"px"}),h.flexbox&&!i.setWrapperSize||(e.isHorizontal()?n.css({width:e.virtualSize+i.spaceBetween+"px"}):n.css({height:e.virtualSize+i.spaceBetween+"px"})),1<i.slidesPerColumn&&(e.virtualSize=(M+i.spaceBetween)*E,e.virtualSize=Math.ceil(e.virtualSize/i.slidesPerColumn)-i.spaceBetween,e.isHorizontal()?n.css({width:e.virtualSize+i.spaceBetween+"px"}):n.css({height:e.virtualSize+i.spaceBetween+"px"}),i.centeredSlides)){S=[];for(var B=0;B<p.length;B+=1){var H=p[B];i.roundLengths&&(H=Math.floor(H)),p[B]<e.virtualSize+p[0]&&S.push(H)}p=S}if(!i.centeredSlides){S=[];for(var F=0;F<p.length;F+=1){var U=p[F];i.roundLengths&&(U=Math.floor(U)),p[F]<=e.virtualSize-r&&S.push(U)}p=S,1<Math.floor(e.virtualSize-r)-Math.floor(p[p.length-1])&&p.push(e.virtualSize-r)}if(0===p.length&&(p=[0]),0!==i.spaceBetween&&(e.isHorizontal()?a?u.css({marginLeft:x+"px"}):u.css({marginRight:x+"px"}):u.css({marginBottom:x+"px"})),i.centerInsufficientSlides){var G=0;if(m.forEach(function(e){G+=e+(i.spaceBetween?i.spaceBetween:0)}),(G-=i.spaceBetween)<r){var V=(r-G)/2;p.forEach(function(e,t){p[t]=e-V}),f.forEach(function(e,t){f[t]=e+V})}}c.extend(e,{slides:u,snapGrid:p,slidesGrid:f,slidesSizesGrid:m}),d!==l&&e.emit("slidesLengthChange"),p.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),f.length!==_&&e.emit("slidesGridLengthChange"),(i.watchSlidesProgress||i.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,i=this,n=[],r=0;if("number"==typeof e?i.setTransition(e):!0===e&&i.setTransition(i.params.speed),"auto"!==i.params.slidesPerView&&1<i.params.slidesPerView)for(t=0;t<Math.ceil(i.params.slidesPerView);t+=1){var a=i.activeIndex+t;if(a>i.slides.length)break;n.push(i.slides.eq(a)[0])}else n.push(i.slides.eq(i.activeIndex)[0]);for(t=0;t<n.length;t+=1)if(void 0!==n[t]){var s=n[t].offsetHeight;r=r<s?s:r}r&&i.$wrapperEl.css("height",r+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,i=t.params,r=t.slides,a=t.rtlTranslate;if(0!==r.length){void 0===r[0].swiperSlideOffset&&t.updateSlidesOffset();var s=-e;a&&(s=e),r.removeClass(i.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var o=0;o<r.length;o+=1){var l=r[o],c=(s+(i.centeredSlides?t.minTranslate():0)-l.swiperSlideOffset)/(l.swiperSlideSize+i.spaceBetween);if(i.watchSlidesVisibility){var h=-(s-l.swiperSlideOffset),u=h+t.slidesSizesGrid[o];(0<=h&&h<t.size||0<u&&u<=t.size||h<=0&&u>=t.size)&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(o),r.eq(o).addClass(i.slideVisibleClass))}l.progress=a?-c:c}t.visibleSlides=n(t.visibleSlides)}},updateProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,i=t.params,n=t.maxTranslate()-t.minTranslate(),r=t.progress,a=t.isBeginning,s=t.isEnd,o=a,l=s;s=0===n?a=!(r=0):(a=(r=(e-t.minTranslate())/n)<=0,1<=r),c.extend(t,{progress:r,isBeginning:a,isEnd:s}),(i.watchSlidesProgress||i.watchSlidesVisibility)&&t.updateSlidesProgress(e),a&&!o&&t.emit("reachBeginning toEdge"),s&&!l&&t.emit("reachEnd toEdge"),(o&&!a||l&&!s)&&t.emit("fromEdge"),t.emit("progress",r)},updateSlidesClasses:function(){var e,t=this.slides,i=this.params,n=this.$wrapperEl,r=this.activeIndex,a=this.realIndex,s=this.virtual&&i.virtual.enabled;t.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=s?this.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+r+'"]'):t.eq(r)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+a+'"]').addClass(i.slideDuplicateActiveClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]').addClass(i.slideDuplicateActiveClass));var o=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===o.length&&(o=t.eq(0)).addClass(i.slideNextClass);var l=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===l.length&&(l=t.eq(-1)).addClass(i.slidePrevClass),i.loop&&(o.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),l.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,i=this,n=i.rtlTranslate?i.translate:-i.translate,r=i.slidesGrid,a=i.snapGrid,s=i.params,o=i.activeIndex,l=i.realIndex,h=i.snapIndex,u=e;if(void 0===u){for(var d=0;d<r.length;d+=1)void 0!==r[d+1]?n>=r[d]&&n<r[d+1]-(r[d+1]-r[d])/2?u=d:n>=r[d]&&n<r[d+1]&&(u=d+1):n>=r[d]&&(u=d);s.normalizeSlideIndex&&(u<0||void 0===u)&&(u=0)}if((t=0<=a.indexOf(n)?a.indexOf(n):Math.floor(u/s.slidesPerGroup))>=a.length&&(t=a.length-1),u!==o){var p=parseInt(i.slides.eq(u).attr("data-swiper-slide-index")||u,10);c.extend(i,{snapIndex:t,realIndex:p,previousIndex:o,activeIndex:u}),i.emit("activeIndexChange"),i.emit("snapIndexChange"),l!==p&&i.emit("realIndexChange"),i.emit("slideChange")}else t!==h&&(i.snapIndex=t,i.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this,i=t.params,r=n(e.target).closest("."+i.slideClass)[0],a=!1;if(r)for(var s=0;s<t.slides.length;s+=1)t.slides[s]===r&&(a=!0);if(!r||!a)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(n(r).attr("data-swiper-slide-index"),10):t.clickedIndex=n(r).index(),i.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}},f={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,i=this.rtlTranslate,n=this.translate,r=this.$wrapperEl;if(t.virtualTranslate)return i?-n:n;var a=c.getTranslate(r[0],e);return i&&(a=-a),a||0},setTranslate:function(e,t){var i=this,n=i.rtlTranslate,r=i.params,a=i.$wrapperEl,s=i.progress,o=0,l=0;i.isHorizontal()?o=n?-e:e:l=e,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),r.virtualTranslate||(h.transforms3d?a.transform("translate3d("+o+"px, "+l+"px, 0px)"):a.transform("translate("+o+"px, "+l+"px)")),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?o:l;var c=i.maxTranslate()-i.minTranslate();(0===c?0:(e-i.minTranslate())/c)!==s&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]}},m={slideTo:function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var r=this,a=e;a<0&&(a=0);var s=r.params,o=r.snapGrid,l=r.slidesGrid,c=r.previousIndex,u=r.activeIndex,d=r.rtlTranslate;if(r.animating&&s.preventInteractionOnTransition)return!1;var p=Math.floor(a/s.slidesPerGroup);p>=o.length&&(p=o.length-1),(u||s.initialSlide||0)===(c||0)&&i&&r.emit("beforeSlideChangeStart");var f,m=-o[p];if(r.updateProgress(m),s.normalizeSlideIndex)for(var g=0;g<l.length;g+=1)-Math.floor(100*m)>=Math.floor(100*l[g])&&(a=g);if(r.initialized&&a!==u){if(!r.allowSlideNext&&m<r.translate&&m<r.minTranslate())return!1;if(!r.allowSlidePrev&&m>r.translate&&m>r.maxTranslate()&&(u||0)!==a)return!1}return f=u<a?"next":a<u?"prev":"reset",d&&-m===r.translate||!d&&m===r.translate?(r.updateActiveIndex(a),s.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==s.effect&&r.setTranslate(m),"reset"!==f&&(r.transitionStart(i,f),r.transitionEnd(i,f)),!1):(0!==t&&h.transition?(r.setTransition(t),r.setTranslate(m),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,n),r.transitionStart(i,f),r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(i,f))}),r.$wrapperEl[0].addEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd))):(r.setTransition(0),r.setTranslate(m),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,n),r.transitionStart(i,f),r.transitionEnd(i,f)),!0)},slideToLoop:function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var r=e;return this.params.loop&&(r+=this.loopedSlides),this.slideTo(r,t,i,n)},slideNext:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this.params,r=this.animating;return n.loop?!r&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,this.slideTo(this.activeIndex+n.slidesPerGroup,e,t,i)):this.slideTo(this.activeIndex+n.slidesPerGroup,e,t,i)},slidePrev:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this,r=n.params,a=n.animating,s=n.snapGrid,o=n.slidesGrid,l=n.rtlTranslate;if(r.loop){if(a)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var h,u=c(l?n.translate:-n.translate),d=s.map(function(e){return c(e)}),p=(o.map(function(e){return c(e)}),s[d.indexOf(u)],s[d.indexOf(u)-1]);return void 0!==p&&(h=o.indexOf(p))<0&&(h=n.activeIndex-1),n.slideTo(h,e,t,i)},slideReset:function(e,t,i){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,i)},slideToClosest:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this,r=n.activeIndex,a=Math.floor(r/n.params.slidesPerGroup);if(a<n.snapGrid.length-1){var s=n.rtlTranslate?n.translate:-n.translate,o=n.snapGrid[a];(n.snapGrid[a+1]-o)/2<s-o&&(r=n.params.slidesPerGroup)}return n.slideTo(r,e,t,i)},slideToClickedSlide:function(){var e,t=this,i=t.params,r=t.$wrapperEl,a="auto"===i.slidesPerView?t.slidesPerViewDynamic():i.slidesPerView,s=t.clickedIndex;if(i.loop){if(t.animating)return;e=parseInt(n(t.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?s<t.loopedSlides-a/2||s>t.slides.length-t.loopedSlides+a/2?(t.loopFix(),s=r.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),c.nextTick(function(){t.slideTo(s)})):t.slideTo(s):s>t.slides.length-a?(t.loopFix(),s=r.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),c.nextTick(function(){t.slideTo(s)})):t.slideTo(s)}else t.slideTo(s)}},g={loopCreate:function(){var t=this,i=t.params,r=t.$wrapperEl;r.children("."+i.slideClass+"."+i.slideDuplicateClass).remove();var a=r.children("."+i.slideClass);if(i.loopFillGroupWithBlank){var s=i.slidesPerGroup-a.length%i.slidesPerGroup;if(s!==i.slidesPerGroup){for(var o=0;o<s;o+=1){var l=n(e.createElement("div")).addClass(i.slideClass+" "+i.slideBlankClass);r.append(l)}a=r.children("."+i.slideClass)}}"auto"!==i.slidesPerView||i.loopedSlides||(i.loopedSlides=a.length),t.loopedSlides=parseInt(i.loopedSlides||i.slidesPerView,10),t.loopedSlides+=i.loopAdditionalSlides,t.loopedSlides>a.length&&(t.loopedSlides=a.length);var c=[],h=[];a.each(function(e,i){var r=n(i);e<t.loopedSlides&&h.push(i),e<a.length&&e>=a.length-t.loopedSlides&&c.push(i),r.attr("data-swiper-slide-index",e)});for(var u=0;u<h.length;u+=1)r.append(n(h[u].cloneNode(!0)).addClass(i.slideDuplicateClass));for(var d=c.length-1;0<=d;d-=1)r.prepend(n(c[d].cloneNode(!0)).addClass(i.slideDuplicateClass))},loopFix:function(){var e,t=this,i=t.params,n=t.activeIndex,r=t.slides,a=t.loopedSlides,s=t.allowSlidePrev,o=t.allowSlideNext,l=t.snapGrid,c=t.rtlTranslate;t.allowSlidePrev=!0,t.allowSlideNext=!0;var h=-l[n]-t.getTranslate();n<a?(e=r.length-3*a+n,e+=a,t.slideTo(e,0,!1,!0)&&0!==h&&t.setTranslate((c?-t.translate:t.translate)-h)):("auto"===i.slidesPerView&&2*a<=n||n>=r.length-a)&&(e=-r.length+n+a,e+=a,t.slideTo(e,0,!1,!0)&&0!==h&&t.setTranslate((c?-t.translate:t.translate)-h)),t.allowSlidePrev=s,t.allowSlideNext=o},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,i=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass).remove(),i.removeAttr("data-swiper-slide-index")}},v={setGrabCursor:function(e){if(!(h.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked)){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){h.touch||this.params.watchOverflow&&this.isLocked||(this.el.style.cursor="")}},y={appendSlide:function(e){var t=this.$wrapperEl,i=this.params;if(i.loop&&this.loopDestroy(),"object"==typeof e&&"length"in e)for(var n=0;n<e.length;n+=1)e[n]&&t.append(e[n]);else t.append(e);i.loop&&this.loopCreate(),i.observer&&h.observer||this.update()},prependSlide:function(e){var t=this.params,i=this.$wrapperEl,n=this.activeIndex;t.loop&&this.loopDestroy();var r=n+1;if("object"==typeof e&&"length"in e){for(var a=0;a<e.length;a+=1)e[a]&&i.prepend(e[a]);r=n+e.length}else i.prepend(e);t.loop&&this.loopCreate(),t.observer&&h.observer||this.update(),this.slideTo(r,0,!1)},addSlide:function(e,t){var i=this,n=i.$wrapperEl,r=i.params,a=i.activeIndex;r.loop&&(a-=i.loopedSlides,i.loopDestroy(),i.slides=n.children("."+r.slideClass));var s=i.slides.length;if(e<=0)i.prependSlide(t);else if(s<=e)i.appendSlide(t);else{for(var o=e<a?a+1:a,l=[],c=s-1;e<=c;c-=1){var u=i.slides.eq(c);u.remove(),l.unshift(u)}if("object"==typeof t&&"length"in t){for(var d=0;d<t.length;d+=1)t[d]&&n.append(t[d]);o=e<a?a+t.length:a}else n.append(t);for(var p=0;p<l.length;p+=1)n.append(l[p]);r.loop&&i.loopCreate(),r.observer&&h.observer||i.update(),r.loop?i.slideTo(o+i.loopedSlides,0,!1):i.slideTo(o,0,!1)}},removeSlide:function(e){var t=this,i=t.params,n=t.$wrapperEl,r=t.activeIndex;i.loop&&(r-=t.loopedSlides,t.loopDestroy(),t.slides=n.children("."+i.slideClass));var a,s=r;if("object"==typeof e&&"length"in e){for(var o=0;o<e.length;o+=1)a=e[o],t.slides[a]&&t.slides.eq(a).remove(),a<s&&(s-=1);s=Math.max(s,0)}else a=e,t.slides[a]&&t.slides.eq(a).remove(),a<s&&(s-=1),s=Math.max(s,0);i.loop&&t.loopCreate(),i.observer&&h.observer||t.update(),i.loop?t.slideTo(s+t.loopedSlides,0,!1):t.slideTo(s,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},_=function(){var i=t.navigator.userAgent,n={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:t.cordova||t.phonegap,phonegap:t.cordova||t.phonegap},r=i.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),a=i.match(/(Android);?[\s\/]+([\d.]+)?/),s=i.match(/(iPad).*OS\s([\d_]+)/),o=i.match(/(iPod)(.*OS\s([\d_]+))?/),l=!s&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/);if(r&&(n.os="windows",n.osVersion=r[2],n.windows=!0),a&&!r&&(n.os="android",n.osVersion=a[2],n.android=!0,n.androidChrome=0<=i.toLowerCase().indexOf("chrome")),(s||l||o)&&(n.os="ios",n.ios=!0),l&&!o&&(n.osVersion=l[2].replace(/_/g,"."),n.iphone=!0),s&&(n.osVersion=s[2].replace(/_/g,"."),n.ipad=!0),o&&(n.osVersion=o[3]?o[3].replace(/_/g,"."):null,n.iphone=!0),n.ios&&n.osVersion&&0<=i.indexOf("Version/")&&"10"===n.osVersion.split(".")[0]&&(n.osVersion=i.toLowerCase().split("version/")[1].split(" ")[0]),n.desktop=!(n.os||n.android||n.webView),n.webView=(l||s||o)&&i.match(/.*AppleWebKit(?!.*Safari)/i),n.os&&"ios"===n.os){var c=n.osVersion.split("."),h=e.querySelector('meta[name="viewport"]');n.minimalUi=!n.webView&&(o||l)&&(1*c[0]==7?1<=1*c[1]:7<1*c[0])&&h&&0<=h.getAttribute("content").indexOf("minimal-ui")}return n.pixelRatio=t.devicePixelRatio||1,n}();function x(){var e=this,t=e.params,i=e.el;if(!i||0!==i.offsetWidth){t.breakpoints&&e.setBreakpoint();var n=e.allowSlideNext,r=e.allowSlidePrev,a=e.snapGrid;if(e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),t.freeMode){var s=Math.min(Math.max(e.translate,e.maxTranslate()),e.minTranslate());e.setTranslate(s),e.updateActiveIndex(),e.updateSlidesClasses(),t.autoHeight&&e.updateAutoHeight()}else e.updateSlidesClasses(),("auto"===t.slidesPerView||1<t.slidesPerView)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0);e.allowSlidePrev=r,e.allowSlideNext=n,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}}var b,w={attachEvents:function(){var i=this,r=i.params,a=i.touchEvents,s=i.el,o=i.wrapperEl;i.onTouchStart=function(i){var r=this,a=r.touchEventsData,s=r.params,o=r.touches;if(!r.animating||!s.preventInteractionOnTransition){var l=i;if(l.originalEvent&&(l=l.originalEvent),a.isTouchEvent="touchstart"===l.type,(a.isTouchEvent||!("which"in l)||3!==l.which)&&!(!a.isTouchEvent&&"button"in l&&0<l.button||a.isTouched&&a.isMoved))if(s.noSwiping&&n(l.target).closest(s.noSwipingSelector?s.noSwipingSelector:"."+s.noSwipingClass)[0])r.allowClick=!0;else if(!s.swipeHandler||n(l).closest(s.swipeHandler)[0]){o.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,o.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var h=o.currentX,u=o.currentY,d=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,p=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(!d||!(h<=p||h>=t.screen.width-p)){if(c.extend(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=h,o.startY=u,a.touchStartTime=c.now(),r.allowClick=!0,r.updateSize(),r.swipeDirection=void 0,0<s.threshold&&(a.allowThresholdMove=!1),"touchstart"!==l.type){var f=!0;n(l.target).is(a.formElements)&&(f=!1),e.activeElement&&n(e.activeElement).is(a.formElements)&&e.activeElement!==l.target&&e.activeElement.blur(),f&&r.allowTouchMove&&s.touchStartPreventDefault&&l.preventDefault()}r.emit("touchStart",l)}}}}.bind(i),i.onTouchMove=function(t){var i=this,r=i.touchEventsData,a=i.params,s=i.touches,o=i.rtlTranslate,l=t;if(l.originalEvent&&(l=l.originalEvent),r.isTouched){if(!r.isTouchEvent||"mousemove"!==l.type){var h="touchmove"===l.type?l.targetTouches[0].pageX:l.pageX,u="touchmove"===l.type?l.targetTouches[0].pageY:l.pageY;if(l.preventedByNestedSwiper)return s.startX=h,void(s.startY=u);if(!i.allowTouchMove)return i.allowClick=!1,void(r.isTouched&&(c.extend(s,{startX:h,startY:u,currentX:h,currentY:u}),r.touchStartTime=c.now()));if(r.isTouchEvent&&a.touchReleaseOnEdges&&!a.loop)if(i.isVertical()){if(u<s.startY&&i.translate<=i.maxTranslate()||u>s.startY&&i.translate>=i.minTranslate())return r.isTouched=!1,void(r.isMoved=!1)}else if(h<s.startX&&i.translate<=i.maxTranslate()||h>s.startX&&i.translate>=i.minTranslate())return;if(r.isTouchEvent&&e.activeElement&&l.target===e.activeElement&&n(l.target).is(r.formElements))return r.isMoved=!0,void(i.allowClick=!1);if(r.allowTouchCallbacks&&i.emit("touchMove",l),!(l.targetTouches&&1<l.targetTouches.length)){s.currentX=h,s.currentY=u;var d,p=s.currentX-s.startX,f=s.currentY-s.startY;if(!(i.params.threshold&&Math.sqrt(Math.pow(p,2)+Math.pow(f,2))<i.params.threshold))if(void 0===r.isScrolling&&(i.isHorizontal()&&s.currentY===s.startY||i.isVertical()&&s.currentX===s.startX?r.isScrolling=!1:25<=p*p+f*f&&(d=180*Math.atan2(Math.abs(f),Math.abs(p))/Math.PI,r.isScrolling=i.isHorizontal()?d>a.touchAngle:90-d>a.touchAngle)),r.isScrolling&&i.emit("touchMoveOpposite",l),void 0===r.startMoving&&(s.currentX===s.startX&&s.currentY===s.startY||(r.startMoving=!0)),r.isScrolling)r.isTouched=!1;else if(r.startMoving){i.allowClick=!1,l.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&l.stopPropagation(),r.isMoved||(a.loop&&i.loopFix(),r.startTranslate=i.getTranslate(),i.setTransition(0),i.animating&&i.$wrapperEl.trigger("webkitTransitionEnd transitionend"),r.allowMomentumBounce=!1,!a.grabCursor||!0!==i.allowSlideNext&&!0!==i.allowSlidePrev||i.setGrabCursor(!0),i.emit("sliderFirstMove",l)),i.emit("sliderMove",l),r.isMoved=!0;var m=i.isHorizontal()?p:f;s.diff=m,m*=a.touchRatio,o&&(m=-m),i.swipeDirection=0<m?"prev":"next",r.currentTranslate=m+r.startTranslate;var g=!0,v=a.resistanceRatio;if(a.touchReleaseOnEdges&&(v=0),0<m&&r.currentTranslate>i.minTranslate()?(g=!1,a.resistance&&(r.currentTranslate=i.minTranslate()-1+Math.pow(-i.minTranslate()+r.startTranslate+m,v))):m<0&&r.currentTranslate<i.maxTranslate()&&(g=!1,a.resistance&&(r.currentTranslate=i.maxTranslate()+1-Math.pow(i.maxTranslate()-r.startTranslate-m,v))),g&&(l.preventedByNestedSwiper=!0),!i.allowSlideNext&&"next"===i.swipeDirection&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!i.allowSlidePrev&&"prev"===i.swipeDirection&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),0<a.threshold){if(!(Math.abs(m)>a.threshold||r.allowThresholdMove))return void(r.currentTranslate=r.startTranslate);if(!r.allowThresholdMove)return r.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,r.currentTranslate=r.startTranslate,void(s.diff=i.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY)}a.followFinger&&((a.freeMode||a.watchSlidesProgress||a.watchSlidesVisibility)&&(i.updateActiveIndex(),i.updateSlidesClasses()),a.freeMode&&(0===r.velocities.length&&r.velocities.push({position:s[i.isHorizontal()?"startX":"startY"],time:r.touchStartTime}),r.velocities.push({position:s[i.isHorizontal()?"currentX":"currentY"],time:c.now()})),i.updateProgress(r.currentTranslate),i.setTranslate(r.currentTranslate))}}}}else r.startMoving&&r.isScrolling&&i.emit("touchMoveOpposite",l)}.bind(i),i.onTouchEnd=function(e){var t=this,i=t.touchEventsData,n=t.params,r=t.touches,a=t.rtlTranslate,s=t.$wrapperEl,o=t.slidesGrid,l=t.snapGrid,h=e;if(h.originalEvent&&(h=h.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",h),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&n.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);n.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var u,d=c.now(),p=d-i.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(h),t.emit("tap",h),p<300&&300<d-i.lastClickTime&&(i.clickTimeout&&clearTimeout(i.clickTimeout),i.clickTimeout=c.nextTick(function(){t&&!t.destroyed&&t.emit("click",h)},300)),p<300&&d-i.lastClickTime<300&&(i.clickTimeout&&clearTimeout(i.clickTimeout),t.emit("doubleTap",h))),i.lastClickTime=c.now(),c.nextTick(function(){t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||0===r.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,u=n.followFinger?a?t.translate:-t.translate:-i.currentTranslate,n.freeMode){if(u<-t.minTranslate())return void t.slideTo(t.activeIndex);if(u>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(n.freeModeMomentum){if(1<i.velocities.length){var f=i.velocities.pop(),m=i.velocities.pop(),g=f.position-m.position,v=f.time-m.time;t.velocity=g/v,t.velocity/=2,Math.abs(t.velocity)<n.freeModeMinimumVelocity&&(t.velocity=0),(150<v||300<c.now()-f.time)&&(t.velocity=0)}else t.velocity=0;t.velocity*=n.freeModeMomentumVelocityRatio,i.velocities.length=0;var y=1e3*n.freeModeMomentumRatio,_=t.velocity*y,x=t.translate+_;a&&(x=-x);var b,w,T=!1,E=20*Math.abs(t.velocity)*n.freeModeMomentumBounceRatio;if(x<t.maxTranslate())n.freeModeMomentumBounce?(x+t.maxTranslate()<-E&&(x=t.maxTranslate()-E),b=t.maxTranslate(),T=!0,i.allowMomentumBounce=!0):x=t.maxTranslate(),n.loop&&n.centeredSlides&&(w=!0);else if(x>t.minTranslate())n.freeModeMomentumBounce?(x-t.minTranslate()>E&&(x=t.minTranslate()+E),b=t.minTranslate(),T=!0,i.allowMomentumBounce=!0):x=t.minTranslate(),n.loop&&n.centeredSlides&&(w=!0);else if(n.freeModeSticky){for(var M,S=0;S<l.length;S+=1)if(l[S]>-x){M=S;break}x=-(x=Math.abs(l[M]-x)<Math.abs(l[M-1]-x)||"next"===t.swipeDirection?l[M]:l[M-1])}if(w&&t.once("transitionEnd",function(){t.loopFix()}),0!==t.velocity)y=a?Math.abs((-x-t.translate)/t.velocity):Math.abs((x-t.translate)/t.velocity);else if(n.freeModeSticky)return void t.slideToClosest();n.freeModeMomentumBounce&&T?(t.updateProgress(b),t.setTransition(y),t.setTranslate(x),t.transitionStart(!0,t.swipeDirection),t.animating=!0,s.transitionEnd(function(){t&&!t.destroyed&&i.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(n.speed),t.setTranslate(b),s.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))})):t.velocity?(t.updateProgress(x),t.setTransition(y),t.setTranslate(x),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,s.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(x),t.updateActiveIndex(),t.updateSlidesClasses()}else if(n.freeModeSticky)return void t.slideToClosest();(!n.freeModeMomentum||p>=n.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var C=0,A=t.slidesSizesGrid[0],P=0;P<o.length;P+=n.slidesPerGroup)void 0!==o[P+n.slidesPerGroup]?u>=o[P]&&u<o[P+n.slidesPerGroup]&&(A=o[(C=P)+n.slidesPerGroup]-o[P]):u>=o[P]&&(C=P,A=o[o.length-1]-o[o.length-2]);var L=(u-o[C])/A;if(p>n.longSwipesMs){if(!n.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(L>=n.longSwipesRatio?t.slideTo(C+n.slidesPerGroup):t.slideTo(C)),"prev"===t.swipeDirection&&(L>1-n.longSwipesRatio?t.slideTo(C+n.slidesPerGroup):t.slideTo(C))}else{if(!n.shortSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&t.slideTo(C+n.slidesPerGroup),"prev"===t.swipeDirection&&t.slideTo(C)}}}.bind(i),i.onClick=function(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}.bind(i);var l="container"===r.touchEventsTarget?s:o,u=!!r.nested;if(h.touch||!h.pointerEvents&&!h.prefixedPointerEvents){if(h.touch){var d=!("touchstart"!==a.start||!h.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};l.addEventListener(a.start,i.onTouchStart,d),l.addEventListener(a.move,i.onTouchMove,h.passiveListener?{passive:!1,capture:u}:u),l.addEventListener(a.end,i.onTouchEnd,d)}(r.simulateTouch&&!_.ios&&!_.android||r.simulateTouch&&!h.touch&&_.ios)&&(l.addEventListener("mousedown",i.onTouchStart,!1),e.addEventListener("mousemove",i.onTouchMove,u),e.addEventListener("mouseup",i.onTouchEnd,!1))}else l.addEventListener(a.start,i.onTouchStart,!1),e.addEventListener(a.move,i.onTouchMove,u),e.addEventListener(a.end,i.onTouchEnd,!1);(r.preventClicks||r.preventClicksPropagation)&&l.addEventListener("click",i.onClick,!0),i.on(_.ios||_.android?"resize orientationchange observerUpdate":"resize observerUpdate",x,!0)},detachEvents:function(){var t=this,i=t.params,n=t.touchEvents,r=t.el,a=t.wrapperEl,s="container"===i.touchEventsTarget?r:a,o=!!i.nested;if(h.touch||!h.pointerEvents&&!h.prefixedPointerEvents){if(h.touch){var l=!("onTouchStart"!==n.start||!h.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1};s.removeEventListener(n.start,t.onTouchStart,l),s.removeEventListener(n.move,t.onTouchMove,o),s.removeEventListener(n.end,t.onTouchEnd,l)}(i.simulateTouch&&!_.ios&&!_.android||i.simulateTouch&&!h.touch&&_.ios)&&(s.removeEventListener("mousedown",t.onTouchStart,!1),e.removeEventListener("mousemove",t.onTouchMove,o),e.removeEventListener("mouseup",t.onTouchEnd,!1))}else s.removeEventListener(n.start,t.onTouchStart,!1),e.removeEventListener(n.move,t.onTouchMove,o),e.removeEventListener(n.end,t.onTouchEnd,!1);(i.preventClicks||i.preventClicksPropagation)&&s.removeEventListener("click",t.onClick,!0),t.off(_.ios||_.android?"resize orientationchange observerUpdate":"resize observerUpdate",x)}},T={setBreakpoint:function(){var e=this,t=e.activeIndex,i=e.initialized,n=e.loopedSlides;void 0===n&&(n=0);var r=e.params,a=r.breakpoints;if(a&&(!a||0!==Object.keys(a).length)){var s=e.getBreakpoint(a);if(s&&e.currentBreakpoint!==s){var o=s in a?a[s]:e.originalParams,l=r.loop&&o.slidesPerView!==r.slidesPerView;c.extend(e.params,o),c.extend(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),e.currentBreakpoint=s,l&&i&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-n+e.loopedSlides,0,!1)),e.emit("breakpoint",o)}}},getBreakpoint:function(e){if(e){var i=!1,n=[];Object.keys(e).forEach(function(e){n.push(e)}),n.sort(function(e,t){return parseInt(e,10)-parseInt(t,10)});for(var r=0;r<n.length;r+=1){var a=n[r];this.params.breakpointsInverse?a<=t.innerWidth&&(i=a):a>=t.innerWidth&&!i&&(i=a)}return i||"max"}}},E={isIE:!!t.navigator.userAgent.match(/Trident/g)||!!t.navigator.userAgent.match(/MSIE/g),isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:(b=t.navigator.userAgent.toLowerCase(),0<=b.indexOf("safari")&&b.indexOf("chrome")<0&&b.indexOf("android")<0),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)},M={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsInverse:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!0,touchStartPreventDefault:!0,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},S={update:p,translate:f,transition:{setTransition:function(e,t){this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,n=this.params,r=this.previousIndex;n.autoHeight&&this.updateAutoHeight();var a=t;if(a||(a=r<i?"next":i<r?"prev":"reset"),this.emit("transitionStart"),e&&i!==r){if("reset"===a)return void this.emit("slideResetTransitionStart");this.emit("slideChangeTransitionStart"),"next"===a?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}},transitionEnd:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,n=this.previousIndex;this.animating=!1,this.setTransition(0);var r=t;if(r||(r=n<i?"next":i<n?"prev":"reset"),this.emit("transitionEnd"),e&&i!==n){if("reset"===r)return void this.emit("slideResetTransitionEnd");this.emit("slideChangeTransitionEnd"),"next"===r?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}},slide:m,loop:g,grabCursor:v,manipulation:y,events:w,breakpoints:T,checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked;e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),t&&t!==e.isLocked&&(e.isEnd=!1,e.navigation.update())}},classes:{addClasses:function(){var e=this.classNames,t=this.params,i=this.rtl,n=this.$el,r=[];r.push(t.direction),t.freeMode&&r.push("free-mode"),h.flexbox||r.push("no-flexbox"),t.autoHeight&&r.push("autoheight"),i&&r.push("rtl"),1<t.slidesPerColumn&&r.push("multirow"),_.android&&r.push("android"),_.ios&&r.push("ios"),(E.isIE||E.isEdge)&&(h.pointerEvents||h.prefixedPointerEvents)&&r.push("wp8-"+t.direction),r.forEach(function(i){e.push(t.containerModifierClass+i)}),n.addClass(e.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,i,n,r,a,s){var o;function l(){s&&s()}e.complete&&a?l():i?((o=new t.Image).onload=l,o.onerror=l,r&&(o.sizes=r),n&&(o.srcset=n),i&&(o.src=i)):l()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var i=0;i<e.imagesToLoad.length;i+=1){var n=e.imagesToLoad[i];e.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,t)}}}},C={},A=function(e){function t(){for(var i,r,a,s=[],o=arguments.length;o--;)s[o]=arguments[o];(a=1===s.length&&s[0].constructor&&s[0].constructor===Object?s[0]:(r=(i=s)[0],i[1]))||(a={}),a=c.extend({},a),r&&!a.el&&(a.el=r),e.call(this,a),Object.keys(S).forEach(function(e){Object.keys(S[e]).forEach(function(i){t.prototype[i]||(t.prototype[i]=S[e][i])})});var l=this;void 0===l.modules&&(l.modules={}),Object.keys(l.modules).forEach(function(e){var t=l.modules[e];if(t.params){var i=Object.keys(t.params)[0],n=t.params[i];if("object"!=typeof n||null===n)return;if(!(i in a&&"enabled"in n))return;!0===a[i]&&(a[i]={enabled:!0}),"object"!=typeof a[i]||"enabled"in a[i]||(a[i].enabled=!0),a[i]||(a[i]={enabled:!1})}});var u=c.extend({},M);l.useModulesParams(u),l.params=c.extend({},u,C,a),l.originalParams=c.extend({},l.params),l.passedParams=c.extend({},a);var d=(l.$=n)(l.params.el);if(r=d[0]){if(1<d.length){var p=[];return d.each(function(e,i){var n=c.extend({},a,{el:i});p.push(new t(n))}),p}r.swiper=l,d.data("swiper",l);var f,m,g=d.children("."+l.params.wrapperClass);return c.extend(l,{$el:d,el:r,$wrapperEl:g,wrapperEl:g[0],classNames:[],slides:n(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===l.params.direction},isVertical:function(){return"vertical"===l.params.direction},rtl:"rtl"===r.dir.toLowerCase()||"rtl"===d.css("direction"),rtlTranslate:"horizontal"===l.params.direction&&("rtl"===r.dir.toLowerCase()||"rtl"===d.css("direction")),wrongRTL:"-webkit-box"===g.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:l.params.allowSlideNext,allowSlidePrev:l.params.allowSlidePrev,touchEvents:(f=["touchstart","touchmove","touchend"],m=["mousedown","mousemove","mouseup"],h.pointerEvents?m=["pointerdown","pointermove","pointerup"]:h.prefixedPointerEvents&&(m=["MSPointerDown","MSPointerMove","MSPointerUp"]),l.touchEventsTouch={start:f[0],move:f[1],end:f[2]},l.touchEventsDesktop={start:m[0],move:m[1],end:m[2]},h.touch||!l.params.simulateTouch?l.touchEventsTouch:l.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:c.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:l.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),l.useModules(),l.params.init&&l.init(),l}}e&&(t.__proto__=e);var i={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.slidesPerViewDynamic=function(){var e=this.params,t=this.slides,i=this.slidesGrid,n=this.size,r=this.activeIndex,a=1;if(e.centeredSlides){for(var s,o=t[r].swiperSlideSize,l=r+1;l<t.length;l+=1)t[l]&&!s&&(a+=1,n<(o+=t[l].swiperSlideSize)&&(s=!0));for(var c=r-1;0<=c;c-=1)t[c]&&!s&&(a+=1,n<(o+=t[c].swiperSlideSize)&&(s=!0))}else for(var h=r+1;h<t.length;h+=1)i[h]-i[r]<n&&(a+=1);return a},t.prototype.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,i=e.params;i.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(n(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||1<e.params.slidesPerView)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||n(),i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function n(){var t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}},t.prototype.init=function(){var e=this;e.initialized||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit),e.attachEvents(),e.initialized=!0,e.emit("init"))},t.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i=this,n=i.params,r=i.$el,a=i.$wrapperEl,s=i.slides;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),t&&(i.removeClasses(),r.removeAttr("style"),a.removeAttr("style"),s&&s.length&&s.removeClass([n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(function(e){i.off(e)}),!1!==e&&(i.$el[0].swiper=null,i.$el.data("swiper",null),c.deleteProps(i)),i.destroyed=!0),null},t.extendDefaults=function(e){c.extend(C,e)},i.extendedDefaults.get=function(){return C},i.defaults.get=function(){return M},i.Class.get=function(){return e},i.$.get=function(){return n},Object.defineProperties(t,i),t}(u),P={name:"device",proto:{device:_},static:{device:_}},L={name:"support",proto:{support:h},static:{support:h}},R={name:"browser",proto:{browser:E},static:{browser:E}},O={name:"resize",create:function(){var e=this;c.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){t.addEventListener("resize",this.resize.resizeHandler),t.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){t.removeEventListener("resize",this.resize.resizeHandler),t.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},I={func:t.MutationObserver||t.WebkitMutationObserver,attach:function(e,i){void 0===i&&(i={});var n=this,r=new I.func(function(e){if(1!==e.length){var i=function(){n.emit("observerUpdate",e[0])};t.requestAnimationFrame?t.requestAnimationFrame(i):t.setTimeout(i,0)}else n.emit("observerUpdate",e[0])});r.observe(e,{attributes:void 0===i.attributes||i.attributes,childList:void 0===i.childList||i.childList,characterData:void 0===i.characterData||i.characterData}),n.observer.observers.push(r)},init:function(){if(h.observer&&this.params.observer){if(this.params.observeParents)for(var e=this.$el.parents(),t=0;t<e.length;t+=1)this.observer.attach(e[t]);this.observer.attach(this.$el[0],{childList:!1}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}},D={name:"observer",params:{observer:!1,observeParents:!1},create:function(){c.extend(this,{observer:{init:I.init.bind(this),attach:I.attach.bind(this),destroy:I.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},k={update:function(e){var t=this,i=t.params,n=i.slidesPerView,r=i.slidesPerGroup,a=i.centeredSlides,s=t.params.virtual,o=s.addSlidesBefore,l=s.addSlidesAfter,h=t.virtual,u=h.from,d=h.to,p=h.slides,f=h.slidesGrid,m=h.renderSlide,g=h.offset;t.updateActiveIndex();var v,y,_,x=t.activeIndex||0;v=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",_=a?(y=Math.floor(n/2)+r+o,Math.floor(n/2)+r+l):(y=n+(r-1)+o,r+l);var b=Math.max((x||0)-_,0),w=Math.min((x||0)+y,p.length-1),T=(t.slidesGrid[b]||0)-(t.slidesGrid[0]||0);function E(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(c.extend(t.virtual,{from:b,to:w,offset:T,slidesGrid:t.slidesGrid}),u===b&&d===w&&!e)return t.slidesGrid!==f&&T!==g&&t.slides.css(v,T+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:T,from:b,to:w,slides:function(){for(var e=[],t=b;t<=w;t+=1)e.push(p[t]);return e}()}),void E();var M=[],S=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var C=u;C<=d;C+=1)(C<b||w<C)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+C+'"]').remove();for(var A=0;A<p.length;A+=1)b<=A&&A<=w&&(void 0===d||e?S.push(A):(d<A&&S.push(A),A<u&&M.push(A)));S.forEach(function(e){t.$wrapperEl.append(m(p[e],e))}),M.sort(function(e,t){return e<t}).forEach(function(e){t.$wrapperEl.prepend(m(p[e],e))}),t.$wrapperEl.children(".swiper-slide").css(v,T+"px"),E()},renderSlide:function(e,t){var i=this.params.virtual;if(i.cache&&this.virtual.cache[t])return this.virtual.cache[t];var r=i.renderSlide?n(i.renderSlide.call(this,e,t)):n('<div class="'+this.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return r.attr("data-swiper-slide-index")||r.attr("data-swiper-slide-index",t),i.cache&&(this.virtual.cache[t]=r),r},appendSlide:function(e){this.virtual.slides.push(e),this.virtual.update(!0)},prependSlide:function(e){if(this.virtual.slides.unshift(e),this.params.virtual.cache){var t=this.virtual.cache,i={};Object.keys(t).forEach(function(e){i[e+1]=t[e]}),this.virtual.cache=i}this.virtual.update(!0),this.slideNext(0)}},N={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){c.extend(this,{virtual:{update:k.update.bind(this),appendSlide:k.appendSlide.bind(this),prependSlide:k.prependSlide.bind(this),renderSlide:k.renderSlide.bind(this),slides:this.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){if(this.params.virtual.enabled){this.classNames.push(this.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};c.extend(this.params,e),c.extend(this.originalParams,e),this.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},z={handle:function(i){var n=this,r=n.rtlTranslate,a=i;a.originalEvent&&(a=a.originalEvent);var s=a.keyCode||a.charCode;if(!n.allowSlideNext&&(n.isHorizontal()&&39===s||n.isVertical()&&40===s))return!1;if(!n.allowSlidePrev&&(n.isHorizontal()&&37===s||n.isVertical()&&38===s))return!1;if(!(a.shiftKey||a.altKey||a.ctrlKey||a.metaKey||e.activeElement&&e.activeElement.nodeName&&("input"===e.activeElement.nodeName.toLowerCase()||"textarea"===e.activeElement.nodeName.toLowerCase()))){if(n.params.keyboard.onlyInViewport&&(37===s||39===s||38===s||40===s)){var o=!1;if(0<n.$el.parents("."+n.params.slideClass).length&&0===n.$el.parents("."+n.params.slideActiveClass).length)return;var l=t.innerWidth,c=t.innerHeight,h=n.$el.offset();r&&(h.left-=n.$el[0].scrollLeft);for(var u=[[h.left,h.top],[h.left+n.width,h.top],[h.left,h.top+n.height],[h.left+n.width,h.top+n.height]],d=0;d<u.length;d+=1){var p=u[d];0<=p[0]&&p[0]<=l&&0<=p[1]&&p[1]<=c&&(o=!0)}if(!o)return}n.isHorizontal()?(37!==s&&39!==s||(a.preventDefault?a.preventDefault():a.returnValue=!1),(39===s&&!r||37===s&&r)&&n.slideNext(),(37===s&&!r||39===s&&r)&&n.slidePrev()):(38!==s&&40!==s||(a.preventDefault?a.preventDefault():a.returnValue=!1),40===s&&n.slideNext(),38===s&&n.slidePrev()),n.emit("keyPress",s)}},enable:function(){this.keyboard.enabled||(n(e).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(n(e).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},B={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){c.extend(this,{keyboard:{enabled:!1,enable:z.enable.bind(this),disable:z.disable.bind(this),handle:z.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}},H={lastScrollTime:c.now(),event:-1<t.navigator.userAgent.indexOf("firefox")?"DOMMouseScroll":function(){var t="onwheel",i=t in e;if(!i){var n=e.createElement("div");n.setAttribute(t,"return;"),i="function"==typeof n[t]}return!i&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(i=e.implementation.hasFeature("Events.wheel","3.0")),i}()?"wheel":"mousewheel",normalize:function(e){var t=0,i=0,n=0,r=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),n=10*t,r=10*i,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||r)&&e.deltaMode&&(1===e.deltaMode?(n*=40,r*=40):(n*=800,r*=800)),n&&!t&&(t=n<1?-1:1),r&&!i&&(i=r<1?-1:1),{spinX:t,spinY:i,pixelX:n,pixelY:r}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var i=e,n=this,r=n.params.mousewheel;if(!n.mouseEntered&&!r.releaseOnEdges)return!0;i.originalEvent&&(i=i.originalEvent);var a=0,s=n.rtlTranslate?-1:1,o=H.normalize(i);if(r.forceToAxis)if(n.isHorizontal()){if(!(Math.abs(o.pixelX)>Math.abs(o.pixelY)))return!0;a=o.pixelX*s}else{if(!(Math.abs(o.pixelY)>Math.abs(o.pixelX)))return!0;a=o.pixelY}else a=Math.abs(o.pixelX)>Math.abs(o.pixelY)?-o.pixelX*s:-o.pixelY;if(0===a)return!0;if(r.invert&&(a=-a),n.params.freeMode){n.params.loop&&n.loopFix();var l=n.getTranslate()+a*r.sensitivity,h=n.isBeginning,u=n.isEnd;if(l>=n.minTranslate()&&(l=n.minTranslate()),l<=n.maxTranslate()&&(l=n.maxTranslate()),n.setTransition(0),n.setTranslate(l),n.updateProgress(),n.updateActiveIndex(),n.updateSlidesClasses(),(!h&&n.isBeginning||!u&&n.isEnd)&&n.updateSlidesClasses(),n.params.freeModeSticky&&(clearTimeout(n.mousewheel.timeout),n.mousewheel.timeout=c.nextTick(function(){n.slideToClosest()},300)),n.emit("scroll",i),n.params.autoplay&&n.params.autoplayDisableOnInteraction&&n.autoplay.stop(),l===n.minTranslate()||l===n.maxTranslate())return!0}else{if(60<c.now()-n.mousewheel.lastScrollTime)if(a<0)if(n.isEnd&&!n.params.loop||n.animating){if(r.releaseOnEdges)return!0}else n.slideNext(),n.emit("scroll",i);else if(n.isBeginning&&!n.params.loop||n.animating){if(r.releaseOnEdges)return!0}else n.slidePrev(),n.emit("scroll",i);n.mousewheel.lastScrollTime=(new t.Date).getTime()}return i.preventDefault?i.preventDefault():i.returnValue=!1,!1},enable:function(){if(!H.event)return!1;if(this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(e=n(this.params.mousewheel.eventsTarged)),e.on("mouseenter",this.mousewheel.handleMouseEnter),e.on("mouseleave",this.mousewheel.handleMouseLeave),e.on(H.event,this.mousewheel.handle),this.mousewheel.enabled=!0},disable:function(){if(!H.event)return!1;if(!this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(e=n(this.params.mousewheel.eventsTarged)),e.off(H.event,this.mousewheel.handle),!(this.mousewheel.enabled=!1)}},F={update:function(){var e=this.params.navigation;if(!this.params.loop){var t=this.navigation,i=t.$nextEl,n=t.$prevEl;n&&0<n.length&&(this.isBeginning?n.addClass(e.disabledClass):n.removeClass(e.disabledClass),n[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass)),i&&0<i.length&&(this.isEnd?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass))}},init:function(){var e,t,i=this,r=i.params.navigation;(r.nextEl||r.prevEl)&&(r.nextEl&&(e=n(r.nextEl),i.params.uniqueNavElements&&"string"==typeof r.nextEl&&1<e.length&&1===i.$el.find(r.nextEl).length&&(e=i.$el.find(r.nextEl))),r.prevEl&&(t=n(r.prevEl),i.params.uniqueNavElements&&"string"==typeof r.prevEl&&1<t.length&&1===i.$el.find(r.prevEl).length&&(t=i.$el.find(r.prevEl))),e&&0<e.length&&e.on("click",function(e){e.preventDefault(),i.isEnd&&!i.params.loop||i.slideNext()}),t&&0<t.length&&t.on("click",function(e){e.preventDefault(),i.isBeginning&&!i.params.loop||i.slidePrev()}),c.extend(i.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;t&&t.length&&(t.off("click"),t.removeClass(this.params.navigation.disabledClass)),i&&i.length&&(i.off("click"),i.removeClass(this.params.navigation.disabledClass))}},U={update:function(){var e=this,t=e.rtl,i=e.params.pagination;if(i.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var r,a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,s=e.pagination.$el,o=e.params.loop?Math.ceil((a-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((r=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>a-1-2*e.loopedSlides&&(r-=a-2*e.loopedSlides),o-1<r&&(r-=o),r<0&&"bullets"!==e.params.paginationType&&(r=o+r)):r=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===i.type&&e.pagination.bullets&&0<e.pagination.bullets.length){var l,c,h,u=e.pagination.bullets;if(i.dynamicBullets&&(e.pagination.bulletSize=u.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),s.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(i.dynamicMainBullets+4)+"px"),1<i.dynamicMainBullets&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=r-e.previousIndex,e.pagination.dynamicBulletIndex>i.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=i.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),l=r-e.pagination.dynamicBulletIndex,h=((c=l+(Math.min(u.length,i.dynamicMainBullets)-1))+l)/2),u.removeClass(i.bulletActiveClass+" "+i.bulletActiveClass+"-next "+i.bulletActiveClass+"-next-next "+i.bulletActiveClass+"-prev "+i.bulletActiveClass+"-prev-prev "+i.bulletActiveClass+"-main"),1<s.length)u.each(function(e,t){var a=n(t),s=a.index();s===r&&a.addClass(i.bulletActiveClass),i.dynamicBullets&&(l<=s&&s<=c&&a.addClass(i.bulletActiveClass+"-main"),s===l&&a.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),s===c&&a.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next"))});else if(u.eq(r).addClass(i.bulletActiveClass),i.dynamicBullets){for(var d=u.eq(l),p=u.eq(c),f=l;f<=c;f+=1)u.eq(f).addClass(i.bulletActiveClass+"-main");d.prev().addClass(i.bulletActiveClass+"-prev").prev().addClass(i.bulletActiveClass+"-prev-prev"),p.next().addClass(i.bulletActiveClass+"-next").next().addClass(i.bulletActiveClass+"-next-next")}if(i.dynamicBullets){var m=Math.min(u.length,i.dynamicMainBullets+4),g=(e.pagination.bulletSize*m-e.pagination.bulletSize)/2-h*e.pagination.bulletSize,v=t?"right":"left";u.css(e.isHorizontal()?v:"top",g+"px")}}if("fraction"===i.type&&(s.find("."+i.currentClass).text(i.formatFractionCurrent(r+1)),s.find("."+i.totalClass).text(i.formatFractionTotal(o))),"progressbar"===i.type){var y;y=i.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var _=(r+1)/o,x=1,b=1;"horizontal"===y?x=_:b=_,s.find("."+i.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+x+") scaleY("+b+")").transition(e.params.speed)}"custom"===i.type&&i.renderCustom?(s.html(i.renderCustom(e,r+1,o)),e.emit("paginationRender",e,s[0])):e.emit("paginationUpdate",e,s[0]),s[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](i.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,n=e.pagination.$el,r="";if("bullets"===t.type){for(var a=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length,s=0;s<a;s+=1)t.renderBullet?r+=t.renderBullet.call(e,s,t.bulletClass):r+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";n.html(r),e.pagination.bullets=n.find("."+t.bulletClass)}"fraction"===t.type&&(r=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',n.html(r)),"progressbar"===t.type&&(r=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',n.html(r)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this,t=e.params.pagination;if(t.el){var i=n(t.el);0!==i.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&1<i.length&&1===e.$el.find(t.el).length&&(i=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&i.addClass(t.clickableClass),i.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(i.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&i.addClass(t.progressbarOppositeClass),t.clickable&&i.on("click","."+t.bulletClass,function(t){t.preventDefault();var i=n(this).index()*e.params.slidesPerGroup;e.params.loop&&(i+=e.loopedSlides),e.slideTo(i)}),c.extend(e.pagination,{$el:i,el:i[0]}))}},destroy:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click","."+e.bulletClass)}}},G={setTranslate:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=this.rtlTranslate,i=this.progress,n=e.dragSize,r=e.trackSize,a=e.$dragEl,s=e.$el,o=this.params.scrollbar,l=n,c=(r-n)*i;t?0<(c=-c)?(l=n-c,c=0):r<-c+n&&(l=r+c):c<0?(l=n+c,c=0):r<c+n&&(l=r-c),this.isHorizontal()?(h.transforms3d?a.transform("translate3d("+c+"px, 0, 0)"):a.transform("translateX("+c+"px)"),a[0].style.width=l+"px"):(h.transforms3d?a.transform("translate3d(0px, "+c+"px, 0)"):a.transform("translateY("+c+"px)"),a[0].style.height=l+"px"),o.hide&&(clearTimeout(this.scrollbar.timeout),s[0].style.opacity=1,this.scrollbar.timeout=setTimeout(function(){s[0].style.opacity=0,s.transition(400)},1e3))}},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,i=t.$dragEl,n=t.$el;i[0].style.width="",i[0].style.height="";var r,a=e.isHorizontal()?n[0].offsetWidth:n[0].offsetHeight,s=e.size/e.virtualSize,o=s*(a/e.size);r="auto"===e.params.scrollbar.dragSize?a*s:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?i[0].style.width=r+"px":i[0].style.height=r+"px",n[0].style.display=1<=s?"none":"",e.params.scrollbarHide&&(n[0].style.opacity=0),c.extend(t,{trackSize:a,divider:s,moveDivider:o,dragSize:r}),t.$el[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},setDragPosition:function(e){var t,i=this,n=i.scrollbar,r=i.rtlTranslate,a=n.$el,s=n.dragSize,o=n.trackSize;t=((i.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY)-a.offset()[i.isHorizontal()?"left":"top"]-s/2)/(o-s),t=Math.max(Math.min(t,1),0),r&&(t=1-t);var l=i.minTranslate()+(i.maxTranslate()-i.minTranslate())*t;i.updateProgress(l),i.setTranslate(l),i.updateActiveIndex(),i.updateSlidesClasses()},onDragStart:function(e){var t=this.params.scrollbar,i=this.scrollbar,n=this.$wrapperEl,r=i.$el,a=i.$dragEl;this.scrollbar.isTouched=!0,e.preventDefault(),e.stopPropagation(),n.transition(100),a.transition(100),i.setDragPosition(e),clearTimeout(this.scrollbar.dragTimeout),r.transition(0),t.hide&&r.css("opacity",1),this.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,i=this.$wrapperEl,n=t.$el,r=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),i.transition(0),n.transition(0),r.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this.params.scrollbar,i=this.scrollbar.$el;this.scrollbar.isTouched&&(this.scrollbar.isTouched=!1,t.hide&&(clearTimeout(this.scrollbar.dragTimeout),this.scrollbar.dragTimeout=c.nextTick(function(){i.css("opacity",0),i.transition(400)},1e3)),this.emit("scrollbarDragEnd",e),t.snapOnRelease&&this.slideToClosest())},enableDraggable:function(){var t=this;if(t.params.scrollbar.el){var i=t.scrollbar,n=t.touchEvents,r=t.touchEventsDesktop,a=t.params,s=i.$el[0],o=!(!h.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},l=!(!h.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};h.touch||!h.pointerEvents&&!h.prefixedPointerEvents?(h.touch&&(s.addEventListener(n.start,t.scrollbar.onDragStart,o),s.addEventListener(n.move,t.scrollbar.onDragMove,o),s.addEventListener(n.end,t.scrollbar.onDragEnd,l)),(a.simulateTouch&&!_.ios&&!_.android||a.simulateTouch&&!h.touch&&_.ios)&&(s.addEventListener("mousedown",t.scrollbar.onDragStart,o),e.addEventListener("mousemove",t.scrollbar.onDragMove,o),e.addEventListener("mouseup",t.scrollbar.onDragEnd,l))):(s.addEventListener(r.start,t.scrollbar.onDragStart,o),e.addEventListener(r.move,t.scrollbar.onDragMove,o),e.addEventListener(r.end,t.scrollbar.onDragEnd,l))}},disableDraggable:function(){var t=this;if(t.params.scrollbar.el){var i=t.scrollbar,n=t.touchEvents,r=t.touchEventsDesktop,a=t.params,s=i.$el[0],o=!(!h.passiveListener||!a.passiveListeners)&&{passive:!1,capture:!1},l=!(!h.passiveListener||!a.passiveListeners)&&{passive:!0,capture:!1};h.touch||!h.pointerEvents&&!h.prefixedPointerEvents?(h.touch&&(s.removeEventListener(n.start,t.scrollbar.onDragStart,o),s.removeEventListener(n.move,t.scrollbar.onDragMove,o),s.removeEventListener(n.end,t.scrollbar.onDragEnd,l)),(a.simulateTouch&&!_.ios&&!_.android||a.simulateTouch&&!h.touch&&_.ios)&&(s.removeEventListener("mousedown",t.scrollbar.onDragStart,o),e.removeEventListener("mousemove",t.scrollbar.onDragMove,o),e.removeEventListener("mouseup",t.scrollbar.onDragEnd,l))):(s.removeEventListener(r.start,t.scrollbar.onDragStart,o),e.removeEventListener(r.move,t.scrollbar.onDragMove,o),e.removeEventListener(r.end,t.scrollbar.onDragEnd,l))}},init:function(){if(this.params.scrollbar.el){var e=this.scrollbar,t=this.$el,i=this.params.scrollbar,r=n(i.el);this.params.uniqueNavElements&&"string"==typeof i.el&&1<r.length&&1===t.find(i.el).length&&(r=t.find(i.el));var a=r.find("."+this.params.scrollbar.dragClass);0===a.length&&(a=n('<div class="'+this.params.scrollbar.dragClass+'"></div>'),r.append(a)),c.extend(e,{$el:r,el:r[0],$dragEl:a,dragEl:a[0]}),i.draggable&&e.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},V={setTransform:function(e,t){var i=this.rtl,r=n(e),a=i?-1:1,s=r.attr("data-swiper-parallax")||"0",o=r.attr("data-swiper-parallax-x"),l=r.attr("data-swiper-parallax-y"),c=r.attr("data-swiper-parallax-scale"),h=r.attr("data-swiper-parallax-opacity");if(o||l?(o=o||"0",l=l||"0"):this.isHorizontal()?(o=s,l="0"):(l=s,o="0"),o=0<=o.indexOf("%")?parseInt(o,10)*t*a+"%":o*t*a+"px",l=0<=l.indexOf("%")?parseInt(l,10)*t+"%":l*t+"px",null!=h){var u=h-(h-1)*(1-Math.abs(t));r[0].style.opacity=u}if(null==c)r.transform("translate3d("+o+", "+l+", 0px)");else{var d=c-(c-1)*(1-Math.abs(t));r.transform("translate3d("+o+", "+l+", 0px) scale("+d+")")}},setTranslate:function(){var e=this,t=e.$el,i=e.slides,r=e.progress,a=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(t,i){e.parallax.setTransform(i,r)}),i.each(function(t,i){var s=i.progress;1<e.params.slidesPerGroup&&"auto"!==e.params.slidesPerView&&(s+=Math.ceil(t/2)-r*(a.length-1)),s=Math.min(Math.max(s,-1),1),n(i).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(t,i){e.parallax.setTransform(i,s)})})},setTransition:function(e){void 0===e&&(e=this.params.speed),this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(t,i){var r=n(i),a=parseInt(r.attr("data-swiper-parallax-duration"),10)||e;0===e&&(a=0),r.transition(a)})}},j={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,n=e.targetTouches[1].pageX,r=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-i,2))},onGestureStart:function(e){var t=this.params.zoom,i=this.zoom,r=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!h.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,r.scaleStart=j.getDistanceBetweenTouches(e)}r.$slideEl&&r.$slideEl.length||(r.$slideEl=n(e.target).closest(".swiper-slide"),0===r.$slideEl.length&&(r.$slideEl=this.slides.eq(this.activeIndex)),r.$imageEl=r.$slideEl.find("img, svg, canvas"),r.$imageWrapEl=r.$imageEl.parent("."+t.containerClass),r.maxRatio=r.$imageWrapEl.attr("data-swiper-zoom")||t.maxRatio,0!==r.$imageWrapEl.length)?(r.$imageEl.transition(0),this.zoom.isScaling=!0):r.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,i=this.zoom,n=i.gesture;if(!h.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;i.fakeGestureMoved=!0,n.scaleMove=j.getDistanceBetweenTouches(e)}n.$imageEl&&0!==n.$imageEl.length&&(h.gestures?this.zoom.scale=e.scale*i.currentScale:i.scale=n.scaleMove/n.scaleStart*i.currentScale,i.scale>n.maxRatio&&(i.scale=n.maxRatio-1+Math.pow(i.scale-n.maxRatio+1,.5)),i.scale<t.minRatio&&(i.scale=t.minRatio+1-Math.pow(t.minRatio-i.scale+1,.5)),n.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,i=this.zoom,n=i.gesture;if(!h.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!_.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}n.$imageEl&&0!==n.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,n.maxRatio),t.minRatio),n.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+i.scale+")"),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(n.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,i=t.gesture,n=t.image;i.$imageEl&&0!==i.$imageEl.length&&(n.isTouched||(_.android&&e.preventDefault(),n.isTouched=!0,n.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,n.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this.zoom,i=t.gesture,n=t.image,r=t.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(this.allowClick=!1,n.isTouched&&i.$slideEl)){n.isMoved||(n.width=i.$imageEl[0].offsetWidth,n.height=i.$imageEl[0].offsetHeight,n.startX=c.getTranslate(i.$imageWrapEl[0],"x")||0,n.startY=c.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),this.rtl&&(n.startX=-n.startX,n.startY=-n.startY));var a=n.width*t.scale,s=n.height*t.scale;if(!(a<i.slideWidth&&s<i.slideHeight)){if(n.minX=Math.min(i.slideWidth/2-a/2,0),n.maxX=-n.minX,n.minY=Math.min(i.slideHeight/2-s/2,0),n.maxY=-n.minY,n.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!n.isMoved&&!t.isScaling){if(this.isHorizontal()&&(Math.floor(n.minX)===Math.floor(n.startX)&&n.touchesCurrent.x<n.touchesStart.x||Math.floor(n.maxX)===Math.floor(n.startX)&&n.touchesCurrent.x>n.touchesStart.x))return void(n.isTouched=!1);if(!this.isHorizontal()&&(Math.floor(n.minY)===Math.floor(n.startY)&&n.touchesCurrent.y<n.touchesStart.y||Math.floor(n.maxY)===Math.floor(n.startY)&&n.touchesCurrent.y>n.touchesStart.y))return void(n.isTouched=!1)}e.preventDefault(),e.stopPropagation(),n.isMoved=!0,n.currentX=n.touchesCurrent.x-n.touchesStart.x+n.startX,n.currentY=n.touchesCurrent.y-n.touchesStart.y+n.startY,n.currentX<n.minX&&(n.currentX=n.minX+1-Math.pow(n.minX-n.currentX+1,.8)),n.currentX>n.maxX&&(n.currentX=n.maxX-1+Math.pow(n.currentX-n.maxX+1,.8)),n.currentY<n.minY&&(n.currentY=n.minY+1-Math.pow(n.minY-n.currentY+1,.8)),n.currentY>n.maxY&&(n.currentY=n.maxY-1+Math.pow(n.currentY-n.maxY+1,.8)),r.prevPositionX||(r.prevPositionX=n.touchesCurrent.x),r.prevPositionY||(r.prevPositionY=n.touchesCurrent.y),r.prevTime||(r.prevTime=Date.now()),r.x=(n.touchesCurrent.x-r.prevPositionX)/(Date.now()-r.prevTime)/2,r.y=(n.touchesCurrent.y-r.prevPositionY)/(Date.now()-r.prevTime)/2,Math.abs(n.touchesCurrent.x-r.prevPositionX)<2&&(r.x=0),Math.abs(n.touchesCurrent.y-r.prevPositionY)<2&&(r.y=0),r.prevPositionX=n.touchesCurrent.x,r.prevPositionY=n.touchesCurrent.y,r.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,i=e.image,n=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var r=300,a=300,s=n.x*r,o=i.currentX+s,l=n.y*a,c=i.currentY+l;0!==n.x&&(r=Math.abs((o-i.currentX)/n.x)),0!==n.y&&(a=Math.abs((c-i.currentY)/n.y));var h=Math.max(r,a);i.currentX=o,i.currentY=c;var u=i.width*e.scale,d=i.height*e.scale;i.minX=Math.min(t.slideWidth/2-u/2,0),i.maxX=-i.minX,i.minY=Math.min(t.slideHeight/2-d/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),t.$imageWrapEl.transition(h).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl.transform("translate3d(0,0,0)"),t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0,e.scale=1,e.currentScale=1)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,i,r,a,s,o,l,c,h,u,d,p,f,m,g,v,y=this.zoom,_=this.params.zoom,x=y.gesture,b=y.image;x.$slideEl||(x.$slideEl=this.clickedSlide?n(this.clickedSlide):this.slides.eq(this.activeIndex),x.$imageEl=x.$slideEl.find("img, svg, canvas"),x.$imageWrapEl=x.$imageEl.parent("."+_.containerClass)),x.$imageEl&&0!==x.$imageEl.length&&(x.$slideEl.addClass(""+_.zoomedSlideClass),i=void 0===b.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,"touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=b.touchesStart.x,b.touchesStart.y),y.scale=x.$imageWrapEl.attr("data-swiper-zoom")||_.maxRatio,y.currentScale=x.$imageWrapEl.attr("data-swiper-zoom")||_.maxRatio,e?(g=x.$slideEl[0].offsetWidth,v=x.$slideEl[0].offsetHeight,r=x.$slideEl.offset().left+g/2-t,a=x.$slideEl.offset().top+v/2-i,l=x.$imageEl[0].offsetWidth,c=x.$imageEl[0].offsetHeight,h=l*y.scale,u=c*y.scale,f=-(d=Math.min(g/2-h/2,0)),m=-(p=Math.min(v/2-u/2,0)),(s=r*y.scale)<d&&(s=d),f<s&&(s=f),(o=a*y.scale)<p&&(o=p),m<o&&(o=m)):o=s=0,x.$imageWrapEl.transition(300).transform("translate3d("+s+"px, "+o+"px,0)"),x.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+y.scale+")"))},out:function(){var e=this.zoom,t=this.params.zoom,i=e.gesture;i.$slideEl||(i.$slideEl=this.clickedSlide?n(this.clickedSlide):this.slides.eq(this.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas"),i.$imageWrapEl=i.$imageEl.parent("."+t.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(e.scale=1,e.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+t.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var e=this,t=e.zoom;if(!t.enabled){t.enabled=!0;var i=!("touchstart"!==e.touchEvents.start||!h.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};h.gestures?(e.$wrapperEl.on("gesturestart",".swiper-slide",t.onGestureStart,i),e.$wrapperEl.on("gesturechange",".swiper-slide",t.onGestureChange,i),e.$wrapperEl.on("gestureend",".swiper-slide",t.onGestureEnd,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,".swiper-slide",t.onGestureStart,i),e.$wrapperEl.on(e.touchEvents.move,".swiper-slide",t.onGestureChange,i),e.$wrapperEl.on(e.touchEvents.end,".swiper-slide",t.onGestureEnd,i)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){e.zoom.enabled=!1;var i=!("touchstart"!==e.touchEvents.start||!h.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};h.gestures?(e.$wrapperEl.off("gesturestart",".swiper-slide",t.onGestureStart,i),e.$wrapperEl.off("gesturechange",".swiper-slide",t.onGestureChange,i),e.$wrapperEl.off("gestureend",".swiper-slide",t.onGestureEnd,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,".swiper-slide",t.onGestureStart,i),e.$wrapperEl.off(e.touchEvents.move,".swiper-slide",t.onGestureChange,i),e.$wrapperEl.off(e.touchEvents.end,".swiper-slide",t.onGestureEnd,i)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove)}}},W={loadInSlide:function(e,t){void 0===t&&(t=!0);var i=this,r=i.params.lazy;if(void 0!==e&&0!==i.slides.length){var a=i.virtual&&i.params.virtual.enabled?i.$wrapperEl.children("."+i.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):i.slides.eq(e),s=a.find("."+r.elementClass+":not(."+r.loadedClass+"):not(."+r.loadingClass+")");!a.hasClass(r.elementClass)||a.hasClass(r.loadedClass)||a.hasClass(r.loadingClass)||(s=s.add(a[0])),0!==s.length&&s.each(function(e,s){var o=n(s);o.addClass(r.loadingClass);var l=o.attr("data-background"),c=o.attr("data-src"),h=o.attr("data-srcset"),u=o.attr("data-sizes");i.loadImage(o[0],c||l,h,u,!1,function(){if(null!=i&&i&&(!i||i.params)&&!i.destroyed){if(l?(o.css("background-image",'url("'+l+'")'),o.removeAttr("data-background")):(h&&(o.attr("srcset",h),o.removeAttr("data-srcset")),u&&(o.attr("sizes",u),o.removeAttr("data-sizes")),c&&(o.attr("src",c),o.removeAttr("data-src"))),o.addClass(r.loadedClass).removeClass(r.loadingClass),a.find("."+r.preloaderClass).remove(),i.params.loop&&t){var e=a.attr("data-swiper-slide-index");if(a.hasClass(i.params.slideDuplicateClass)){var n=i.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+i.params.slideDuplicateClass+")");i.lazy.loadInSlide(n.index(),!1)}else{var s=i.$wrapperEl.children("."+i.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');i.lazy.loadInSlide(s.index(),!1)}}i.emit("lazyImageReady",a[0],o[0])}}),i.emit("lazyImageLoad",a[0],o[0])})}},load:function(){var e=this,t=e.$wrapperEl,i=e.params,r=e.slides,a=e.activeIndex,s=e.virtual&&i.virtual.enabled,o=i.lazy,l=i.slidesPerView;function c(e){if(s){if(t.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(r[e])return!0;return!1}function h(e){return s?n(e).attr("data-swiper-slide-index"):n(e).index()}if("auto"===l&&(l=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+i.slideVisibleClass).each(function(t,i){var r=s?n(i).attr("data-swiper-slide-index"):n(i).index();e.lazy.loadInSlide(r)});else if(1<l)for(var u=a;u<a+l;u+=1)c(u)&&e.lazy.loadInSlide(u);else e.lazy.loadInSlide(a);if(o.loadPrevNext)if(1<l||o.loadPrevNextAmount&&1<o.loadPrevNextAmount){for(var d=o.loadPrevNextAmount,p=l,f=Math.min(a+p+Math.max(d,p),r.length),m=Math.max(a-Math.max(p,d),0),g=a+l;g<f;g+=1)c(g)&&e.lazy.loadInSlide(g);for(var v=m;v<a;v+=1)c(v)&&e.lazy.loadInSlide(v)}else{var y=t.children("."+i.slideNextClass);0<y.length&&e.lazy.loadInSlide(h(y));var _=t.children("."+i.slidePrevClass);0<_.length&&e.lazy.loadInSlide(h(_))}}},X={LinearSpline:function(e,t){var i,n,r,a,s;return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(s=function(e,t){for(n=-1,i=e.length;1<i-n;)e[r=i+n>>1]<=t?n=r:i=r;return i}(this.x,e),a=s-1,(e-this.x[a])*(this.y[s]-this.y[a])/(this.x[s]-this.x[a])+this.y[a]):0},this},getInterpolateFunction:function(e){this.controller.spline||(this.controller.spline=this.params.loop?new X.LinearSpline(this.slidesGrid,e.slidesGrid):new X.LinearSpline(this.snapGrid,e.snapGrid))},setTranslate:function(e,t){var i,n,r=this,a=r.controller.control;function s(e){var t=r.rtlTranslate?-r.translate:r.translate;"slide"===r.params.controller.by&&(r.controller.getInterpolateFunction(e),n=-r.controller.spline.interpolate(-t)),n&&"container"!==r.params.controller.by||(i=(e.maxTranslate()-e.minTranslate())/(r.maxTranslate()-r.minTranslate()),n=(t-r.minTranslate())*i+e.minTranslate()),r.params.controller.inverse&&(n=e.maxTranslate()-n),e.updateProgress(n),e.setTranslate(n,r),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(a))for(var o=0;o<a.length;o+=1)a[o]!==t&&a[o]instanceof A&&s(a[o]);else a instanceof A&&t!==a&&s(a)},setTransition:function(e,t){var i,n=this,r=n.controller.control;function a(t){t.setTransition(e,n),0!==e&&(t.transitionStart(),t.params.autoHeight&&c.nextTick(function(){t.updateAutoHeight()}),t.$wrapperEl.transitionEnd(function(){r&&(t.params.loop&&"slide"===n.params.controller.by&&t.loopFix(),t.transitionEnd())}))}if(Array.isArray(r))for(i=0;i<r.length;i+=1)r[i]!==t&&r[i]instanceof A&&a(r[i]);else r instanceof A&&t!==r&&a(r)}},Y={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t=this,i=t.params.a11y;if(13===e.keyCode){var r=n(e.target);t.navigation&&t.navigation.$nextEl&&r.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(i.lastSlideMessage):t.a11y.notify(i.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&r.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(i.firstSlideMessage):t.a11y.notify(i.prevSlideMessage)),t.pagination&&r.is("."+t.params.pagination.bulletClass)&&r[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){if(!this.params.loop){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;i&&0<i.length&&(this.isBeginning?this.a11y.disableEl(i):this.a11y.enableEl(i)),t&&0<t.length&&(this.isEnd?this.a11y.disableEl(t):this.a11y.enableEl(t))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each(function(i,r){var a=n(r);e.a11y.makeElFocusable(a),e.a11y.addElRole(a,"button"),e.a11y.addElLabel(a,t.paginationBulletMessage.replace(/{{index}}/,a.index()+1))})},init:function(){var e=this;e.$el.append(e.a11y.liveRegion);var t,i,n=e.params.a11y;e.navigation&&e.navigation.$nextEl&&(t=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(i=e.navigation.$prevEl),t&&(e.a11y.makeElFocusable(t),e.a11y.addElRole(t,"button"),e.a11y.addElLabel(t,n.nextSlideMessage),t.on("keydown",e.a11y.onEnterKey)),i&&(e.a11y.makeElFocusable(i),e.a11y.addElRole(i,"button"),e.a11y.addElLabel(i,n.prevSlideMessage),i.on("keydown",e.a11y.onEnterKey)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass,e.a11y.onEnterKey)},destroy:function(){var e,t,i=this;i.a11y.liveRegion&&0<i.a11y.liveRegion.length&&i.a11y.liveRegion.remove(),i.navigation&&i.navigation.$nextEl&&(e=i.navigation.$nextEl),i.navigation&&i.navigation.$prevEl&&(t=i.navigation.$prevEl),e&&e.off("keydown",i.a11y.onEnterKey),t&&t.off("keydown",i.a11y.onEnterKey),i.pagination&&i.params.pagination.clickable&&i.pagination.bullets&&i.pagination.bullets.length&&i.pagination.$el.off("keydown","."+i.params.pagination.bulletClass,i.a11y.onEnterKey)}},q={init:function(){if(this.params.history){if(!t.history||!t.history.pushState)return this.params.history.enabled=!1,void(this.params.hashNavigation.enabled=!0);var e=this.history;e.initialized=!0,e.paths=q.getPathValues(),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,this.params.runCallbacksOnInit),this.params.history.replaceState||t.addEventListener("popstate",this.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||t.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=q.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=t.location.pathname.slice(1).split("/").filter(function(e){return""!==e}),i=e.length;return{key:e[i-2],value:e[i-1]}},setHistory:function(e,i){if(this.history.initialized&&this.params.history.enabled){var n=this.slides.eq(i),r=q.slugify(n.attr("data-history"));t.location.pathname.includes(e)||(r=e+"/"+r);var a=t.history.state;a&&a.value===r||(this.params.history.replaceState?t.history.replaceState({value:r},null,r):t.history.pushState({value:r},null,r))}},slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,i){if(t)for(var n=0,r=this.slides.length;n<r;n+=1){var a=this.slides.eq(n);if(q.slugify(a.attr("data-history"))===t&&!a.hasClass(this.params.slideDuplicateClass)){var s=a.index();this.slideTo(s,e,i)}}else this.slideTo(0,e,i)}},$={onHashCange:function(){var t=e.location.hash.replace("#","");if(t!==this.slides.eq(this.activeIndex).attr("data-hash")){var i=this.$wrapperEl.children("."+this.params.slideClass+'[data-hash="'+t+'"]').index();if(void 0===i)return;this.slideTo(i)}},setHash:function(){if(this.hashNavigation.initialized&&this.params.hashNavigation.enabled)if(this.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+this.slides.eq(this.activeIndex).attr("data-hash")||"");else{var i=this.slides.eq(this.activeIndex),n=i.attr("data-hash")||i.attr("data-history");e.location.hash=n||""}},init:function(){var i=this;if(!(!i.params.hashNavigation.enabled||i.params.history&&i.params.history.enabled)){i.hashNavigation.initialized=!0;var r=e.location.hash.replace("#","");if(r)for(var a=0,s=i.slides.length;a<s;a+=1){var o=i.slides.eq(a);if((o.attr("data-hash")||o.attr("data-history"))===r&&!o.hasClass(i.params.slideDuplicateClass)){var l=o.index();i.slideTo(l,0,i.params.runCallbacksOnInit,!0)}}i.params.hashNavigation.watchState&&n(t).on("hashchange",i.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&n(t).off("hashchange",this.hashNavigation.onHashCange)}},Z={run:function(){var e=this,t=e.slides.eq(e.activeIndex),i=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),e.autoplay.timeout=c.nextTick(function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay"))},i)},start:function(){return void 0===this.autoplay.timeout&&!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0)},stop:function(){return!!this.autoplay.running&&void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0)},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?(t.$wrapperEl[0].addEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].addEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd)):(t.autoplay.paused=!1,t.autoplay.run())))}},J={setTranslate:function(){for(var e=this.slides,t=0;t<e.length;t+=1){var i=this.slides.eq(t),n=-i[0].swiperSlideOffset;this.params.virtualTranslate||(n-=this.translate);var r=0;this.isHorizontal()||(r=n,n=0);var a=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:a}).transform("translate3d("+n+"px, "+r+"px, 0px)")}},setTransition:function(e){var t=this,i=t.slides,n=t.$wrapperEl;if(i.transition(e),t.params.virtualTranslate&&0!==e){var r=!1;i.transitionEnd(function(){if(!r&&t&&!t.destroyed){r=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)n.trigger(e[i])}})}}},K={setTranslate:function(){var e,t=this,i=t.$el,r=t.$wrapperEl,a=t.slides,s=t.width,o=t.height,l=t.rtlTranslate,c=t.size,h=t.params.cubeEffect,u=t.isHorizontal(),d=t.virtual&&t.params.virtual.enabled,p=0;h.shadow&&(u?(0===(e=r.find(".swiper-cube-shadow")).length&&(e=n('<div class="swiper-cube-shadow"></div>'),r.append(e)),e.css({height:s+"px"})):0===(e=i.find(".swiper-cube-shadow")).length&&(e=n('<div class="swiper-cube-shadow"></div>'),i.append(e)));for(var f=0;f<a.length;f+=1){var m=a.eq(f),g=f;d&&(g=parseInt(m.attr("data-swiper-slide-index"),10));var v=90*g,y=Math.floor(v/360);l&&(v=-v,y=Math.floor(-v/360));var _=Math.max(Math.min(m[0].progress,1),-1),x=0,b=0,w=0;g%4==0?(x=4*-y*c,w=0):(g-1)%4==0?(x=0,w=4*-y*c):(g-2)%4==0?(x=c+4*y*c,w=c):(g-3)%4==0&&(x=-c,w=3*c+4*c*y),l&&(x=-x),u||(b=x,x=0);var T="rotateX("+(u?0:-v)+"deg) rotateY("+(u?v:0)+"deg) translate3d("+x+"px, "+b+"px, "+w+"px)";if(_<=1&&-1<_&&(p=90*g+90*_,l&&(p=90*-g-90*_)),m.transform(T),h.slideShadows){var M=u?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),S=u?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===M.length&&(M=n('<div class="swiper-slide-shadow-'+(u?"left":"top")+'"></div>'),m.append(M)),0===S.length&&(S=n('<div class="swiper-slide-shadow-'+(u?"right":"bottom")+'"></div>'),m.append(S)),M.length&&(M[0].style.opacity=Math.max(-_,0)),S.length&&(S[0].style.opacity=Math.max(_,0))}}if(r.css({"-webkit-transform-origin":"50% 50% -"+c/2+"px","-moz-transform-origin":"50% 50% -"+c/2+"px","-ms-transform-origin":"50% 50% -"+c/2+"px","transform-origin":"50% 50% -"+c/2+"px"}),h.shadow)if(u)e.transform("translate3d(0px, "+(s/2+h.shadowOffset)+"px, "+-s/2+"px) rotateX(90deg) rotateZ(0deg) scale("+h.shadowScale+")");else{var C=Math.abs(p)-90*Math.floor(Math.abs(p)/90),A=1.5-(Math.sin(2*C*Math.PI/360)/2+Math.cos(2*C*Math.PI/360)/2),P=h.shadowScale,L=h.shadowScale/A,R=h.shadowOffset;e.transform("scale3d("+P+", 1, "+L+") translate3d(0px, "+(o/2+R)+"px, "+-o/2/L+"px) rotateX(-90deg)")}var O=E.isSafari||E.isUiWebView?-c/2:0;r.transform("translate3d(0px,0,"+O+"px) rotateX("+(t.isHorizontal()?0:p)+"deg) rotateY("+(t.isHorizontal()?-p:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},Q={setTranslate:function(){for(var e=this.slides,t=this.rtlTranslate,i=0;i<e.length;i+=1){var r=e.eq(i),a=r[0].progress;this.params.flipEffect.limitRotation&&(a=Math.max(Math.min(r[0].progress,1),-1));var s=-180*a,o=0,l=-r[0].swiperSlideOffset,c=0;if(this.isHorizontal()?t&&(s=-s):(c=l,o=-s,s=l=0),r[0].style.zIndex=-Math.abs(Math.round(a))+e.length,this.params.flipEffect.slideShadows){var h=this.isHorizontal()?r.find(".swiper-slide-shadow-left"):r.find(".swiper-slide-shadow-top"),u=this.isHorizontal()?r.find(".swiper-slide-shadow-right"):r.find(".swiper-slide-shadow-bottom");0===h.length&&(h=n('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"left":"top")+'"></div>'),r.append(h)),0===u.length&&(u=n('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"right":"bottom")+'"></div>'),r.append(u)),h.length&&(h[0].style.opacity=Math.max(-a,0)),u.length&&(u[0].style.opacity=Math.max(a,0))}r.transform("translate3d("+l+"px, "+c+"px, 0px) rotateX("+o+"deg) rotateY("+s+"deg)")}},setTransition:function(e){var t=this,i=t.slides,n=t.activeIndex,r=t.$wrapperEl;if(i.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var a=!1;i.eq(n).transitionEnd(function(){if(!a&&t&&!t.destroyed){a=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],i=0;i<e.length;i+=1)r.trigger(e[i])}})}}},ee={setTranslate:function(){for(var e=this.width,t=this.height,i=this.slides,r=this.$wrapperEl,a=this.slidesSizesGrid,s=this.params.coverflowEffect,o=this.isHorizontal(),l=this.translate,c=o?e/2-l:t/2-l,u=o?s.rotate:-s.rotate,d=s.depth,p=0,f=i.length;p<f;p+=1){var m=i.eq(p),g=a[p],v=(c-m[0].swiperSlideOffset-g/2)/g*s.modifier,y=o?u*v:0,_=o?0:u*v,x=-d*Math.abs(v),b=o?0:s.stretch*v,w=o?s.stretch*v:0;Math.abs(w)<.001&&(w=0),Math.abs(b)<.001&&(b=0),Math.abs(x)<.001&&(x=0),Math.abs(y)<.001&&(y=0),Math.abs(_)<.001&&(_=0);var T="translate3d("+w+"px,"+b+"px,"+x+"px)  rotateX("+_+"deg) rotateY("+y+"deg)";if(m.transform(T),m[0].style.zIndex=1-Math.abs(Math.round(v)),s.slideShadows){var E=o?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),M=o?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===E.length&&(E=n('<div class="swiper-slide-shadow-'+(o?"left":"top")+'"></div>'),m.append(E)),0===M.length&&(M=n('<div class="swiper-slide-shadow-'+(o?"right":"bottom")+'"></div>'),m.append(M)),E.length&&(E[0].style.opacity=0<v?v:0),M.length&&(M[0].style.opacity=0<-v?-v:0)}}(h.pointerEvents||h.prefixedPointerEvents)&&(r[0].style.perspectiveOrigin=c+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},te={init:function(){var e=this,t=e.params.thumbs,i=e.constructor;t.swiper instanceof i?(e.thumbs.swiper=t.swiper,c.extend(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),c.extend(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):c.isObject(t.swiper)&&(e.thumbs.swiper=new i(c.extend({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick)},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var i=t.clickedIndex;if(null!=i){var r;if(r=t.params.loop?parseInt(n(t.clickedSlide).attr("data-swiper-slide-index"),10):i,e.params.loop){var a=e.activeIndex;e.slides.eq(a).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,a=e.activeIndex);var s=e.slides.eq(a).prevAll('[data-swiper-slide-index="'+r+'"]').eq(0).index(),o=e.slides.eq(a).nextAll('[data-swiper-slide-index="'+r+'"]').eq(0).index();r=void 0===s?o:void 0===o?s:o-a<a-s?o:s}e.slideTo(r)}}},update:function(e){var t=this,i=t.thumbs.swiper;if(i){var n="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():i.params.slidesPerView;if(t.realIndex!==i.realIndex){var r,a=i.activeIndex;if(i.params.loop){i.slides.eq(a).hasClass(i.params.slideDuplicateClass)&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,a=i.activeIndex);var s=i.slides.eq(a).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),o=i.slides.eq(a).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();r=void 0===s?o:void 0===o?s:o-a<a-s?o:s}else r=t.realIndex;i.visibleSlidesIndexes.indexOf(r)<0&&(i.params.centeredSlides?r=a<r?r-Math.floor(n/2)+1:r+Math.floor(n/2)-1:a<r&&(r=r-n+1),i.slideTo(r,e?0:void 0))}var l=1,c=t.params.thumbs.slideThumbActiveClass;if(1<t.params.slidesPerView&&!t.params.centeredSlides&&(l=t.params.slidesPerView),i.slides.removeClass(c),i.params.loop)for(var h=0;h<l;h+=1)i.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+h)+'"]').addClass(c);else for(var u=0;u<l;u+=1)i.slides.eq(t.realIndex+u).addClass(c)}}},ie=[P,L,R,O,D,N,B,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){c.extend(this,{mousewheel:{enabled:!1,enable:H.enable.bind(this),disable:H.disable.bind(this),handle:H.handle.bind(this),handleMouseEnter:H.handleMouseEnter.bind(this),handleMouseLeave:H.handleMouseLeave.bind(this),lastScrollTime:c.now()}})},on:{init:function(){this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){c.extend(this,{navigation:{init:F.init.bind(this),update:F.update.bind(this),destroy:F.destroy.bind(this)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t=this.navigation,i=t.$nextEl,r=t.$prevEl;!this.params.navigation.hideOnClick||n(e.target).is(r)||n(e.target).is(i)||(i&&i.toggleClass(this.params.navigation.hiddenClass),r&&r.toggleClass(this.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){c.extend(this,{pagination:{init:U.init.bind(this),render:U.render.bind(this),update:U.update.bind(this),destroy:U.destroy.bind(this),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){this.params.loop?this.pagination.update():void 0===this.snapIndex&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){this.params.pagination.el&&this.params.pagination.hideOnClick&&0<this.pagination.$el.length&&!n(e.target).hasClass(this.params.pagination.bulletClass)&&this.pagination.$el.toggleClass(this.params.pagination.hiddenClass)}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var e=this;c.extend(e,{scrollbar:{init:G.init.bind(e),destroy:G.destroy.bind(e),updateSize:G.updateSize.bind(e),setTranslate:G.setTranslate.bind(e),setTransition:G.setTransition.bind(e),enableDraggable:G.enableDraggable.bind(e),disableDraggable:G.disableDraggable.bind(e),setDragPosition:G.setDragPosition.bind(e),onDragStart:G.onDragStart.bind(e),onDragMove:G.onDragMove.bind(e),onDragEnd:G.onDragEnd.bind(e),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){c.extend(this,{parallax:{setTransform:V.setTransform.bind(this),setTranslate:V.setTranslate.bind(this),setTransition:V.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this,t={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function(i){t[i]=j[i].bind(e)}),c.extend(e,{zoom:t})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){c.extend(this,{lazy:{initialImageLoaded:!1,load:W.load.bind(this),loadInSlide:W.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){this.params.lazy.enabled&&(this.params.lazy.loadOnTransitionStart||!this.params.lazy.loadOnTransitionStart&&!this.lazy.initialImageLoaded)&&this.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){c.extend(this,{controller:{control:this.params.controller.control,getInterpolateFunction:X.getInterpolateFunction.bind(this),setTranslate:X.setTranslate.bind(this),setTransition:X.setTransition.bind(this)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var e=this;c.extend(e,{a11y:{liveRegion:n('<span class="'+e.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(Y).forEach(function(t){e.a11y[t]=Y[t].bind(e)})},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){c.extend(this,{history:{init:q.init.bind(this),setHistory:q.setHistory.bind(this),setHistoryPopState:q.setHistoryPopState.bind(this),scrollToSlide:q.scrollToSlide.bind(this),destroy:q.destroy.bind(this)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){c.extend(this,{hashNavigation:{initialized:!1,init:$.init.bind(this),destroy:$.destroy.bind(this),setHash:$.setHash.bind(this),onHashCange:$.onHashCange.bind(this)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var e=this;c.extend(e,{autoplay:{running:!1,paused:!1,run:Z.run.bind(e),start:Z.start.bind(e),stop:Z.stop.bind(e),pause:Z.pause.bind(e),onTransitionEnd:function(t){e&&!e.destroyed&&e.$wrapperEl&&t.target===this&&(e.$wrapperEl[0].removeEventListener("transitionend",e.autoplay.onTransitionEnd),e.$wrapperEl[0].removeEventListener("webkitTransitionEnd",e.autoplay.onTransitionEnd),e.autoplay.paused=!1,e.autoplay.running?e.autoplay.run():e.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&this.autoplay.start()},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},destroy:function(){this.autoplay.running&&this.autoplay.stop()}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){c.extend(this,{fadeEffect:{setTranslate:J.setTranslate.bind(this),setTransition:J.setTransition.bind(this)}})},on:{beforeInit:function(){if("fade"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};c.extend(this.params,e),c.extend(this.originalParams,e)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){c.extend(this,{cubeEffect:{setTranslate:K.setTranslate.bind(this),setTransition:K.setTransition.bind(this)}})},on:{beforeInit:function(){if("cube"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"cube"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};c.extend(this.params,e),c.extend(this.originalParams,e)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){c.extend(this,{flipEffect:{setTranslate:Q.setTranslate.bind(this),setTransition:Q.setTransition.bind(this)}})},on:{beforeInit:function(){if("flip"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"flip"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};c.extend(this.params,e),c.extend(this.originalParams,e)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){c.extend(this,{coverflowEffect:{setTranslate:ee.setTranslate.bind(this),setTransition:ee.setTransition.bind(this)}})},on:{beforeInit:function(){"coverflow"===this.params.effect&&(this.classNames.push(this.params.containerModifierClass+"coverflow"),this.classNames.push(this.params.containerModifierClass+"3d"),this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){c.extend(this,{thumbs:{swiper:null,init:te.init.bind(this),update:te.update.bind(this),onThumbClick:te.onThumbClick.bind(this)}})},on:{beforeInit:function(){var e=this.params.thumbs;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===A.use&&(A.use=A.Class.use,A.installModule=A.Class.installModule),A.use(ie),A}),((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var e,t,i,n,r,a,s,o,l,c,h,u,d,p,f,m,g,v;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var n=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},r=function(e,t,i){var n,r,a=e.cycle;for(n in a)r=a[n],e[n]="function"==typeof r?r(i,t[i],t):r[i%r.length];delete e.cycle},a=function(e){if("function"==typeof e)return e;var t="object"==typeof e?e:{each:e},i=t.ease,n=t.from||0,r=t.base||0,a={},s=isNaN(n),o=t.axis,l={center:.5,end:1}[n]||0;return function(e,c,h){var u,d,p,f,m,g,v,y,_,x=(h||t).length,b=a[x];if(!b){if(!(_="auto"===t.grid?0:(t.grid||[1/0])[0])){for(v=-1/0;v<(v=h[_++].getBoundingClientRect().left)&&_<x;);_--}for(b=a[x]=[],u=s?Math.min(_,x)*l-.5:n%_,d=s?x*l/_-.5:n/_|0,y=1/(v=0),g=0;g<x;g++)p=g%_-u,f=d-(g/_|0),b[g]=m=o?Math.abs("y"===o?f:p):Math.sqrt(p*p+f*f),v<m&&(v=m),m<y&&(y=m);b.max=v-y,b.min=y,b.v=x=t.amount||t.each*(x<_?x:o?"y"===o?x/_:_:Math.max(_,x/_))||0,b.b=x<0?r-x:r}return x=(b[e]-b.min)/b.max,b.b+(i?i.getRatio(x):x)*b.v}},s=function(e,t,n){i.call(this,e,t,n),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=s.prototype.render},o=1e-8,l=i._internals,c=l.isSelector,h=l.isArray,u=s.prototype=i.to({},.1,{}),d=[];s.version="2.1.2",u.constructor=s,u.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=i.killTweensOf,s.getTweensOf=i.getTweensOf,s.lagSmoothing=i.lagSmoothing,s.ticker=i.ticker,s.render=i.render,s.distribute=a,u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),i.prototype.invalidate.call(this)},u.updateTo=function(e,t){var n,r=this,a=r.ratio,s=r.vars.immediateRender||e.immediateRender;for(n in t&&r._startTime<r._timeline._time&&(r._startTime=r._timeline._time,r._uncache(!1),r._gc?r._enabled(!0,!1):r._timeline.insert(r,r._startTime-r._delay)),e)r.vars[n]=e[n];if(r._initted||s)if(t)r._initted=!1,s&&r.render(0,!0,!0);else if(r._gc&&r._enabled(!0,!1),r._notifyPluginsOfEnabled&&r._firstPT&&i._onPluginEvent("_onDisable",r),.998<r._time/r._duration){var o=r._totalTime;r.render(0,!0,!1),r._initted=!1,r.render(o,!0,!1)}else if(r._initted=!1,r._init(),0<r._time||s)for(var l,c=1/(1-a),h=r._firstPT;h;)l=h.s+h.c,h.c*=c,h.s=l-h.c,h=h._next;return r},u.render=function(e,t,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,a,s,c,h,u,d,p,f,m=this,g=m._dirty?m.totalDuration():m._totalDuration,v=m._time,y=m._totalTime,_=m._cycle,x=m._duration,b=m._rawPrevTime;if(g-o<=e&&0<=e?(m._totalTime=g,m._cycle=m._repeat,m._yoyo&&0!=(1&m._cycle)?(m._time=0,m.ratio=m._ease._calcEnd?m._ease.getRatio(0):0):(m._time=x,m.ratio=m._ease._calcEnd?m._ease.getRatio(1):1),m._reversed||(r=!0,a="onComplete",n=n||m._timeline.autoRemoveChildren),0===x&&(m._initted||!m.vars.lazy||n)&&(m._startTime===m._timeline._duration&&(e=0),(b<0||e<=0&&-o<=e||b===o&&"isPause"!==m.data)&&b!==e&&(n=!0,o<b&&(a="onReverseComplete")),m._rawPrevTime=p=!t||e||b===e?e:o)):e<o?(m._totalTime=m._time=m._cycle=0,m.ratio=m._ease._calcEnd?m._ease.getRatio(0):0,(0!==y||0===x&&0<b)&&(a="onReverseComplete",r=m._reversed),-o<e?e=0:e<0&&(m._active=!1,0===x&&(m._initted||!m.vars.lazy||n)&&(0<=b&&(n=!0),m._rawPrevTime=p=!t||e||b===e?e:o)),m._initted||(n=!0)):(m._totalTime=m._time=e,0!==m._repeat&&(c=x+m._repeatDelay,m._cycle=m._totalTime/c>>0,0!==m._cycle&&m._cycle===m._totalTime/c&&y<=e&&m._cycle--,m._time=m._totalTime-m._cycle*c,m._yoyo&&0!=(1&m._cycle)&&(m._time=x-m._time,(f=m._yoyoEase||m.vars.yoyoEase)&&(m._yoyoEase||(!0!==f||m._initted?m._yoyoEase=f=!0===f?m._ease:f instanceof Ease?f:Ease.map[f]:(f=m.vars.ease,m._yoyoEase=f=f?f instanceof Ease?f:"function"==typeof f?new Ease(f,m.vars.easeParams):Ease.map[f]||i.defaultEase:i.defaultEase)),m.ratio=f?1-f.getRatio((x-m._time)/x):0)),m._time>x?m._time=x:m._time<0&&(m._time=0)),m._easeType&&!f?(h=m._time/x,(1===(u=m._easeType)||3===u&&.5<=h)&&(h=1-h),3===u&&(h*=2),1===(d=m._easePower)?h*=h:2===d?h*=h*h:3===d?h*=h*h*h:4===d&&(h*=h*h*h*h),m.ratio=1===u?1-h:2===u?h:m._time/x<.5?h/2:1-h/2):f||(m.ratio=m._ease.getRatio(m._time/x))),v!==m._time||n||_!==m._cycle){if(!m._initted){if(m._init(),!m._initted||m._gc)return;if(!n&&m._firstPT&&(!1!==m.vars.lazy&&m._duration||m.vars.lazy&&!m._duration))return m._time=v,m._totalTime=y,m._rawPrevTime=b,m._cycle=_,l.lazyTweens.push(m),void(m._lazy=[e,t]);!m._time||r||f?r&&this._ease._calcEnd&&!f&&(m.ratio=m._ease.getRatio(0===m._time?0:1)):m.ratio=m._ease.getRatio(m._time/x)}for(!1!==m._lazy&&(m._lazy=!1),m._active||!m._paused&&m._time!==v&&0<=e&&(m._active=!0),0===y&&(2===m._initted&&0<e&&m._init(),m._startAt&&(0<=e?m._startAt.render(e,!0,n):a||(a="_dummyGS")),m.vars.onStart&&(0!==m._totalTime||0===x)&&(t||m._callback("onStart"))),s=m._firstPT;s;)s.f?s.t[s.p](s.c*m.ratio+s.s):s.t[s.p]=s.c*m.ratio+s.s,s=s._next;m._onUpdate&&(e<0&&m._startAt&&m._startTime&&m._startAt.render(e,!0,n),t||(m._totalTime!==y||a)&&m._callback("onUpdate")),m._cycle!==_&&(t||m._gc||m.vars.onRepeat&&m._callback("onRepeat")),a&&(!m._gc||n)&&(e<0&&m._startAt&&!m._onUpdate&&m._startTime&&m._startAt.render(e,!0,n),r&&(m._timeline.autoRemoveChildren&&m._enabled(!1,!1),m._active=!1),!t&&m.vars[a]&&m._callback(a),0===x&&m._rawPrevTime===o&&p!==o&&(m._rawPrevTime=0))}else y!==m._totalTime&&m._onUpdate&&(t||m._callback("onUpdate"))},s.to=function(e,t,i){return new s(e,t,i)},s.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new s(e,t,i)},s.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new s(e,t,n)},s.staggerTo=s.allTo=function(e,t,o,l,u,p,f){var m,g,v,y,_=[],x=a(o.stagger||l),b=o.cycle,w=(o.startAt||d).cycle;for(h(e)||("string"==typeof e&&(e=i.selector(e)||e),c(e)&&(e=n(e))),m=(e=e||[]).length-1,v=0;v<=m;v++){for(y in g={},o)g[y]=o[y];if(b&&(r(g,e,v),null!=g.duration&&(t=g.duration,delete g.duration)),w){for(y in w=g.startAt={},o.startAt)w[y]=o.startAt[y];r(g.startAt,e,v)}g.delay=x(v,e[v],e)+(g.delay||0),v===m&&u&&(g.onComplete=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),u.apply(f||o.callbackScope||this,p||d)}),_[v]=new s(e[v],t,g)}return _},s.staggerFrom=s.allFrom=function(e,t,i,n,r,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,s.staggerTo(e,t,i,n,r,a,o)},s.staggerFromTo=s.allFromTo=function(e,t,i,n,r,a,o,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,s.staggerTo(e,t,n,r,a,o,l)},s.delayedCall=function(e,t,i,n,r){return new s(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},s.set=function(e,t){return new s(e,0,t)},s.isTweening=function(e){return 0<i.getTweensOf(e,!0).length};var p=function(e,t){for(var n=[],r=0,a=e._first;a;)a instanceof i?n[r++]=a:(t&&(n[r++]=a),r=(n=n.concat(p(a,t))).length),a=a._next;return n},f=s.getAllTweens=function(t){return p(e._rootTimeline,t).concat(p(e._rootFramesTimeline,t))};s.killAll=function(e,i,n,r){null==i&&(i=!0),null==n&&(n=!0);var a,s,o,l=f(0!=r),c=l.length,h=i&&n&&r;for(o=0;o<c;o++)s=l[o],(h||s instanceof t||(a=s.target===s.vars.onComplete)&&n||i&&!a)&&(e?s.totalTime(s._reversed?0:s.totalDuration()):s._enabled(!1,!1))},s.killChildTweensOf=function(e,t){if(null!=e){var r,a,o,u,d,p=l.tweenLookup;if("string"==typeof e&&(e=i.selector(e)||e),c(e)&&(e=n(e)),h(e))for(u=e.length;-1<--u;)s.killChildTweensOf(e[u],t);else{for(o in r=[],p)for(a=p[o].target.parentNode;a;)a===e&&(r=r.concat(p[o].tweens)),a=a.parentNode;for(d=r.length,u=0;u<d;u++)t&&r[u].totalTime(r[u].totalDuration()),r[u]._enabled(!1,!1)}}};var m=function(e,i,n,r){i=!1!==i,n=!1!==n;for(var a,s,o=f(r=!1!==r),l=i&&n&&r,c=o.length;-1<--c;)s=o[c],(l||s instanceof t||(a=s.target===s.vars.onComplete)&&n||i&&!a)&&s.paused(e)};return s.pauseAll=function(e,t,i){m(!0,e,t,i)},s.resumeAll=function(e,t,i){m(!1,e,t,i)},s.globalTimeScale=function(t){var n=e._rootTimeline,r=i.ticker.time;return arguments.length?(t=t||o,n._startTime=r-(r-n._startTime)*n._timeScale/t,n=e._rootFramesTimeline,r=i.ticker.frame,n._startTime=r-(r-n._startTime)*n._timeScale/t,n._timeScale=e._rootTimeline._timeScale=t,t):n._timeScale},u.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},u.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},u.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,r=n*(i+this._repeatDelay);return i<e&&(e=i),this.totalTime(this._yoyo&&1&n?i-e+r:this._repeat?e+r:e,t)},u.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},u.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},u.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},u.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},u.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},s},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var n=function(e){t.call(this,e);var i,n,r=this.vars;for(n in this._labels={},this.autoRemoveChildren=!!r.autoRemoveChildren,this.smoothChildTiming=!!r.smoothChildTiming,this._sortChildren=!0,this._onUpdate=r.onUpdate,r)i=r[n],o(i)&&-1!==i.join("").indexOf("{self}")&&(r[n]=this._swapSelfInParams(i));o(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=i._internals,a=n._internals={},s=r.isSelector,o=r.isArray,l=r.lazyTweens,c=r.lazyRender,h=_gsScope._gsDefine.globals,u=function(e){var t,i={};for(t in e)i[t]=e[t];return i},d=function(e,t,i){var n,r,a=e.cycle;for(n in a)r=a[n],e[n]="function"==typeof r?r(i,t[i],t):r[i%r.length];delete e.cycle},p=a.pauseCallback=function(){},f=function(e,t,i,n){var r="immediateRender";return r in t||(t[r]=!(i&&!1===i[r]||n)),t},m=function(e){if("function"==typeof e)return e;var t="object"==typeof e?e:{each:e},i=t.ease,n=t.from||0,r=t.base||0,a={},s=isNaN(n),o=t.axis,l={center:.5,end:1}[n]||0;return function(e,c,h){var u,d,p,f,m,g,v,y,_,x=(h||t).length,b=a[x];if(!b){if(!(_="auto"===t.grid?0:(t.grid||[1/0])[0])){for(v=-1/0;v<(v=h[_++].getBoundingClientRect().left)&&_<x;);_--}for(b=a[x]=[],u=s?Math.min(_,x)*l-.5:n%_,d=s?x*l/_-.5:n/_|0,y=1/(v=0),g=0;g<x;g++)p=g%_-u,f=d-(g/_|0),b[g]=m=o?Math.abs("y"===o?f:p):Math.sqrt(p*p+f*f),v<m&&(v=m),m<y&&(y=m);b.max=v-y,b.min=y,b.v=x=t.amount||t.each*(x<_?x:o?"y"===o?x/_:_:Math.max(_,x/_))||0,b.b=x<0?r-x:r}return x=(b[e]-b.min)/b.max,b.b+(i?i.getRatio(x):x)*b.v}},g=n.prototype=new t;return n.version="2.1.2",n.distribute=m,g.constructor=n,g.kill()._gc=g._forcingPlayhead=g._hasPause=!1,g.to=function(e,t,n,r){var a=n.repeat&&h.TweenMax||i;return t?this.add(new a(e,t,n),r):this.set(e,n,r)},g.from=function(e,t,n,r){return this.add((n.repeat&&h.TweenMax||i).from(e,t,f(0,n)),r)},g.fromTo=function(e,t,n,r,a){var s=r.repeat&&h.TweenMax||i;return r=f(0,r,n),t?this.add(s.fromTo(e,t,n,r),a):this.set(e,r,a)},g.staggerTo=function(e,t,r,a,o,l,c,h){var p,f,g=new n({onComplete:l,onCompleteParams:c,callbackScope:h,smoothChildTiming:this.smoothChildTiming}),v=m(r.stagger||a),y=r.startAt,_=r.cycle;for("string"==typeof e&&(e=i.selector(e)||e),s(e=e||[])&&(e=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i}(e)),f=0;f<e.length;f++)p=u(r),y&&(p.startAt=u(y),y.cycle&&d(p.startAt,e,f)),_&&(d(p,e,f),null!=p.duration&&(t=p.duration,delete p.duration)),g.to(e[f],t,p,v(f,e[f],e));return this.add(g,o)},g.staggerFrom=function(e,t,i,n,r,a,s,o){return i.runBackwards=!0,this.staggerTo(e,t,f(0,i),n,r,a,s,o)},g.staggerFromTo=function(e,t,i,n,r,a,s,o,l){return n.startAt=i,this.staggerTo(e,t,f(0,n,i),r,a,s,o,l)},g.call=function(e,t,n,r){return this.add(i.delayedCall(0,e,t,n),r)},g.set=function(e,t,n){return this.add(new i(e,0,f(0,t,null,!0)),n)},n.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var r,a,s,o,l=new n(e),c=l._timeline;for(null==t&&(t=!0),c._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=c._time,s=c._first;s;)o=s._next,t&&s instanceof i&&s.target===s.vars.onComplete||((a=s._startTime-s._delay)<0&&(r=1),l.add(s,a)),s=o;return c.add(l,0),r&&l.totalDuration(),l},g.add=function(r,a,s,l){var c,h,u,d,p,f,m=this;if("number"!=typeof a&&(a=m._parseTimeOrLabel(a,0,!0,r)),!(r instanceof e)){if(r instanceof Array||r&&r.push&&o(r)){for(s=s||"normal",l=l||0,c=a,h=r.length,u=0;u<h;u++)o(d=r[u])&&(d=new n({tweens:d})),m.add(d,c),"string"!=typeof d&&"function"!=typeof d&&("sequence"===s?c=d._startTime+d.totalDuration()/d._timeScale:"start"===s&&(d._startTime-=d.delay())),c+=l;return m._uncache(!0)}if("string"==typeof r)return m.addLabel(r,a);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(t.prototype.add.call(m,r,a),(r._time||!r._duration&&r._initted)&&(c=(m.rawTime()-r._startTime)*r._timeScale,(!r._duration||1e-5<Math.abs(Math.max(0,Math.min(r.totalDuration(),c)))-r._totalTime)&&r.render(c,!1,!1)),(m._gc||m._time===m._duration)&&!m._paused&&m._duration<m.duration())for(f=(p=m).rawTime()>r._startTime;p._timeline;)f&&p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._gc&&p._enabled(!0,!1),p=p._timeline;return m},g.remove=function(t){if(t instanceof e){this._remove(t,!1);var i=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:i._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&o(t)){for(var n=t.length;-1<--n;)this.remove(t[n]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},g._remove=function(e,i){return t.prototype._remove.call(this,e,i),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},g.insert=g.insertMultiple=function(e,t,i,n){return this.add(e,t||0,i,n)},g.appendMultiple=function(e,t,i,n){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,n)},g.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},g.addPause=function(e,t,n,r){var a=i.delayedCall(0,p,n,r||this);return a.vars.onComplete=a.vars.onReverseComplete=t,a.data="isPause",this._hasPause=!0,this.add(a,e)},g.removeLabel=function(e){return delete this._labels[e],this},g.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},g._parseTimeOrLabel=function(t,i,n,r){var a,s;if(r instanceof e&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&o(r)))for(s=r.length;-1<--s;)r[s]instanceof e&&r[s].timeline===this&&this.remove(r[s]);if(a="number"!=typeof t||i?99999999999<this.duration()?this.recent().endTime(!1):this._duration:0,"string"==typeof i)return this._parseTimeOrLabel(i,n&&"number"==typeof t&&null==this._labels[i]?t-a:0,n);if(i=i||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=a);else{if(-1===(s=t.indexOf("=")))return null==this._labels[t]?n?this._labels[t]=a+i:i:this._labels[t]+i;i=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=1<s?this._parseTimeOrLabel(t.substr(0,s-1),0,n):a}return Number(t)+i},g.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(e,t){return this.play(e,t)},g.gotoAndStop=function(e,t){return this.pause(e,t)},g.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,r,a,s,o,h,u,d,p=this,f=p._time,m=p._dirty?p.totalDuration():p._totalDuration,g=p._startTime,v=p._timeScale,y=p._paused;if(f!==p._time&&(e+=p._time-f),m-1e-8<=e&&0<=e)p._totalTime=p._time=m,p._reversed||p._hasPausedChild()||(r=!0,s="onComplete",o=!!p._timeline.autoRemoveChildren,0===p._duration&&(e<=0&&-1e-8<=e||p._rawPrevTime<0||1e-8===p._rawPrevTime)&&p._rawPrevTime!==e&&p._first&&(o=!0,1e-8<p._rawPrevTime&&(s="onReverseComplete"))),p._rawPrevTime=p._duration||!t||e||p._rawPrevTime===e?e:1e-8,e=m+1e-4;else if(e<1e-8)if(p._totalTime=p._time=0,-1e-8<e&&(e=0),(0!==f||0===p._duration&&1e-8!==p._rawPrevTime&&(0<p._rawPrevTime||e<0&&0<=p._rawPrevTime))&&(s="onReverseComplete",r=p._reversed),e<0)p._active=!1,p._timeline.autoRemoveChildren&&p._reversed?(o=r=!0,s="onReverseComplete"):0<=p._rawPrevTime&&p._first&&(o=!0),p._rawPrevTime=e;else{if(p._rawPrevTime=p._duration||!t||e||p._rawPrevTime===e?e:1e-8,0===e&&r)for(n=p._first;n&&0===n._startTime;)n._duration||(r=!1),n=n._next;e=0,p._initted||(o=!0)}else{if(p._hasPause&&!p._forcingPlayhead&&!t){if(f<=e)for(n=p._first;n&&n._startTime<=e&&!h;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===p._rawPrevTime||(h=n),n=n._next;else for(n=p._last;n&&n._startTime>=e&&!h;)n._duration||"isPause"===n.data&&0<n._rawPrevTime&&(h=n),n=n._prev;h&&(p._time=p._totalTime=e=h._startTime,d=p._startTime+e/p._timeScale)}p._totalTime=p._time=p._rawPrevTime=e}if(p._time!==f&&p._first||i||o||h){if(p._initted||(p._initted=!0),p._active||!p._paused&&p._time!==f&&0<e&&(p._active=!0),0===f&&p.vars.onStart&&(0===p._time&&p._duration||t||p._callback("onStart")),f<=(u=p._time))for(n=p._first;n&&(a=n._next,u===p._time&&(!p._paused||y));)(n._active||n._startTime<=u&&!n._paused&&!n._gc)&&(h===n&&(p.pause(),p._pauseTime=d),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=a;else for(n=p._last;n&&(a=n._prev,u===p._time&&(!p._paused||y));){if(n._active||n._startTime<=f&&!n._paused&&!n._gc){if(h===n){for(h=n._prev;h&&h.endTime()>p._time;)h.render(h._reversed?h.totalDuration()-(e-h._startTime)*h._timeScale:(e-h._startTime)*h._timeScale,t,i),h=h._prev;h=null,p.pause(),p._pauseTime=d}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)}n=a}p._onUpdate&&(t||(l.length&&c(),p._callback("onUpdate"))),s&&(p._gc||(g===p._startTime||v!==p._timeScale)&&(0===p._time||m>=p.totalDuration())&&(r&&(l.length&&c(),p._timeline.autoRemoveChildren&&p._enabled(!1,!1),p._active=!1),!t&&p.vars[s]&&p._callback(s)))}},g._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof n&&e._hasPausedChild())return!0;e=e._next}return!1},g.getChildren=function(e,t,n,r){r=r||-9999999999;for(var a=[],s=this._first,o=0;s;)s._startTime<r||(s instanceof i?!1!==t&&(a[o++]=s):(!1!==n&&(a[o++]=s),!1!==e&&(o=(a=a.concat(s.getChildren(!0,t,n))).length))),s=s._next;return a},g.getTweensOf=function(e,t){var n,r,a=this._gc,s=[],o=0;for(a&&this._enabled(!0,!0),r=(n=i.getTweensOf(e)).length;-1<--r;)(n[r].timeline===this||t&&this._contains(n[r]))&&(s[o++]=n[r]);return a&&this._enabled(!1,!0),s},g.recent=function(){return this._recent},g._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},g.shiftChildren=function(e,t,i){i=i||0;for(var n,r=this._first,a=this._labels;r;)r._startTime>=i&&(r._startTime+=e),r=r._next;if(t)for(n in a)a[n]>=i&&(a[n]+=e);return this._uncache(!0)},g._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),n=i.length,r=!1;-1<--n;)i[n]._kill(e,t)&&(r=!0);return r},g.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;-1<--i;)t[i]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},g._enabled=function(e,i){if(e===this._gc)for(var n=this._first;n;)n._enabled(e,!0),n=n._next;return t.prototype._enabled.call(this,e,i)},g.totalTime=function(t,i,n){this._forcingPlayhead=!0;var r=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},g.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(e){if(arguments.length)return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this;if(this._dirty){for(var t,i,n=0,r=this,a=r._last,s=999999999999;a;)t=a._prev,a._dirty&&a.totalDuration(),a._startTime>s&&r._sortChildren&&!a._paused&&!r._calculatingDuration?(r._calculatingDuration=1,r.add(a,a._startTime-a._delay),r._calculatingDuration=0):s=a._startTime,a._startTime<0&&!a._paused&&(n-=a._startTime,r._timeline.smoothChildTiming&&(r._startTime+=a._startTime/r._timeScale,r._time-=a._startTime,r._totalTime-=a._startTime,r._rawPrevTime-=a._startTime),r.shiftChildren(-a._startTime,!1,-9999999999),s=0),n<(i=a._startTime+a._totalDuration/a._timeScale)&&(n=i),a=t;r._duration=r._totalDuration=n,r._dirty=!1}return this._totalDuration},g.paused=function(t){if(!1===t&&this._paused)for(var i=this._first;i;)i._startTime===this._time&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return e.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},g.rawTime=function(e){return e&&(this._paused||this._repeat&&0<this.time()&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},n},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,i){var n=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0},r=1e-8,a=t._internals,s=a.lazyTweens,o=a.lazyRender,l=_gsScope._gsDefine.globals,c=new i(null,null,1,0),h=n.prototype=new e;return h.constructor=n,h.kill()._gc=!1,n.version="2.1.2",h.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},h.addCallback=function(e,i,n,r){return this.add(t.delayedCall(0,e,n,r),i)},h.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var i=this.getTweensOf(e,!1),n=i.length,r=this._parseTimeOrLabel(t);-1<--n;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},h.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},h.tweenTo=function(e,i){i=i||{};var n,r,a,s={ease:c,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},o=i.repeat&&l.TweenMax||t;for(r in i)s[r]=i[r];return s.time=this._parseTimeOrLabel(e),n=Math.abs(Number(s.time)-this._time)/this._timeScale||.001,a=new o(this,n,s),s.onStart=function(){a.target.paused(!0),a.vars.time===a.target.time()||n!==a.duration()||a.isFromTo||a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale).render(a.time(),!0,!0),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||a,i.onStartParams||[])},a},h.tweenFromTo=function(e,t,i){i=i||{},e=this._parseTimeOrLabel(e),i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(t,i);return n.isFromTo=1,n.duration(Math.abs(n.vars.time-e)/this._timeScale||.001)},h.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,a,l,c,h,u,d,p,f,m=this,g=m._time,v=m._dirty?m.totalDuration():m._totalDuration,y=m._duration,_=m._totalTime,x=m._startTime,b=m._timeScale,w=m._rawPrevTime,T=m._paused,E=m._cycle;if(g!==m._time&&(e+=m._time-g),v-r<=e&&0<=e)m._locked||(m._totalTime=v,m._cycle=m._repeat),m._reversed||m._hasPausedChild()||(a=!0,c="onComplete",h=!!m._timeline.autoRemoveChildren,0===m._duration&&(e<=0&&-r<=e||w<0||w===r)&&w!==e&&m._first&&(h=!0,r<w&&(c="onReverseComplete"))),m._rawPrevTime=m._duration||!t||e||m._rawPrevTime===e?e:r,m._yoyo&&1&m._cycle?m._time=e=0:e=(m._time=y)+1e-4;else if(e<r)if(m._locked||(m._totalTime=m._cycle=0),m._time=0,-r<e&&(e=0),(0!==g||0===y&&w!==r&&(0<w||e<0&&0<=w)&&!m._locked)&&(c="onReverseComplete",a=m._reversed),e<0)m._active=!1,m._timeline.autoRemoveChildren&&m._reversed?(h=a=!0,c="onReverseComplete"):0<=w&&m._first&&(h=!0),m._rawPrevTime=e;else{if(m._rawPrevTime=y||!t||e||m._rawPrevTime===e?e:r,0===e&&a)for(n=m._first;n&&0===n._startTime;)n._duration||(a=!1),n=n._next;e=0,m._initted||(h=!0)}else if(0===y&&w<0&&(h=!0),m._time=m._rawPrevTime=e,m._locked||(m._totalTime=e,0!==m._repeat&&(u=y+m._repeatDelay,m._cycle=m._totalTime/u>>0,m._cycle&&m._cycle===m._totalTime/u&&_<=e&&m._cycle--,m._time=m._totalTime-m._cycle*u,m._yoyo&&1&m._cycle&&(m._time=y-m._time),m._time>y?e=(m._time=y)+1e-4:m._time<0?m._time=e=0:e=m._time)),m._hasPause&&!m._forcingPlayhead&&!t){if(g<=(e=m._time)||m._repeat&&E!==m._cycle)for(n=m._first;n&&n._startTime<=e&&!d;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===m._rawPrevTime||(d=n),n=n._next;else for(n=m._last;n&&n._startTime>=e&&!d;)n._duration||"isPause"===n.data&&0<n._rawPrevTime&&(d=n),n=n._prev;d&&(f=m._startTime+d._startTime/m._timeScale,d._startTime<y&&(m._time=m._rawPrevTime=e=d._startTime,m._totalTime=e+m._cycle*(m._totalDuration+m._repeatDelay)))}if(m._cycle!==E&&!m._locked){var M=m._yoyo&&0!=(1&E),S=M===(m._yoyo&&0!=(1&m._cycle)),C=m._totalTime,A=m._cycle,P=m._rawPrevTime,L=m._time;if(m._totalTime=E*y,m._cycle<E?M=!M:m._totalTime+=y,m._time=g,m._rawPrevTime=0===y?w-1e-4:w,m._cycle=E,m._locked=!0,g=M?0:y,m.render(g,t,0===y),t||m._gc||m.vars.onRepeat&&(m._cycle=A,m._locked=!1,m._callback("onRepeat")),g!==m._time)return;if(S&&(m._cycle=E,m._locked=!0,g=M?y+1e-4:-1e-4,m.render(g,!0,!1)),m._locked=!1,m._paused&&!T)return;m._time=L,m._totalTime=C,m._cycle=A,m._rawPrevTime=P}if(m._time!==g&&m._first||i||h||d){if(m._initted||(m._initted=!0),m._active||!m._paused&&m._totalTime!==_&&0<e&&(m._active=!0),0===_&&m.vars.onStart&&(0===m._totalTime&&m._totalDuration||t||m._callback("onStart")),g<=(p=m._time))for(n=m._first;n&&(l=n._next,p===m._time&&(!m._paused||T));)(n._active||n._startTime<=m._time&&!n._paused&&!n._gc)&&(d===n&&(m.pause(),m._pauseTime=f),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=l;else for(n=m._last;n&&(l=n._prev,p===m._time&&(!m._paused||T));){if(n._active||n._startTime<=g&&!n._paused&&!n._gc){if(d===n){for(d=n._prev;d&&d.endTime()>m._time;)d.render(d._reversed?d.totalDuration()-(e-d._startTime)*d._timeScale:(e-d._startTime)*d._timeScale,t,i),d=d._prev;d=null,m.pause(),m._pauseTime=f}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)}n=l}m._onUpdate&&(t||(s.length&&o(),m._callback("onUpdate"))),c&&(m._locked||m._gc||(x===m._startTime||b!==m._timeScale)&&(0===m._time||v>=m.totalDuration())&&(a&&(s.length&&o(),m._timeline.autoRemoveChildren&&m._enabled(!1,!1),m._active=!1),!t&&m.vars[c]&&m._callback(c)))}else _!==m._totalTime&&m._onUpdate&&(t||m._callback("onUpdate"))},h.getActive=function(e,t,i){var n,r,a=[],s=this.getChildren(e||null==e,t||null==e,!!i),o=0,l=s.length;for(n=0;n<l;n++)(r=s[n]).isActive()&&(a[o++]=r);return a},h.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,i=this.getLabelsArray(),n=i.length;for(t=0;t<n;t++)if(i[t].time>e)return i[t].name;return null},h.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length;-1<--i;)if(t[i].time<e)return t[i].name;return null},h.getLabelsArray=function(){var e,t=[],i=0;for(e in this._labels)t[i++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},h.invalidate=function(){return this._locked=!1,e.prototype.invalidate.call(this)},h.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0},h.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0},h.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,r=n*(i+this._repeatDelay);return i<e&&(e=i),this.totalTime(this._yoyo&&1&n?i-e+r:this._repeat?e+r:e,t)},h.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},h.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},h.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},h.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+r)},n},!0),r=180/Math.PI,a=[],s=[],o=[],l={},c=_gsScope._gsDefine.globals,h=function(e,t,i,n){i===n&&(i=n-(n-t)/1e6),e===t&&(t=e+(i-e)/1e6),this.a=e,this.b=t,this.c=i,this.d=n,this.da=n-e,this.ca=i-e,this.ba=t-e},u=function(e,t,i,n){var r={a:e},a={},s={},o={c:n},l=(e+t)/2,c=(t+i)/2,h=(i+n)/2,u=(l+c)/2,d=(c+h)/2,p=(d-u)/8;return r.b=l+(e-l)/4,a.b=u+p,r.c=a.a=(r.b+a.b)/2,a.c=s.a=(u+d)/2,s.b=d-p,o.b=h+(n-h)/4,s.c=o.a=(s.b+o.b)/2,[r,a,s,o]},d=function(e,t,i,n,r){var l,c,h,d,p,f,m,g,v,y,_,x,b,w=e.length-1,T=0,E=e[0].a;for(l=0;l<w;l++)c=(p=e[T]).a,h=p.d,d=e[T+1].d,g=r?(_=a[l],b=((x=s[l])+_)*t*.25/(n?.5:o[l]||.5),h-((f=h-(h-c)*(n?.5*t:0!==_?b/_:0))+(((m=h+(d-h)*(n?.5*t:0!==x?b/x:0))-f)*(3*_/(_+x)+.5)/4||0))):h-((f=h-(h-c)*t*.5)+(m=h+(d-h)*t*.5))/2,f+=g,m+=g,p.c=v=f,p.b=0!==l?E:E=p.a+.6*(p.c-p.a),p.da=h-c,p.ca=v-c,p.ba=E-c,i?(y=u(c,E,v,h),e.splice(T,1,y[0],y[1],y[2],y[3]),T+=4):T++,E=m;(p=e[T]).b=E,p.c=E+.4*(p.d-E),p.da=p.d-p.a,p.ca=p.c-p.a,p.ba=E-p.a,i&&(y=u(p.a,E,p.c,p.d),e.splice(T,1,y[0],y[1],y[2],y[3]))},p=function(e,t,i,n){var r,o,l,c,u,d,p=[];if(n)for(o=(e=[n].concat(e)).length;-1<--o;)"string"==typeof(d=e[o][t])&&"="===d.charAt(1)&&(e[o][t]=n[t]+Number(d.charAt(0)+d.substr(2)));if((r=e.length-2)<0)return p[0]=new h(e[0][t],0,0,e[0][t]),p;for(o=0;o<r;o++)l=e[o][t],c=e[o+1][t],p[o]=new h(l,0,0,c),i&&(u=e[o+2][t],a[o]=(a[o]||0)+(c-l)*(c-l),s[o]=(s[o]||0)+(u-c)*(u-c));return p[o]=new h(e[o][t],0,0,e[o+1][t]),p},f=function(e,t,i,n,r,c){var h,u,f,m,g,v,y,_,x={},b=[],w=c||e[0];for(u in r="string"==typeof r?","+r+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==t&&(t=1),e[0])b.push(u);if(1<e.length){for(_=e[e.length-1],y=!0,h=b.length;-1<--h;)if(u=b[h],.05<Math.abs(w[u]-_[u])){y=!1;break}y&&(e=e.concat(),c&&e.unshift(c),e.push(e[1]),c=e[e.length-3])}for(a.length=s.length=o.length=0,h=b.length;-1<--h;)u=b[h],l[u]=-1!==r.indexOf(","+u+","),x[u]=p(e,u,l[u],c);for(h=a.length;-1<--h;)a[h]=Math.sqrt(a[h]),s[h]=Math.sqrt(s[h]);if(!n){for(h=b.length;-1<--h;)if(l[u])for(v=(f=x[b[h]]).length-1,m=0;m<v;m++)g=f[m+1].da/s[m]+f[m].da/a[m]||0,o[m]=(o[m]||0)+g*g;for(h=o.length;-1<--h;)o[h]=Math.sqrt(o[h])}for(h=b.length,m=i?4:1;-1<--h;)f=x[u=b[h]],d(f,t,i,n,l[u]),y&&(f.splice(0,m),f.splice(f.length-m,m));return x},m=function(e,t,i){for(var n,r,a,s,o,l,c,h,u,d,p,f=1/i,m=e.length;-1<--m;)for(a=(d=e[m]).a,s=d.d-a,o=d.c-a,l=d.b-a,n=r=0,h=1;h<=i;h++)n=r-(r=((c=f*h)*c*s+3*(u=1-c)*(c*o+u*l))*c),t[p=m*i+h-1]=(t[p]||0)+n*n},g=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(e,t,i){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var n,r,a,s,o,l=t.values||[],c={},u=l[0],d=t.autoRotate||i.vars.orientToBezier;for(n in this._autoRotate=d?d instanceof Array?d:[["x","y","rotation",!0===d?0:Number(d)||0]]:null,u)this._props.push(n);for(a=this._props.length;-1<--a;)n=this._props[a],this._overwriteProps.push(n),r=this._func[n]="function"==typeof e[n],c[n]=r?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),o||c[n]!==l[0][n]&&(o=c);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?f(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,o):function(e,t,i){var n,r,a,s,o,l,c,u,d,p,f,m={},g="cubic"===(t=t||"soft")?3:2,v="soft"===t,y=[];if(v&&i&&(e=[i].concat(e)),null==e||e.length<g+1)throw"invalid Bezier data";for(d in e[0])y.push(d);for(l=y.length;-1<--l;){for(m[d=y[l]]=o=[],p=0,u=e.length,c=0;c<u;c++)n=null==i?e[c][d]:"string"==typeof(f=e[c][d])&&"="===f.charAt(1)?i[d]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&1<c&&c<u-1&&(o[p++]=(n+o[p-2])/2),o[p++]=n;for(u=p-g+1,c=p=0;c<u;c+=g)n=o[c],r=o[c+1],a=o[c+2],s=2===g?0:o[c+3],o[p++]=f=3===g?new h(n,r,a,s):new h(n,(2*r+n)/3,(2*r+a)/3,a);o.length=p}return m}(l,t.type,c),this._segCount=this._beziers[n].length,this._timeRes){var p=function(e,t){var i,n,r,a,s=[],o=[],l=0,c=0,h=(t=t>>0||6)-1,u=[],d=[];for(i in e)m(e[i],s,t);for(r=s.length,n=0;n<r;n++)l+=Math.sqrt(s[n]),d[a=n%t]=l,a===h&&(c+=l,u[a=n/t>>0]=d,o[a]=c,l=0,d=[]);return{length:c,lengths:o,segments:u}}(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(d=this._autoRotate)for(this._initialRotations=[],d[0]instanceof Array||(this._autoRotate=d=[d]),a=d.length;-1<--a;){for(s=0;s<3;s++)n=d[a][s],this._func[n]="function"==typeof e[n]&&e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)];n=d[a][2],this._initialRotations[a]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var t,i,n,a,s,o,l,c,h,u,d=this._segCount,p=this._func,f=this._target,m=e!==this._startRatio;if(this._timeRes){if(h=this._lengths,u=this._curSeg,e*=this._length,n=this._li,e>this._l2&&n<d-1){for(c=d-1;n<c&&(this._l2=h[++n])<=e;);this._l1=h[n-1],this._li=n,this._curSeg=u=this._segments[n],this._s2=u[this._s1=this._si=0]}else if(e<this._l1&&0<n){for(;0<n&&(this._l1=h[--n])>=e;);0===n&&e<this._l1?this._l1=0:n++,this._l2=h[n],this._li=n,this._curSeg=u=this._segments[n],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(t=n,e-=this._l1,n=this._si,e>this._s2&&n<u.length-1){for(c=u.length-1;n<c&&(this._s2=u[++n])<=e;);this._s1=u[n-1],this._si=n}else if(e<this._s1&&0<n){for(;0<n&&(this._s1=u[--n])>=e;);0===n&&e<this._s1?this._s1=0:n++,this._s2=u[n],this._si=n}o=(n+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else o=(e-(t=e<0?0:1<=e?d-1:d*e>>0)*(1/d))*d;for(i=1-o,n=this._props.length;-1<--n;)a=this._props[n],l=(o*o*(s=this._beziers[a][t]).da+3*i*(o*s.ca+i*s.ba))*o+s.a,this._mod[a]&&(l=this._mod[a](l,f)),p[a]?f[a](l):f[a]=l;if(this._autoRotate){var g,v,y,_,x,b,w,T=this._autoRotate;for(n=T.length;-1<--n;)a=T[n][2],b=T[n][3]||0,w=!0===T[n][4]?1:r,s=this._beziers[T[n][0]],g=this._beziers[T[n][1]],s&&g&&(s=s[t],g=g[t],v=s.a+(s.b-s.a)*o,v+=((_=s.b+(s.c-s.b)*o)-v)*o,_+=(s.c+(s.d-s.c)*o-_)*o,y=g.a+(g.b-g.a)*o,y+=((x=g.b+(g.c-g.b)*o)-y)*o,x+=(g.c+(g.d-g.c)*o-x)*o,l=m?Math.atan2(x-y,_-v)*w+b:this._initialRotations[n],this._mod[a]&&(l=this._mod[a](l,f)),p[a]?f[a](l):f[a]=l)}}}),v=g.prototype,g.bezierThrough=f,g.cubicToQuadratic=u,g._autoCSS=!0,g.quadraticToCubic=function(e,t,i){return new h(e,(2*t+e)/3,(2*t+i)/3,i)},g._cssRegister=function(){var e=c.CSSPlugin;if(e){var t=e._internals,i=t._parseToProxy,n=t._setPluginRatio,r=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,s,o,l){t instanceof Array&&(t={values:t}),l=new g;var c,h,u,d=t.values,p=d.length-1,f=[],m={};if(p<0)return o;for(c=0;c<=p;c++)u=i(e,d[c],s,o,l,p!==c),f[c]=u.end;for(h in t)m[h]=t[h];return m.values=f,(o=new r(e,"bezier",0,0,u.pt,2)).data=u,o.plugin=l,o.setRatio=n,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(c=!0===m.autoRotate?0:Number(m.autoRotate),m.autoRotate=null!=u.end.left?[["left","top","rotation",c,!1]]:null!=u.end.x&&[["x","y","rotation",c,!1]]),m.autoRotate&&(s._transform||s._enableTransforms(!1),u.autoRotate=s._target._gsTransform,u.proxy.rotation=u.autoRotate.rotation||0,s._overwriteProps.push("rotation")),l._onInitTween(u.proxy,m,s._tween),o}})}},v._mod=function(e){for(var t,i=this._overwriteProps,n=i.length;-1<--n;)(t=e[i[n]])&&"function"==typeof t&&(this._mod[i[n]]=t)},v._kill=function(e){var t,i,n=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],i=n.length;-1<--i;)n[i]===t&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;-1<--i;)e[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,e)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var i,n,r,a,s=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=s.prototype.setRatio},o=_gsScope._gsDefine.globals,l={},c=s.prototype=new e("css");(c.constructor=s).version="2.1.0",s.API=2,s.defaultTransformPerspective=0,s.defaultSkewType="compensated",s.defaultSmoothOrigin=!0,c="px",s.suffixMap={top:c,right:c,bottom:c,left:c,width:c,height:c,fontSize:c,padding:c,margin:c,perspective:c,lineHeight:""};var h,u,d,p,f,m,g,v,y,_,x=/(?:\-|\.|\b)(\d|\.|e\-)+/g,b=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,w=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,T=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,E=/(?:\d|\-|\+|=|#|\.)*/g,M=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,C=/alpha\(opacity *=.+?\)/i,A=/^(rgb|hsl)/,P=/([A-Z])/g,L=/-([a-z])/gi,R=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,O=function(e,t){return t.toUpperCase()},I=/(?:Left|Right|Width)/i,D=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,k=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,N=/,(?=[^\)]*(?:\(|$))/gi,z=/[\s,\(]/i,B=Math.PI/180,H=180/Math.PI,F={},U={style:{}},G=_gsScope.document||{createElement:function(){return U}},V=function(e,t){return t&&G.createElementNS?G.createElementNS(t,e):G.createElement(e)},j=V("div"),W=V("img"),X=s._internals={_specialProps:l},Y=(_gsScope.navigator||{}).userAgent||"",q=(y=Y.indexOf("Android"),_=V("a"),d=-1!==Y.indexOf("Safari")&&-1===Y.indexOf("Chrome")&&(-1===y||3<parseFloat(Y.substr(y+8,2))),f=d&&parseFloat(Y.substr(Y.indexOf("Version/")+8,2))<6,p=-1!==Y.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Y)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Y))&&(m=parseFloat(RegExp.$1)),!!_&&(_.style.cssText="top:1px;opacity:.55;",/^0.55/.test(_.style.opacity))),$=function(e){return M.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Z=function(e){_gsScope.console&&console.log(e)},J="",K="",Q=function(e,t){var i,n,r=(t=t||j).style;if(void 0!==r[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;-1<--n&&void 0===r[i[n]+e];);return 0<=n?(J="-"+(K=3===n?"ms":i[n]).toLowerCase()+"-",K+e):null},ee="undefined"!=typeof window?window:G.defaultView||{getComputedStyle:function(){}},te=function(e){return ee.getComputedStyle(e)},ie=s.getStyle=function(e,t,i,n,r){var a;return q||"opacity"!==t?(!n&&e.style[t]?a=e.style[t]:(i=i||te(e))?a=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(P,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]),null==r||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:r):$(e)},ne=X.convertToPixels=function(e,i,n,r,a){if("px"===r||!r&&"lineHeight"!==i)return n;if("auto"===r||!n)return 0;var o,l,c,h=I.test(i),u=e,d=j.style,p=n<0,f=1===n;if(p&&(n=-n),f&&(n*=100),"lineHeight"!==i||r)if("%"===r&&-1!==i.indexOf("border"))o=n/100*(h?e.clientWidth:e.clientHeight);else{if(d.cssText="border:0 solid red;position:"+ie(e,"position")+";line-height:0;","%"!==r&&u.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)d[h?"borderLeftWidth":"borderTopWidth"]=n+r;else{if(u=e.parentNode||G.body,-1!==ie(u,"display").indexOf("flex")&&(d.position="absolute"),l=u._gsCache,c=t.ticker.frame,l&&h&&l.time===c)return l.width*n/100;d[h?"width":"height"]=n+r}u.appendChild(j),o=parseFloat(j[h?"offsetWidth":"offsetHeight"]),u.removeChild(j),h&&"%"===r&&!1!==s.cacheWidths&&((l=u._gsCache=u._gsCache||{}).time=c,l.width=o/n*100),0!==o||a||(o=ne(e,i,n,r,!0))}else l=te(e).lineHeight,e.style.lineHeight=n,o=parseFloat(te(e).lineHeight),e.style.lineHeight=l;return f&&(o/=100),p?-o:o},re=X.calculateOffset=function(e,t,i){if("absolute"!==ie(e,"position",i))return 0;var n="left"===t?"Left":"Top",r=ie(e,"margin"+n,i);return e["offset"+n]-(ne(e,t,parseFloat(r),r.replace(E,""))||0)},ae=function(e,t){var i,n,r,a={};if(t=t||te(e))if(i=t.length)for(;-1<--i;)(-1===(r=t[i]).indexOf("-transform")||Ne===r)&&(a[r.replace(L,O)]=t.getPropertyValue(r));else for(i in t)(-1===i.indexOf("Transform")||ke===i)&&(a[i]=t[i]);else if(t=e.currentStyle||e.style)for(i in t)"string"==typeof i&&void 0===a[i]&&(a[i.replace(L,O)]=t[i]);return q||(a.opacity=$(e)),n=$e(e,t,!1),a.rotation=n.rotation,a.skewX=n.skewX,a.scaleX=n.scaleX,a.scaleY=n.scaleY,a.x=n.x,a.y=n.y,Be&&(a.z=n.z,a.rotationX=n.rotationX,a.rotationY=n.rotationY,a.scaleZ=n.scaleZ),a.filters&&delete a.filters,a},se=function(e,t,i,n,r){var a,s,o,l={},c=e.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(t[s]!==(a=i[s])||r&&r[s])&&-1===s.indexOf("Origin")&&("number"==typeof a||"string"==typeof a)&&(l[s]="auto"!==a||"left"!==s&&"top"!==s?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[s]||""===t[s].replace(T,"")?a:0:re(e,s),void 0!==c[s]&&(o=new be(c,s,c[s],o)));if(n)for(s in n)"className"!==s&&(l[s]=n[s]);return{difs:l,firstMPT:o}},oe={width:["Left","Right"],height:["Top","Bottom"]},le=["marginLeft","marginRight","marginTop","marginBottom"],ce=function(e,t,i){if("svg"===(e.nodeName+"").toLowerCase())return(i||te(e))[t]||0;if(e.getCTM&&Xe(e))return e.getBBox()[t]||0;var n=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),r=oe[t],a=r.length;for(i=i||te(e);-1<--a;)n-=parseFloat(ie(e,"padding"+r[a],i,!0))||0,n-=parseFloat(ie(e,"border"+r[a]+"Width",i,!0))||0;return n},he=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";(null==e||""===e)&&(e="0 0");var i,n=e.split(" "),r=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":n[0],a=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":n[1];if(3<n.length&&!t){for(n=e.split(", ").join(",").split(","),e=[],i=0;i<n.length;i++)e.push(he(n[i]));return e.join(",")}return null==a?a="center"===r?"50%":"0":"center"===a&&(a="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e=r+" "+a+(2<n.length?" "+n[2]:""),t&&(t.oxp=-1!==r.indexOf("%"),t.oyp=-1!==a.indexOf("%"),t.oxr="="===r.charAt(1),t.oyr="="===a.charAt(1),t.ox=parseFloat(r.replace(T,"")),t.oy=parseFloat(a.replace(T,"")),t.v=e),t||e},ue=function(e,t){return"function"==typeof e&&(e=e(v,g)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},de=function(e,t){"function"==typeof e&&(e=e(v,g));var i="string"==typeof e&&"="===e.charAt(1);return"string"==typeof e&&"v"===e.charAt(e.length-2)&&(e=(i?e.substr(0,2):0)+window["inner"+("vh"===e.substr(-2)?"Height":"Width")]*(parseFloat(i?e.substr(2):e)/100)),null==e?t:i?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},pe=function(e,t,i,n){var r,a,s,o;return"function"==typeof e&&(e=e(v,g)),(s=null==e?t:"number"==typeof e?e:(r=e.split("_"),a=((o="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(r[0].substr(2)):parseFloat(r[0]))*(-1===e.indexOf("rad")?1:H)-(o?0:t),r.length&&(n&&(n[i]=t+a),-1!==e.indexOf("short")&&(a%=360)!=a%180&&(a=a<0?a+360:a-360),-1!==e.indexOf("_cw")&&a<0?a=(a+3599999999640)%360-360*(a/360|0):-1!==e.indexOf("ccw")&&0<a&&(a=(a-3599999999640)%360-360*(a/360|0))),t+a))<1e-6&&-1e-6<s&&(s=0),s},fe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},me=function(e,t,i){return 255*(6*(e=e<0?e+1:1<e?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0},ge=s.parseColor=function(e,t){var i,n,r,a,s,o,l,c,h,u,d;if(e)if("number"==typeof e)i=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),fe[e])i=fe[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(n=e.charAt(1))+n+(r=e.charAt(2))+r+(a=e.charAt(3))+a),i=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(i=d=e.match(x),t){if(-1!==e.indexOf("="))return e.match(b)}else s=Number(i[0])%360/360,o=Number(i[1])/100,n=2*(l=Number(i[2])/100)-(r=l<=.5?l*(o+1):l+o-l*o),3<i.length&&(i[3]=Number(i[3])),i[0]=me(s+1/3,n,r),i[1]=me(s,n,r),i[2]=me(s-1/3,n,r);else i=e.match(x)||fe.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),3<i.length&&(i[3]=Number(i[3]))}else i=fe.black;return t&&!d&&(n=i[0]/255,r=i[1]/255,a=i[2]/255,l=((c=Math.max(n,r,a))+(h=Math.min(n,r,a)))/2,c===h?s=o=0:(u=c-h,o=.5<l?u/(2-c-h):u/(c+h),s=c===n?(r-a)/u+(r<a?6:0):c===r?(a-n)/u+2:(n-r)/u+4,s*=60),i[0]=s+.5|0,i[1]=100*o+.5|0,i[2]=100*l+.5|0),i},ve=function(e,t){var i,n,r,a=e.match(ye)||[],s=0,o="";if(!a.length)return e;for(i=0;i<a.length;i++)n=a[i],s+=(r=e.substr(s,e.indexOf(n,s)-s)).length+n.length,3===(n=ge(n,t)).length&&n.push(1),o+=r+(t?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return o+e.substr(s)},ye="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(c in fe)ye+="|"+c+"\\b";ye=new RegExp(ye+")","gi"),s.colorStringFilter=function(e){var t,i=e[0]+" "+e[1];ye.test(i)&&(t=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),e[0]=ve(e[0],t),e[1]=ve(e[1],t)),ye.lastIndex=0},t.defaultStringFilter||(t.defaultStringFilter=s.colorStringFilter);var _e=function(e,t,i,n){if(null==e)return function(e){return e};var r,a=t?(e.match(ye)||[""])[0]:"",s=e.split(a).join("").match(w)||[],o=e.substr(0,e.indexOf(s[0])),l=")"===e.charAt(e.length-1)?")":"",c=-1!==e.indexOf(" ")?" ":",",h=s.length,u=0<h?s[0].replace(x,""):"";return h?r=t?function(e){var t,d,p,f;if("number"==typeof e)e+=u;else if(n&&N.test(e)){for(f=e.replace(N,"|").split("|"),p=0;p<f.length;p++)f[p]=r(f[p]);return f.join(",")}if(t=(e.match(ye)||[a])[0],p=(d=e.split(t).join("").match(w)||[]).length,h>p--)for(;++p<h;)d[p]=i?d[(p-1)/2|0]:s[p];return o+d.join(c)+c+t+l+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,a,d;if("number"==typeof e)e+=u;else if(n&&N.test(e)){for(a=e.replace(N,"|").split("|"),d=0;d<a.length;d++)a[d]=r(a[d]);return a.join(",")}if(d=(t=e.match(w)||[]).length,h>d--)for(;++d<h;)t[d]=i?t[(d-1)/2|0]:s[d];return o+t.join(c)+l}:function(e){return e}},xe=function(e){return e=e.split(","),function(t,i,n,r,a,s,o){var l,c=(i+"").split(" ");for(o={},l=0;l<4;l++)o[e[l]]=c[l]=c[l]||c[(l-1)/2>>0];return r.parse(t,o,a,s)}},be=(X._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,i,n,r,a,s=this.data,o=s.proxy,l=s.firstMPT;l;)t=o[l.v],l.r?t=l.r(t):t<1e-6&&-1e-6<t&&(t=0),l.t[l.p]=t,l=l._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod.call(this._tween,o.rotation,this.t,this._tween):o.rotation),1===e||0===e)for(l=s.firstMPT,a=1===e?"e":"b";l;){if((i=l.t).type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)r+=i["xn"+n]+i["xs"+(n+1)];i[a]=r}}else i[a]=i.s+i.xs0;l=l._next}},function(e,t,i,n,r){this.t=e,this.p=t,this.v=i,this.r=r,n&&((n._prev=this)._next=n)}),we=(X._parseToProxy=function(e,t,i,n,r,a){var s,o,l,c,h,u=n,d={},p={},f=i._transform,m=F;for(i._transform=null,F=t,n=h=i.parse(e,t,n,r),F=m,a&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));n&&n!==u;){if(n.type<=1&&(p[o=n.p]=n.s+n.c,d[o]=n.s,a||(c=new be(n,"s",o,c,n.r),n.c=0),1===n.type))for(s=n.l;0<--s;)l="xn"+s,p[o=n.p+"_"+l]=n.data[l],d[o]=n[l],a||(c=new be(n,l,o,c,n.rxp[l]));n=n._next}return{proxy:d,end:p,firstMPT:c,pt:h}},X.CSSPropTween=function(e,t,n,r,s,o,l,c,h,u,d){this.t=e,this.p=t,this.s=n,this.c=r,this.n=l||t,e instanceof we||a.push(this.n),this.r=c?"function"==typeof c?c:Math.round:c,this.type=o||0,h&&(this.pr=h,i=!0),this.b=void 0===u?n:u,this.e=void 0===d?n+r:d,s&&((this._next=s)._prev=this)}),Te=function(e,t,i,n,r,a){var s=new we(e,t,i,n-i,r,-1,a);return s.b=i,s.e=s.xs0=n,s},Ee=s.parseComplex=function(e,t,i,n,r,a,o,l,c,u){i=i||a||"","function"==typeof n&&(n=n(v,g)),o=new we(e,t,0,0,o,u?2:1,null,!1,l,i,n),n+="",r&&ye.test(n+i)&&(n=[i,n],s.colorStringFilter(n),i=n[0],n=n[1]);var d,p,f,m,y,_,w,T,E,M,S,C,A,P=i.split(", ").join(",").split(" "),L=n.split(", ").join(",").split(" "),R=P.length,O=!1!==h;for((-1!==n.indexOf(",")||-1!==i.indexOf(","))&&(L=-1!==(n+i).indexOf("rgb")||-1!==(n+i).indexOf("hsl")?(P=P.join(" ").replace(N,", ").split(" "),L.join(" ").replace(N,", ").split(" ")):(P=P.join(" ").split(",").join(", ").split(" "),L.join(" ").split(",").join(", ").split(" ")),R=P.length),R!==L.length&&(R=(P=(a||"").split(" ")).length),o.plugin=c,o.setRatio=u,d=ye.lastIndex=0;d<R;d++)if(m=P[d],y=L[d]+"",(T=parseFloat(m))||0===T)o.appendXtra("",T,ue(y,T),y.replace(b,""),!(!O||-1===y.indexOf("px"))&&Math.round,!0);else if(r&&ye.test(m))C=")"+((C=y.indexOf(")")+1)?y.substr(C):""),A=-1!==y.indexOf("hsl")&&q,M=y,m=ge(m,A),y=ge(y,A),(E=6<m.length+y.length)&&!q&&0===y[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(L[d]).join("transparent")):(q||(E=!1),A?o.appendXtra(M.substr(0,M.indexOf("hsl"))+(E?"hsla(":"hsl("),m[0],ue(y[0],m[0]),",",!1,!0).appendXtra("",m[1],ue(y[1],m[1]),"%,",!1).appendXtra("",m[2],ue(y[2],m[2]),E?"%,":"%"+C,!1):o.appendXtra(M.substr(0,M.indexOf("rgb"))+(E?"rgba(":"rgb("),m[0],y[0]-m[0],",",Math.round,!0).appendXtra("",m[1],y[1]-m[1],",",Math.round).appendXtra("",m[2],y[2]-m[2],E?",":C,Math.round),E&&(m=m.length<4?1:m[3],o.appendXtra("",m,(y.length<4?1:y[3])-m,C,!1))),ye.lastIndex=0;else if(_=m.match(x)){if(!(w=y.match(b))||w.length!==_.length)return o;for(p=f=0;p<_.length;p++)S=_[p],M=m.indexOf(S,f),o.appendXtra(m.substr(f,M-f),Number(S),ue(w[p],S),"",!(!O||"px"!==m.substr(M+S.length,2))&&Math.round,0===p),f=M+S.length;o["xs"+o.l]+=m.substr(f)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+y:y;if(-1!==n.indexOf("=")&&o.data){for(C=o.xs0+o.data.s,d=1;d<o.l;d++)C+=o["xs"+d]+o.data["xn"+d];o.e=C+o["xs"+d]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},Me=9;for((c=we.prototype).l=c.pr=0;0<--Me;)c["xn"+Me]=0,c["xs"+Me]="";c.xs0="",c._next=c._prev=c.xfirst=c.data=c.plugin=c.setRatio=c.rxp=null,c.appendXtra=function(e,t,i,n,r,a){var s=this,o=s.l;return s["xs"+o]+=a&&(o||s["xs"+o])?" "+e:e||"",i||0===o||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=n||"",0<o?(s.data["xn"+o]=t+i,s.rxp["xn"+o]=r,s["xn"+o]=t,s.plugin||(s.xfirst=new we(s,"xn"+o,t,i,s.xfirst||s,0,s.n,r,s.pr),s.xfirst.xs0=0)):(s.data={s:t+i},s.rxp={},s.s=t,s.c=i,s.r=r)):s["xs"+o]+=t+(n||""),s};var Se=function(e,t){t=t||{},this.p=t.prefix&&Q(e)||e,l[e]=l[this.p]=this,this.format=t.formatter||_e(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.allowFunc=t.allowFunc,this.pr=t.priority||0},Ce=X._registerComplexSpecialProp=function(e,t,i){"object"!=typeof t&&(t={parser:i});var n,r=e.split(","),a=t.defaultValue;for(i=i||[a],n=0;n<r.length;n++)t.prefix=0===n&&t.prefix,t.defaultValue=i[n]||a,new Se(r[n],t)},Ae=X._registerPluginProp=function(e){if(!l[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Ce(e,{parser:function(e,i,n,r,a,s,c){var h=o.com.greensock.plugins[t];return h?(h._cssRegister(),l[n].parse(e,i,n,r,a,s,c)):(Z("Error: "+t+" js file not loaded."),a)}})}};(c=Se.prototype).parseComplex=function(e,t,i,n,r,a){var s,o,l,c,h,u,d=this.keyword;if(this.multi&&(N.test(i)||N.test(t)?(o=t.replace(N,"|").split("|"),l=i.replace(N,"|").split("|")):d&&(o=[t],l=[i])),l){for(c=l.length>o.length?l.length:o.length,s=0;s<c;s++)t=o[s]=o[s]||this.dflt,i=l[s]=l[s]||this.dflt,d&&(h=t.indexOf(d))!==(u=i.indexOf(d))&&(-1===u?o[s]=o[s].split(d).join(""):-1===h&&(o[s]+=" "+d));t=o.join(", "),i=l.join(", ")}return Ee(e,this.p,t,i,this.clrs,this.dflt,n,this.pr,r,a)},c.parse=function(e,t,i,n,a,s,o){return this.parseComplex(e.style,this.format(ie(e,this.p,r,!1,this.dflt)),this.format(t),a,s)},s.registerSpecialProp=function(e,t,i){Ce(e,{parser:function(e,n,r,a,s,o,l){var c=new we(e,r,0,0,s,2,r,!1,i);return c.plugin=o,c.setRatio=t(e,n,a._tween,r),c},priority:i})},s.useSVGTransformAttr=!0;var Pe,Le,Re,Oe,Ie,De="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),ke=Q("transform"),Ne=J+"transform",ze=Q("transformOrigin"),Be=null!==Q("perspective"),He=X.Transform=function(){this.perspective=parseFloat(s.defaultTransformPerspective)||0,this.force3D=!(!1===s.defaultForce3D||!Be)&&(s.defaultForce3D||"auto")},Fe=_gsScope.SVGElement,Ue=function(e,t,i){var n,r=G.createElementNS("http://www.w3.org/2000/svg",e),a=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(a,"$1-$2").toLowerCase(),i[n]);return t.appendChild(r),r},Ge=G.documentElement||{},Ve=(Ie=m||/Android/i.test(Y)&&!_gsScope.chrome,G.createElementNS&&!Ie&&(Le=Ue("svg",Ge),Oe=(Re=Ue("rect",Le,{width:100,height:50,x:100})).getBoundingClientRect().width,Re.style[ze]="50% 50%",Re.style[ke]="scaleX(0.5)",Ie=Oe===Re.getBoundingClientRect().width&&!(p&&Be),Ge.removeChild(Le)),Ie),je=function(e,t,i,n,r,a){var o,l,c,h,u,d,p,f,m,g,v,y,_,x,b=e._gsTransform,w=qe(e,!0);b&&(_=b.xOrigin,x=b.yOrigin),(!n||(o=n.split(" ")).length<2)&&(0===(p=e.getBBox()).x&&0===p.y&&p.width+p.height===0&&(p={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),o=[(-1!==(t=he(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*p.width:parseFloat(t[0]))+p.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*p.height:parseFloat(t[1]))+p.y]),i.xOrigin=h=parseFloat(o[0]),i.yOrigin=u=parseFloat(o[1]),n&&w!==Ye&&(d=w[0],p=w[1],f=w[2],m=w[3],g=w[4],v=w[5],(y=d*m-p*f)&&(l=h*(m/y)+u*(-f/y)+(f*v-m*g)/y,c=h*(-p/y)+u*(d/y)-(d*v-p*g)/y,h=i.xOrigin=o[0]=l,u=i.yOrigin=o[1]=c)),b&&(a&&(i.xOffset=b.xOffset,i.yOffset=b.yOffset,b=i),r||!1!==r&&!1!==s.defaultSmoothOrigin?(l=h-_,c=u-x,b.xOffset+=l*w[0]+c*w[2]-l,b.yOffset+=l*w[1]+c*w[3]-c):b.xOffset=b.yOffset=0),a||e.setAttribute("data-svg-origin",o.join(" "))},We=function(e){var t,i=V("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(Ge.appendChild(i),i.appendChild(this),this.style.display="block",e)try{t=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=We}catch(e){}else this._originalGetBBox&&(t=this._originalGetBBox());return r?n.insertBefore(this,r):n.appendChild(this),Ge.removeChild(i),this.style.cssText=a,t},Xe=function(e){return!(!Fe||!e.getCTM||e.parentNode&&!e.ownerSVGElement||!function(e){try{return e.getBBox()}catch(t){return We.call(e,!0)}}(e))},Ye=[1,0,0,1,0,0],qe=function(e,t){var i,n,r,a,s,o,l,c=e._gsTransform||new He,h=e.style;if(ke?n=ie(e,Ne,null,!0):e.currentStyle&&(n=(n=e.currentStyle.filter.match(D))&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),c.x||0,c.y||0].join(","):""),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,ke&&i&&!e.offsetParent&&(a=h.display,h.display="block",(l=e.parentNode)&&e.offsetParent||(s=1,o=e.nextSibling,Ge.appendChild(e)),i=!(n=ie(e,Ne,null,!0))||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,a?h.display=a:Qe(h,"display"),s&&(o?l.insertBefore(e,o):l?l.appendChild(e):Ge.removeChild(e))),(c.svg||e.getCTM&&Xe(e))&&(i&&-1!==(h[ke]+"").indexOf("matrix")&&(n=h[ke],i=0),r=e.getAttribute("transform"),i&&r&&(n="matrix("+(r=e.transform.baseVal.consolidate().matrix).a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")",i=0)),i)return Ye;for(r=(n||"").match(x)||[],Me=r.length;-1<--Me;)a=Number(r[Me]),r[Me]=(s=a-(a|=0))?(1e5*s+(s<0?-.5:.5)|0)/1e5+a:a;return t&&6<r.length?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},$e=X.getTransform=function(e,i,n,r){if(e._gsTransform&&n&&!r)return e._gsTransform;var a,o,l,c,h,u,d=n&&e._gsTransform||new He,p=d.scaleX<0,f=Be&&(parseFloat(ie(e,ze,i,!1,"0 0 0").split(" ")[2])||d.zOrigin)||0,m=parseFloat(s.defaultTransformPerspective)||0;if(d.svg=!(!e.getCTM||!Xe(e)),d.svg&&(je(e,ie(e,ze,i,!1,"50% 50%")+"",d,e.getAttribute("data-svg-origin")),Pe=s.useSVGTransformAttr||Ve),(a=qe(e))!==Ye){if(16===a.length){var g,v,y,_,x,b=a[0],w=a[1],T=a[2],E=a[3],M=a[4],S=a[5],C=a[6],A=a[7],P=a[8],L=a[9],R=a[10],O=a[12],I=a[13],D=a[14],k=a[11],N=Math.atan2(C,R);d.zOrigin&&(O=P*(D=-d.zOrigin)-a[12],I=L*D-a[13],D=R*D+d.zOrigin-a[14]),d.rotationX=N*H,N&&(g=M*(_=Math.cos(-N))+P*(x=Math.sin(-N)),v=S*_+L*x,y=C*_+R*x,P=M*-x+P*_,L=S*-x+L*_,R=C*-x+R*_,k=A*-x+k*_,M=g,S=v,C=y),N=Math.atan2(-T,R),d.rotationY=N*H,N&&(v=w*(_=Math.cos(-N))-L*(x=Math.sin(-N)),y=T*_-R*x,L=w*x+L*_,R=T*x+R*_,k=E*x+k*_,b=g=b*_-P*x,w=v,T=y),N=Math.atan2(w,b),d.rotation=N*H,N&&(g=b*(_=Math.cos(N))+w*(x=Math.sin(N)),v=M*_+S*x,y=P*_+L*x,w=w*_-b*x,S=S*_-M*x,L=L*_-P*x,b=g,M=v,P=y),d.rotationX&&359.9<Math.abs(d.rotationX)+Math.abs(d.rotation)&&(d.rotationX=d.rotation=0,d.rotationY=180-d.rotationY),N=Math.atan2(M,S),d.scaleX=(1e5*Math.sqrt(b*b+w*w+T*T)+.5|0)/1e5,d.scaleY=(1e5*Math.sqrt(S*S+C*C)+.5|0)/1e5,d.scaleZ=(1e5*Math.sqrt(P*P+L*L+R*R)+.5|0)/1e5,b/=d.scaleX,M/=d.scaleY,w/=d.scaleX,S/=d.scaleY,2e-5<Math.abs(N)?(d.skewX=N*H,M=0,"simple"!==d.skewType&&(d.scaleY*=1/Math.cos(N))):d.skewX=0,d.perspective=k?1/(k<0?-k:k):0,d.x=O,d.y=I,d.z=D,d.svg&&(d.x-=d.xOrigin-(d.xOrigin*b-d.yOrigin*M),d.y-=d.yOrigin-(d.yOrigin*w-d.xOrigin*S))}else if(!Be||r||!a.length||d.x!==a[4]||d.y!==a[5]||!d.rotationX&&!d.rotationY){var z=6<=a.length,B=z?a[0]:1,F=a[1]||0,U=a[2]||0,G=z?a[3]:1;d.x=a[4]||0,d.y=a[5]||0,l=Math.sqrt(B*B+F*F),c=Math.sqrt(G*G+U*U),h=B||F?Math.atan2(F,B)*H:d.rotation||0,u=U||G?Math.atan2(U,G)*H+h:d.skewX||0,d.scaleX=l,d.scaleY=c,d.rotation=h,d.skewX=u,Be&&(d.rotationX=d.rotationY=d.z=0,d.perspective=m,d.scaleZ=1),d.svg&&(d.x-=d.xOrigin-(d.xOrigin*B+d.yOrigin*U),d.y-=d.yOrigin-(d.xOrigin*F+d.yOrigin*G))}for(o in 90<Math.abs(d.skewX)&&Math.abs(d.skewX)<270&&(p?(d.scaleX*=-1,d.skewX+=d.rotation<=0?180:-180,d.rotation+=d.rotation<=0?180:-180):(d.scaleY*=-1,d.skewX+=d.skewX<=0?180:-180)),d.zOrigin=f,d)d[o]<2e-5&&-2e-5<d[o]&&(d[o]=0)}return n&&(e._gsTransform=d).svg&&(Pe&&e.style[ke]?t.delayedCall(.001,function(){Qe(e.style,ke)}):!Pe&&e.getAttribute("transform")&&t.delayedCall(.001,function(){e.removeAttribute("transform")})),d},Ze=function(e){var t,i,n=this.data,r=-n.rotation*B,a=r+n.skewX*B,s=(Math.cos(r)*n.scaleX*1e5|0)/1e5,o=(Math.sin(r)*n.scaleX*1e5|0)/1e5,l=(Math.sin(a)*-n.scaleY*1e5|0)/1e5,c=(Math.cos(a)*n.scaleY*1e5|0)/1e5,h=this.t.style,u=this.t.currentStyle;if(u){i=o,o=-l,l=-i,t=u.filter,h.filter="";var d,p,f=this.t.offsetWidth,g=this.t.offsetHeight,v="absolute"!==u.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+o+", M21="+l+", M22="+c,_=n.x+f*n.xPercent/100,x=n.y+g*n.yPercent/100;if(null!=n.ox&&(_+=(d=(n.oxp?f*n.ox*.01:n.ox)-f/2)-(d*s+(p=(n.oyp?g*n.oy*.01:n.oy)-g/2)*o),x+=p-(d*l+p*c)),y+=v?", Dx="+((d=f/2)-(d*s+(p=g/2)*o)+_)+", Dy="+(p-(d*l+p*c)+x)+")":", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?h.filter=t.replace(k,y):h.filter=y+" "+t,(0===e||1===e)&&1===s&&0===o&&0===l&&1===c&&(v&&-1===y.indexOf("Dx=0, Dy=0")||M.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&h.removeAttribute("filter")),!v){var b,w,T,S=m<8?1:-1;for(d=n.ieOffsetX||0,p=n.ieOffsetY||0,n.ieOffsetX=Math.round((f-((s<0?-s:s)*f+(o<0?-o:o)*g))/2+_),n.ieOffsetY=Math.round((g-((c<0?-c:c)*g+(l<0?-l:l)*f))/2+x),Me=0;Me<4;Me++)T=(i=-1!==(b=u[w=le[Me]]).indexOf("px")?parseFloat(b):ne(this.t,w,parseFloat(b),b.replace(E,""))||0)!==n[w]?Me<2?-n.ieOffsetX:-n.ieOffsetY:Me<2?d-n.ieOffsetX:p-n.ieOffsetY,h[w]=(n[w]=Math.round(i-T*(0===Me||2===Me?1:S)))+"px"}}},Je=X.set3DTransformRatio=X.setTransformRatio=function(e){var t,i,n,r,a,s,o,l,c,h,u,d,f,m,g,v,y,_,x,b,w=this.data,T=this.t.style,E=w.rotation,M=w.rotationX,S=w.rotationY,C=w.scaleX,A=w.scaleY,P=w.scaleZ,L=w.x,R=w.y,O=w.z,I=w.svg,D=w.perspective,k=w.force3D,N=w.skewY,z=w.skewX;if(N&&(z+=N,E+=N),!((1!==e&&0!==e||"auto"!==k||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&k||O||D||S||M||1!==P)||Pe&&I||!Be)E||z||I?(E*=B,b=z*B,i=Math.cos(E)*C,a=Math.sin(E)*C,n=Math.sin(E-b)*-A,s=Math.cos(E-b)*A,b&&"simple"===w.skewType&&(t=Math.tan(b-N*B),n*=t=Math.sqrt(1+t*t),s*=t,N&&(t=Math.tan(N*B),i*=t=Math.sqrt(1+t*t),a*=t)),I&&(L+=w.xOrigin-(w.xOrigin*i+w.yOrigin*n)+w.xOffset,R+=w.yOrigin-(w.xOrigin*a+w.yOrigin*s)+w.yOffset,Pe&&(w.xPercent||w.yPercent)&&(g=this.t.getBBox(),L+=.01*w.xPercent*g.width,R+=.01*w.yPercent*g.height),L<(g=1e-6)&&-g<L&&(L=0),R<g&&-g<R&&(R=0)),x=(1e5*i|0)/1e5+","+(1e5*a|0)/1e5+","+(1e5*n|0)/1e5+","+(1e5*s|0)/1e5+","+L+","+R+")",I&&Pe?this.t.setAttribute("transform","matrix("+x):T[ke]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+x):T[ke]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+A+","+L+","+R+")";else{if(p&&(C<(g=1e-4)&&-g<C&&(C=P=2e-5),A<g&&-g<A&&(A=P=2e-5),!D||w.z||w.rotationX||w.rotationY||(D=0)),E||z)E*=B,v=i=Math.cos(E),y=a=Math.sin(E),z&&(E-=z*B,v=Math.cos(E),y=Math.sin(E),"simple"===w.skewType&&(t=Math.tan((z-N)*B),v*=t=Math.sqrt(1+t*t),y*=t,w.skewY&&(t=Math.tan(N*B),i*=t=Math.sqrt(1+t*t),a*=t))),n=-y,s=v;else{if(!(S||M||1!==P||D||I))return void(T[ke]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) translate3d(":"translate3d(")+L+"px,"+R+"px,"+O+"px)"+(1!==C||1!==A?" scale("+C+","+A+")":""));i=s=1,n=a=0}h=1,r=o=l=c=u=d=0,f=D?-1/D:0,m=w.zOrigin,g=1e-6,(E=S*B)&&(v=Math.cos(E),u=f*(l=-(y=Math.sin(E))),r=i*y,o=a*y,f*=h=v,i*=v,a*=v),(E=M*B)&&(t=n*(v=Math.cos(E))+r*(y=Math.sin(E)),_=s*v+o*y,c=h*y,d=f*y,r=n*-y+r*v,o=s*-y+o*v,h*=v,f*=v,n=t,s=_),1!==P&&(r*=P,o*=P,h*=P,f*=P),1!==A&&(n*=A,s*=A,c*=A,d*=A),1!==C&&(i*=C,a*=C,l*=C,u*=C),(m||I)&&(m&&(L+=r*-m,R+=o*-m,O+=h*-m+m),I&&(L+=w.xOrigin-(w.xOrigin*i+w.yOrigin*n)+w.xOffset,R+=w.yOrigin-(w.xOrigin*a+w.yOrigin*s)+w.yOffset),L<g&&-g<L&&(L="0"),R<g&&-g<R&&(R="0"),O<g&&-g<O&&(O=0)),x=w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix3d(":"matrix3d(",x+=(i<g&&-g<i?"0":i)+","+(a<g&&-g<a?"0":a)+","+(l<g&&-g<l?"0":l),x+=","+(u<g&&-g<u?"0":u)+","+(n<g&&-g<n?"0":n)+","+(s<g&&-g<s?"0":s),M||S||1!==P?(x+=","+(c<g&&-g<c?"0":c)+","+(d<g&&-g<d?"0":d)+","+(r<g&&-g<r?"0":r),x+=","+(o<g&&-g<o?"0":o)+","+(h<g&&-g<h?"0":h)+","+(f<g&&-g<f?"0":f)+","):x+=",0,0,0,0,1,0,",x+=L+","+R+","+O+","+(D?1+-O/D:1)+")",T[ke]=x}};(c=He.prototype).x=c.y=c.z=c.skewX=c.skewY=c.rotation=c.rotationX=c.rotationY=c.zOrigin=c.xPercent=c.yPercent=c.xOffset=c.yOffset=0,c.scaleX=c.scaleY=c.scaleZ=1,Ce("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,n,a,o,l){if(n._lastParsedTransform===l)return a;var c=(n._lastParsedTransform=l).scale&&"function"==typeof l.scale?l.scale:0;c&&(l.scale=c(v,e));var h,u,d,p,f,m,y,_,x,b=e._gsTransform,w=e.style,T=De.length,E=l,M={},S="transformOrigin",C=$e(e,r,!0,E.parseTransform),A=E.transform&&("function"==typeof E.transform?E.transform(v,g):E.transform);if(C.skewType=E.skewType||C.skewType||s.defaultSkewType,n._transform=C,"rotationZ"in E&&(E.rotation=E.rotationZ),A&&"string"==typeof A&&ke)(u=j.style)[ke]=A,u.display="block",u.position="absolute",-1!==A.indexOf("%")&&(u.width=ie(e,"width"),u.height=ie(e,"height")),G.body.appendChild(j),h=$e(j,null,!1),"simple"===C.skewType&&(h.scaleY*=Math.cos(h.skewX*B)),C.svg&&(m=C.xOrigin,y=C.yOrigin,h.x-=C.xOffset,h.y-=C.yOffset,(E.transformOrigin||E.svgOrigin)&&(A={},je(e,he(E.transformOrigin),A,E.svgOrigin,E.smoothOrigin,!0),m=A.xOrigin,y=A.yOrigin,h.x-=A.xOffset-C.xOffset,h.y-=A.yOffset-C.yOffset),(m||y)&&(_=qe(j,!0),h.x-=m-(m*_[0]+y*_[2]),h.y-=y-(m*_[1]+y*_[3]))),G.body.removeChild(j),h.perspective||(h.perspective=C.perspective),null!=E.xPercent&&(h.xPercent=de(E.xPercent,C.xPercent)),null!=E.yPercent&&(h.yPercent=de(E.yPercent,C.yPercent));else if("object"==typeof E){if(h={scaleX:de(null!=E.scaleX?E.scaleX:E.scale,C.scaleX),scaleY:de(null!=E.scaleY?E.scaleY:E.scale,C.scaleY),scaleZ:de(E.scaleZ,C.scaleZ),x:de(E.x,C.x),y:de(E.y,C.y),z:de(E.z,C.z),xPercent:de(E.xPercent,C.xPercent),yPercent:de(E.yPercent,C.yPercent),perspective:de(E.transformPerspective,C.perspective)},null!=(f=E.directionalRotation))if("object"==typeof f)for(u in f)E[u]=f[u];else E.rotation=f;"string"==typeof E.x&&-1!==E.x.indexOf("%")&&(h.x=0,h.xPercent=de(E.x,C.xPercent)),"string"==typeof E.y&&-1!==E.y.indexOf("%")&&(h.y=0,h.yPercent=de(E.y,C.yPercent)),h.rotation=pe("rotation"in E?E.rotation:"shortRotation"in E?E.shortRotation+"_short":C.rotation,C.rotation,"rotation",M),Be&&(h.rotationX=pe("rotationX"in E?E.rotationX:"shortRotationX"in E?E.shortRotationX+"_short":C.rotationX||0,C.rotationX,"rotationX",M),h.rotationY=pe("rotationY"in E?E.rotationY:"shortRotationY"in E?E.shortRotationY+"_short":C.rotationY||0,C.rotationY,"rotationY",M)),h.skewX=pe(E.skewX,C.skewX),h.skewY=pe(E.skewY,C.skewY)}for(Be&&null!=E.force3D&&(C.force3D=E.force3D,p=!0),(d=C.force3D||C.z||C.rotationX||C.rotationY||h.z||h.rotationX||h.rotationY||h.perspective)||null==E.scale||(h.scaleZ=1);-1<--T;)(1e-6<(A=h[x=De[T]]-C[x])||A<-1e-6||null!=E[x]||null!=F[x])&&(p=!0,a=new we(C,x,C[x],A,a),x in M&&(a.e=M[x]),a.xs0=0,a.plugin=o,n._overwriteProps.push(a.n));return A="function"==typeof E.transformOrigin?E.transformOrigin(v,g):E.transformOrigin,C.svg&&(A||E.svgOrigin)&&(m=C.xOffset,y=C.yOffset,je(e,he(A),h,E.svgOrigin,E.smoothOrigin),a=Te(C,"xOrigin",(b?C:h).xOrigin,h.xOrigin,a,S),a=Te(C,"yOrigin",(b?C:h).yOrigin,h.yOrigin,a,S),(m!==C.xOffset||y!==C.yOffset)&&(a=Te(C,"xOffset",b?m:C.xOffset,C.xOffset,a,S),a=Te(C,"yOffset",b?y:C.yOffset,C.yOffset,a,S)),A="0px 0px"),(A||Be&&d&&C.zOrigin)&&(ke?(p=!0,x=ze,A||(A=(A=(ie(e,x,r,!1,"50% 50%")+"").split(" "))[0]+" "+A[1]+" "+C.zOrigin+"px"),A+="",(a=new we(w,x,0,0,a,-1,S)).b=w[x],a.plugin=o,a.xs0=a.e=Be?(u=C.zOrigin,A=A.split(" "),C.zOrigin=(2<A.length?parseFloat(A[2]):u)||0,a.xs0=a.e=A[0]+" "+(A[1]||"50%")+" 0px",(a=new we(C,"zOrigin",0,0,a,-1,a.n)).b=u,C.zOrigin):A):he(A+"",C)),p&&(n._transformType=C.svg&&Pe||!d&&3!==this._transformType?2:3),c&&(l.scale=c),a},allowFunc:!0,prefix:!0}),Ce("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Ce("clipPath",{defaultValue:"inset(0px)",prefix:!0,multi:!0,formatter:_e("inset(0px 0px 0px 0px)",!1,!0)}),Ce("borderRadius",{defaultValue:"0px",parser:function(e,t,i,a,s,o){t=this.format(t);var l,c,h,u,d,p,f,m,g,v,y,_,x,b,w,T,E=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],M=e.style;for(g=parseFloat(e.offsetWidth),v=parseFloat(e.offsetHeight),l=t.split(" "),c=0;c<E.length;c++)this.p.indexOf("border")&&(E[c]=Q(E[c])),-1!==(d=u=ie(e,E[c],r,!1,"0px")).indexOf(" ")&&(d=(u=d.split(" "))[0],u=u[1]),p=h=l[c],f=parseFloat(d),_=d.substr((f+"").length),""===(y=(x="="===p.charAt(1))?(m=parseInt(p.charAt(0)+"1",10),p=p.substr(2),m*=parseFloat(p),p.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(p),p.substr((m+"").length)))&&(y=n[i]||_),y!==_&&(b=ne(e,"borderLeft",f,_),w=ne(e,"borderTop",f,_),u="%"===y?(d=b/g*100+"%",w/v*100+"%"):"em"===y?(d=b/(T=ne(e,"borderLeft",1,"em"))+"em",w/T+"em"):(d=b+"px",w+"px"),x&&(p=parseFloat(d)+m+y,h=parseFloat(u)+m+y)),s=Ee(M,E[c],d+" "+u,p+" "+h,!1,"0px",s);return s},prefix:!0,formatter:_e("0px 0px 0px 0px",!1,!0)}),Ce("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,n,a,s){return Ee(e.style,i,this.format(ie(e,i,r,!1,"0px 0px")),this.format(t),!1,"0px",a)},prefix:!0,formatter:_e("0px 0px",!1,!0)}),Ce("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,n,a,s){var o,l,c,h,u,d,p="background-position",f=r||te(e),g=this.format((f?m?f.getPropertyValue(p+"-x")+" "+f.getPropertyValue(p+"-y"):f.getPropertyValue(p):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),v=this.format(t);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&v.split(",").length<2&&(d=ie(e,"backgroundImage").replace(R,""))&&"none"!==d){for(o=g.split(" "),l=v.split(" "),W.setAttribute("src",d),c=2;-1<--c;)(h=-1!==(g=o[c]).indexOf("%"))!=(-1!==l[c].indexOf("%"))&&(u=0===c?e.offsetWidth-W.width:e.offsetHeight-W.height,o[c]=h?parseFloat(g)/100*u+"px":parseFloat(g)/u*100+"%");g=o.join(" ")}return this.parseComplex(e.style,g,v,a,s)},formatter:he}),Ce("backgroundSize",{defaultValue:"0 0",formatter:function(e){return"co"===(e+="").substr(0,2)?e:he(-1===e.indexOf(" ")?e+" "+e:e)}}),Ce("perspective",{defaultValue:"0px",prefix:!0}),Ce("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Ce("transformStyle",{prefix:!0}),Ce("backfaceVisibility",{prefix:!0}),Ce("userSelect",{prefix:!0}),Ce("margin",{parser:xe("marginTop,marginRight,marginBottom,marginLeft")}),Ce("padding",{parser:xe("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Ce("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,n,a,s){var o,l,c;return t=m<9?(l=e.currentStyle,c=m<8?" ":",",o="rect("+l.clipTop+c+l.clipRight+c+l.clipBottom+c+l.clipLeft+")",this.format(t).split(",").join(c)):(o=this.format(ie(e,this.p,r,!1,this.dflt)),this.format(t)),this.parseComplex(e.style,o,t,a,s)}}),Ce("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Ce("autoRound,strictUnits",{parser:function(e,t,i,n,r){return r}}),Ce("border",{defaultValue:"0px solid #000",parser:function(e,t,i,n,a,s){var o=ie(e,"borderTopWidth",r,!1,"0px"),l=this.format(t).split(" "),c=l[0].replace(E,"");return"px"!==c&&(o=parseFloat(o)/ne(e,"borderTopWidth",1,c)+c),this.parseComplex(e.style,this.format(o+" "+ie(e,"borderTopStyle",r,!1,"solid")+" "+ie(e,"borderTopColor",r,!1,"#000")),l.join(" "),a,s)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ye)||["#000"])[0]}}),Ce("borderWidth",{parser:xe("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Ce("float,cssFloat,styleFloat",{parser:function(e,t,i,n,r,a){var s=e.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new we(s,o,0,0,r,-1,i,!1,0,s[o],t)}});var Ke=function(e){var t,i=this.t,n=i.filter||ie(this.data,"filter")||"",r=this.s+this.c*e|0;100===r&&(t=-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),!ie(this.data,"filter")):(i.filter=n.replace(C,""),!0)),t||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(M,"opacity="+r))};Ce("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,n,a,s){var o=parseFloat(ie(e,"opacity",r,!1,"1")),l=e.style,c="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+o),c&&1===o&&"hidden"===ie(e,"visibility",r)&&0!==t&&(o=0),q?a=new we(l,"opacity",o,t-o,a):((a=new we(l,"opacity",100*o,100*(t-o),a)).xn1=c?1:0,l.zoom=1,a.type=2,a.b="alpha(opacity="+a.s+")",a.e="alpha(opacity="+(a.s+a.c)+")",a.data=e,a.plugin=s,a.setRatio=Ke),c&&((a=new we(l,"visibility",0,0,a,-1,null,!1,0,0!==o?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",n._overwriteProps.push(a.n),n._overwriteProps.push(i)),a}});var Qe=function(e,t){t&&(e.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),e.removeProperty(t.replace(P,"-$1").toLowerCase())):e.removeAttribute(t))},et=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,i=this.t.style;t;)t.v?i[t.p]=t.v:Qe(i,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Ce("className",{parser:function(e,t,n,a,s,o,l){var c,h,u,d,p,f=e.getAttribute("class")||"",m=e.style.cssText;if((s=a._classNamePT=new we(e,n,0,0,s,2)).setRatio=et,s.pr=-11,i=!0,s.b=f,h=ae(e,r),u=e._gsClassPT){for(d={},p=u.data;p;)d[p.p]=1,p=p._next;u.setRatio(1)}return(e._gsClassPT=s).e="="!==t.charAt(1)?t:f.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",s.e),c=se(e,h,ae(e),l,d),e.setAttribute("class",f),s.data=c.firstMPT,e.style.cssText=m,s.xfirst=a.parse(e,c.difs,s,o)}});var tt=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,i,n,r,a,s=this.t.style,o=l.transform.parse;if("all"===this.e)r=!(s.cssText="");else for(n=(t=this.e.split(" ").join("").split(",")).length;-1<--n;)i=t[n],l[i]&&(l[i].parse===o?r=!0:i="transformOrigin"===i?ze:l[i].p),Qe(s,i);r&&(Qe(s,ke),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Ce("clearProps",{parser:function(e,t,n,r,a){return(a=new we(e,n,0,0,a,2)).setRatio=tt,a.e=t,a.pr=-10,a.data=r._tween,i=!0,a}}),c="bezier,throwProps,physicsProps,physics2D".split(","),Me=c.length;Me--;)Ae(c[Me]);(c=s.prototype)._firstPT=c._lastParsedTransform=c._transform=null,c._onInitTween=function(e,t,o,c){if(!e.nodeType)return!1;this._target=g=e,this._tween=o,this._vars=t,v=c,h=t.autoRound,i=!1,n=t.suffixMap||s.suffixMap,r=te(e),a=this._overwriteProps;var p,m,y,_,x,b,w,T,E,M=e.style;if(u&&""===M.zIndex&&("auto"===(p=ie(e,"zIndex",r))||""===p)&&this._addLazySet(M,"zIndex",0),"string"==typeof t&&(_=M.cssText,p=ae(e,r),M.cssText=_+";"+t,p=se(e,p,ae(e)).difs,!q&&S.test(t)&&(p.opacity=parseFloat(RegExp.$1)),t=p,M.cssText=_),t.className?this._firstPT=m=l.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=m=this.parse(e,t,null),this._transformType){for(E=3===this._transformType,ke?d&&(u=!0,""===M.zIndex&&("auto"===(w=ie(e,"zIndex",r))||""===w)&&this._addLazySet(M,"zIndex",0),f&&this._addLazySet(M,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(E?"visible":"hidden"))):M.zoom=1,y=m;y&&y._next;)y=y._next;T=new we(e,"transform",0,0,null,2),this._linkCSSP(T,null,y),T.setRatio=ke?Je:Ze,T.data=this._transform||$e(e,r,!0),T.tween=o,T.pr=-1,a.pop()}if(i){for(;m;){for(b=m._next,y=_;y&&y.pr>m.pr;)y=y._next;(m._prev=y?y._prev:x)?m._prev._next=m:_=m,(m._next=y)?y._prev=m:x=m,m=b}this._firstPT=_}return!0},c.parse=function(e,t,i,a){var s,o,c,u,d,p,f,m,y,_,x=e.style;for(s in t){if(p=t[s],o=l[s],"function"!=typeof p||o&&o.allowFunc||(p=p(v,g)),o)i=o.parse(e,p,s,this,i,a,t);else{if("--"===s.substr(0,2)){this._tween._propLookup[s]=this._addTween.call(this._tween,e.style,"setProperty",te(e).getPropertyValue(s)+"",p+"",s,!1,s);continue}d=ie(e,s,r)+"",y="string"==typeof p,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||y&&A.test(p)?(y||(p=(3<(p=ge(p)).length?"rgba(":"rgb(")+p.join(",")+")"),i=Ee(x,s,d,p,!0,"transparent",i,0,a)):y&&z.test(p)?i=Ee(x,s,d,p,!0,null,i,0,a):(f=(c=parseFloat(d))||0===c?d.substr((c+"").length):"",(""===d||"auto"===d)&&(f="width"===s||"height"===s?(c=ce(e,s,r),"px"):"left"===s||"top"===s?(c=re(e,s,r),"px"):(c="opacity"!==s?0:1,"")),""===(m=(_=y&&"="===p.charAt(1))?(u=parseInt(p.charAt(0)+"1",10),p=p.substr(2),u*=parseFloat(p),p.replace(E,"")):(u=parseFloat(p),y?p.replace(E,""):""))&&(m=s in n?n[s]:f),p=u||0===u?(_?u+c:u)+m:t[s],f!==m&&(""!==m||"lineHeight"===s)&&(u||0===u)&&c&&(c=ne(e,s,c,f),"%"===m?(c/=ne(e,s,100,"%")/100,!0!==t.strictUnits&&(d=c+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?c/=ne(e,s,1,m):"px"!==m&&(u=ne(e,s,u,m),m="px"),_&&(u||0===u)&&(p=u+c+m)),_&&(u+=c),!c&&0!==c||!u&&0!==u?void 0!==x[s]&&(p||p+""!="NaN"&&null!=p)?(i=new we(x,s,u||c||0,0,i,-1,s,!1,0,d,p)).xs0="none"!==p||"display"!==s&&-1===s.indexOf("Style")?p:d:Z("invalid "+s+" tween value: "+t[s]):(i=new we(x,s,c,u-c,i,0,s,!1!==h&&("px"===m||"zIndex"===s),0,d,p)).xs0=m)}a&&i&&!i.plugin&&(i.plugin=a)}return i},c.setRatio=function(e){var t,i,n,r=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(t=r.c*e+r.s,r.r?t=r.r(t):t<1e-6&&-1e-6<t&&(t=0),r.type)if(1===r.type)if(2===(n=r.l))r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+t+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(e);else r.t[r.p]=t+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(e),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(t=r.r(r.s+r.c),r.type){if(1===r.type){for(n=r.l,i=r.xs0+t+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}}else r.t[r.p]=t+r.xs0;else r.t[r.p]=r.e;else r.setRatio(e);r=r._next}},c._enableTransforms=function(e){this._transform=this._transform||$e(this._target,r,!0),this._transformType=this._transform.svg&&Pe||!e&&3!==this._transformType?2:3};var it=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};c._addLazySet=function(e,t,i){var n=this._firstPT=new we(e,t,0,0,this._firstPT,2);n.e=i,n.setRatio=it,n.data=this},c._linkCSSP=function(e,t,i,n){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,n=!0),i?i._next=e:n||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=i),e},c._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&(t.r=e[t.p]),t=t._next},c._kill=function(t){var i,n,r,a=t;if(t.autoAlpha||t.alpha){for(n in a={},t)a[n]=t[n];a.opacity=1,a.autoAlpha&&(a.visibility=1)}for(t.className&&(i=this._classNamePT)&&((r=i.xfirst)&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==n&&i.plugin._kill&&(i.plugin._kill(t),n=i.plugin),i=i._next;return e.prototype._kill.call(this,a)};var nt=function(e,t,i){var n,r,a,s;if(e.slice)for(r=e.length;-1<--r;)nt(e[r],t,i);else for(r=(n=e.childNodes).length;-1<--r;)s=(a=n[r]).type,a.style&&(t.push(ae(a)),i&&i.push(a)),1!==s&&9!==s&&11!==s||!a.childNodes.length||nt(a,t,i)};return s.cascadeTo=function(e,i,n){var r,a,s,o,l=t.to(e,i,n),c=[l],h=[],u=[],d=[],p=t._internals.reservedProps;for(e=l._targets||l.target,nt(e,h,d),l.render(i,!0,!0),nt(e,u),l.render(0,!0,!0),l._enabled(!0),r=d.length;-1<--r;)if((a=se(d[r],h[r],u[r])).firstMPT){for(s in a=a.difs,n)p[s]&&(a[s]=n[s]);for(s in o={},a)o[s]=h[r][s];c.push(t.fromTo(d[r],i,o,a))}return c},e.activate([s]),s},!0),e=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(e,t,i){return this._tween=i,!0}}),t=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(i){return(Math.round(i/e)*e*t|0)/t}},i=function(e,t){for(;e;)e.f||e.blob||(e.m=t||Math.round),e=e._next},(n=e.prototype)._onInitAllProps=function(){var e,n,r,a,s=this._tween,o=s.vars.roundProps,l={},c=s._propLookup.roundProps;if("object"!=typeof o||o.push)for("string"==typeof o&&(o=o.split(",")),r=o.length;-1<--r;)l[o[r]]=Math.round;else for(a in o)l[a]=t(o[a]);for(a in l)for(e=s._firstPT;e;)n=e._next,e.pg?e.t._mod(l):e.n===a&&(2===e.f&&e.t?i(e.t._firstPT,l[a]):(this._add(e.t,a,e.s,e.c,l[a]),n&&(n._prev=e._prev),e._prev?e._prev._next=n:s._firstPT===e&&(s._firstPT=n),e._next=e._prev=null,s._propLookup[a]=c)),e=n;return!1},n._add=function(e,t,i,n,r){this._addTween(e,t,i,i+n,t,r||Math.round),this._overwriteProps.push(t)},_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,i,n){var r,a;if("function"!=typeof e.setAttribute)return!1;for(r in t)"function"==typeof(a=t[r])&&(a=a(n,e)),this._addTween(e,"setAttribute",e.getAttribute(r)+"",a+"",r,!1,r),this._overwriteProps.push(r);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,i,n){"object"!=typeof t&&(t={rotation:t}),this.finals={};var r,a,s,o,l,c,h=!0===t.useRadians?2*Math.PI:360;for(r in t)"useRadians"!==r&&("function"==typeof(o=t[r])&&(o=o(n,e)),a=(c=(o+"").split("_"))[0],s=parseFloat("function"!=typeof e[r]?e[r]:e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]()),l=(o=this.finals[r]="string"==typeof a&&"="===a.charAt(1)?s+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-s,c.length&&(-1!==(a=c.join("_")).indexOf("short")&&(l%=h)!=l%(h/2)&&(l=l<0?l+h:l-h),-1!==a.indexOf("_cw")&&l<0?l=(l+9999999999*h)%h-(l/h|0)*h:-1!==a.indexOf("ccw")&&0<l&&(l=(l-9999999999*h)%h-(l/h|0)*h)),(1e-6<l||l<-1e-6)&&(this._addTween(e,r,s,s+l,r),this._overwriteProps.push(r)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(e){var t,i,n,r,a=_gsScope.GreenSockGlobals||_gsScope,s=a.com.greensock,o=2*Math.PI,l=Math.PI/2,c=s._class,h=function(t,i){var n=c("easing."+t,function(){},!0),r=n.prototype=new e;return r.constructor=n,r.getRatio=i,n},u=e.register||function(){},d=function(e,t,i,n,r){var a=c("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new n},!0);return u(a,e),a},p=function(e,t,i){this.t=e,this.v=t,i&&(((this.next=i).prev=this).c=i.v-t,this.gap=i.t-e)},f=function(t,i){var n=c("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),r=n.prototype=new e;return r.constructor=n,r.getRatio=i,r.config=function(e){return new n(e)},n},m=d("Back",f("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),f("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),f("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),g=c("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:1<e&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),v=g.prototype=new e;return v.constructor=g,v.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1===e?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},g.ease=new g(.7,.7),v.config=g.config=function(e,t,i){return new g(e,t,i)},(v=(t=c("easing.SteppedEase",function(e,t){e=e||1,this._p1=1/e,this._p2=e+(t?0:1),this._p3=t?1:0},!0)).prototype=new e).constructor=t,v.getRatio=function(e){return e<0?e=0:1<=e&&(e=.999999999),((this._p2*e|0)+this._p3)*this._p1},v.config=t.config=function(e,i){return new t(e,i)},(v=(i=c("easing.ExpoScaleEase",function(e,t,i){this._p1=Math.log(t/e),this._p2=t-e,this._p3=e,this._ease=i},!0)).prototype=new e).constructor=i,v.getRatio=function(e){return this._ease&&(e=this._ease.getRatio(e)),(this._p3*Math.exp(this._p1*e)-this._p3)/this._p2},v.config=i.config=function(e,t,n){return new i(e,t,n)},(v=(n=c("easing.RoughEase",function(t){for(var i,n,r,a,s,o,l=(t=t||{}).taper||"none",c=[],h=0,u=0|(t.points||20),d=u,f=!1!==t.randomize,m=!0===t.clamp,g=t.template instanceof e?t.template:null,v="number"==typeof t.strength?.4*t.strength:.4;-1<--d;)i=f?Math.random():1/u*d,n=g?g.getRatio(i):i,r="none"===l?v:"out"===l?(a=1-i)*a*v:"in"===l?i*i*v:(a=i<.5?2*i:2*(1-i))*a*.5*v,f?n+=Math.random()*r-.5*r:d%2?n+=.5*r:n-=.5*r,m&&(1<n?n=1:n<0&&(n=0)),c[h++]={x:i,y:n};for(c.sort(function(e,t){return e.x-t.x}),o=new p(1,1,null),d=u;-1<--d;)s=c[d],o=new p(s.x,s.y,o);this._prev=new p(0,0,0!==o.t?o:o.next)},!0)).prototype=new e).constructor=n,v.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return(this._prev=t).v+(e-t.t)/t.gap*t.c},v.config=function(e){return new n(e)},n.ease=new n,d("Bounce",h("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),h("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),h("BounceInOut",function(e){var t=e<.5;return e=(e=t?1-2*e:2*e-1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),d("Circ",h("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),h("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),h("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),d("Elastic",(r=function(t,i,n){var r=c("easing."+t,function(e,t){this._p1=1<=e?e:1,this._p2=(t||n)/(e<1?e:1),this._p3=this._p2/o*(Math.asin(1/this._p1)||0),this._p2=o/this._p2},!0),a=r.prototype=new e;return a.constructor=r,a.getRatio=i,a.config=function(e,t){return new r(e,t)},r})("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),r("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),r("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),d("Expo",h("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),h("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),h("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),d("Sine",h("SineOut",function(e){return Math.sin(e*l)}),h("SineIn",function(e){return 1-Math.cos(e*l)}),h("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),c("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),u(a.SlowMo,"SlowMo","ease,"),u(n,"RoughEase","ease,"),u(t,"SteppedEase","ease,"),m},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e,t){"use strict";var i={},n=e.document,r=e.GreenSockGlobals=e.GreenSockGlobals||e,a=r[t];if(a)return"undefined"!=typeof module&&module.exports&&(module.exports=a);var s,o,l,c,h,u,d,p=function(e){var t,i=e.split("."),n=r;for(t=0;t<i.length;t++)n[i[t]]=n=n[i[t]]||{};return n},f=p("com.greensock"),m=1e-8,g=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},v=function(){},y=(u=Object.prototype.toString,d=u.call([]),function(e){return null!=e&&(e instanceof Array||"object"==typeof e&&!!e.push&&u.call(e)===d)}),_={},x=function(n,a,s,o){this.sc=_[n]?_[n].sc:[],(_[n]=this).gsClass=null,this.func=s;var l=[];this.check=function(c){for(var h,u,d,f,m=a.length,g=m;-1<--m;)(h=_[a[m]]||new x(a[m],[])).gsClass?(l[m]=h.gsClass,g--):c&&h.sc.push(this);if(0===g&&s){if(d=(u=("com.greensock."+n).split(".")).pop(),f=p(u.join("."))[d]=this.gsClass=s.apply(s,l),o)if(r[d]=i[d]=f,"undefined"!=typeof module&&module.exports)if(n===t)for(m in module.exports=i[t]=f,i)f[m]=i[m];else i[t]&&(i[t][d]=f);else"function"==typeof define&&define.amd&&define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+n.split(".").pop(),[],function(){return f});for(m=0;m<this.sc.length;m++)this.sc[m].check()}},this.check(!0)},b=e._gsDefine=function(e,t,i,n){return new x(e,t,i,n)},w=f._class=function(e,t,i){return t=t||function(){},b(e,[],function(){return t},i),t};b.globals=r;var T=[0,0,1,1],E=w("easing.Ease",function(e,t,i,n){this._func=e,this._type=i||0,this._power=n||0,this._params=t?T.concat(t):T},!0),M=E.map={},S=E.register=function(e,t,i,n){for(var r,a,s,o,l=t.split(","),c=l.length,h=(i||"easeIn,easeOut,easeInOut").split(",");-1<--c;)for(a=l[c],r=n?w("easing."+a,null,!0):f.easing[a]||{},s=h.length;-1<--s;)o=h[s],M[a+"."+o]=M[o+a]=r[o]=e.getRatio?e:e[o]||new e};for((l=E.prototype)._calcEnd=!1,l.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,n=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===t?1-n:2===t?n:e<.5?n/2:1-n/2},o=(s=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;-1<--o;)l=s[o]+",Power"+o,S(new E(null,null,1,o),l,"easeOut",!0),S(new E(null,null,2,o),l,"easeIn"+(0===o?",easeNone":"")),S(new E(null,null,3,o),l,"easeInOut");M.linear=f.easing.Linear.easeIn,M.swing=f.easing.Quad.easeInOut;var C=w("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(l=C.prototype).addEventListener=function(e,t,i,n,r){r=r||0;var a,s,o=this._listeners[e],l=0;for(this!==c||h||c.wake(),null==o&&(this._listeners[e]=o=[]),s=o.length;-1<--s;)(a=o[s]).c===t&&a.s===i?o.splice(s,1):0===l&&a.pr<r&&(l=s+1);o.splice(l,0,{c:t,s:i,up:n,pr:r})},l.removeEventListener=function(e,t){var i,n=this._listeners[e];if(n)for(i=n.length;-1<--i;)if(n[i].c===t)return void n.splice(i,1)},l.dispatchEvent=function(e){var t,i,n,r=this._listeners[e];if(r)for(1<(t=r.length)&&(r=r.slice(0)),i=this._eventTarget;-1<--t;)(n=r[t])&&(n.up?n.c.call(n.s||i,{type:e,target:i}):n.c.call(n.s||i))};var A=e.requestAnimationFrame,P=e.cancelAnimationFrame,L=Date.now||function(){return(new Date).getTime()},R=L();for(o=(s=["ms","moz","webkit","o"]).length;-1<--o&&!A;)A=e[s[o]+"RequestAnimationFrame"],P=e[s[o]+"CancelAnimationFrame"]||e[s[o]+"CancelRequestAnimationFrame"];w("Ticker",function(e,t){var i,r,a,s,o,l=this,u=L(),d=!(!1===t||!A)&&"auto",p=500,f=33,m=function(e){var t,n,c=L()-R;p<c&&(u+=c-f),R+=c,l.time=(R-u)/1e3,t=l.time-o,(!i||0<t||!0===e)&&(l.frame++,o+=t+(s<=t?.004:s-t),n=!0),!0!==e&&(a=r(m)),n&&l.dispatchEvent("tick")};C.call(l),l.time=l.frame=0,l.tick=function(){m(!0)},l.lagSmoothing=function(e,t){return arguments.length?(p=e||1e8,void(f=Math.min(t,p,0))):p<1e8},l.sleep=function(){null!=a&&(d&&P?P(a):clearTimeout(a),r=v,a=null,l===c&&(h=!1))},l.wake=function(e){null!==a?l.sleep():e?u+=-R+(R=L()):10<l.frame&&(R=L()-p+5),r=0===i?v:d&&A?A:function(e){return setTimeout(e,1e3*(o-l.time)+1|0)},l===c&&(h=!0),m(2)},l.fps=function(e){return arguments.length?(s=1/((i=e)||60),o=this.time+s,void l.wake()):i},l.useRAF=function(e){return arguments.length?(l.sleep(),d=e,void l.fps(i)):d},l.fps(e),setTimeout(function(){"auto"===d&&l.frame<5&&"hidden"!==(n||{}).visibilityState&&l.useRAF(!1)},1500)}),(l=f.Ticker.prototype=new f.events.EventDispatcher).constructor=f.Ticker;var O=w("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!!t.immediateRender,this.data=t.data,this._reversed=!!t.reversed,K){h||c.wake();var i=this.vars.useFrames?J:K;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});c=O.ticker=new f.Ticker,(l=O.prototype)._dirty=l._gc=l._initted=l._paused=!1,l._totalTime=l._time=0,l._rawPrevTime=-1,l._next=l._last=l._onUpdate=l._timeline=l.timeline=null,l._paused=!1;var I=function(){h&&2e3<L()-R&&("hidden"!==(n||{}).visibilityState||!c.lagSmoothing())&&c.wake();var e=setTimeout(I,2e3);e.unref&&e.unref()};I(),l.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},l.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},l.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},l.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},l.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},l.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},l.render=function(e,t,i){},l.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},l.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<i+this.totalDuration()/this._timeScale-m},l._enabled=function(e,t){return h||c.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},l._kill=function(e,t){return this._enabled(!1,!1)},l.kill=function(e,t){return this._kill(e,t),this},l._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},l._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();-1<--t;)"{self}"===e[t]&&(i[t]=this);return i},l._callback=function(e){var t=this.vars,i=t[e],n=t[e+"Params"],r=t[e+"Scope"]||t.callbackScope||this;switch(n?n.length:0){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},l.eventCallback=function(e,t,i,n){if("on"===(e||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[e];null==t?delete r[e]:(r[e]=t,r[e+"Params"]=y(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[e+"Scope"]=n),"onUpdate"===e&&(this._onUpdate=t)}return this},l.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},l.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},l.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},l.totalTime=function(e,t,i){if(h||c.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(n<e&&!i&&(e=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-e:e)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(z.length&&ee(),this.render(e,t,!1),z.length&&ee())}return this},l.progress=l.totalProgress=function(e,t){var i=this.duration();return arguments.length?this.totalTime(i*e,t):i?this._time/i:this.ratio},l.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},l.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},l.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,i;for(e=e||m,this._timeline&&this._timeline.smoothChildTiming&&(i=(t=this._pauseTime)||0===t?t:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/e),this._timeScale=e,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},l.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},l.paused=function(e){if(!arguments.length)return this._paused;var t,i,n=this._timeline;return e!=this._paused&&n&&(h||e||c.wake(),i=(t=n.rawTime())-this._pauseTime,!e&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==i&&this._initted&&this.duration()&&(t=n.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var D=w("core.SimpleTimeline",function(e){O.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(l=D.prototype=new O).constructor=D,l.kill()._gc=!1,l._first=l._last=l._recent=null,l._sortChildren=!1,l.add=l.insert=function(e,t,i,n){var r,a;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime)),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),r=this._last,this._sortChildren)for(a=e._startTime;r&&r._startTime>a;)r=r._prev;return r?(e._next=r._next,r._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=r,this._recent=e,this._timeline&&this._uncache(!0),this},l._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},l.render=function(e,t,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;r;)n=r._next,(r._active||e>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=n},l.rawTime=function(){return h||c.wake(),this._totalTime};var k=w("TweenLite",function(t,i,n){if(O.call(this,i,n),this.render=k.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:k.selector(t)||t;var r,a,s,o=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?Z[k.defaultOverwrite]:"number"==typeof l?l>>0:Z[l],(o||t instanceof Array||t.push&&y(t))&&"number"!=typeof t[0])for(this._targets=s=g(t),this._propLookup=[],this._siblings=[],r=0;r<s.length;r++)(a=s[r])?"string"!=typeof a?a.length&&a!==e&&a[0]&&(a[0]===e||a[0].nodeType&&a[0].style&&!a.nodeType)?(s.splice(r--,1),this._targets=s=s.concat(g(a))):(this._siblings[r]=te(a,this,!1),1===l&&1<this._siblings[r].length&&ne(a,this,null,1,this._siblings[r])):"string"==typeof(a=s[r--]=k.selector(a))&&s.splice(r+1,1):s.splice(r--,1);else this._propLookup={},this._siblings=te(t,this,!1),1===l&&1<this._siblings.length&&ne(t,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-m,this.render(Math.min(0,-this._delay)))},!0),N=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)};(l=k.prototype=new O).constructor=k,l.kill()._gc=!1,l.ratio=0,l._firstPT=l._targets=l._overwrittenProps=l._startAt=null,l._notifyPluginsOfEnabled=l._lazy=!1,k.version="2.1.2",k.defaultEase=l._ease=new E(null,null,1,1),k.defaultOverwrite="auto",k.ticker=c,k.autoSleep=120,k.lagSmoothing=function(e,t){c.lagSmoothing(e,t)},k.selector=e.$||e.jQuery||function(t){var i=e.$||e.jQuery;return i?(k.selector=i)(t):(n||(n=e.document),n?n.querySelectorAll?n.querySelectorAll(t):n.getElementById("#"===t.charAt(0)?t.substr(1):t):t)};var z=[],B={},H=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,F=/[\+-]=-?[\.\d]/,U=function(e){for(var t,i=this._firstPT;i;)t=i.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:i.c*e+i.s,i.m?t=i.m.call(this._tween,t,this._target||i.t,this._tween):t<1e-6&&-1e-6<t&&!i.blob&&(t=0),i.f?i.fp?i.t[i.p](i.fp,t):i.t[i.p](t):i.t[i.p]=t,i=i._next},G=function(e){return(1e3*e|0)/1e3+""},V=function(e,t,i,n){var r,a,s,o,l,c,h,u=[],d=0,p="",f=0;for(u.start=e,u.end=t,e=u[0]=e+"",t=u[1]=t+"",i&&(i(u),e=u[0],t=u[1]),u.length=0,r=e.match(H)||[],a=t.match(H)||[],n&&(n._next=null,n.blob=1,u._firstPT=u._applyPT=n),l=a.length,o=0;o<l;o++)h=a[o],p+=(c=t.substr(d,t.indexOf(h,d)-d))||!o?c:",",d+=c.length,f?f=(f+1)%5:"rgba("===c.substr(-5)&&(f=1),h===r[o]||r.length<=o?p+=h:(p&&(u.push(p),p=""),s=parseFloat(r[o]),u.push(s),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:s,c:("="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*parseFloat(h.substr(2)):parseFloat(h)-s)||0,f:0,m:f&&f<4?Math.round:G}),d+=h.length;return(p+=t.substr(d))&&u.push(p),u.setRatio=U,F.test(t)&&(u.end=null),u},j=function(e,t,i,n,r,a,s,o,l){"function"==typeof n&&(n=n(l||0,e));var c=typeof e[t],h="function"!==c?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),u="get"!==i?i:h?s?e[h](s):e[h]():e[t],d="string"==typeof n&&"="===n.charAt(1),p={t:e,p:t,s:u,f:"function"===c,pg:0,n:r||t,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:d?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-u||0};return("number"!=typeof u||"number"!=typeof n&&!d)&&(s||isNaN(u)||!d&&isNaN(n)||"boolean"==typeof u||"boolean"==typeof n?(p.fp=s,p={t:V(u,d?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):n,o||k.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||t,pr:0,m:0}):(p.s=parseFloat(u),d||(p.c=parseFloat(n)-p.s||0))),p.c?((p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p):void 0},W=k._internals={isArray:y,isSelector:N,lazyTweens:z,blobDif:V},X=k._plugins={},Y=W.tweenLookup={},q=0,$=W.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},Z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},J=O._rootFramesTimeline=new D,K=O._rootTimeline=new D,Q=30,ee=W.lazyRender=function(){var e,t,i=z.length;for(B={},e=0;e<i;e++)(t=z[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);z.length=0};K._startTime=c.time,J._startTime=c.frame,K._active=J._active=!0,setTimeout(ee,1),O._updateRoot=k.render=function(){var e,t,i;if(z.length&&ee(),K.render((c.time-K._startTime)*K._timeScale,!1,!1),J.render((c.frame-J._startTime)*J._timeScale,!1,!1),z.length&&ee(),c.frame>=Q){for(i in Q=c.frame+(parseInt(k.autoSleep,10)||120),Y){for(e=(t=Y[i].tweens).length;-1<--e;)t[e]._gc&&t.splice(e,1);0===t.length&&delete Y[i]}if((!(i=K._first)||i._paused)&&k.autoSleep&&!J._first&&1===c._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||c.sleep()}}},c.addEventListener("tick",O._updateRoot);var te=function(e,t,i){var n,r,a=e._gsTweenID;if(Y[a||(e._gsTweenID=a="t"+q++)]||(Y[a]={target:e,tweens:[]}),t&&((n=Y[a].tweens)[r=n.length]=t,i))for(;-1<--r;)n[r]===t&&n.splice(r,1);return Y[a].tweens},ie=function(e,t,i,n){var r,a,s=e.vars.onOverwrite;return s&&(r=s(e,t,i,n)),(s=k.onOverwrite)&&(a=s(e,t,i,n)),!1!==r&&!1!==a},ne=function(e,t,i,n,r){var a,s,o,l;if(1===n||4<=n){for(l=r.length,a=0;a<l;a++)if((o=r[a])!==t)o._gc||o._kill(null,e,t)&&(s=!0);else if(5===n)break;return s}var c,h=t._startTime+m,u=[],d=0,p=0===t._duration;for(a=r.length;-1<--a;)(o=r[a])===t||o._gc||o._paused||(o._timeline!==t._timeline?(c=c||re(t,0,p),0===re(o,c,p)&&(u[d++]=o)):o._startTime<=h&&o._startTime+o.totalDuration()/o._timeScale>h&&((p||!o._initted)&&h-o._startTime<=2e-8||(u[d++]=o)));for(a=d;-1<--a;)if(l=(o=u[a])._firstPT,2===n&&o._kill(i,e,t)&&(s=!0),2!==n||!o._firstPT&&o._initted&&l){if(2!==n&&!ie(o,t))continue;o._enabled(!1,!1)&&(s=!0)}return s},re=function(e,t,i){for(var n=e._timeline,r=n._timeScale,a=e._startTime;n._timeline;){if(a+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return t<(a/=r)?a-t:i&&a===t||!e._initted&&a-t<2e-8?m:(a+=e.totalDuration()/e._timeScale/r)>t+m?0:a-t-m};l._init=function(){var e,t,i,n,r,a,s=this.vars,o=this._overwrittenProps,l=this._duration,c=!!s.immediateRender,h=s.ease,u=this._startAt;if(s.startAt){for(n in u&&(u.render(-1,!0),u.kill()),r={},s.startAt)r[n]=s.startAt[n];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=c&&!1!==s.lazy,r.startAt=r.delay=null,r.onUpdate=s.onUpdate,r.onUpdateParams=s.onUpdateParams,r.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=k.to(this.target||{},0,r),c)if(0<this._time)this._startAt=null;else if(0!==l)return}else if(s.runBackwards&&0!==l)if(u)u.render(-1,!0),u.kill(),this._startAt=null;else{for(n in 0!==this._time&&(c=!1),i={},s)$[n]&&"autoCSS"!==n||(i[n]=s[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=c&&!1!==s.lazy,i.immediateRender=c,this._startAt=k.to(this.target,0,i),c){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=h=h?h instanceof E?h:"function"==typeof h?new E(h,s.easeParams):M[h]||k.defaultEase:k.defaultEase,s.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,e=0;e<a;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],o?o[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(t&&k._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},l._initProps=function(t,i,n,r,a){var s,o,l,c,h,u;if(null==t)return!1;for(s in B[t._gsTweenID]&&ee(),this.vars.css||t.style&&t!==e&&t.nodeType&&X.css&&!1!==this.vars.autoCSS&&function(e,t){var i,n={};for(i in e)$[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!X[i]||X[i]&&X[i]._autoCSS)||(n[i]=e[i],delete e[i]);e.css=n}(this.vars,t),this.vars)if(u=this.vars[s],$[s])u&&(u instanceof Array||u.push&&y(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[s]=u=this._swapSelfInParams(u,this));else if(X[s]&&(c=new X[s])._onInitTween(t,this.vars[s],this,a)){for(this._firstPT=h={_next:this._firstPT,t:c,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:c._priority,m:0},o=c._overwriteProps.length;-1<--o;)i[c._overwriteProps[o]]=this._firstPT;(c._priority||c._onInitAllProps)&&(l=!0),(c._onDisable||c._onEnable)&&(this._notifyPluginsOfEnabled=!0),h._next&&(h._next._prev=h)}else i[s]=j.call(this,t,s,"get",u,s,0,null,this.vars.stringFilter,a);return r&&this._kill(r,t)?this._initProps(t,i,n,r,a):1<this._overwrite&&this._firstPT&&1<n.length&&ne(t,this,i,this._overwrite,n)?(this._kill(i,t),this._initProps(t,i,n,r,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(B[t._gsTweenID]=!0),l)},l.render=function(e,t,i){var n,r,a,s,o=this,l=o._time,c=o._duration,h=o._rawPrevTime;if(c-m<=e&&0<=e)o._totalTime=o._time=c,o.ratio=o._ease._calcEnd?o._ease.getRatio(1):1,o._reversed||(n=!0,r="onComplete",i=i||o._timeline.autoRemoveChildren),0===c&&(o._initted||!o.vars.lazy||i)&&(o._startTime===o._timeline._duration&&(e=0),(h<0||e<=0&&-m<=e||h===m&&"isPause"!==o.data)&&h!==e&&(i=!0,m<h&&(r="onReverseComplete")),o._rawPrevTime=s=!t||e||h===e?e:m);else if(e<m)o._totalTime=o._time=0,o.ratio=o._ease._calcEnd?o._ease.getRatio(0):0,(0!==l||0===c&&0<h)&&(r="onReverseComplete",n=o._reversed),-m<e?e=0:e<0&&(o._active=!1,0===c&&(o._initted||!o.vars.lazy||i)&&(0<=h&&(h!==m||"isPause"!==o.data)&&(i=!0),o._rawPrevTime=s=!t||e||h===e?e:m)),(!o._initted||o._startAt&&o._startAt.progress())&&(i=!0);else if(o._totalTime=o._time=e,o._easeType){var u=e/c,d=o._easeType,p=o._easePower;(1===d||3===d&&.5<=u)&&(u=1-u),3===d&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),o.ratio=1===d?1-u:2===d?u:e/c<.5?u/2:1-u/2}else o.ratio=o._ease.getRatio(e/c);if(o._time!==l||i){if(!o._initted){if(o._init(),!o._initted||o._gc)return;if(!i&&o._firstPT&&(!1!==o.vars.lazy&&o._duration||o.vars.lazy&&!o._duration))return o._time=o._totalTime=l,o._rawPrevTime=h,z.push(o),void(o._lazy=[e,t]);o._time&&!n?o.ratio=o._ease.getRatio(o._time/c):n&&o._ease._calcEnd&&(o.ratio=o._ease.getRatio(0===o._time?0:1))}for(!1!==o._lazy&&(o._lazy=!1),o._active||!o._paused&&o._time!==l&&0<=e&&(o._active=!0),0===l&&(o._startAt&&(0<=e?o._startAt.render(e,!0,i):r||(r="_dummyGS")),o.vars.onStart&&(0!==o._time||0===c)&&(t||o._callback("onStart"))),a=o._firstPT;a;)a.f?a.t[a.p](a.c*o.ratio+a.s):a.t[a.p]=a.c*o.ratio+a.s,a=a._next;o._onUpdate&&(e<0&&o._startAt&&-1e-4!==e&&o._startAt.render(e,!0,i),t||(o._time!==l||n||i)&&o._callback("onUpdate")),r&&(!o._gc||i)&&(e<0&&o._startAt&&!o._onUpdate&&-1e-4!==e&&o._startAt.render(e,!0,i),n&&(o._timeline.autoRemoveChildren&&o._enabled(!1,!1),o._active=!1),!t&&o.vars[r]&&o._callback(r),0===c&&o._rawPrevTime===m&&s!==m&&(o._rawPrevTime=0))}},l._kill=function(e,t,i){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:k.selector(t)||t;var n,r,a,s,o,l,c,h,u,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,p=this._firstPT;if((y(t)||N(t))&&"number"!=typeof t[0])for(n=t.length;-1<--n;)this._kill(e,t[n],i)&&(l=!0);else{if(this._targets){for(n=this._targets.length;-1<--n;)if(t===this._targets[n]){o=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(o){if(c=e||o,h=e!==r&&"all"!==r&&e!==o&&("object"!=typeof e||!e._tempKill),i&&(k.onOverwrite||this.vars.onOverwrite)){for(a in c)o[a]&&(u||(u=[]),u.push(a));if((u||!e)&&!ie(this,i,t,u))return!1}for(a in c)(s=o[a])&&(d&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,l=!0),s.pg&&s.t._kill(c)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete o[a]),h&&(r[a]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return l},l.invalidate=function(){this._notifyPluginsOfEnabled&&k._onPluginEvent("_onDisable",this);var e=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],O.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-m,this.render(e,!1,!1!==this.vars.lazy)),this},l._enabled=function(e,t){if(h||c.wake(),e&&this._gc){var i,n=this._targets;if(n)for(i=n.length;-1<--i;)this._siblings[i]=te(n[i],this,!0);else this._siblings=te(this.target,this,!0)}return O.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&k._onPluginEvent(e?"_onEnable":"_onDisable",this)},k.to=function(e,t,i){return new k(e,t,i)},k.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new k(e,t,i)},k.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new k(e,t,n)},k.delayedCall=function(e,t,i,n,r){return new k(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},k.set=function(e,t){return new k(e,0,t)},k.getTweensOf=function(e,t){if(null==e)return[];var i,n,r,a;if(e="string"!=typeof e?e:k.selector(e)||e,(y(e)||N(e))&&"number"!=typeof e[0]){for(i=e.length,n=[];-1<--i;)n=n.concat(k.getTweensOf(e[i],t));for(i=n.length;-1<--i;)for(a=n[i],r=i;-1<--r;)a===n[r]&&n.splice(i,1)}else if(e._gsTweenID)for(i=(n=te(e).concat()).length;-1<--i;)(n[i]._gc||t&&!n[i].isActive())&&n.splice(i,1);return n||[]},k.killTweensOf=k.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var n=k.getTweensOf(e,t),r=n.length;-1<--r;)n[r]._kill(i,e)};var ae=w("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=ae.prototype},!0);if(l=ae.prototype,ae.version="1.19.0",ae.API=2,l._firstPT=null,l._addTween=j,l.setRatio=U,l._kill=function(e){var t,i=this._overwriteProps,n=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;-1<--t;)null!=e[i[t]]&&i.splice(t,1);for(;n;)null!=e[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},l._mod=l._roundProps=function(e){for(var t,i=this._firstPT;i;)(t=e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===i.f?i.t._applyPT.m=t:i.m=t),i=i._next},k._onPluginEvent=function(e,t){var i,n,r,a,s,o=t._firstPT;if("_onInitAllProps"===e){for(;o;){for(s=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:a)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:a=o,o=s}o=t._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[e]&&o.t[e]()&&(i=!0),o=o._next;return i},ae.activate=function(e){for(var t=e.length;-1<--t;)e[t].API===ae.API&&(X[(new e[t])._propName]=e[t]);return!0},b.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,n=e.priority||0,r=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=w("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){ae.call(this,i,n),this._overwriteProps=r||[]},!0===e.global),o=s.prototype=new ae(i);for(t in(o.constructor=s).API=e.API,a)"function"==typeof e[t]&&(o[a[t]]=e[t]);return s.version=e.version,ae.activate([s]),s},s=e._gsQueue){for(o=0;o<s.length;o++)s[o]();for(l in _)_[l].func||e.console.log("GSAP encountered missing dependency: "+l)}h=!1}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");