var _gsScope;((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("easing.CustomEase",["easing.Ease"],function(y){var m=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,_=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,x=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,g=/[cLlsS]/g,b="CustomEase only accepts Cubic Bezier data.",A=function(e,t,i,n,r,a,s,o,l,c,h){var u,d=(e+i)/2,p=(t+n)/2,f=(i+r)/2,m=(n+a)/2,g=(r+s)/2,v=(a+o)/2,y=(d+f)/2,_=(p+m)/2,x=(f+g)/2,b=(m+v)/2,w=(y+x)/2,T=(_+b)/2,E=s-e,M=o-t,S=Math.abs((i-s)*M-(n-o)*E),C=Math.abs((r-s)*M-(a-o)*E);return c||(c=[{x:e,y:t},{x:s,y:o}],h=1),c.splice(h||c.length-1,0,{x:w,y:T}),l*(E*E+M*M)<(S+C)*(S+C)&&(u=c.length,A(e,t,d,p,y,_,w,T,l,c,h),A(w,T,x,b,g,v,s,o,l,c,h+1+(c.length-u))),c},n=function(e){var t=this.lookup[e*this.l|0]||this.lookup[this.l-1];return t.nx<e&&(t=t.n),t.y+(e-t.x)/t.cx*t.cy},r=function(e,t,i){this._calcEnd=!0,(this.id=e)&&(y.map[e]=this),this.getRatio=n,this.setData(t,i)},e=r.prototype=new y;return e.constructor=r,e.setData=function(e,t){var i,n,r,a,s,o,l,c,h,u,d=(e=e||"0,0,1,1").match(m),p=1,f=[];if(u=(t=t||{}).precision||1,this.data=e,this.lookup=[],this.points=f,this.fast=u<=1,(g.test(e)||-1!==e.indexOf("M")&&-1===e.indexOf("C"))&&(d=function(e){var t,i,n,r,a,s,o,l,c,h,u,d=(e+"").replace(x,function(e){var t=+e;return t<1e-4&&-1e-4<t?0:t}).match(_)||[],p=[],f=0,m=0,g=d.length,v=2;for(t=0;t<g;t++)if(c=r,isNaN(d[t])?a=(r=d[t].toUpperCase())!==d[t]:t--,i=+d[t+1],n=+d[t+2],a&&(i+=f,n+=m),t||(o=i,l=n),"M"===r)s&&s.length<8&&(p.length-=1,v=0),f=o=i,m=l=n,s=[i,n],v=2,p.push(s),t+=2,r="L";else if("C"===r)s||(s=[0,0]),s[v++]=i,s[v++]=n,a||(f=m=0),s[v++]=f+1*d[t+3],s[v++]=m+1*d[t+4],s[v++]=f+=1*d[t+5],s[v++]=m+=1*d[t+6],t+=6;else if("S"===r)s[v++]="C"===c||"S"===c?(h=f-s[v-4],u=m-s[v-3],s[v++]=f+h,m+u):(s[v++]=f,m),s[v++]=i,s[v++]=n,a||(f=m=0),s[v++]=f+=1*d[t+3],s[v++]=m+=1*d[t+4],t+=4;else{if("L"!==r&&"Z"!==r)throw b;"Z"===r&&(i=o,n=l,s.closed=!0),("L"===r||.5<Math.abs(f-i)||.5<Math.abs(m-n))&&(s[v++]=f+(i-f)/3,s[v++]=m+(n-m)/3,s[v++]=f+2*(i-f)/3,s[v++]=m+2*(n-m)/3,s[v++]=i,s[v++]=n,"L"===r&&(t+=2)),f=i,m=n}return p[0]}(e)),4===(i=d.length))d.unshift(0,0),d.push(1,1),i=8;else if((i-2)%6)throw b;for((0!=+d[0]||1!=+d[i-2])&&function(e,t,i){i||0===i||(i=Math.max(+e[e.length-1],+e[1]));var n,r=-1*+e[0],a=-i,s=e.length,o=1/(+e[s-2]+r),l=-t||(Math.abs(+e[s-1]-+e[1])<.01*(+e[s-2]-+e[0])?function(e){var t,i=e.length,n=999999999999;for(t=1;t<i;t+=6)+e[t]<n&&(n=+e[t]);return n}(e)+a:+e[s-1]+a);for(l=l?1/l:-o,n=0;n<s;n+=2)e[n]=(+e[n]+r)*o,e[n+1]=(+e[n+1]+a)*l}(d,t.height,t.originY),this.rawBezier=d,a=2;a<i;a+=6)n={x:+d[a-2],y:+d[a-1]},r={x:+d[a+4],y:+d[a+5]},f.push(n,r),A(n.x,n.y,+d[a],+d[a+1],+d[a+2],+d[a+3],r.x,r.y,1/(2e5*u),f,f.length-1);for(i=f.length,a=0;a<i;a++)l=f[a],c=f[a-1]||l,l.x>c.x||c.y!==l.y&&c.x===l.x||l===c?(c.cx=l.x-c.x,c.cy=l.y-c.y,c.n=l,c.nx=l.x,this.fast&&1<a&&2<Math.abs(c.cy/c.cx-f[a-2].cy/f[a-2].cx)&&(this.fast=!1),c.cx<p&&(c.cx?p=c.cx:(c.cx=.001,a===i-1&&(c.x-=.001,p=Math.min(p,.001),this.fast=!1)))):(f.splice(a--,1),i--);if(i=1/p+1|0,s=1/(this.l=i),l=f[o=0],this.fast){for(a=0;a<i;a++)h=a*s,l.nx<h&&(l=f[++o]),n=l.y+(h-l.x)/l.cx*l.cy,this.lookup[a]={x:h,cx:s,y:n,cy:0,nx:9},a&&(this.lookup[a-1].cy=n-this.lookup[a-1].y);this.lookup[i-1].cy=f[f.length-1].y-n}else{for(a=0;a<i;a++)l.nx<a*s&&(l=f[++o]),this.lookup[a]=l;o<f.length-1&&(this.lookup[a-1]=f[f.length-2])}return this._calcEnd=1!==f[f.length-1].y||0!==f[0].y,this},e.getRatio=n,e.getSVGData=function(e){return r.getSVGData(this,e)},r.create=function(e,t,i){return new r(e,t,i)},r.version="0.2.2",r.bezierToPoints=A,r.get=function(e){return y.map[e]},r.getSVGData=function(e,t){var i,n,r,a,s,o,l,c,h,u,d=1e3,p=(t=t||{}).width||100,f=t.height||100,m=t.x||0,g=(t.y||0)+f,v=t.path;if(t.invert&&(f=-f,g=0),(e=e.getRatio?e:y.map[e]||console.log("No ease found: ",e)).rawBezier){for(i=[],l=e.rawBezier.length,r=0;r<l;r+=2)i.push(((m+e.rawBezier[r]*p)*d|0)/d+","+((g+e.rawBezier[r+1]*-f)*d|0)/d);i[0]="M"+i[0],i[1]="C"+i[1]}else for(i=["M"+m+","+g],a=1/(l=Math.max(5,200*(t.precision||1))),c=5/(l+=2),h=((m+a*p)*d|0)/d,n=((u=((g+e.getRatio(a)*-f)*d|0)/d)-g)/(h-m),r=2;r<l;r++)s=((m+r*a*p)*d|0)/d,o=((g+e.getRatio(r*a)*-f)*d|0)/d,(Math.abs((o-u)/(s-h)-n)>c||r===l-1)&&(i.push(h+","+u),n=(o-u)/(s-h)),h=s,u=o;return v&&("string"==typeof v?document.querySelector(v):v).setAttribute("d",i.join(" ")),i.join(" ")},r},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope).CustomEase};"undefined"!=typeof module&&module.exports?(require("../TweenLite.min.js"),module.exports=t()):"function"==typeof define&&define.amd&&define(["TweenLite"],t)}(),((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var d=Math.PI/180,p=function(e,t,i,n,r){this.p=t,this.f="function"==typeof e[t],this.start=this.value=this.f?e[t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3)]():parseFloat(e[t]),this.velocity=i||0,this.v=this.velocity/r,n||0===n?(this.acceleration=n,this.a=this.acceleration/(r*r)):this.acceleration=this.a=0},f=Math.random(),i=_gsScope._gsDefine.globals,m=i.com.greensock.core.Animation._rootFramesTimeline,g=_gsScope._gsDefine.plugin({propName:"physics2D",version:"0.2.1",API:2,init:function(e,t,i,n){"function"==typeof t&&(t=t(n,e)),this._target=e,this._tween=i,this._runBackwards=!0===i.vars.runBackwards,this._step=0;for(var r,a=i._timeline,s=Number(t.angle)||0,o=Number(t.velocity)||0,l=Number(t.acceleration)||0,c=t.xProp||"x",h=t.yProp||"y",u=t.accelerationAngle||0===t.accelerationAngle?Number(t.accelerationAngle):s;a._timeline;)a=a._timeline;return this._stepsPerTimeUnit=r=a===m?1:30,t.gravity&&(l=Number(t.gravity),u=90),s*=d,u*=d,this._friction=1-Number(t.friction||0),this._overwriteProps.push(c),this._overwriteProps.push(h),this._x=new p(e,c,Math.cos(s)*o,Math.cos(u)*l,r),this._y=new p(e,h,Math.sin(s)*o,Math.sin(u)*l,r),this._skipX=this._skipY=!1,!0},set:function(e){var t,i,n,r,a,s,o=this._tween._time,l=this._x,c=this._y;if(!0===this._runBackwards&&(o=this._tween._duration-o),1===this._friction)n=o*o*.5,t=l.start+(l.velocity*o+l.acceleration*n),i=c.start+(c.velocity*o+c.acceleration*n);else{if(r=s=(0|(o*=this._stepsPerTimeUnit))-this._step,a=o%1,0<=s)for(;-1<--s;)l.v+=l.a,c.v+=c.a,l.v*=this._friction,c.v*=this._friction,l.value+=l.v,c.value+=c.v;else for(s=-s;-1<--s;)l.value-=l.v,c.value-=c.v,l.v/=this._friction,c.v/=this._friction,l.v-=l.a,c.v-=c.a;t=l.value+l.v*a,i=c.value+c.v*a,this._step+=r}this._skipX||(l.m&&(t=l.m(t,this._target)),l.f?this._target[l.p](t):this._target[l.p]=t),this._skipY||(c.m&&(i=c.m(i,this._target)),c.f?this._target[c.p](i):this._target[c.p]=i)}}),e=g.prototype;e._kill=function(e){return null!=e[this._x.p]&&(this._skipX=!0),null!=e[this._y.p]&&(this._skipY=!0),this._super._kill.call(this,e)},e._mod=function(e){var t=e[this._x.p]||e.physics2D;t&&"function"==typeof t&&(this._x.m=t),(t=e[this._y.p]||e.physics2D)&&"function"==typeof t&&(this._y.m=t)},g._autoCSS=!0,g._cssRegister=function(){var e=i.CSSPlugin;if(e){var t=e._internals,h=t._parseToProxy,u=t._setPluginRatio,d=t.CSSPropTween;t._registerComplexSpecialProp("physics2D",{parser:function(e,t,i,n,r,a){a=new g;var s,o=t.xProp||"x",l=t.yProp||"y",c={};return c[o]=c[l]=f++,s=h(e,c,n,r,a),(r=new d(e,"physics2D",0,0,s.pt,2)).data=s,r.plugin=a,r.setRatio=u,a._onInitTween(s.proxy,t,n._tween),r}})}}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope).Physics2DPlugin};"undefined"!=typeof module&&module.exports?(require("../TweenLite.min.js"),module.exports=t()):"function"==typeof define&&define.amd&&define(["TweenLite"],t)}(),function(i){"use strict";var r=i.GreenSockGlobals||i,e=function(e){var t,i=e.split("."),n=r;for(t=0;t<i.length;t++)n[i[t]]=n=n[i[t]]||{};return n}("com.greensock.utils"),E=function(e){var t=e.nodeType,i="";if(1===t||9===t||11===t){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=E(e)}else if(3===t||4===t)return e.nodeValue;return i},U=document,G=U.defaultView?U.defaultView.getComputedStyle:function(){},a=/([A-Z])/g,V=function(e,t,i,n){var r;return(i=i||G(e,null))?r=(e=i.getPropertyValue(t.replace(a,"-$1").toLowerCase()))||i.length?e:i[t]:e.currentStyle&&(r=(i=e.currentStyle)[t]),n?r:parseInt(r,10)||0},s=function(e){return!!(e.length&&e[0]&&(e[0].nodeType&&e[0].style&&!e.nodeType||e[0].length&&e[0][0]))},M=function(e,t){for(var i,n=t.length;-1<--n;)if(i=t[n],e.substr(0,i.length)===i)return i.length},S=/(?:\r|\n|\t\t)/g,C=/(?:\s\s+)/g,A=function(e){return(e.charCodeAt(0)-55296<<10)+(e.charCodeAt(1)-56320)+65536},o=" style='position:relative;display:inline-block;"+(U.all&&!U.addEventListener?"*display:inline;*zoom:1;'":"'"),l=function(e,t){var i=-1!==(e=e||"").indexOf("++"),n=1;return i&&(e=e.split("++").join("")),function(){return"<"+t+o+(e?" class='"+e+(i?n++:"")+"'>":">")}},n=e.SplitText=r.SplitText=function(e,t){if("string"==typeof e&&(e=n.selector(e)),!e)throw"cannot split a null element.";this.elements=s(e)?function(e){var t,i,n,r=[],a=e.length;for(t=0;t<a;t++)if(i=e[t],s(i))for(n=i.length,n=0;n<i.length;n++)r.push(i[n]);else r.push(i);return r}(e):[e],this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)},j=function(e,t,i){var n=e.nodeType;if(1===n||9===n||11===n)for(e=e.firstChild;e;e=e.nextSibling)j(e,t,i);else 3!==n&&4!==n||(e.nodeValue=e.nodeValue.split(t).join(i))},W=function(e,t){for(var i=t.length;-1<--i;)e.push(t[i])},c=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},X=function(e,t,i){for(var n;e&&e!==t;){if(n=e._next||e.nextSibling)return n.textContent.charAt(0)===i;e=e.parentNode||e._parent}return!1},Y=function(e){var t,i,n=c(e.childNodes),r=n.length;for(t=0;t<r;t++)(i=n[t])._isSplit?Y(i):(t&&3===i.previousSibling.nodeType?i.previousSibling.nodeValue+=3===i.nodeType?i.nodeValue:i.firstChild.nodeValue:3!==i.nodeType&&e.insertBefore(i.firstChild,i),e.removeChild(i))},h=function(e,t,i,n,r,a,s){var o,l,c,h,u,d,p,f,m,g,v,y,_=G(e),x=V(e,"paddingLeft",_),b=-999,w=V(e,"borderBottomWidth",_)+V(e,"borderTopWidth",_),T=V(e,"borderLeftWidth",_)+V(e,"borderRightWidth",_),E=V(e,"paddingTop",_)+V(e,"paddingBottom",_),M=V(e,"paddingLeft",_)+V(e,"paddingRight",_),S=.2*V(e,"fontSize"),C=V(e,"textAlign",_,!0),A=[],P=[],L=[],R=t.wordDelimiter||" ",O=t.span?"span":"div",I=t.type||t.split||"chars,words,lines",D=r&&-1!==I.indexOf("lines")?[]:null,k=-1!==I.indexOf("words"),N=-1!==I.indexOf("chars"),z="absolute"===t.position||!0===t.absolute,B=t.linesClass,H=-1!==(B||"").indexOf("++"),F=[];for(H&&(B=B.split("++").join("")),c=(l=e.getElementsByTagName("*")).length,u=[],o=0;o<c;o++)u[o]=l[o];if(D||z)for(o=0;o<c;o++)((d=(h=u[o]).parentNode===e)||z||N&&!k)&&(y=h.offsetTop,D&&d&&Math.abs(y-b)>S&&("BR"!==h.nodeName||0===o)&&(p=[],D.push(p),b=y),z&&(h._x=h.offsetLeft,h._y=y,h._w=h.offsetWidth,h._h=h.offsetHeight),D&&((h._isSplit&&d||!N&&d||k&&d||!k&&h.parentNode.parentNode===e&&!h.parentNode._isSplit)&&(p.push(h),h._x-=x,X(h,e,R)&&(h._wordEnd=!0)),"BR"===h.nodeName&&(h.nextSibling&&"BR"===h.nextSibling.nodeName||0===o)&&D.push([])));for(o=0;o<c;o++)d=(h=u[o]).parentNode===e,"BR"!==h.nodeName?(z&&(m=h.style,k||d||(h._x+=h.parentNode._x,h._y+=h.parentNode._y),m.left=h._x+"px",m.top=h._y+"px",m.position="absolute",m.display="block",m.width=h._w+1+"px",m.height=h._h+"px"),!k&&N?h._isSplit?(h._next=h.nextSibling,h.parentNode.appendChild(h)):h.parentNode._isSplit?(h._parent=h.parentNode,!h.previousSibling&&h.firstChild&&(h.firstChild._isFirst=!0),h.nextSibling&&" "===h.nextSibling.textContent&&!h.nextSibling.nextSibling&&F.push(h.nextSibling),h._next=h.nextSibling&&h.nextSibling._isFirst?null:h.nextSibling,h.parentNode.removeChild(h),u.splice(o--,1),c--):d||(y=!h.nextSibling&&X(h.parentNode,e,R),h.parentNode._parent&&h.parentNode._parent.appendChild(h),y&&h.parentNode.appendChild(U.createTextNode(" ")),t.span&&(h.style.display="inline"),A.push(h)):h.parentNode._isSplit&&!h._isSplit&&""!==h.innerHTML?P.push(h):N&&!h._isSplit&&(t.span&&(h.style.display="inline"),A.push(h))):D||z?(h.parentNode&&h.parentNode.removeChild(h),u.splice(o--,1),c--):k||e.appendChild(h);for(o=F.length;-1<--o;)F[o].parentNode.removeChild(F[o]);if(D){for(z&&(g=U.createElement(O),e.appendChild(g),v=g.offsetWidth+"px",y=g.offsetParent===e?0:e.offsetLeft,e.removeChild(g)),m=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for(f=" "===R&&(!z||!k&&!N),o=0;o<D.length;o++){for(p=D[o],(g=U.createElement(O)).style.cssText="display:block;text-align:"+C+";position:"+(z?"absolute;":"relative;"),B&&(g.className=B+(H?o+1:"")),L.push(g),c=p.length,l=0;l<c;l++)"BR"!==p[l].nodeName&&(h=p[l],g.appendChild(h),f&&h._wordEnd&&g.appendChild(U.createTextNode(" ")),z&&(0===l&&(g.style.top=h._y+"px",g.style.left=x+y+"px"),h.style.top="0px",y&&(h.style.left=h._x-y+"px")));0===c?g.innerHTML="&nbsp;":k||N||(Y(g),j(g,String.fromCharCode(160)," ")),z&&(g.style.width=v,g.style.height=h._h+"px"),e.appendChild(g)}e.style.cssText=m}z&&(s>e.clientHeight&&(e.style.height=s-E+"px",e.clientHeight<s&&(e.style.height=s+w+"px")),a>e.clientWidth&&(e.style.width=a-M+"px",e.clientWidth<a&&(e.style.width=a+T+"px"))),W(i,A),k&&W(n,P),W(r,L)},u=function(e,t,i,n){var r,a,s=c(e.childNodes),o=s.length,l="absolute"===t.position||!0===t.absolute;if(3!==e.nodeType||1<o){for(t.absolute=!1,r=0;r<o;r++)(3!==(a=s[r]).nodeType||/\S+/.test(a.nodeValue))&&(l&&3!==a.nodeType&&"inline"===V(a,"display",null,!0)&&(a.style.display="inline-block",a.style.position="relative"),a._isSplit=!0,u(a,t,i,n));return t.absolute=l,void(e._isSplit=!0)}!function(e,t,i,n){var r,a,s,o,l,c,h,u,d,p,f=t.span?"span":"div",m=-1!==(t.type||t.split||"chars,words,lines").indexOf("chars"),g="absolute"===t.position||!0===t.absolute,v=t.wordDelimiter||" ",y=" "!==v?"":g?"&#173; ":" ",_=t.span?"</span>":"</div>",x=!0,b=t.specialChars?"function"==typeof t.specialChars?t.specialChars:M:null,w=U.createElement("div"),T=e.parentNode;for(T.insertBefore(w,e),w.textContent=e.nodeValue,T.removeChild(e),h=-1!==(r=E(e=w)).indexOf("<"),!1!==t.reduceWhiteSpace&&(r=r.replace(C," ").replace(S,"")),h&&(r=r.split("<").join("{{LT}}")),l=r.length,a=(" "===r.charAt(0)?y:"")+i(),s=0;s<l;s++)if(c=r.charAt(s),b&&(p=b(r.substr(s),t.specialChars)))c=r.substr(s,p||1),a+=m&&" "!==c?n()+c+"</"+f+">":c,s+=p-1;else if(c===v&&r.charAt(s-1)!==v&&s){for(a+=x?_:"",x=!1;r.charAt(s+1)===v;)a+=y,s++;s===l-1?a+=y:")"!==r.charAt(s+1)&&(a+=y+i(),x=!0)}else"{"===c&&"{{LT}}"===r.substr(s,6)?(a+=m?n()+"{{LT}}</"+f+">":"{{LT}}",s+=5):55296<=c.charCodeAt(0)&&c.charCodeAt(0)<=56319||65024<=r.charCodeAt(s+1)&&r.charCodeAt(s+1)<=65039?(u=A(r.substr(s,2)),d=A(r.substr(s+2,2)),o=127462<=u&&u<=127487&&127462<=d&&d<=127487||127995<=d&&d<=127999?4:2,a+=m&&" "!==c?n()+r.substr(s,o)+"</"+f+">":r.substr(s,o),s+=o-1):a+=m&&" "!==c?n()+c+"</"+f+">":c;e.outerHTML=a+(x?_:""),h&&j(T,"{{LT}}","<")}(e,t,i,n)},t=n.prototype;t.split=function(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var t,i,n,r=this.elements.length,a=e.span?"span":"div",s=l(e.wordsClass,a),o=l(e.charsClass,a);-1<--r;)n=this.elements[r],this._originals[r]=n.innerHTML,t=n.clientHeight,i=n.clientWidth,u(n,e,s,o),h(n,e,this.chars,this.words,this.lines,i,t);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},t.revert=function(){if(!this._originals)throw"revert() call wasn't scoped properly.";for(var e=this._originals.length;-1<--e;)this.elements[e].innerHTML=this._originals[e];return this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},n.selector=i.$||i.jQuery||function(e){var t=i.$||i.jQuery;return t?(n.selector=t)(e):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)},n.version="0.6.1"}(_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope).SplitText};"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd&&define([],t)}(),((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";_gsScope._gsDefine("plugins.ThrowPropsPlugin",["plugins.TweenPlugin","TweenLite","easing.Ease","utils.VelocityTracker"],function(i,M,S,C){var _,x,b,w,A=function(e,t){i.call(this,"throwProps"),this._overwriteProps.length=0},d=999999999999999,n=_gsScope._gsDefine.globals,P=!1,T={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1,xPercent:1,yPercent:1},c=function(e,t,i,n,r){var a,s,o,l,c=t.length,h=0,u=d;if("object"==typeof e){for(;-1<--c;){for(o in a=t[c],s=0,e)s+=(l=a[o]-e[o])*l;s<u&&(h=c,u=s)}if((r||d)<d&&r<Math.sqrt(u))return e}else for(;-1<--c;)(s=(a=t[c])-e)<0&&(s=-s),s<u&&n<=a&&a<=i&&(h=c,u=s);return t[h]},L=function(e,t,i,n,r,a){if("auto"===e.end)return e;var s,o,l=e.end;if(i=isNaN(i)?d:i,n=isNaN(n)?-d:n,"object"==typeof t){if(s=t.calculated?t:("function"==typeof l?l(t):c(t,l,i,n,a))||t,!t.calculated){for(o in s)t[o]=s[o];t.calculated=!0}s=s[r]}else s="function"==typeof l?l(t):l instanceof Array?c(t,l,i,n,a):Number(l);return i<s?s=i:s<n&&(s=n),{max:s,min:s,unitFactor:e.unitFactor}},R=function(e,t,i){for(var n in t)void 0===e[n]&&n!==i&&(e[n]=t[n]);return e},O=A.calculateChange=function(e,t,i,n){return null==n&&(n=.05),i*n*e/(t instanceof S?t:t?new S(t):M.defaultEase).getRatio(n)},I=A.calculateDuration=function(e,t,i,n,r){r=r||.05;var a=n instanceof S?n:n?new S(n):M.defaultEase;return Math.abs((t-e)*a.getRatio(r)/i/r)},s=A.calculateTweenDuration=function(e,t,i,n,r,a){if("string"==typeof e&&(e=M.selector(e)),!e)return 0;null==i&&(i=10),null==n&&(n=.2),null==r&&(r=1),e.length&&(e=e[0]||e);var s,o,l,c,h,u,d,p,f,m,g,v,y,_=0,x=9999999999,b=t.throwProps||t,w=t.ease instanceof S?t.ease:t.ease?new S(t.ease):M.defaultEase,T=isNaN(b.checkpoint)?.05:Number(b.checkpoint),E=isNaN(b.resistance)?A.defaultResistance:Number(b.resistance);if(b.linkedProps)for(v=b.linkedProps.split(","),g={},y=0;y<v.length;y++)(o=b[s=v[y]])&&(l=0<(c=void 0!==o.velocity&&"number"==typeof o.velocity?Number(o.velocity)||0:(f=f||C.getByTarget(e))&&f.isTrackingProp(s)?f.getVelocity(s):0)*(h=isNaN(o.resistance)?E:Number(o.resistance))?c/h:c/-h,u="function"==typeof e[s]?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():e[s]||0,g[s]=u+O(c,w,l,T));for(s in b)"resistance"!==s&&"checkpoint"!==s&&"preventOvershoot"!==s&&"linkedProps"!==s&&"radius"!==s&&("object"!=typeof(o=b[s])&&((f=f||C.getByTarget(e))&&f.isTrackingProp(s)?o="number"==typeof o?{velocity:o}:{velocity:f.getVelocity(s)}:l=0<(c=Number(o)||0)*E?c/E:c/-E),"object"==typeof o&&(l=0<(c=void 0!==o.velocity&&"number"==typeof o.velocity?Number(o.velocity)||0:(f=f||C.getByTarget(e))&&f.isTrackingProp(s)?f.getVelocity(s):0)*(h=isNaN(o.resistance)?E:Number(o.resistance))?c/h:c/-h,d=(u="function"==typeof e[s]?e[s.indexOf("set")||"function"!=typeof e["get"+s.substr(3)]?s:"get"+s.substr(3)]():e[s]||0)+O(c,w,l,T),void 0!==o.end&&(o=L(o,g&&s in g?g:d,o.max,o.min,s,b.radius),(a||P)&&(b[s]=R(o,b[s],"end"))),void 0!==o.max&&d>Number(o.max)+1e-10?(m=o.unitFactor||A.defaultUnitFactors[s]||1,(p=u>o.max&&o.min!==o.max||-15<c*m&&c*m<45?n+.1*(i-n):I(u,o.max,c,w,T))+r<x&&(x=p+r)):void 0!==o.min&&d<Number(o.min)-1e-10&&(m=o.unitFactor||A.defaultUnitFactors[s]||1,(p=u<o.min&&o.min!==o.max||-45<c*m&&c*m<15?n+.1*(i-n):I(u,o.min,c,w,T))+r<x&&(x=p+r)),_<p&&(_=p)),_<l&&(_=l));return x<_&&(_=x),i<_?i:_<n?n:_},e=A.prototype=new i("throwProps");return(e.constructor=A).version="0.11.2",A.API=2,A._autoCSS=!0,A.defaultResistance=100,A.defaultUnitFactors={time:1e3,totalTime:1e3},A.track=function(e,t,i){return C.track(e,t,i)},A.untrack=function(e,t){C.untrack(e,t)},A.isTracking=function(e,t){return C.isTracking(e,t)},A.getVelocity=function(e,t){var i=C.getByTarget(e);return i?i.getVelocity(t):NaN},A._cssRegister=function(){var e=n.com.greensock.plugins.CSSPlugin;if(e){var t=e._internals,g=t._parseToProxy,v=t._setPluginRatio,y=t.CSSPropTween;t._registerComplexSpecialProp("throwProps",{parser:function(e,t,i,n,r,a){a=new A;var s,o,l,c,h={},u={},d={},p={},f={},m={};for(o in x={},t)"resistance"!==o&&"preventOvershoot"!==o&&"linkedProps"!==o&&"radius"!==o&&("object"==typeof(s=t[o])?(void 0!==s.velocity&&"number"==typeof s.velocity?h[o]=Number(s.velocity)||0:(c=c||C.getByTarget(e),h[o]=c&&c.isTrackingProp(o)?c.getVelocity(o):0),void 0!==s.end&&(p[o]=s.end),void 0!==s.min&&(u[o]=s.min),void 0!==s.max&&(d[o]=s.max),s.preventOvershoot&&(m[o]=!0),void 0!==s.resistance&&(!0,f[o]=s.resistance)):"number"==typeof s?h[o]=s:(c=c||C.getByTarget(e))&&c.isTrackingProp(o)?h[o]=c.getVelocity(o):h[o]=s||0,T[o]&&n._enableTransforms(2===T[o]));for(o in l=g(e,h,n,r,a),_=l.proxy,h=l.end,_)x[o]={velocity:h[o],min:u[o],max:d[o],end:p[o],resistance:f[o],preventOvershoot:m[o]};return null!=t.resistance&&(x.resistance=t.resistance),null!=t.linkedProps&&(x.linkedProps=t.linkedProps),null!=t.radius&&(x.radius=t.radius),t.preventOvershoot&&(x.preventOvershoot=!0),r=new y(e,"throwProps",0,0,l.pt,2),n._overwriteProps.pop(),r.plugin=a,r.setRatio=v,r.data=l,a._onInitTween(_,x,n._tween),r}})}},A.to=function(e,t,i,n,r){t.throwProps||(t={throwProps:t}),0===r&&(t.throwProps.preventOvershoot=!0),P=!0;var a=new M(e,n||1,t);return a.render(0,!0,!0),P=(a.vars.css?(a.duration(s(_,{throwProps:x,ease:t.ease},i,n,r)),a._delay&&!a.vars.immediateRender?a.invalidate():b._onInitTween(_,w,a)):(a.kill(),a=new M(e,s(e,t,i,n,r),t)),!1),a},e._onInitTween=function(e,t,i,n){this.target=e,this._props=[],b=this,w=t;var r,a,s,o,l,c,h,u,d,p,f,m,g=i._ease,v=isNaN(t.checkpoint)?.05:Number(t.checkpoint),y=i._duration,_=t.preventOvershoot,x=0;if(t.linkedProps)for(f=t.linkedProps.split(","),p={},m=0;m<f.length;m++)(a=t[r=f[m]])&&(l=void 0!==a.velocity&&"number"==typeof a.velocity?Number(a.velocity)||0:(d=d||C.getByTarget(e))&&d.isTrackingProp(r)?d.getVelocity(r):0,s="function"==typeof e[r]?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():e[r]||0,p[r]=s+O(l,g,y,v));for(r in t)if("resistance"!==r&&"checkpoint"!==r&&"preventOvershoot"!==r&&"linkedProps"!==r&&"radius"!==r){if("function"==typeof(a=t[r])&&(a=a(n,e)),"number"==typeof a)l=Number(a)||0;else if("object"!=typeof a||isNaN(a.velocity)){if(!(d=d||C.getByTarget(e))||!d.isTrackingProp(r))throw"ERROR: No velocity was defined in the throwProps tween of "+e+" property: "+r;l=d.getVelocity(r)}else l=Number(a.velocity);c=O(l,g,y,v),u=0,s=(o="function"==typeof e[r])?e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():e[r],"object"==typeof a&&(h=s+c,void 0!==a.end&&(a=L(a,p&&r in p?p:h,a.max,a.min,r,t.radius),P&&(t[r]=R(a,t[r],"end"))),void 0!==a.max&&Number(a.max)<h?_||a.preventOvershoot?c=a.max-s:u=a.max-s-c:void 0!==a.min&&Number(a.min)>h&&(_||a.preventOvershoot?c=a.min-s:u=a.min-s-c)),this._overwriteProps[x]=r,this._props[x++]={p:r,s:s,c1:c,c2:u,f:o,r:!1}}return!0},e._kill=function(e){for(var t=this._props.length;-1<--t;)null!=e[this._props[t].p]&&this._props.splice(t,1);return i.prototype._kill.call(this,e)},e._mod=function(e){for(var t,i=this._props,n=i.length;-1<--n;)"function"==typeof(t=e[i[n].p]||e.throwProps)&&(i[n].m=t)},e.setRatio=function(e){for(var t,i,n=this._props.length;-1<--n;)i=(t=this._props[n]).s+t.c1*e+t.c2*e*e,t.m?i=t.m(i,this.target):1===e&&(i=(1e4*i+(i<0?-.5:.5)|0)/1e4),t.f?this.target[t.p](i):this.target[t.p]=i},i.activate([A]),A},!0),_gsScope._gsDefine("utils.VelocityTracker",["TweenLite"],function(s){var a,t,r,o=/([A-Z])/g,l={},e=_gsScope.document,c={x:1,y:1,z:2,scale:1,scaleX:1,scaleY:1,rotation:1,rotationZ:1,rotationX:2,rotationY:2,skewX:1,skewY:1,xPercent:1,yPercent:1},h="undefined"!=typeof window?window:e.defaultView||{getComputedStyle:function(){}},u=function(e,t,i){var n,r=(e._gsTransform||l)[t];return r||0===r?r:(e.style[t]?r=e.style[t]:(i=i||(n=e,h.getComputedStyle(n)))?r=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(o,"-$1").toLowerCase()):e.currentStyle&&(r=e.currentStyle[t]),parseFloat(r)||0)},d=s.ticker,p=function(e,t,i){this.p=e,this.f=t,this.v1=this.v2=0,this.t1=this.t2=d.time,this.css=!1,this.type="",this._prev=null,i&&((this._next=i)._prev=this)},i=function(){var e,t,i=a,n=d.time;if(.03<=n-r)for(r,r=n;i;){for(t=i._firstVP;t;)((e=t.css?u(i.target,t.p):t.f?i.target[t.p]():i.target[t.p])!==t.v1||.15<n-t.t1)&&(t.v2=t.v1,t.v1=e,t.t2=t.t1,t.t1=n),t=t._next;i=i._next}},f=function(e){this._lookup={},this.target=e,this.elem=!(!e.style||!e.nodeType),t||(d.addEventListener("tick",i,null,!1,-100),r=d.time,t=!0),a&&((this._next=a)._prev=this),a=this},m=f.getByTarget=function(e){for(var t=a;t;){if(t.target===e)return t;t=t._next}},n=f.prototype;return n.addProp=function(e,t){if(!this._lookup[e]){var i=this.target,n="function"==typeof i[e],r=n?this._altProp(e):e,a=this._firstVP;this._firstVP=this._lookup[e]=this._lookup[r]=a=new p(r!==e&&0===e.indexOf("set")?r:e,n,a),a.css=this.elem&&(void 0!==this.target.style[a.p]||c[a.p]),a.css&&c[a.p]&&!i._gsTransform&&s.set(i,{x:"+=0",overwrite:!1}),a.type=t||a.css&&0===e.indexOf("rotation")?"deg":"",a.v1=a.v2=a.css?u(i,a.p):n?i[a.p]():i[a.p]}},n.removeProp=function(e){var t=this._lookup[e];t&&(t._prev?t._prev._next=t._next:t===this._firstVP&&(this._firstVP=t._next),t._next&&(t._next._prev=t._prev),this._lookup[e]=0,t.f&&(this._lookup[this._altProp(e)]=0))},n.isTrackingProp=function(e){return this._lookup[e]instanceof p},n.getVelocity=function(e){var t,i,n=this._lookup[e],r=this.target;if(!n)throw"The velocity of "+e+" is not being tracked.";return t=(n.css?u(r,n.p):n.f?r[n.p]():r[n.p])-n.v2,("rad"===n.type||"deg"===n.type)&&((t%=i="rad"===n.type?2*Math.PI:360)!==t%(i/2)&&(t=t<0?t+i:t-i)),t/(d.time-n.t2)},n._altProp=function(e){var t=e.substr(0,3),i=("get"===t?"set":"set"===t?"get":t)+e.substr(3);return"function"==typeof this.target[i]?i:e},f.getByTarget=function(e){var t=a;for("string"==typeof e&&(e=s.selector(e)),e.length&&e!==window&&e[0]&&e[0].style&&!e.nodeType&&(e=e[0]);t;){if(t.target===e)return t;t=t._next}},f.track=function(e,t,i){var n=m(e),r=t.split(","),a=r.length;for(i=(i||"").split(","),n||(n=new f(e));-1<--a;)n.addProp(r[a],i[a]||i[0]);return n},f.untrack=function(e,t){var i=m(e),n=(t||"").split(","),r=n.length;if(i){for(;-1<--r;)i.removeProp(n[r]);i._firstVP&&t||(i._prev?i._prev._next=i._next:i===a&&(a=i._next),i._next&&(i._next._prev=i._prev))}},f.isTracking=function(e,t){var i=m(e);return!!i&&(!(t||!i._firstVP)||i.isTrackingProp(t))},f},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope).ThrowPropsPlugin};"undefined"!=typeof module&&module.exports?(require("../TweenLite.min.js"),module.exports=t()):"function"==typeof define&&define.amd&&define(["TweenLite"],t)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).THREE={})}(this,function(e){function t(){}function W(e,t){this.x=e||0,this.y=t||0}function we(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function T(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==n?n:1}function Te(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function g(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function d(e,t,i,n,r,a,s,o,l,c){Object.defineProperty(this,"id",{value:za++}),this.uuid=ya.generateUUID(),this.name="",this.image=void 0!==e?e:d.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:d.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:1001,this.wrapT=void 0!==n?n:1001,this.magFilter=void 0!==r?r:1006,this.minFilter=void 0!==a?a:1008,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:1023,this.type=void 0!==o?o:1009,this.offset=new W(0,0),this.repeat=new W(1,1),this.center=new W(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new g,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:3e3,this.version=0,this.onUpdate=null}function Ee(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1}function C(e,t,i){this.width=e,this.height=t,this.scissor=new Ee(0,0,e,t),this.scissorTest=!1,this.viewport=new Ee(0,0,e,t),i=i||{},this.texture=new d(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:1006,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function i(e,t,i){C.call(this,e,t,i),this.samples=4}function r(e,t,i){C.call(this,e,t,i),this.activeMipMapLevel=this.activeCubeFace=0}function Me(e,t,i,n,r,a,s,o,l,c,h,u){d.call(this,null,a,s,o,l,c,n,r,h,u),this.image={data:e,width:t,height:i},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==c?c:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function n(e,t){this.min=void 0!==e?e:new Te(1/0,1/0,1/0),this.max=void 0!==t?t:new Te(-1/0,-1/0,-1/0)}function s(e,t){this.center=void 0!==e?e:new Te,this.radius=void 0!==t?t:0}function v(e,t){this.normal=void 0!==e?e:new Te(1,0,0),this.constant=void 0!==t?t:0}function Se(e,t,i,n,r,a){this.planes=[void 0!==e?e:new v,void 0!==t?t:new v,void 0!==i?i:new v,void 0!==n?n:new v,void 0!==r?r:new v,void 0!==a?a:new v]}function Ce(e){var t,i={};for(t in e)for(var n in i[t]={},e[t]){var r=e[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?i[t][n]=r.clone():Array.isArray(r)?i[t][n]=r.slice():i[t][n]=r}return i}function a(e){for(var t={},i=0;i<e.length;i++){var n,r=Ce(e[i]);for(n in r)t[n]=r[n]}return t}function p(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}function Ae(){function i(e,t){!1!==r&&(a(e,t),n.requestAnimationFrame(i))}var n=null,r=!1,a=null;return{start:function(){!0!==r&&null!==a&&(n.requestAnimationFrame(i),r=!0)},stop:function(){r=!1},setAnimationLoop:function(e){a=e},setContext:function(e){n=e}}}function Pe(u){var d=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),d.get(e)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var t=d.get(e);t&&(u.deleteBuffer(t.buffer),d.delete(e))},update:function(e,t){e.isInterleavedBufferAttribute&&(e=e.data);var i,n,r,a,s,o=d.get(e);if(void 0===o)d.set(e,(n=t,r=(i=e).array,a=i.dynamic?35048:35044,s=u.createBuffer(),u.bindBuffer(n,s),u.bufferData(n,r,a),i.onUploadCallback(),n=5126,r instanceof Float32Array?n=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?n=5123:r instanceof Int16Array?n=5122:r instanceof Uint32Array?n=5125:r instanceof Int32Array?n=5124:r instanceof Int8Array?n=5120:r instanceof Uint8Array&&(n=5121),{buffer:s,type:n,bytesPerElement:r.BYTES_PER_ELEMENT,version:i.version}));else if(o.version<e.version){var l=e,c=l.array,h=l.updateRange;u.bindBuffer(t,o.buffer),!1===l.dynamic?u.bufferData(t,c,35044):-1===h.count?u.bufferSubData(t,0,c):0===h.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(u.bufferSubData(t,h.offset*c.BYTES_PER_ELEMENT,c.subarray(h.offset,h.offset+h.count)),h.count=-1),o.version=e.version}}}}function y(e,t,i,n,r,a){this.a=e,this.b=t,this.c=i,this.normal=n&&n.isVector3?n:new Te,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new p,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function o(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._order=n||o.DefaultOrder}function l(){this.mask=1}function u(){Object.defineProperty(this,"id",{value:ds++}),this.uuid=ya.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=u.DefaultUp.clone();var e=new Te,t=new o,i=new T,n=new Te(1,1,1);t.onChange(function(){i.setFromEuler(t,!1)}),i.onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new we},normalMatrix:{value:new g}}),this.matrix=new we,this.matrixWorld=new we,this.matrixAutoUpdate=u.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new l,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function f(){Object.defineProperty(this,"id",{value:xs+=2}),this.uuid=ya.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function m(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function c(e,t,i){m.call(this,new Int8Array(e),t,i)}function h(e,t,i){m.call(this,new Uint8Array(e),t,i)}function _(e,t,i){m.call(this,new Uint8ClampedArray(e),t,i)}function x(e,t,i){m.call(this,new Int16Array(e),t,i)}function b(e,t,i){m.call(this,new Uint16Array(e),t,i)}function w(e,t,i){m.call(this,new Int32Array(e),t,i)}function E(e,t,i){m.call(this,new Uint32Array(e),t,i)}function P(e,t,i){m.call(this,new Float32Array(e),t,i)}function M(e,t,i){m.call(this,new Float64Array(e),t,i)}function S(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function A(e){if(0===e.length)return-1/0;for(var t=e[0],i=1,n=e.length;i<n;++i)e[i]>t&&(t=e[i]);return t}function L(){Object.defineProperty(this,"id",{value:Rs+=2}),this.uuid=ya.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0},this.userData={}}function R(e,t,i,n,r,a){f.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new O(e,t,i,n,r,a)),this.mergeVertices()}function O(e,t,i,n,r,a){function s(e,t,i,n,r,a,s,o,l,c,h){var u=a/l,d=s/c,p=a/2,f=s/2,m=o/2;s=l+1;var g,v,y=c+1,_=a=0,x=new Te;for(v=0;v<y;v++){var b=v*d-f;for(g=0;g<s;g++)x[e]=(g*u-p)*n,x[t]=b*r,x[i]=m,E.push(x.x,x.y,x.z),x[e]=0,x[t]=0,x[i]=0<o?1:-1,M.push(x.x,x.y,x.z),S.push(g/l),S.push(1-v/c),a+=1}for(v=0;v<c;v++)for(g=0;g<l;g++)e=C+g+s*(v+1),t=C+(g+1)+s*(v+1),i=C+(g+1)+s*v,T.push(C+g+s*v,e,i),T.push(e,t,i),_+=6;w.addGroup(A,_,h),A+=_,C+=a}L.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};var w=this;e=e||1,t=t||1,i=i||1,n=Math.floor(n)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var T=[],E=[],M=[],S=[],C=0,A=0;s("z","y","x",-1,-1,i,t,e,a,r,0),s("z","y","x",1,-1,i,t,-e,a,r,1),s("x","z","y",1,1,e,i,t,n,a,2),s("x","z","y",1,-1,e,i,-t,n,a,3),s("x","y","z",1,-1,e,t,i,n,r,4),s("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(T),this.addAttribute("position",new P(E,3)),this.addAttribute("normal",new P(M,3)),this.addAttribute("uv",new P(S,2))}function I(e,t,i,n){f.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new D(e,t,i,n)),this.mergeVertices()}function D(e,t,i,n){L.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};var r=(e=e||1)/2,a=(t=t||1)/2,s=(i=Math.floor(i)||1)+1,o=(n=Math.floor(n)||1)+1,l=e/i,c=t/n,h=[],u=[],d=[],p=[];for(e=0;e<o;e++){var f=e*c-a;for(t=0;t<s;t++)u.push(t*l-r,-f,0),d.push(0,0,1),p.push(t/i),p.push(1-e/n)}for(e=0;e<n;e++)for(t=0;t<i;t++)r=t+s*(e+1),a=t+1+s*(e+1),o=t+1+s*e,h.push(t+s*e,r,o),h.push(r,a,o);this.setIndex(h),this.addAttribute("position",new P(u,3)),this.addAttribute("normal",new P(d,3)),this.addAttribute("uv",new P(p,2))}function k(){Object.defineProperty(this,"id",{value:no++}),this.uuid=ya.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function N(e){k.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function z(e,t){this.origin=void 0!==e?e:new Te,this.direction=void 0!==t?t:new Te}function B(e,t,i){this.a=void 0!==e?e:new Te,this.b=void 0!==t?t:new Te,this.c=void 0!==i?i:new Te}function H(e){k.call(this),this.type="MeshBasicMaterial",this.color=new p(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(e)}function F(e,t){u.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new L,this.material=void 0!==t?t:new H({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function Le(r,i,a,n){function s(e,t){i.buffers.color.setClear(e.r,e.g,e.b,t,n)}var o,l,c=new p(0),h=0,u=null,d=0;return{getClearColor:function(){return c},setClearColor:function(e,t){c.set(e),s(c,h=void 0!==t?t:1)},getClearAlpha:function(){return h},setClearAlpha:function(e){s(c,h=e)},render:function(e,t,i,n){null===(t=t.background)?(s(c,h),u=null,d=0):t&&t.isColor&&(s(t,1),n=!0,u=null,d=0),(r.autoClear||n)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),t&&(t.isCubeTexture||t.isWebGLRenderTargetCube)?(void 0===l&&((l=new F(new O(1,1,1),new N({type:"BackgroundCubeMaterial",uniforms:Ce(Ya.cube.uniforms),vertexShader:Ya.cube.vertexShader,fragmentShader:Ya.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),l.geometry.removeAttribute("uv"),l.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.tCube.value}}),a.update(l)),n=t.isWebGLRenderTargetCube?t.texture:t,l.material.uniforms.tCube.value=n,l.material.uniforms.tFlip.value=t.isWebGLRenderTargetCube?1:-1,u===t&&d===n.version||(l.material.needsUpdate=!0,u=t,d=n.version),e.unshift(l,l.geometry,l.material,0,0,null)):t&&t.isTexture&&(void 0===o&&((o=new F(new D(2,2),new N({type:"BackgroundMaterial",uniforms:Ce(Ya.background.uniforms),vertexShader:Ya.background.vertexShader,fragmentShader:Ya.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(o)),!0===(o.material.uniforms.t2D.value=t).matrixAutoUpdate&&t.updateMatrix(),o.material.uniforms.uvTransform.value.copy(t.matrix),u===t&&d===t.version||(o.material.needsUpdate=!0,d=(u=t).version),e.unshift(o,o.geometry,o.material,0,0,null))}}}function Re(r,a,s,o){var l;this.setMode=function(e){l=e},this.render=function(e,t){r.drawArrays(l,e,t),s.update(t,l)},this.renderInstances=function(e,t,i){if(o.isWebGL2)var n=r;else if(null===(n=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");n[o.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](l,t,i,e.maxInstancedCount),s.update(i,l,e.maxInstancedCount)}}function Oe(t,i,e){function n(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(35633,36338).precision&&0<t.getShaderPrecisionFormat(35632,36338).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(35633,36337).precision&&0<t.getShaderPrecisionFormat(35632,36337).precision?"mediump":"lowp"}var r,a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,s=void 0!==e.precision?e.precision:"highp",o=n(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o),e=!0===e.logarithmicDepthBuffer,o=t.getParameter(34930);var l=t.getParameter(35660),c=t.getParameter(3379),h=t.getParameter(34076),u=t.getParameter(34921),d=t.getParameter(36347),p=t.getParameter(36348),f=t.getParameter(36349),m=0<l,g=a||!!i.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var e=i.get("EXT_texture_filter_anisotropic");return r=null!==e?t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:s,logarithmicDepthBuffer:e,maxTextures:o,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:h,maxAttributes:u,maxVertexUniforms:d,maxVaryings:p,maxFragmentUniforms:f,vertexTextures:m,floatFragmentTextures:g,floatVertexTextures:m&&g,maxSamples:a?t.getParameter(36183):0}}function Ie(){function l(){m.value!==h&&(m.value=h,m.needsUpdate=0<u),s.numPlanes=u,s.numIntersection=0}function c(e,t,i,n){var r=null!==e?e.length:0,a=null;if(0!==r){if(a=m.value,!0!==n||null===a)for(n=i+4*r,t=t.matrixWorldInverse,f.getNormalMatrix(t),(null===a||a.length<n)&&(a=new Float32Array(n)),n=0;n!==r;++n,i+=4)o.copy(e[n]).applyMatrix4(t,f),o.normal.toArray(a,i),a[i+3]=o.constant;m.value=a,m.needsUpdate=!0}return s.numPlanes=r,a}var s=this,h=null,u=0,d=!1,p=!1,o=new v,f=new g,m={value:null,needsUpdate:!1};this.uniform=m,this.numIntersection=this.numPlanes=0,this.init=function(e,t,i){var n=0!==e.length||t||0!==u||d;return d=t,h=c(e,i,0),u=e.length,n},this.beginShadows=function(){p=!0,c(null)},this.endShadows=function(){p=!1,l()},this.setState=function(e,t,i,n,r,a){if(!d||null===e||0===e.length||p&&!i)p?c(null):l();else{var s=4*(i=p?0:u),o=r.clippingState||null;for(m.value=o,o=c(e,n,s,a),e=0;e!==s;++e)o[e]=h[e];r.clippingState=o,this.numIntersection=t?this.numPlanes:0,this.numPlanes+=i}}}function De(i){var n={};return{get:function(e){if(void 0!==n[e])return n[e];switch(e){case"WEBGL_depth_texture":var t=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":t=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":t=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":t=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:t=i.getExtension(e)}return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),n[e]=t}}}function ke(e,l,n){function r(e){var t=e.target;for(var i in null!==(e=a[t.id]).index&&l.remove(e.index),e.attributes)l.remove(e.attributes[i]);t.removeEventListener("dispose",r),delete a[t.id],(i=c[e.id])&&(l.remove(i),delete c[e.id]),n.memory.geometries--}var a={},c={};return{get:function(e,t){var i=a[t.id];return i||(t.addEventListener("dispose",r),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new L).setFromObject(e)),i=t._bufferGeometry),a[t.id]=i,n.memory.geometries++,i)},update:function(e){var t=e.index,i=e.attributes;for(var n in null!==t&&l.update(t,34963),i)l.update(i[n],34962);for(n in e=e.morphAttributes){i=0;for(var r=(t=e[n]).length;i<r;i++)l.update(t[i],34962)}},getWireframeAttribute:function(e){var t=c[e.id];if(t)return t;t=[];var i=e.index,n=e.attributes;if(null!==i){n=0;for(var r=(i=i.array).length;n<r;n+=3){var a=i[n+0],s=i[n+1],o=i[n+2];t.push(a,s,s,o,o,a)}}else for(i=n.position.array,n=0,r=i.length/3-1;n<r;n+=3)a=n+0,s=n+1,o=n+2,t.push(a,s,s,o,o,a);return t=new(65535<A(t)?E:b)(t,1),l.update(t,34963),c[e.id]=t}}}function Ne(r,a,s,o){var l,c,h;this.setMode=function(e){l=e},this.setIndex=function(e){c=e.type,h=e.bytesPerElement},this.render=function(e,t){r.drawElements(l,t,c,e*h),s.update(t,l)},this.renderInstances=function(e,t,i){if(o.isWebGL2)var n=r;else if(null===(n=a.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");n[o.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](l,i,c,t*h,e.maxInstancedCount),s.update(i,l,e.maxInstancedCount)}}function ze(e){var n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function(e,t,i){switch(i=i||1,n.calls++,t){case 4:n.triangles+=e/3*i;break;case 5:case 6:n.triangles+=i*(e-2);break;case 1:n.lines+=e/2*i;break;case 3:n.lines+=i*(e-1);break;case 2:n.lines+=i*e;break;case 0:n.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t)}}}}function U(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Be(c){var h={},u=new Float32Array(8);return{update:function(e,t,i,n){var r=e.morphTargetInfluences,a=r.length;if(void 0===(e=h[t.id])){e=[];for(var s=0;s<a;s++)e[s]=[s,0];h[t.id]=e}var o=i.morphTargets&&t.morphAttributes.position;for(i=i.morphNormals&&t.morphAttributes.normal,s=0;s<a;s++){var l=e[s];0!==l[1]&&(o&&t.removeAttribute("morphTarget"+s),i&&t.removeAttribute("morphNormal"+s))}for(s=0;s<a;s++)(l=e[s])[0]=s,l[1]=r[s];for(e.sort(U),s=0;s<8;s++)(l=e[s])&&(r=l[0],a=l[1])?(o&&t.addAttribute("morphTarget"+s,o[r]),i&&t.addAttribute("morphNormal"+s,i[r]),u[s]=a):u[s]=0;n.getUniforms().setValue(c,"morphTargetInfluences",u)}}}function He(r,a){var s={};return{update:function(e){var t=a.render.frame,i=e.geometry,n=r.get(e,i);return s[n.id]!==t&&(i.isGeometry&&n.updateFromObject(e),r.update(n),s[n.id]=t),n},dispose:function(){s={}}}}function G(e,t,i,n,r,a,s,o,l,c){d.call(this,e=void 0!==e?e:[],void 0!==t?t:301,i,n,r,a,s,o,l,c),this.flipY=!1}function V(e,t,i,n){d.call(this,null),this.image={data:e,width:t,height:i,depth:n},this.minFilter=this.magFilter=1003,this.flipY=this.generateMipmaps=!1}function j(e,t,i){var n=e[0];if(n<=0||0<n)return e;var r=t*i,a=oo[r];if(void 0===a&&(a=new Float32Array(r),oo[r]=a),0!==t)for(n.toArray(a,0),n=1,r=0;n!==t;++n)r+=i,e[n].toArray(a,r);return a}function X(e,t){if(e.length!==t.length)return!1;for(var i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Y(e,t){for(var i=0,n=t.length;i<n;i++)e[i]=t[i]}function q(e,t){var i=lo[t];void 0===i&&(i=new Int32Array(t),lo[t]=i);for(var n=0;n!==t;++n)i[n]=e.allocTextureUnit();return i}function $(e,t){var i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function Z(e,t){var i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function J(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y):X(i,t)||(e.uniform2fv(this.addr,t),Y(i,t))}function K(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z):void 0!==t.r?i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b):X(i,t)||(e.uniform3fv(this.addr,t),Y(i,t))}function Q(e,t){var i=this.cache;void 0!==t.x?i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w):X(i,t)||(e.uniform4fv(this.addr,t),Y(i,t))}function ee(e,t){var i=this.cache,n=t.elements;void 0===n?X(i,t)||(e.uniformMatrix2fv(this.addr,!1,t),Y(i,t)):X(i,n)||(uo.set(n),e.uniformMatrix2fv(this.addr,!1,uo),Y(i,n))}function te(e,t){var i=this.cache,n=t.elements;void 0===n?X(i,t)||(e.uniformMatrix3fv(this.addr,!1,t),Y(i,t)):X(i,n)||(ho.set(n),e.uniformMatrix3fv(this.addr,!1,ho),Y(i,n))}function ie(e,t){var i=this.cache,n=t.elements;void 0===n?X(i,t)||(e.uniformMatrix4fv(this.addr,!1,t),Y(i,t)):X(i,n)||(co.set(n),e.uniformMatrix4fv(this.addr,!1,co),Y(i,n))}function ne(e,t,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(t||ro,r)}function re(e,t,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||ao,r)}function ae(e,t,i){var n=this.cache,r=i.allocTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(t||so,r)}function se(e,t){var i=this.cache;X(i,t)||(e.uniform2iv(this.addr,t),Y(i,t))}function oe(e,t){var i=this.cache;X(i,t)||(e.uniform3iv(this.addr,t),Y(i,t))}function le(e,t){var i=this.cache;X(i,t)||(e.uniform4iv(this.addr,t),Y(i,t))}function ce(e,t){var i=this.cache;X(i,t)||(e.uniform1fv(this.addr,t),Y(i,t))}function he(e,t){var i=this.cache;X(i,t)||(e.uniform1iv(this.addr,t),Y(i,t))}function ue(e,t){X(this.cache,t=j(t,this.size,2))||(e.uniform2fv(this.addr,t),this.updateCache(t))}function de(e,t){X(this.cache,t=j(t,this.size,3))||(e.uniform3fv(this.addr,t),this.updateCache(t))}function pe(e,t){X(this.cache,t=j(t,this.size,4))||(e.uniform4fv(this.addr,t),this.updateCache(t))}function fe(e,t){X(this.cache,t=j(t,this.size,4))||(e.uniformMatrix2fv(this.addr,!1,t),this.updateCache(t))}function me(e,t){X(this.cache,t=j(t,this.size,9))||(e.uniformMatrix3fv(this.addr,!1,t),this.updateCache(t))}function ge(e,t){X(this.cache,t=j(t,this.size,16))||(e.uniformMatrix4fv(this.addr,!1,t),this.updateCache(t))}function ve(e,t,i){var n=this.cache,r=t.length,a=q(i,r);for(!1===X(n,a)&&(e.uniform1iv(this.addr,a),Y(n,a)),e=0;e!==r;++e)i.setTexture2D(t[e]||ro,a[e])}function ye(e,t,i){var n=this.cache,r=t.length,a=q(i,r);for(!1===X(n,a)&&(e.uniform1iv(this.addr,a),Y(n,a)),e=0;e!==r;++e)i.setTextureCube(t[e]||so,a[e])}function _e(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return $;case 35664:return J;case 35665:return K;case 35666:return Q;case 35674:return ee;case 35675:return te;case 35676:return ie;case 35678:case 36198:return ne;case 35679:return re;case 35680:return ae;case 5124:case 35670:return Z;case 35667:case 35671:return se;case 35668:case 35672:return oe;case 35669:case 35673:return le}}(t.type)}function xe(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ce;case 35664:return ue;case 35665:return de;case 35666:return pe;case 35674:return fe;case 35675:return me;case 35676:return ge;case 35678:return ve;case 35680:return ye;case 5124:case 35670:return he;case 35667:case 35671:return se;case 35668:case 35672:return oe;case 35669:case 35673:return le}}(t.type)}function be(e){this.id=e,this.seq=[],this.map={}}function Fe(e,t,i){this.seq=[],this.map={},this.renderer=i,i=e.getProgramParameter(t,35718);for(var n=0;n<i;++n){var r=e.getActiveUniform(t,n),a=e.getUniformLocation(t,r.name),s=this,o=r.name,l=o.length;for(po.lastIndex=0;;){var c=po.exec(o),h=po.lastIndex,u=c[1],d=c[3];if("]"===c[2]&&(u|=0),void 0===d||"["===d&&h+2===l){o=s,r=void 0===d?new _e(u,r,a):new xe(u,r,a),o.seq.push(r),o.map[r.id]=r;break}void 0===(d=s.map[u])&&(d=new be(u),u=s,s=d,u.seq.push(s),u.map[s.id]=s),s=d}}}function Ue(e,t,i){var n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),!1===e.getShaderParameter(n,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(n),function(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(i)),n}function Ge(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+e)}}function Ve(e,t){return"vec4 "+e+"( vec4 value ) { return "+(t=Ge(t))[0]+"ToLinear"+t[1]+"; }"}function je(e){return""!==e}function We(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Xe(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Ye(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){if(void 0===(e=Ua[t]))throw Error("Can not resolve #include <"+t+">");return Ye(e)})}function qe(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,i,n){for(e="",t=parseInt(t);t<parseInt(i);t++)e+=n.replace(/\[ i \]/g,"[ "+t+" ]");return e})}function $e(e,t,i,n,r,a,s){var o=e.context,l=n.defines,c=r.vertexShader,h=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?u="SHADOWMAP_TYPE_PCF":2===a.shadowMapType&&(u="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(n.envMap.mapping){case 301:case 302:d="ENVMAP_TYPE_CUBE";break;case 306:case 307:d="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:d="ENVMAP_TYPE_EQUIREC";break;case 305:d="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:p="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:f="ENVMAP_BLENDING_MULTIPLY";break;case 1:f="ENVMAP_BLENDING_MIX";break;case 2:f="ENVMAP_BLENDING_ADD"}}var m,g,v,y,_,x,b,w=0<e.gammaFactor?e.gammaFactor:1,T=s.isWebGL2?"":(m=n.extensions,g=a,v=t,[(m=m||{}).derivatives||g.envMapCubeUV||g.bumpMap||g.normalMap&&!g.objectSpaceNormalMap||g.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(m.fragDepth||g.logarithmicDepthBuffer)&&v.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",m.drawBuffers&&v.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(m.shaderTextureLOD||g.envMap)&&v.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(je).join("\n")),E=function(e){var t,i=[];for(t in e){var n=e[t];!1!==n&&i.push("#define "+t+" "+n)}return i.join("\n")}(l),M=o.createProgram();return n.isRawShaderMaterial?(0<(l=[E].filter(je).join("\n")).length&&(l+="\n"),0<(t=[T,E].filter(je).join("\n")).length&&(t+="\n")):(l=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,E,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+w,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(je).join("\n"),t=[T,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,E,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+w,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+p:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(s.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(s.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?Ua.tonemapping_pars_fragment:"",0!==a.toneMapping?function(e,t){switch(t){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Uncharted2";break;case 4:t="OptimizedCineon";break;case 5:t="ACESFilmic";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Ua.encodings_pars_fragment:"",a.mapEncoding?Ve("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?Ve("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?Ve("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Ve("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(y="linearToOutputTexel",_=a.outputEncoding,"vec4 "+y+"( vec4 value ) { return LinearTo"+(_=Ge(_))[0]+_[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(je).join("\n")),c=Xe(c=We(c=Ye(c),a),a),h=Xe(h=We(h=Ye(h),a),a),c=qe(c),h=qe(h),s.isWebGL2&&!n.isRawShaderMaterial&&(s=!1,u=/^\s*#version\s+300\s+es\s*\n/,n.isShaderMaterial&&null!==c.match(u)&&null!==h.match(u)&&(s=!0,c=c.replace(u,""),h=h.replace(u,"")),l="#version 300 es\n\n#define attribute in\n#define varying out\n#define texture2D texture\n"+l,t=["#version 300 es\n\n#define varying in",s?"":"out highp vec4 pc_fragColor;",s?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+t),h=t+h,c=Ue(o,35633,l+c),h=Ue(o,35632,h),o.attachShader(M,c),o.attachShader(M,h),void 0!==n.index0AttributeName?o.bindAttribLocation(M,0,n.index0AttributeName):!0===a.morphTargets&&o.bindAttribLocation(M,0,"position"),o.linkProgram(M),a=o.getProgramInfoLog(M).trim(),s=o.getShaderInfoLog(c).trim(),u=o.getShaderInfoLog(h).trim(),p=d=!0,!1===o.getProgramParameter(M,35714)?(d=!1,console.error("THREE.WebGLProgram: shader error: ",o.getError(),"35715",o.getProgramParameter(M,35715),"gl.getProgramInfoLog",a,s,u)):""!==a?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",a):""!==s&&""!==u||(p=!1),p&&(this.diagnostics={runnable:d,material:n,programLog:a,vertexShader:{log:s,prefix:l},fragmentShader:{log:u,prefix:t}}),o.deleteShader(c),o.deleteShader(h),this.getUniforms=function(){return void 0===x&&(x=new Fe(o,M,e)),x},this.getAttributes=function(){if(void 0===b){for(var e={},t=o.getProgramParameter(M,35721),i=0;i<t;i++){var n=o.getActiveAttrib(M,i).name;e[n]=o.getAttribLocation(M,n)}b=e}return b},this.destroy=function(){o.deleteProgram(M),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=fo++,this.code=i,this.usedTimes=1,this.program=M,this.vertexShader=c,this.fragmentShader=h,this}function Ze(u,l,d){function p(e,t){if(e)e.isTexture?i=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=e.texture.encoding);else var i=3e3;return 3e3===i&&t&&(i=3007),i}var c=[],f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},r="precision supportsVertexTextures map mapEncoding matcap matcapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap objectSpaceNormalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(e,t,i,n,r,a,s){var o=f[e.type];if(s.isSkinnedMesh){var l=s.skeleton.bones;if(d.floatVertexTextures)l=1024;else{var c=Math.min(Math.floor((d.maxVertexUniforms-20)/4),l.length);l=c<l.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+l.length+" bones. This GPU supports "+c+"."),0):c}}else l=0;c=d.precision,null!==e.precision&&((c=d.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",c,"instead."));var h=u.getRenderTarget();return{shaderID:o,precision:c,supportsVertexTextures:d.vertexTextures,outputEncoding:p(h?h.texture:null,u.gammaOutput),map:!!e.map,mapEncoding:p(e.map,u.gammaInput),matcap:!!e.matcap,matcapEncoding:p(e.matcap,u.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:p(e.envMap,u.gammaInput),envMapCubeUV:!!e.envMap&&(306===e.envMap.mapping||307===e.envMap.mapping),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:p(e.emissiveMap,u.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:1===e.normalMapType,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!n,useFog:e.fog,fogExp:n&&n.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:d.logarithmicDepthBuffer,skinning:e.skinning&&0<l,maxBones:l,useVertexTexture:d.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:u.maxMorphTargets,maxMorphNormals:u.maxMorphNormals,numDirLights:t.directional.length,numPointLights:t.point.length,numSpotLights:t.spot.length,numRectAreaLights:t.rectArea.length,numHemiLights:t.hemi.length,numClippingPlanes:r,numClipIntersection:a,dithering:e.dithering,shadowMapEnabled:u.shadowMap.enabled&&s.receiveShadow&&0<i.length,shadowMapType:u.shadowMap.type,toneMapping:u.toneMapping,physicallyCorrectLights:u.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:2===e.side,flipSided:1===e.side,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,t){var i=[];if(t.shaderID?i.push(t.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var n in e.defines)i.push(n),i.push(e.defines[n]);for(n=0;n<r.length;n++)i.push(t[r[n]]);return i.push(e.onBeforeCompile.toString()),i.push(u.gammaOutput),i.push(u.gammaFactor),i.join()},this.acquireProgram=function(e,t,i,n){for(var r,a=0,s=c.length;a<s;a++){var o=c[a];if(o.code===n){++(r=o).usedTimes;break}}return void 0===r&&(r=new $e(u,l,n,e,t,i,d),c.push(r)),r},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},this.programs=c}function Je(){var n=new WeakMap;return{get:function(e){var t=n.get(e);return void 0===t&&(t={},n.set(e,t)),t},remove:function(e){n.delete(e)},update:function(e,t,i){n.get(e)[t]=i},dispose:function(){n=new WeakMap}}}function Ke(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Qe(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function et(){function s(e,t,i,n,r,a){var s=o[l];return void 0===s?(s={id:e.id,object:e,geometry:t,material:i,program:i.program,groupOrder:n,renderOrder:e.renderOrder,z:r,group:a},o[l]=s):(s.id=e.id,s.object=e,s.geometry=t,s.material=i,s.program=i.program,s.groupOrder=n,s.renderOrder=e.renderOrder,s.z=r,s.group=a),l++,s}var o=[],l=0,c=[],h=[];return{opaque:c,transparent:h,init:function(){l=0,c.length=0,h.length=0},push:function(e,t,i,n,r,a){e=s(e,t,i,n,r,a),(!0===i.transparent?h:c).push(e)},unshift:function(e,t,i,n,r,a){e=s(e,t,i,n,r,a),(!0===i.transparent?h:c).unshift(e)},sort:function(){1<c.length&&c.sort(Ke),1<h.length&&h.sort(Qe)}}}function tt(){function r(e){(e=e.target).removeEventListener("dispose",r),delete a[e.id]}var a={};return{get:function(e,t){var i=a[e.id];if(void 0===i){var n=new et;a[e.id]={},a[e.id][t.id]=n,e.addEventListener("dispose",r)}else void 0===(n=i[t.id])&&(n=new et,i[t.id]=n);return n},dispose:function(){a={}}}}function it(){var i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];switch(e.type){case"DirectionalLight":var t={direction:new Te,color:new p,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new W};break;case"SpotLight":t={position:new Te,direction:new Te,color:new p,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new W};break;case"PointLight":t={position:new Te,color:new p,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new W,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":t={direction:new Te,skyColor:new p,groundColor:new p};break;case"RectAreaLight":t={color:new p,position:new Te,halfWidth:new Te,halfHeight:new Te}}return i[e.id]=t}}}function nt(){var _=new it,x={id:mo++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},b=new Te,w=new we,T=new we;return{setup:function(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,h=0;i=i.matrixWorldInverse;for(var u=0,d=e.length;u<d;u++){var p=e[u],f=p.color,m=p.intensity,g=p.distance,v=p.shadow&&p.shadow.map?p.shadow.map.texture:null;if(p.isAmbientLight)n+=f.r*m,r+=f.g*m,a+=f.b*m;else if(p.isDirectionalLight){var y=_.get(p);y.color.copy(p.color).multiplyScalar(p.intensity),y.direction.setFromMatrixPosition(p.matrixWorld),b.setFromMatrixPosition(p.target.matrixWorld),y.direction.sub(b),y.direction.transformDirection(i),(y.shadow=p.castShadow)&&(f=p.shadow,y.shadowBias=f.bias,y.shadowRadius=f.radius,y.shadowMapSize=f.mapSize),x.directionalShadowMap[s]=v,x.directionalShadowMatrix[s]=p.shadow.matrix,x.directional[s]=y,s++}else p.isSpotLight?((y=_.get(p)).position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(i),y.color.copy(f).multiplyScalar(m),y.distance=g,y.direction.setFromMatrixPosition(p.matrixWorld),b.setFromMatrixPosition(p.target.matrixWorld),y.direction.sub(b),y.direction.transformDirection(i),y.coneCos=Math.cos(p.angle),y.penumbraCos=Math.cos(p.angle*(1-p.penumbra)),y.decay=p.decay,(y.shadow=p.castShadow)&&(f=p.shadow,y.shadowBias=f.bias,y.shadowRadius=f.radius,y.shadowMapSize=f.mapSize),x.spotShadowMap[l]=v,x.spotShadowMatrix[l]=p.shadow.matrix,x.spot[l]=y,l++):p.isRectAreaLight?((y=_.get(p)).color.copy(f).multiplyScalar(m),y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(i),T.identity(),w.copy(p.matrixWorld),w.premultiply(i),T.extractRotation(w),y.halfWidth.set(.5*p.width,0,0),y.halfHeight.set(0,.5*p.height,0),y.halfWidth.applyMatrix4(T),y.halfHeight.applyMatrix4(T),x.rectArea[c]=y,c++):p.isPointLight?((y=_.get(p)).position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(i),y.color.copy(p.color).multiplyScalar(p.intensity),y.distance=p.distance,y.decay=p.decay,(y.shadow=p.castShadow)&&(f=p.shadow,y.shadowBias=f.bias,y.shadowRadius=f.radius,y.shadowMapSize=f.mapSize,y.shadowCameraNear=f.camera.near,y.shadowCameraFar=f.camera.far),x.pointShadowMap[o]=v,x.pointShadowMatrix[o]=p.shadow.matrix,x.point[o]=y,o++):p.isHemisphereLight&&((y=_.get(p)).direction.setFromMatrixPosition(p.matrixWorld),y.direction.transformDirection(i),y.direction.normalize(),y.skyColor.copy(p.color).multiplyScalar(m),y.groundColor.copy(p.groundColor).multiplyScalar(m),x.hemi[h]=y,h++)}x.ambient[0]=n,x.ambient[1]=r,x.ambient[2]=a,x.directional.length=s,x.spot.length=l,x.rectArea.length=c,x.point.length=o,x.hemi.length=h,x.hash.stateID=x.id,x.hash.directionalLength=s,x.hash.pointLength=o,x.hash.spotLength=l,x.hash.rectAreaLength=c,x.hash.hemiLength=h,x.hash.shadowsLength=t.length},state:x}}function rt(){var t=new nt,i=[],n=[];return{init:function(){i.length=0,n.length=0},state:{lightsArray:i,shadowsArray:n,lights:t},setupLights:function(e){t.setup(i,n,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){n.push(e)}}}function at(){function n(e){(e=e.target).removeEventListener("dispose",n),delete r[e.id]}var r={};return{get:function(e,t){if(void 0===r[e.id]){var i=new rt;r[e.id]={},r[e.id][t.id]=i,e.addEventListener("dispose",n)}else void 0===r[e.id][t.id]?(i=new rt,r[e.id][t.id]=i):i=r[e.id][t.id];return i},dispose:function(){r={}}}}function st(e){k.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(e)}function ot(e){k.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Te,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(e)}function lt(d,u,e){function p(e,t,i,n,r,a){var s=e.geometry,o=c,l=e.customDepthMaterial;return i&&(o=h,l=e.customDistanceMaterial),o=l||(l=!1,t.morphTargets&&(s&&s.isBufferGeometry?l=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(l=s.morphTargets&&0<s.morphTargets.length)),e.isSkinnedMesh&&!1===t.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e),s=0,l&&(s|=1),(e=e.isSkinnedMesh&&t.skinning)&&(s|=2),o[s]),d.localClippingEnabled&&!0===t.clipShadows&&0!==t.clippingPlanes.length&&(s=o.uuid,l=t.uuid,void 0===(e=b[s])&&(e={},b[s]=e),void 0===(s=e[l])&&(s=o.clone(),e[l]=s),o=s),o.visible=t.visible,o.wireframe=t.wireframe,o.side=null!=t.shadowSide?t.shadowSide:w[t.side],o.clipShadows=t.clipShadows,o.clippingPlanes=t.clippingPlanes,o.clipIntersection=t.clipIntersection,o.wireframeLinewidth=t.wireframeLinewidth,o.linewidth=t.linewidth,i&&o.isMeshDistanceMaterial&&(o.referencePosition.copy(n),o.nearDistance=r,o.farDistance=a),o}function f(e,t,i,n){if(!1!==e.visible){if(e.layers.test(t.layers)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!e.frustumCulled||m.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld);var r=u.update(e),a=e.material;if(Array.isArray(a))for(var s=r.groups,o=0,l=s.length;o<l;o++){var c=s[o],h=a[c.materialIndex];h&&h.visible&&(h=p(e,h,n,x,i.near,i.far),d.renderBufferDirect(i,null,r,h,e,c))}else a.visible&&(h=p(e,a,n,x,i.near,i.far),d.renderBufferDirect(i,null,r,h,e,null))}for(r=0,a=(e=e.children).length;r<a;r++)f(e[r],t,i,n)}}var m=new Se,g=new we,v=new W,y=new W(e,e),_=new Te,x=new Te,c=Array(4),h=Array(4),b={},w={0:1,1:0,2:2},T=[new Te(1,0,0),new Te(-1,0,0),new Te(0,0,1),new Te(0,0,-1),new Te(0,1,0),new Te(0,-1,0)],E=[new Te(0,1,0),new Te(0,1,0),new Te(0,1,0),new Te(0,1,0),new Te(0,0,1),new Te(0,0,-1)],M=[new Ee,new Ee,new Ee,new Ee,new Ee,new Ee];for(e=0;4!==e;++e){var t=0!=(1&e),i=0!=(2&e),n=new st({depthPacking:3201,morphTargets:t,skinning:i});c[e]=n,t=new ot({morphTargets:t,skinning:i}),h[e]=t}var S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,t,i){if(!1!==S.enabled&&(!1!==S.autoUpdate||!1!==S.needsUpdate)&&0!==e.length){var n=d.state;n.setBlending(0),n.buffers.color.setClear(1,1,1,1),n.buffers.depth.setTest(!0),n.setScissorTest(!1);for(var r,a=0,s=e.length;a<s;a++){var o=e[a];r=o.shadow;var l=o&&o.isPointLight;if(void 0===r)console.warn("THREE.WebGLShadowMap:",o,"has no shadow.");else{var c=r.camera;if(v.copy(r.mapSize),v.min(y),l){var h=v.x,u=v.y;M[0].set(2*h,u,h,u),M[1].set(0,u,h,u),M[2].set(3*h,u,h,u),M[3].set(h,u,h,u),M[4].set(3*h,0,h,u),M[5].set(h,0,h,u),v.x*=4,v.y*=2}for(null===r.map&&(r.map=new C(v.x,v.y,{minFilter:1003,magFilter:1003,format:1023}),r.map.texture.name=o.name+".shadowMap",c.updateProjectionMatrix()),r.isSpotLightShadow&&r.update(o),h=r.map,u=r.matrix,x.setFromMatrixPosition(o.matrixWorld),c.position.copy(x),l?(r=6,u.makeTranslation(-x.x,-x.y,-x.z)):(r=1,_.setFromMatrixPosition(o.target.matrixWorld),c.lookAt(_),c.updateMatrixWorld(),u.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),u.multiply(c.projectionMatrix),u.multiply(c.matrixWorldInverse)),d.setRenderTarget(h),d.clear(),o=0;o<r;o++)l&&(_.copy(c.position),_.add(T[o]),c.up.copy(E[o]),c.lookAt(_),c.updateMatrixWorld(),n.viewport(M[o])),g.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),m.setFromMatrix(g),f(t,i,c,l)}}S.needsUpdate=!1}}}function ct(h,i,l,n){function e(e,t,i){var n=new Uint8Array(4),r=h.createTexture();for(h.bindTexture(e,r),h.texParameteri(e,10241,9728),h.texParameteri(e,10240,9728),e=0;e<i;e++)h.texImage2D(t+e,0,6408,1,1,0,6408,5121,n);return r}function t(e,t){v[e]=1,0===y[e]&&(h.enableVertexAttribArray(e),y[e]=1),_[e]!==t&&((n.isWebGL2?h:i.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](e,t),_[e]=t)}function u(e){!0!==x[e]&&(h.enable(e),x[e]=!0)}function d(e){!1!==x[e]&&(h.disable(e),x[e]=!1)}function r(e,t,i,n,r,a,s,o){if(0===e)T&&(d(3042),T=!1);else if(T||(u(3042),T=!0),5!==e){if(e!==E||o!==R){if(100===M&&100===A||(h.blendEquation(32774),A=M=100),o)switch(e){case 1:h.blendFuncSeparate(1,771,1,771);break;case 2:h.blendFunc(1,1);break;case 3:h.blendFuncSeparate(0,0,769,771);break;case 4:h.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:h.blendFuncSeparate(770,771,1,771);break;case 2:h.blendFunc(770,1);break;case 3:h.blendFunc(0,769);break;case 4:h.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}L=P=C=S=null,E=e,R=o}}else r=r||t,a=a||i,s=s||n,t===M&&r===A||(h.blendEquationSeparate(l.convert(t),l.convert(r)),M=t,A=r),i===S&&n===C&&a===P&&s===L||(h.blendFuncSeparate(l.convert(i),l.convert(n),l.convert(a),l.convert(s)),S=i,C=n,P=a,L=s),E=e,R=null}function a(e){O!==e&&(e?h.frontFace(2304):h.frontFace(2305),O=e)}function s(e){0!==e?(u(2884),e!==I&&(1===e?h.cullFace(1029):2===e?h.cullFace(1028):h.cullFace(1032))):d(2884),I=e}function o(e,t,i){e?(u(32823),(k!==t||N!==i)&&(h.polygonOffset(t,i),k=t,N=i)):d(32823)}function c(e){void 0===e&&(e=33984+z-1),H!==e&&(h.activeTexture(e),H=e)}var p=new function(){var t=!1,a=new Ee,i=null,s=new Ee(0,0,0,0);return{setMask:function(e){i===e||t||(h.colorMask(e,e,e,e),i=e)},setLocked:function(e){t=e},setClear:function(e,t,i,n,r){!0===r&&(e*=n,t*=n,i*=n),a.set(e,t,i,n),!1===s.equals(a)&&(h.clearColor(e,t,i,n),s.copy(a))},reset:function(){t=!1,i=null,s.set(-1,0,0,0)}}},f=new function(){var t=!1,i=null,n=null,r=null;return{setTest:function(e){e?u(2929):d(2929)},setMask:function(e){i===e||t||(h.depthMask(e),i=e)},setFunc:function(e){if(n!==e){if(e)switch(e){case 0:h.depthFunc(512);break;case 1:h.depthFunc(519);break;case 2:h.depthFunc(513);break;case 3:h.depthFunc(515);break;case 4:h.depthFunc(514);break;case 5:h.depthFunc(518);break;case 6:h.depthFunc(516);break;case 7:h.depthFunc(517);break;default:h.depthFunc(515)}else h.depthFunc(515);n=e}},setLocked:function(e){t=e},setClear:function(e){r!==e&&(h.clearDepth(e),r=e)},reset:function(){t=!1,r=n=i=null}}},m=new function(){var t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(e){e?u(2960):d(2960)},setMask:function(e){i===e||t||(h.stencilMask(e),i=e)},setFunc:function(e,t,i){n===e&&r===t&&a===i||(h.stencilFunc(e,t,i),n=e,r=t,a=i)},setOp:function(e,t,i){s===e&&o===t&&l===i||(h.stencilOp(e,t,i),s=e,o=t,l=i)},setLocked:function(e){t=e},setClear:function(e){c!==e&&(h.clearStencil(e),c=e)},reset:function(){t=!1,c=l=o=s=a=r=n=i=null}}},g=h.getParameter(34921),v=new Uint8Array(g),y=new Uint8Array(g),_=new Uint8Array(g),x={},b=null,w=null,T=null,E=null,M=null,S=null,C=null,A=null,P=null,L=null,R=!1,O=null,I=null,D=null,k=null,N=null,z=h.getParameter(35661),B=!1;g=0,-1!==(g=h.getParameter(7938)).indexOf("WebGL")?(g=parseFloat(/^WebGL ([0-9])/.exec(g)[1]),B=1<=g):-1!==g.indexOf("OpenGL ES")&&(g=parseFloat(/^OpenGL ES ([0-9])/.exec(g)[1]),B=2<=g);var H=null,F={},U=new Ee,G=new Ee,V={};return V[3553]=e(3553,3553,1),V[34067]=e(34067,34069,6),p.setClear(0,0,0,1),f.setClear(1),m.setClear(0),u(2929),f.setFunc(3),a(!1),s(1),u(2884),r(0),{buffers:{color:p,depth:f,stencil:m},initAttributes:function(){for(var e=0,t=v.length;e<t;e++)v[e]=0},enableAttribute:function(e){t(e,0)},enableAttributeAndDivisor:t,disableUnusedAttributes:function(){for(var e=0,t=y.length;e!==t;++e)y[e]!==v[e]&&(h.disableVertexAttribArray(e),y[e]=0)},enable:u,disable:d,getCompressedTextureFormats:function(){if(null===b&&(b=[],i.get("WEBGL_compressed_texture_pvrtc")||i.get("WEBGL_compressed_texture_s3tc")||i.get("WEBGL_compressed_texture_etc1")||i.get("WEBGL_compressed_texture_astc")))for(var e=h.getParameter(34467),t=0;t<e.length;t++)b.push(e[t]);return b},useProgram:function(e){return w!==e&&(h.useProgram(e),w=e,!0)},setBlending:r,setMaterial:function(e,t){2===e.side?d(2884):u(2884);var i=1===e.side;t&&(i=!i),a(i),1===e.blending&&!1===e.transparent?r(0):r(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),f.setFunc(e.depthFunc),f.setTest(e.depthTest),f.setMask(e.depthWrite),p.setMask(e.colorWrite),o(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:a,setCullFace:s,setLineWidth:function(e){e!==D&&(B&&h.lineWidth(e),D=e)},setPolygonOffset:o,setScissorTest:function(e){e?u(3089):d(3089)},activeTexture:c,bindTexture:function(e,t){null===H&&c();var i=F[H];void 0===i&&(i={type:void 0,texture:void 0},F[H]=i),i.type===e&&i.texture===t||(h.bindTexture(e,t||V[e]),i.type=e,i.texture=t)},compressedTexImage2D:function(){try{h.compressedTexImage2D.apply(h,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{h.texImage2D.apply(h,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{h.texImage3D.apply(h,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===U.equals(e)&&(h.scissor(e.x,e.y,e.z,e.w),U.copy(e))},viewport:function(e){!1===G.equals(e)&&(h.viewport(e.x,e.y,e.z,e.w),G.copy(e))},reset:function(){for(var e=0;e<y.length;e++)1===y[e]&&(h.disableVertexAttribArray(e),y[e]=0);x={},H=b=null,F={},I=O=E=w=null,p.reset(),f.reset(),m.reset()}}}function ht(m,n,g,v,y,_,x){function b(e,t,i,n){var r=1;if((e.width>n||e.height>n)&&(r=n/Math.max(e.width,e.height)),r<1||!0===t){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap)return void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),i=i?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):s,t=t?ya.floorPowerOfTwo:Math.floor,i.width=t(r*e.width),i.height=t(r*e.height),i.getContext("2d").drawImage(e,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+i.width+"x"+i.height+")."),i;"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+").")}return e}function w(e){return ya.isPowerOfTwo(e.width)&&ya.isPowerOfTwo(e.height)}function T(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function E(e,t,i,n){m.generateMipmap(e),v.get(t).__maxMipLevel=Math.log(Math.max(i,n))*Math.LOG2E}function M(e,t){if(!y.isWebGL2)return e;var i=e;return 6403===e&&(5126===t&&(i=33326),5131===t&&(i=33325),5121===t&&(i=33321)),6407===e&&(5126===t&&(i=34837),5131===t&&(i=34843),5121===t&&(i=32849)),6408===e&&(5126===t&&(i=34836),5131===t&&(i=34842),5121===t&&(i=32856)),33325===i||33326===i||34842===i||34836===i?n.get("EXT_color_buffer_float"):(34843===i||34837===i)&&console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function r(e){return 1003===e||1004===e||1005===e?9728:9729}function S(e){(e=e.target).removeEventListener("dispose",S);e:{var t=v.get(e);if(e.image&&t.__image__webglTextureCube)m.deleteTexture(t.__image__webglTextureCube);else{if(void 0===t.__webglInit)break e;m.deleteTexture(t.__webglTexture)}v.remove(e)}e.isVideoTexture&&delete d[e.id],x.memory.textures--}function o(e){(e=e.target).removeEventListener("dispose",o);var t=v.get(e),i=v.get(e.texture);if(e){if(void 0!==i.__webglTexture&&m.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(i=0;i<6;i++)m.deleteFramebuffer(t.__webglFramebuffer[i]),t.__webglDepthbuffer&&m.deleteRenderbuffer(t.__webglDepthbuffer[i]);else m.deleteFramebuffer(t.__webglFramebuffer),t.__webglDepthbuffer&&m.deleteRenderbuffer(t.__webglDepthbuffer);v.remove(e.texture),v.remove(e)}x.memory.textures--}function l(e,t){var i=v.get(e);if(e.isVideoTexture){var n=e.id,r=x.render.frame;d[n]!==r&&(d[n]=r,e.update())}if(0<e.version&&i.__version!==e.version)if(void 0===(n=e.image))console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void a(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}g.activeTexture(33984+t),g.bindTexture(3553,i.__webglTexture)}function C(e,t,i){i?(m.texParameteri(e,10242,_.convert(t.wrapS)),m.texParameteri(e,10243,_.convert(t.wrapT)),m.texParameteri(e,10240,_.convert(t.magFilter)),m.texParameteri(e,10241,_.convert(t.minFilter))):(m.texParameteri(e,10242,33071),m.texParameteri(e,10243,33071),1001===t.wrapS&&1001===t.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),m.texParameteri(e,10240,r(t.magFilter)),m.texParameteri(e,10241,r(t.minFilter)),1003!==t.minFilter&&1006!==t.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!(i=n.get("EXT_texture_filter_anisotropic"))||1015===t.type&&null===n.get("OES_texture_float_linear")||1016===t.type&&null===(y.isWebGL2||n.get("OES_texture_half_float_linear"))||!(1<t.anisotropy||v.get(t).__currentAnisotropy)||(m.texParameterf(e,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,y.getMaxAnisotropy())),v.get(t).__currentAnisotropy=t.anisotropy)}function a(e,t,i){var n=t.isDataTexture3D?32879:3553;void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener("dispose",S),e.__webglTexture=m.createTexture(),x.memory.textures++),g.activeTexture(33984+i),g.bindTexture(n,e.__webglTexture),m.pixelStorei(37440,t.flipY),m.pixelStorei(37441,t.premultiplyAlpha),m.pixelStorei(3317,t.unpackAlignment),i=(i=!y.isWebGL2&&(1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter))&&!1===w(t.image);var r=w(i=b(t.image,i,!1,y.maxTextureSize))||y.isWebGL2,a=_.convert(t.format),s=_.convert(t.type),o=M(a,s);C(n,t,r);var l=t.mipmaps;if(t.isDepthTexture){if(o=6402,1015===t.type){if(!y.isWebGL2)throw Error("Float Depth Texture only supported in WebGL2.0");o=36012}else y.isWebGL2&&(o=33189);1026===t.format&&6402===o&&1012!==t.type&&1014!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=1012,s=_.convert(t.type)),1027===t.format&&(o=34041,1020!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=1020,s=_.convert(t.type))),g.texImage2D(3553,0,o,i.width,i.height,0,a,s,null)}else if(t.isDataTexture)if(0<l.length&&r){for(var c=0,h=l.length;c<h;c++)n=l[c],g.texImage2D(3553,c,o,n.width,n.height,0,a,s,n.data);t.generateMipmaps=!1,e.__maxMipLevel=l.length-1}else g.texImage2D(3553,0,o,i.width,i.height,0,a,s,i.data),e.__maxMipLevel=0;else if(t.isCompressedTexture){for(c=0,h=l.length;c<h;c++)n=l[c],1023!==t.format&&1022!==t.format?-1<g.getCompressedTextureFormats().indexOf(a)?g.compressedTexImage2D(3553,c,o,n.width,n.height,0,n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):g.texImage2D(3553,c,o,n.width,n.height,0,a,s,n.data);e.__maxMipLevel=l.length-1}else if(t.isDataTexture3D)g.texImage3D(32879,0,o,i.width,i.height,i.depth,0,a,s,i.data),e.__maxMipLevel=0;else if(0<l.length&&r){for(c=0,h=l.length;c<h;c++)n=l[c],g.texImage2D(3553,c,o,a,s,n);t.generateMipmaps=!1,e.__maxMipLevel=l.length-1}else g.texImage2D(3553,0,o,a,s,i),e.__maxMipLevel=0;T(t,r)&&E(3553,t,i.width,i.height),e.__version=t.version,t.onUpdate&&t.onUpdate(t)}function c(e,t,i,n){var r=_.convert(t.texture.format),a=_.convert(t.texture.type),s=M(r,a);g.texImage2D(n,0,s,t.width,t.height,0,r,a,null),m.bindFramebuffer(36160,e),m.framebufferTexture2D(36160,i,n,v.get(t.texture).__webglTexture,0),m.bindFramebuffer(36160,null)}function h(e,t,i){if(m.bindRenderbuffer(36161,e),t.depthBuffer&&!t.stencilBuffer)i?(i=u(t),m.renderbufferStorageMultisample(36161,i,33189,t.width,t.height)):m.renderbufferStorage(36161,33189,t.width,t.height),m.framebufferRenderbuffer(36160,36096,36161,e);else if(t.depthBuffer&&t.stencilBuffer)i?(i=u(t),m.renderbufferStorageMultisample(36161,i,34041,t.width,t.height)):m.renderbufferStorage(36161,34041,t.width,t.height),m.framebufferRenderbuffer(36160,33306,36161,e);else{e=M(e=_.convert(t.texture.format),_.convert(t.texture.type)),i?(i=u(t),m.renderbufferStorageMultisample(36161,i,e,t.width,t.height)):m.renderbufferStorage(36161,e,t.width,t.height)}m.bindRenderbuffer(36161,null)}function u(e){return y.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(y.maxSamples,e.samples):0}var s,d={};this.setTexture2D=l,this.setTexture3D=function(e,t){var i=v.get(e);0<e.version&&i.__version!==e.version?a(i,e,t):(g.activeTexture(33984+t),g.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(e,t){var i=v.get(e);if(6===e.image.length)if(0<e.version&&i.__version!==e.version){i.__image__webglTextureCube||(e.addEventListener("dispose",S),i.__image__webglTextureCube=m.createTexture(),x.memory.textures++),g.activeTexture(33984+t),g.bindTexture(34067,i.__image__webglTextureCube),m.pixelStorei(37440,e.flipY),t=e&&e.isCompressedTexture;for(var n=e.image[0]&&e.image[0].isDataTexture,r=[],a=0;a<6;a++)r[a]=t||n?n?e.image[a].image:e.image[a]:b(e.image[a],!1,!0,y.maxCubemapSize);var s=r[0],o=w(s)||y.isWebGL2,l=_.convert(e.format),c=_.convert(e.type),h=M(l,c);for(C(34067,e,o),a=0;a<6;a++)if(t)for(var u,d=r[a].mipmaps,p=0,f=d.length;p<f;p++)u=d[p],1023!==e.format&&1022!==e.format?-1<g.getCompressedTextureFormats().indexOf(l)?g.compressedTexImage2D(34069+a,p,h,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g.texImage2D(34069+a,p,h,u.width,u.height,0,l,c,u.data);else n?g.texImage2D(34069+a,0,h,r[a].width,r[a].height,0,l,c,r[a].data):g.texImage2D(34069+a,0,h,l,c,r[a]);i.__maxMipLevel=t?d.length-1:0,T(e,o)&&E(34067,e,s.width,s.height),i.__version=e.version,e.onUpdate&&e.onUpdate(e)}else g.activeTexture(33984+t),g.bindTexture(34067,i.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,t){g.activeTexture(33984+t),g.bindTexture(34067,v.get(e).__webglTexture)},this.setupRenderTarget=function(e){var t=v.get(e),i=v.get(e.texture);e.addEventListener("dispose",o),i.__webglTexture=m.createTexture(),x.memory.textures++;var n=!0===e.isWebGLRenderTargetCube,r=!0===e.isWebGLMultisampleRenderTarget,a=w(e)||y.isWebGL2;if(n)for(t.__webglFramebuffer=[],r=0;r<6;r++)t.__webglFramebuffer[r]=m.createFramebuffer();else if(t.__webglFramebuffer=m.createFramebuffer(),r)if(y.isWebGL2){t.__webglMultisampledFramebuffer=m.createFramebuffer(),t.__webglColorRenderbuffer=m.createRenderbuffer(),m.bindRenderbuffer(36161,t.__webglColorRenderbuffer),r=_.convert(e.texture.format);var s=_.convert(e.texture.type);r=M(r,s),s=u(e),m.renderbufferStorageMultisample(36161,s,r,e.width,e.height),m.bindFramebuffer(36160,t.__webglMultisampledFramebuffer),m.framebufferRenderbuffer(36160,36064,36161,t.__webglColorRenderbuffer),m.bindRenderbuffer(36161,null),e.depthBuffer&&(t.__webglDepthRenderbuffer=m.createRenderbuffer(),h(t.__webglDepthRenderbuffer,e,!0)),m.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(n){for(g.bindTexture(34067,i.__webglTexture),C(34067,e.texture,a),r=0;r<6;r++)c(t.__webglFramebuffer[r],e,36064,34069+r);T(e.texture,a)&&E(34067,e.texture,e.width,e.height),g.bindTexture(34067,null)}else g.bindTexture(3553,i.__webglTexture),C(3553,e.texture,a),c(t.__webglFramebuffer,e,36064,3553),T(e.texture,a)&&E(3553,e.texture,e.width,e.height),g.bindTexture(3553,null);if(e.depthBuffer){if(t=v.get(e),i=!0===e.isWebGLRenderTargetCube,e.depthTexture){if(i)throw Error("target.depthTexture not supported in Cube render targets");if(e&&e.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(m.bindFramebuffer(36160,t.__webglFramebuffer),!e.depthTexture||!e.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(v.get(e.depthTexture).__webglTexture&&e.depthTexture.image.width===e.width&&e.depthTexture.image.height===e.height||(e.depthTexture.image.width=e.width,e.depthTexture.image.height=e.height,e.depthTexture.needsUpdate=!0),l(e.depthTexture,0),t=v.get(e.depthTexture).__webglTexture,1026===e.depthTexture.format)m.framebufferTexture2D(36160,36096,3553,t,0);else{if(1027!==e.depthTexture.format)throw Error("Unknown depthTexture format");m.framebufferTexture2D(36160,33306,3553,t,0)}}else if(i)for(t.__webglDepthbuffer=[],i=0;i<6;i++)m.bindFramebuffer(36160,t.__webglFramebuffer[i]),t.__webglDepthbuffer[i]=m.createRenderbuffer(),h(t.__webglDepthbuffer[i],e);else m.bindFramebuffer(36160,t.__webglFramebuffer),t.__webglDepthbuffer=m.createRenderbuffer(),h(t.__webglDepthbuffer,e);m.bindFramebuffer(36160,null)}},this.updateRenderTargetMipmap=function(e){var t=e.texture,i=w(e)||y.isWebGL2;if(T(t,i)){i=e.isWebGLRenderTargetCube?34067:3553;var n=v.get(t).__webglTexture;g.bindTexture(i,n),E(i,t,e.width,e.height),g.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(y.isWebGL2){var t=v.get(e);m.bindFramebuffer(36008,t.__webglMultisampledFramebuffer),m.bindFramebuffer(36009,t.__webglFramebuffer),t=e.width;var i=e.height,n=16384;e.depthBuffer&&(n|=256),e.stencilBuffer&&(n|=1024),m.blitFramebuffer(0,0,t,i,0,0,t,i,n,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}}function ut(e,i,n){return{convert:function(e){if(1e3===e)return 10497;if(1001===e)return 33071;if(1002===e)return 33648;if(1003===e)return 9728;if(1004===e)return 9984;if(1005===e)return 9986;if(1006===e)return 9729;if(1007===e)return 9985;if(1008===e)return 9987;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e){if(n.isWebGL2)return 5131;var t=i.get("OES_texture_half_float");if(null!==t)return t.HALF_FLOAT_OES}if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(100===e)return 32774;if(101===e)return 32778;if(102===e)return 32779;if(200===e)return 0;if(201===e)return 1;if(202===e)return 768;if(203===e)return 769;if(204===e)return 770;if(205===e)return 771;if(206===e)return 772;if(207===e)return 773;if(208===e)return 774;if(209===e)return 775;if(210===e)return 776;if((33776===e||33777===e||33778===e||33779===e)&&null!==(t=i.get("WEBGL_compressed_texture_s3tc"))){if(33776===e)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===e||35841===e||35842===e||35843===e)&&null!==(t=i.get("WEBGL_compressed_texture_pvrtc"))){if(35840===e)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e&&null!==(t=i.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e)&&null!==(t=i.get("WEBGL_compressed_texture_astc")))return e;if(103===e||104===e){if(n.isWebGL2){if(103===e)return 32775;if(104===e)return 32776}if(null!==(t=i.get("EXT_blend_minmax"))){if(103===e)return t.MIN_EXT;if(104===e)return t.MAX_EXT}}if(1020===e){if(n.isWebGL2)return 34042;if(null!==(t=i.get("WEBGL_depth_texture")))return t.UNSIGNED_INT_24_8_WEBGL}return 0}}}function dt(){u.call(this),this.type="Group"}function pt(){u.call(this),this.type="Camera",this.matrixWorldInverse=new we,this.projectionMatrix=new we,this.projectionMatrixInverse=new we}function ft(e,t,i,n){pt.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function mt(e){ft.call(this),this.cameras=e||[]}function gt(e,t,i){Oo.setFromMatrixPosition(t.matrixWorld),Io.setFromMatrixPosition(i.matrixWorld);var n=Oo.distanceTo(Io),r=t.projectionMatrix.elements,a=i.projectionMatrix.elements,s=r[14]/(r[10]-1);i=r[14]/(r[10]+1);var o=(r[9]+1)/r[5],l=(r[9]-1)/r[5],c=(r[8]-1)/r[0],h=(a[8]+1)/a[0];r=s*c,a=s*h,c=(h=n/(-c+h))*-c,t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(c),e.translateZ(h),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld),t=s+h,s=i+h,e.projectionMatrix.makePerspective(r-c,a+(n-c),o*i/s*t,l*i/s*t,t,s)}function vt(i){function n(){return null!==l&&!0===l.isPresenting}function e(){if(n()){var e=l.getEyeParameters("left"),t=e.renderWidth*a;e=e.renderHeight*a,o=i.getPixelRatio(),s=i.getSize(),i.setDrawingBufferSize(2*t,e,1),w.start()}else r.enabled&&i.setDrawingBufferSize(s.width,s.height,o),w.stop()}var r=this,l=null,c=null,h=null,u=[],d=new we,p=new we,a=1,f="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(c=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",e,!1));var m=new we,g=new T,v=new Te,y=new ft;y.bounds=new Ee(0,0,.5,1),y.layers.enable(1);var _=new ft;_.bounds=new Ee(.5,0,.5,1),_.layers.enable(2);var x=new mt([y,_]);x.layers.enable(1),x.layers.enable(2);var s,o,b=[];this.enabled=!1,this.getController=function(e){var t=u[e];return void 0===t&&((t=new dt).matrixAutoUpdate=!1,t.visible=!1,u[e]=t),t},this.getDevice=function(){return l},this.setDevice=function(e){void 0!==e&&(l=e),w.setContext(e)},this.setFramebufferScaleFactor=function(e){a=e},this.setFrameOfReferenceType=function(e){f=e},this.setPoseTarget=function(e){void 0!==e&&(h=e)},this.getCamera=function(e){var t="stage"===f?1.6:0;if(null===l)return e.position.set(0,t,0),e;if(l.depthNear=e.near,l.depthFar=e.far,l.getFrameData(c),"stage"===f){var i=l.stageParameters;i?d.fromArray(i.sittingToStandingTransform):d.makeTranslation(0,t,0)}if(t=c.pose,(i=null!==h?h:e).matrix.copy(d),i.matrix.decompose(i.position,i.quaternion,i.scale),null!==t.orientation&&(g.fromArray(t.orientation),i.quaternion.multiply(g)),null!==t.position&&(g.setFromRotationMatrix(d),v.fromArray(t.position),v.applyQuaternion(g),i.position.add(v)),i.updateMatrixWorld(),!1===l.isPresenting)return e;y.near=e.near,_.near=e.near,y.far=e.far,_.far=e.far,y.matrixWorldInverse.fromArray(c.leftViewMatrix),_.matrixWorldInverse.fromArray(c.rightViewMatrix),p.getInverse(d),"stage"===f&&(y.matrixWorldInverse.multiply(p),_.matrixWorldInverse.multiply(p)),null!==(e=i.parent)&&(m.getInverse(e.matrixWorld),y.matrixWorldInverse.multiply(m),_.matrixWorldInverse.multiply(m)),y.matrixWorld.getInverse(y.matrixWorldInverse),_.matrixWorld.getInverse(_.matrixWorldInverse),y.projectionMatrix.fromArray(c.leftProjectionMatrix),_.projectionMatrix.fromArray(c.rightProjectionMatrix),gt(x,y,_),(e=l.getLayers()).length&&(null!==(e=e[0]).leftBounds&&4===e.leftBounds.length&&y.bounds.fromArray(e.leftBounds),null!==e.rightBounds&&4===e.rightBounds.length&&_.bounds.fromArray(e.rightBounds));e:for(e=0;e<u.length;e++){t=u[e];t:{i=e;for(var n=navigator.getGamepads&&navigator.getGamepads(),r=0,a=0,s=n.length;r<s;r++){var o=n[r];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(a===i){i=o;break t}a++}}i=void 0}if(void 0!==i&&void 0!==i.pose){if(null===i.pose)break e;!1===(n=i.pose).hasPosition&&t.position.set(.2,-.6,-.05),null!==n.position&&t.position.fromArray(n.position),null!==n.orientation&&t.quaternion.fromArray(n.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(d),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0,n="Daydream Controller"===i.id?0:1,b[e]!==i.buttons[n].pressed&&(b[e]=i.buttons[n].pressed,!0===b[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}return x},this.getStandingMatrix=function(){return d},this.isPresenting=n;var w=new Ae;this.setAnimationLoop=function(e){w.setAnimationLoop(e)},this.submitFrame=function(){n()&&l.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",e)}}function yt(t){function r(){return null!==c&&null!==h}function i(e){var t=p[f.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function n(){t.setFramebuffer(null),_.stop()}function a(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}var s=t.context,o=null,c=null,l=1,h=null,u="stage",d=null,p=[],f=[],m=new ft;m.layers.enable(1),m.viewport=new Ee;var g=new ft;g.layers.enable(2),g.viewport=new Ee;var v=new mt([m,g]);v.layers.enable(1),v.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=p[e];return void 0===t&&((t=new dt).matrixAutoUpdate=!1,t.visible=!1,p[e]=t),t},this.getDevice=function(){return o},this.setDevice=function(e){void 0!==e&&(o=e),e instanceof XRDevice&&s.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){l=e},this.setFrameOfReferenceType=function(e){u=e},this.setSession=function(e){null!==(c=e)&&(c.addEventListener("select",i),c.addEventListener("selectstart",i),c.addEventListener("selectend",i),c.addEventListener("end",n),c.baseLayer=new XRWebGLLayer(c,s,{framebufferScaleFactor:l}),c.requestFrameOfReference(u).then(function(e){h=e,t.setFramebuffer(c.baseLayer.framebuffer),_.setContext(c),_.start()}),f=c.getInputSources(),c.addEventListener("inputsourceschange",function(){f=c.getInputSources(),console.log(f);for(var e=0;e<p.length;e++)p[e].userData.inputSource=f[e]}))},this.getCamera=function(e){if(r()){var t=e.parent,i=v.cameras;a(v,t);for(var n=0;n<i.length;n++)a(i[n],t);for(e.matrixWorld.copy(v.matrixWorld),n=0,t=(e=e.children).length;n<t;n++)e[n].updateMatrixWorld(!0);return gt(v,m,g),v}return e},this.isPresenting=r;var y=null,_=new Ae;_.setAnimationLoop(function(e,t){if(null!==(d=t.getDevicePose(h)))for(var i=c.baseLayer,n=t.views,r=0;r<n.length;r++){var a=n[r],s=i.getViewport(a),o=d.getViewMatrix(a),l=v.cameras[r];l.matrix.fromArray(o).getInverse(l.matrix),l.projectionMatrix.fromArray(a.projectionMatrix),l.viewport.set(s.x,s.y,s.width,s.height),0===r&&v.matrix.copy(l.matrix)}for(r=0;r<p.length;r++)i=p[r],(n=f[r])&&null!==(n=t.getInputPose(n,h))?("targetRay"in n?i.matrix.elements=n.targetRay.transformMatrix:"pointerMatrix"in n&&(i.matrix.elements=n.pointerMatrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.visible=!0):i.visible=!1;y&&y(e)}),this.setAnimationLoop=function(e){y=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function _t(e){var w;function t(){M=new De(fe),(S=new Oe(fe,M,e)).isWebGL2||(M.get("WEBGL_depth_texture"),M.get("OES_texture_float"),M.get("OES_texture_half_float"),M.get("OES_texture_half_float_linear"),M.get("OES_standard_derivatives"),M.get("OES_element_index_uint"),M.get("ANGLE_instanced_arrays")),M.get("OES_texture_float_linear"),U=new ut(fe,M,S),(C=new ct(fe,M,U,S)).scissor(Q.copy(se).multiplyScalar(re)),C.viewport(K.copy(ae).multiplyScalar(re)),A=new ze(fe),P=new Je,L=new ht(fe,M,C,P,S,U,A),R=new Pe(fe),O=new ke(fe,R,A),I=new He(O,A),B=new Be(fe),D=new Ze(G,M,S),k=new tt,N=new at,z=new Le(G,C,I,y),H=new Re(fe,M,A,S),F=new Ne(fe,M,A,S),A.programs=D.programs,G.context=fe,G.capabilities=S,G.extensions=M,G.properties=P,G.renderLists=k,G.state=C,G.info=A}function i(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),V=!0}function n(){console.log("THREE.WebGLRenderer: Context Restored."),V=!1,t()}function h(e){(e=e.target).removeEventListener("dispose",h),u(e),P.remove(e)}function u(e){var t=P.get(e).program;(e.program=void 0)!==t&&D.releaseProgram(t)}function s(e,t,i,n){for(var r=0,a=e.length;r<a;r++){var s=e[r],o=s.object,l=s.geometry,c=void 0===n?s.material:n;if(s=s.group,i.isArrayCamera)for(var h=(J=i).cameras,u=0,d=h.length;u<d;u++){var p=h[u];if(o.layers.test(p.layers)){if("viewport"in p)C.viewport(K.copy(p.viewport));else{var f=p.bounds;C.viewport(K.set(f.x*ie,f.y*ne,f.z*ie,f.w*ne).multiplyScalar(re))}E.setupLights(p),m(o,t,p,l,c,s)}}else J=null,m(o,t,i,l,c,s)}}function m(e,t,i,n,r,a){if(e.onBeforeRender(G,t,i,n,r,a),E=N.get(t,J||i),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){C.setMaterial(r);var s=T(i,t.fog,r,e);q=w=null,$=!1,o=s,e.render(function(e){G.renderBufferImmediate(e,o)})}else G.renderBufferDirect(i,t.fog,n,r,e,a);var o;e.onAfterRender(G,t,i,n,r,a),E=N.get(t,J||i)}function p(e,t,i){var n=P.get(e),r=E.state.lights,a=n.lightsHash,s=r.state.hash;i=D.getParameters(e,r.state,E.state.shadowsArray,t,ce.numPlanes,ce.numIntersection,i);var o=D.getProgramCode(e,i),l=n.program,c=!0;if(void 0===l)e.addEventListener("dispose",h);else if(l.code!==o)u(e);else{if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength;else if(void 0!==i.shaderID)return;c=!1}if(c&&(i.shaderID?(o=Ya[i.shaderID],n.shader={name:e.type,uniforms:Ce(o.uniforms),vertexShader:o.vertexShader,fragmentShader:o.fragmentShader}):n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader},e.onBeforeCompile(n.shader,G),o=D.getProgramCode(e,i),l=D.acquireProgram(e,n.shader,i,o),n.program=l,e.program=l),i=l.getAttributes(),e.morphTargets)for(o=e.numSupportedMorphTargets=0;o<G.maxMorphTargets;o++)0<=i["morphTarget"+o]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(o=e.numSupportedMorphNormals=0;o<G.maxMorphNormals;o++)0<=i["morphNormal"+o]&&e.numSupportedMorphNormals++;i=n.shader.uniforms,(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=ce.numPlanes,n.numIntersection=ce.numIntersection,i.clippingPlanes=ce.uniform),n.fog=t,void 0===a&&(n.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(i.ambientLightColor.value=r.state.ambient,i.directionalLights.value=r.state.directional,i.spotLights.value=r.state.spot,i.rectAreaLights.value=r.state.rectArea,i.pointLights.value=r.state.point,i.hemisphereLights.value=r.state.hemi,i.directionalShadowMap.value=r.state.directionalShadowMap,i.directionalShadowMatrix.value=r.state.directionalShadowMatrix,i.spotShadowMap.value=r.state.spotShadowMap,i.spotShadowMatrix.value=r.state.spotShadowMatrix,i.pointShadowMap.value=r.state.pointShadowMap,i.pointShadowMatrix.value=r.state.pointShadowMatrix),e=n.program.getUniforms(),e=Fe.seqWithValue(e.seq,i),n.uniformsList=e}function T(e,t,i,n){te=0;var r=P.get(i),a=r.lightsHash,s=E.state.lights.state.hash;he&&(ue||e!==Z)&&ce.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,r,e===Z&&i.id===Y),!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==t?i.needsUpdate=!0:(!i.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===ce.numPlanes&&r.numIntersection===ce.numIntersection)||(i.needsUpdate=!0)),i.needsUpdate&&(p(i,t,n),i.needsUpdate=!1);var o=!1,l=!1,c=!1;s=(a=r.program).getUniforms();var h=r.shader.uniforms;if(C.useProgram(a.program)&&(c=l=o=!0),i.id!==Y&&(Y=i.id,l=!0),(o||Z!==e)&&(s.setValue(fe,"projectionMatrix",e.projectionMatrix),S.logarithmicDepthBuffer&&s.setValue(fe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),Z!==e&&(Z=e,c=l=!0),(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap)&&(void 0!==(o=s.map.cameraPosition)&&o.setValue(fe,pe.setFromMatrixPosition(e.matrixWorld))),(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&s.setValue(fe,"viewMatrix",e.matrixWorldInverse)),i.skinning&&(s.setOptional(fe,n,"bindMatrix"),s.setOptional(fe,n,"bindMatrixInverse"),e=n.skeleton))if(o=e.bones,S.floatVertexTextures){if(void 0===e.boneTexture){o=Math.sqrt(4*o.length),o=ya.ceilPowerOfTwo(o),o=Math.max(o,4);var u=new Float32Array(o*o*4);u.set(e.boneMatrices);var d=new Me(u,o,o,1023,1015);d.needsUpdate=!0,e.boneMatrices=u,e.boneTexture=d,e.boneTextureSize=o}s.setValue(fe,"boneTexture",e.boneTexture),s.setValue(fe,"boneTextureSize",e.boneTextureSize)}else s.setOptional(fe,e,"boneMatrices");return l&&(s.setValue(fe,"toneMappingExposure",G.toneMappingExposure),s.setValue(fe,"toneMappingWhitePoint",G.toneMappingWhitePoint),i.lights&&(l=c,h.ambientLightColor.needsUpdate=l,h.directionalLights.needsUpdate=l,h.pointLights.needsUpdate=l,h.spotLights.needsUpdate=l,h.rectAreaLights.needsUpdate=l,h.hemisphereLights.needsUpdate=l),t&&i.fog&&(h.fogColor.value=t.color,t.isFog?(h.fogNear.value=t.near,h.fogFar.value=t.far):t.isFogExp2&&(h.fogDensity.value=t.density)),i.isMeshBasicMaterial?f(h,i):i.isMeshLambertMaterial?(f(h,i),i.emissiveMap&&(h.emissiveMap.value=i.emissiveMap)):i.isMeshPhongMaterial?(f(h,i),i.isMeshToonMaterial?(g(h,i),i.gradientMap&&(h.gradientMap.value=i.gradientMap)):g(h,i)):i.isMeshStandardMaterial?(f(h,i),i.isMeshPhysicalMaterial?(v(h,i),h.reflectivity.value=i.reflectivity,h.clearCoat.value=i.clearCoat,h.clearCoatRoughness.value=i.clearCoatRoughness):v(h,i)):i.isMeshMatcapMaterial?(f(h,i),i.matcap&&(h.matcap.value=i.matcap),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDepthMaterial?(f(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isMeshDistanceMaterial?(f(h,i),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias),h.referencePosition.value.copy(i.referencePosition),h.nearDistance.value=i.nearDistance,h.farDistance.value=i.farDistance):i.isMeshNormalMaterial?(f(h,i),i.bumpMap&&(h.bumpMap.value=i.bumpMap,h.bumpScale.value=i.bumpScale,1===i.side&&(h.bumpScale.value*=-1)),i.normalMap&&(h.normalMap.value=i.normalMap,h.normalScale.value.copy(i.normalScale),1===i.side&&h.normalScale.value.negate()),i.displacementMap&&(h.displacementMap.value=i.displacementMap,h.displacementScale.value=i.displacementScale,h.displacementBias.value=i.displacementBias)):i.isLineBasicMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,i.isLineDashedMaterial&&(h.dashSize.value=i.dashSize,h.totalSize.value=i.dashSize+i.gapSize,h.scale.value=i.scale)):i.isPointsMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,h.size.value=i.size*re,h.scale.value=.5*ne,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isSpriteMaterial?(h.diffuse.value=i.color,h.opacity.value=i.opacity,h.rotation.value=i.rotation,h.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),h.uvTransform.value.copy(i.map.matrix))):i.isShadowMaterial&&(h.color.value=i.color,h.opacity.value=i.opacity),void 0!==h.ltc_1&&(h.ltc_1.value=Xa.LTC_1),void 0!==h.ltc_2&&(h.ltc_2.value=Xa.LTC_2),Fe.upload(fe,r.uniformsList,h,G)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Fe.upload(fe,r.uniformsList,h,G),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&s.setValue(fe,"center",n.center),s.setValue(fe,"modelViewMatrix",n.modelViewMatrix),s.setValue(fe,"normalMatrix",n.normalMatrix),s.setValue(fe,"modelMatrix",n.matrixWorld),a}function f(e,t){if(e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=P.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map)var i=t.map;else t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap);void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function g(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function v(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}console.log("THREE.WebGLRenderer","101");var r=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),a=void 0!==e.context?e.context:null,o=void 0!==e.alpha&&e.alpha,l=void 0===e.depth||e.depth,c=void 0===e.stencil||e.stencil,d=void 0!==e.antialias&&e.antialias,y=void 0===e.premultipliedAlpha||e.premultipliedAlpha,_=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,x=void 0!==e.powerPreference?e.powerPreference:"default",b=null,E=null;this.domElement=r,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var M,S,C,A,P,L,R,O,I,D,k,N,z,B,H,F,U,G=this,V=!1,j=null,W=null,X=null,Y=-1,q=w=null,$=!1,Z=null,J=null,K=new Ee,Q=new Ee,ee=null,te=0,ie=r.width,ne=r.height,re=1,ae=new Ee(0,0,ie,ne),se=new Ee(0,0,ie,ne),oe=!1,le=new Se,ce=new Ie,he=!1,ue=!1,de=new we,pe=new Te;try{o={alpha:o,depth:l,stencil:c,antialias:d,premultipliedAlpha:y,preserveDrawingBuffer:_,powerPreference:x},r.addEventListener("webglcontextlost",i,!1),r.addEventListener("webglcontextrestored",n,!1);var fe=a||r.getContext("webgl",o)||r.getContext("experimental-webgl",o);if(null===fe){if(null!==r.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===fe.getShaderPrecisionFormat&&(fe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}t();var me=null;"undefined"!=typeof navigator&&(me="xr"in navigator?new yt(G):new vt(G)),this.vr=me;var ge=new lt(G,I,S.maxTextureSize);this.shadowMap=ge,this.getContext=function(){return fe},this.getContextAttributes=function(){return fe.getContextAttributes()},this.forceContextLoss=function(){var e=M.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=M.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(e){void 0!==e&&(re=e,this.setSize(ie,ne,!1))},this.getSize=function(){return{width:ie,height:ne}},this.setSize=function(e,t,i){me.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ie=e,ne=t,r.width=e*re,r.height=t*re,!1!==i&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:ie*re,height:ne*re}},this.setDrawingBufferSize=function(e,t,i){ie=e,ne=t,re=i,r.width=e*i,r.height=t*i,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return K},this.setViewport=function(e,t,i,n){ae.set(e,ne-t-n,i,n),C.viewport(K.copy(ae).multiplyScalar(re))},this.setScissor=function(e,t,i,n){se.set(e,ne-t-n,i,n),C.scissor(Q.copy(se).multiplyScalar(re))},this.setScissorTest=function(e){C.setScissorTest(oe=e)},this.getClearColor=function(){return z.getClearColor()},this.setClearColor=function(){z.setClearColor.apply(z,arguments)},this.getClearAlpha=function(){return z.getClearAlpha()},this.setClearAlpha=function(){z.setClearAlpha.apply(z,arguments)},this.clear=function(e,t,i){var n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===i||i)&&(n|=1024),fe.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",i,!1),r.removeEventListener("webglcontextrestored",n,!1),k.dispose(),N.dispose(),P.dispose(),I.dispose(),me.dispose(),be.stop()},this.renderBufferImmediate=function(e,t){C.initAttributes();var i=P.get(e);e.hasPositions&&!i.position&&(i.position=fe.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=fe.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=fe.createBuffer()),e.hasColors&&!i.color&&(i.color=fe.createBuffer()),t=t.getAttributes(),e.hasPositions&&(fe.bindBuffer(34962,i.position),fe.bufferData(34962,e.positionArray,35048),C.enableAttribute(t.position),fe.vertexAttribPointer(t.position,3,5126,!1,0,0)),e.hasNormals&&(fe.bindBuffer(34962,i.normal),fe.bufferData(34962,e.normalArray,35048),C.enableAttribute(t.normal),fe.vertexAttribPointer(t.normal,3,5126,!1,0,0)),e.hasUvs&&(fe.bindBuffer(34962,i.uv),fe.bufferData(34962,e.uvArray,35048),C.enableAttribute(t.uv),fe.vertexAttribPointer(t.uv,2,5126,!1,0,0)),e.hasColors&&(fe.bindBuffer(34962,i.color),fe.bufferData(34962,e.colorArray,35048),C.enableAttribute(t.color),fe.vertexAttribPointer(t.color,3,5126,!1,0,0)),C.disableUnusedAttributes(),fe.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,n,r,a){var s=r.isMesh&&r.normalMatrix.determinant()<0;C.setMaterial(n,s);var o=T(e,t,n,r),l=!1;w===i.id&&q===o.id&&$===(!0===n.wireframe)||(w=i.id,q=o.id,$=!0===n.wireframe,l=!0),r.morphTargetInfluences&&(B.update(r,i,n,o),l=!0),s=i.index;var c=i.attributes.position;if(t=1,!0===n.wireframe&&(s=O.getWireframeAttribute(i),t=2),e=H,null!==s){var h=R.get(s);(e=F).setIndex(h)}if(l){if(i&&i.isInstancedBufferGeometry&!S.isWebGL2&&null===M.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{C.initAttributes(),l=i.attributes,o=o.getAttributes();var u=n.defaultAttributeValues;for(b in o){var d=o[b];if(0<=d){var p=l[b];if(void 0!==p){var f=p.normalized,m=p.itemSize,g=R.get(p);if(void 0!==g){var v=g.buffer,y=g.type;if(g=g.bytesPerElement,p.isInterleavedBufferAttribute){var _=p.data,x=_.stride;p=p.offset,_&&_.isInstancedInterleavedBuffer?(C.enableAttributeAndDivisor(d,_.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=_.meshPerAttribute*_.count)):C.enableAttribute(d),fe.bindBuffer(34962,v),fe.vertexAttribPointer(d,m,y,f,x*g,p*g)}else p.isInstancedBufferAttribute?(C.enableAttributeAndDivisor(d,p.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=p.meshPerAttribute*p.count)):C.enableAttribute(d),fe.bindBuffer(34962,v),fe.vertexAttribPointer(d,m,y,f,0,0)}}else if(void 0!==u&&void 0!==(f=u[b]))switch(f.length){case 2:fe.vertexAttrib2fv(d,f);break;case 3:fe.vertexAttrib3fv(d,f);break;case 4:fe.vertexAttrib4fv(d,f);break;default:fe.vertexAttrib1fv(d,f)}}}C.disableUnusedAttributes()}null!==s&&fe.bindBuffer(34963,h.buffer)}h=1/0,null!==s?h=s.count:void 0!==c&&(h=c.count),s=i.drawRange.start*t,c=null!==a?a.start*t:0;var b=Math.max(s,c);if(0!==(a=Math.max(0,Math.min(h,s+i.drawRange.count*t,c+(null!==a?a.count*t:1/0))-1-b+1))){if(r.isMesh)if(!0===n.wireframe)C.setLineWidth(n.wireframeLinewidth*(null===W?re:1)),e.setMode(1);else switch(r.drawMode){case 0:e.setMode(4);break;case 1:e.setMode(5);break;case 2:e.setMode(6)}else r.isLine?(void 0===(n=n.linewidth)&&(n=1),C.setLineWidth(n*(null===W?re:1)),r.isLineSegments?e.setMode(1):r.isLineLoop?e.setMode(2):e.setMode(3)):r.isPoints?e.setMode(0):r.isSprite&&e.setMode(4);i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&e.renderInstances(i,b,a):e.render(b,a)}},this.compile=function(i,e){(E=N.get(i,e)).init(),i.traverse(function(e){e.isLight&&(E.pushLight(e),e.castShadow&&E.pushShadow(e))}),E.setupLights(e),i.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var t=0;t<e.material.length;t++)p(e.material[t],i.fog,e);else p(e.material,i.fog,e)})};var ve,ye,_e,xe=null,be=new Ae;be.setAnimationLoop(function(e){me.isPresenting()||xe&&xe(e)}),"undefined"!=typeof window&&be.setContext(window),this.setAnimationLoop=function(e){xe=e,me.setAnimationLoop(e),be.start()},this.render=function(e,t,i,n){if(t&&t.isCamera){if(!V){q=w=null,$=!1,Y=-1,!(Z=null)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),me.enabled&&(t=me.getCamera(t)),(E=N.get(e,t)).init(),e.onBeforeRender(G,e,t,i),de.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),le.setFromMatrix(de),ue=this.localClippingEnabled,he=ce.init(this.clippingPlanes,ue,t),(b=k.get(e,t)).init(),function e(t,i,n,r){if(!1!==t.visible){if(t.layers.test(i.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLight)E.pushLight(t),t.castShadow&&E.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||le.intersectsSprite(t)){r&&pe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(de);var a=I.update(t),s=t.material;b.push(t,a,s,n,pe.z,null)}}else if(t.isImmediateRenderObject)r&&pe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(de),b.push(t,null,t.material,n,pe.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||le.intersectsObject(t)))if(r&&pe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(de),a=I.update(t),s=t.material,Array.isArray(s))for(var o=a.groups,l=0,c=o.length;l<c;l++){var h=o[l],u=s[h.materialIndex];u&&u.visible&&b.push(t,a,u,n,pe.z,h)}else s.visible&&b.push(t,a,s,n,pe.z,null);for(l=0,c=(t=t.children).length;l<c;l++)e(t[l],i,n,r)}}(e,t,0,G.sortObjects),!0===G.sortObjects&&b.sort(),he&&ce.beginShadows(),ge.render(E.state.shadowsArray,e,t),E.setupLights(t),he&&ce.endShadows(),this.info.autoReset&&this.info.reset(),void 0===i&&(i=null),this.setRenderTarget(i),z.render(b,e,t,n),n=b.opaque;var r=b.transparent;if(e.overrideMaterial){var a=e.overrideMaterial;n.length&&s(n,e,t,a),r.length&&s(r,e,t,a)}else n.length&&s(n,e,t),r.length&&s(r,e,t);i&&(L.updateRenderTargetMipmap(i),L.updateMultisampleRenderTarget(i)),C.buffers.depth.setTest(!0),C.buffers.depth.setMask(!0),C.buffers.color.setMask(!0),C.setPolygonOffset(!1),e.onAfterRender(G,e,t),me.enabled&&me.submitFrame(),E=b=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=te;return e>=S.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+S.maxTextures),te+=1,e},this.setTexture2D=(ve=!1,function(e,t){e&&e.isWebGLRenderTarget&&(ve||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ve=!0),e=e.texture),L.setTexture2D(e,t)}),this.setTexture3D=function(e,t){L.setTexture3D(e,t)},this.setTexture=(ye=!1,function(e,t){ye||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),ye=!0),L.setTexture2D(e,t)}),this.setTextureCube=(_e=!1,function(e,t){e&&e.isWebGLRenderTargetCube&&(_e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),_e=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?L.setTextureCube(e,t):L.setTextureCubeDynamic(e,t)}),this.setFramebuffer=function(e){j=e},this.getRenderTarget=function(){return W},this.setRenderTarget=function(e){(W=e)&&void 0===P.get(e).__webglFramebuffer&&L.setupRenderTarget(e);var t=j,i=!1;ee=e?(t=P.get(e).__webglFramebuffer,e.isWebGLRenderTargetCube?(t=t[e.activeCubeFace],i=!0):t=e.isWebGLMultisampleRenderTarget?P.get(e).__webglMultisampledFramebuffer:t,K.copy(e.viewport),Q.copy(e.scissor),e.scissorTest):(K.copy(ae).multiplyScalar(re),Q.copy(se).multiplyScalar(re),oe),X!==t&&(fe.bindFramebuffer(36160,t),X=t),C.viewport(K),C.scissor(Q),C.setScissorTest(ee),i&&(i=P.get(e.texture),fe.framebufferTexture2D(36160,36064,34069+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel))},this.readRenderTargetPixels=function(e,t,i,n,r,a){if(e&&e.isWebGLRenderTarget){var s=P.get(e).__webglFramebuffer;if(s){var o=!1;s!==X&&(fe.bindFramebuffer(36160,s),o=!0);try{var l=e.texture,c=l.format,h=l.type;1023!==c&&U.convert(c)!==fe.getParameter(35739)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===h||U.convert(h)===fe.getParameter(35738)||1015===h&&(S.isWebGL2||M.get("OES_texture_float")||M.get("WEBGL_color_buffer_float"))||1016===h&&(S.isWebGL2?M.get("EXT_color_buffer_float"):M.get("EXT_color_buffer_half_float"))?36053===fe.checkFramebufferStatus(36160)?0<=t&&t<=e.width-n&&0<=i&&i<=e.height-r&&fe.readPixels(t,i,n,r,U.convert(c),U.convert(h),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{o&&fe.bindFramebuffer(36160,X)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,i){var n=t.image.width,r=t.image.height,a=U.convert(t.format);this.setTexture2D(t,0),fe.copyTexImage2D(3553,i||0,a,e.x,e.y,n,r,0)},this.copyTextureToTexture=function(e,t,i,n){var r=t.image.width,a=t.image.height,s=U.convert(i.format),o=U.convert(i.type);this.setTexture2D(i,0),t.isDataTexture?fe.texSubImage2D(3553,n||0,e.x,e.y,r,a,s,o,t.image.data):fe.texSubImage2D(3553,n||0,e.x,e.y,s,o,t.image)}}function xt(e,t){this.name="",this.color=new p(e),this.density=void 0!==t?t:25e-5}function bt(e,t,i){this.name="",this.color=new p(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3}function wt(){u.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function Tt(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Et(e,t,i,n){this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===n}function Mt(e){k.call(this),this.type="SpriteMaterial",this.color=new p(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function St(e){if(u.call(this),this.type="Sprite",void 0===go){go=new L;var t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]);t=new Tt(t,5),go.setIndex([0,1,2,0,2,3]),go.addAttribute("position",new Et(t,3,0,!1)),go.addAttribute("uv",new Et(t,2,3,!1))}this.geometry=go,this.material=void 0!==e?e:new Mt,this.center=new W(.5,.5)}function Ct(){u.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function At(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),F.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new we,this.bindMatrixInverse=new we}function Pt(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new we)}function Lt(){u.call(this),this.type="Bone"}function Rt(e){k.call(this),this.type="LineBasicMaterial",this.color=new p(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(e)}function Ot(e,t,i){1===i&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),u.call(this),this.type="Line",this.geometry=void 0!==e?e:new L,this.material=void 0!==t?t:new Rt({color:16777215*Math.random()})}function It(e,t){Ot.call(this,e,t),this.type="LineSegments"}function Dt(e,t){Ot.call(this,e,t),this.type="LineLoop"}function kt(e){k.call(this),this.type="PointsMaterial",this.color=new p(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=this.morphTargets=!1,this.setValues(e)}function Nt(e,t){u.call(this),this.type="Points",this.geometry=void 0!==e?e:new L,this.material=void 0!==t?t:new kt({color:16777215*Math.random()})}function zt(e,t,i,n,r,a,s,o,l){d.call(this,e,t,i,n,r,a,s,o,l),this.format=void 0!==s?s:1022,this.minFilter=void 0!==a?a:1006,this.magFilter=void 0!==r?r:1006,this.generateMipmaps=!1}function Bt(e,t,i,n,r,a,s,o,l,c,h,u){d.call(this,null,a,s,o,l,c,n,r,h,u),this.image={width:t,height:i},this.mipmaps=e,this.generateMipmaps=this.flipY=!1}function Ht(e,t,i,n,r,a,s,o,l){d.call(this,e,t,i,n,r,a,s,o,l),this.needsUpdate=!0}function Ft(e,t,i,n,r,a,s,o,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===c&&(i=1012),void 0===i&&1027===c&&(i=1020),d.call(this,null,n,r,a,s,o,c,i,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==o?o:1003,this.generateMipmaps=this.flipY=!1}function Ut(e){L.call(this),this.type="WireframeGeometry";var t,i,n,r=[],a=[0,0],s={},o=["a","b","c"];if(e&&e.isGeometry){var l=e.faces,c=0;for(i=l.length;c<i;c++){var h=l[c];for(t=0;t<3;t++){var u=h[o[t]],d=h[o[(t+1)%3]];a[0]=Math.min(u,d),a[1]=Math.max(u,d),void 0===s[u=a[0]+","+a[1]]&&(s[u]={index1:a[0],index2:a[1]})}}for(u in s)c=s[u],o=e.vertices[c.index1],r.push(o.x,o.y,o.z),o=e.vertices[c.index2],r.push(o.x,o.y,o.z)}else if(e&&e.isBufferGeometry)if(o=new Te,null!==e.index){l=e.attributes.position,h=e.index;var p=e.groups;for(0===p.length&&(p=[{start:0,count:h.count,materialIndex:0}]),e=0,n=p.length;e<n;++e)for(t=(c=p[e]).start,i=c.count,i=(c=t)+i;c<i;c+=3)for(t=0;t<3;t++)u=h.getX(c+t),d=h.getX(c+(t+1)%3),a[0]=Math.min(u,d),a[1]=Math.max(u,d),void 0===s[u=a[0]+","+a[1]]&&(s[u]={index1:a[0],index2:a[1]});for(u in s)c=s[u],o.fromBufferAttribute(l,c.index1),r.push(o.x,o.y,o.z),o.fromBufferAttribute(l,c.index2),r.push(o.x,o.y,o.z)}else for(c=0,i=(l=e.attributes.position).count/3;c<i;c++)for(t=0;t<3;t++)s=3*c+t,o.fromBufferAttribute(l,s),r.push(o.x,o.y,o.z),s=3*c+(t+1)%3,o.fromBufferAttribute(l,s),r.push(o.x,o.y,o.z);this.addAttribute("position",new P(r,3))}function Gt(e,t,i){f.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new Vt(e,t,i)),this.mergeVertices()}function Vt(e,t,i){L.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};var n,r,a=[],s=[],o=[],l=[],c=new Te,h=new Te,u=new Te,d=new Te,p=new Te;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(n=0;n<=i;n++){var m=n/i;for(r=0;r<=t;r++){var g=r/t;e(g,m,h),s.push(h.x,h.y,h.z),0<=g-1e-5?(e(g-1e-5,m,u),d.subVectors(h,u)):(e(g+1e-5,m,u),d.subVectors(u,h)),0<=m-1e-5?(e(g,m-1e-5,u),p.subVectors(h,u)):(e(g,m+1e-5,u),p.subVectors(u,h)),c.crossVectors(d,p).normalize(),o.push(c.x,c.y,c.z),l.push(g,m)}}for(n=0;n<i;n++)for(r=0;r<t;r++)e=n*f+r+1,c=(n+1)*f+r+1,h=(n+1)*f+r,a.push(n*f+r,e,h),a.push(e,c,h);this.setIndex(a),this.addAttribute("position",new P(s,3)),this.addAttribute("normal",new P(o,3)),this.addAttribute("uv",new P(l,2))}function jt(e,t,i,n){f.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},this.fromBufferGeometry(new Wt(e,t,i,n)),this.mergeVertices()}function Wt(i,m,e,t){function g(e){u.push(e.x,e.y,e.z)}function v(e,t){e*=3,t.x=i[e+0],t.y=i[e+1],t.z=i[e+2]}function h(e,t,i,n){n<0&&1===e.x&&(d[t]=e.x-1),0===i.x&&0===i.z&&(d[t]=n/2/Math.PI+.5)}L.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:i,indices:m,radius:e,detail:t},e=e||1;var u=[],d=[];!function(e){for(var t=new Te,i=new Te,n=new Te,r=0;r<m.length;r+=3){v(m[r+0],t),v(m[r+1],i),v(m[r+2],n);var a,s,o=t,l=i,c=n,h=Math.pow(2,e),u=[];for(s=0;s<=h;s++){u[s]=[];var d=o.clone().lerp(c,s/h),p=l.clone().lerp(c,s/h),f=h-s;for(a=0;a<=f;a++)u[s][a]=0===a&&s===h?d:d.clone().lerp(p,a/f)}for(s=0;s<h;s++)for(a=0;a<2*(h-s)-1;a++)o=Math.floor(a/2),0==a%2?(g(u[s][o+1]),g(u[s+1][o]),g(u[s][o])):(g(u[s][o+1]),g(u[s+1][o+1]),g(u[s+1][o]))}}(t=t||0),function(e){for(var t=new Te,i=0;i<u.length;i+=3)t.x=u[i+0],t.y=u[i+1],t.z=u[i+2],t.normalize().multiplyScalar(e),u[i+0]=t.x,u[i+1]=t.y,u[i+2]=t.z}(e),function(){for(var e=new Te,t=0;t<u.length;t+=3)e.x=u[t+0],e.y=u[t+1],e.z=u[t+2],d.push(Math.atan2(e.z,-e.x)/2/Math.PI+.5,1-(Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5));e=new Te,t=new Te;for(var i=new Te,n=new Te,r=new W,a=new W,s=new W,o=0,l=0;o<u.length;o+=9,l+=6){e.set(u[o+0],u[o+1],u[o+2]),t.set(u[o+3],u[o+4],u[o+5]),i.set(u[o+6],u[o+7],u[o+8]),r.set(d[l+0],d[l+1]),a.set(d[l+2],d[l+3]),s.set(d[l+4],d[l+5]),n.copy(e).add(t).add(i).divideScalar(3);var c=Math.atan2(n.z,-n.x);h(r,l+0,e,c),h(a,l+2,t,c),h(s,l+4,i,c)}for(e=0;e<d.length;e+=6)t=d[e+0],i=d[e+2],n=d[e+4],r=Math.min(t,i,n),.9<Math.max(t,i,n)&&r<.1&&(t<.2&&(d[e+0]+=1),i<.2&&(d[e+2]+=1),n<.2&&(d[e+4]+=1))}(),this.addAttribute("position",new P(u,3)),this.addAttribute("normal",new P(u.slice(),3)),this.addAttribute("uv",new P(d,2)),0===t?this.computeVertexNormals():this.normalizeNormals()}function Xt(e,t){f.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Yt(e,t)),this.mergeVertices()}function Yt(e,t){Wt.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function qt(e,t){f.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new $t(e,t)),this.mergeVertices()}function $t(e,t){Wt.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Zt(e,t){f.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Jt(e,t)),this.mergeVertices()}function Jt(e,t){var i=(1+Math.sqrt(5))/2;Wt.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Kt(e,t){f.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Qt(e,t)),this.mergeVertices()}function Qt(e,t){var i=(1+Math.sqrt(5))/2,n=1/i;Wt.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ei(e,t,i,n,r,a){f.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed."),e=new ti(e,t,i,n,r),this.tangents=e.tangents,this.normals=e.normals,this.binormals=e.binormals,this.fromBufferGeometry(e),this.mergeVertices()}function ti(r,a,s,o,e){function t(e){d=r.getPointAt(e/a,d);var t=l.normals[e];for(e=l.binormals[e],c=0;c<=o;c++){var i=c/o*Math.PI*2,n=Math.sin(i);i=-Math.cos(i),u.x=i*t.x+n*e.x,u.y=i*t.y+n*e.y,u.z=i*t.z+n*e.z,u.normalize(),f.push(u.x,u.y,u.z),h.x=d.x+s*u.x,h.y=d.y+s*u.y,h.z=d.z+s*u.z,p.push(h.x,h.y,h.z)}}L.call(this),this.type="TubeBufferGeometry",this.parameters={path:r,tubularSegments:a,radius:s,radialSegments:o,closed:e},a=a||64,s=s||1,o=o||8,e=e||!1;var l=r.computeFrenetFrames(a,e);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var n,c,h=new Te,u=new Te,i=new W,d=new Te,p=[],f=[],m=[],g=[];for(n=0;n<a;n++)t(n);for(t(!1===e?a:0),n=0;n<=a;n++)for(c=0;c<=o;c++)i.x=n/a,i.y=c/o,m.push(i.x,i.y);!function(){for(c=1;c<=a;c++)for(n=1;n<=o;n++){var e=(o+1)*c+(n-1),t=(o+1)*c+n,i=(o+1)*(c-1)+n;g.push((o+1)*(c-1)+(n-1),e,i),g.push(e,t,i)}}(),this.setIndex(g),this.addAttribute("position",new P(p,3)),this.addAttribute("normal",new P(f,3)),this.addAttribute("uv",new P(m,2))}function ii(e,t,i,n,r,a,s){f.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ni(e,t,i,n,r,a)),this.mergeVertices()}function ni(e,t,i,n,r,a){function s(e,t,i,n,r){var a=Math.sin(e);t=i/t*e,i=Math.cos(t),r.x=n*(2+i)*.5*Math.cos(e),r.y=n*(2+i)*a*.5,r.z=n*Math.sin(t)*.5}L.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},e=e||1,t=t||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,a=a||3;var o,l=[],c=[],h=[],u=[],d=new Te,p=new Te,f=new Te,m=new Te,g=new Te,v=new Te,y=new Te;for(o=0;o<=i;++o){var _=o/i*r*Math.PI*2;for(s(_,r,a,e,f),s(_+.01,r,a,e,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),_=0;_<=n;++_){var x=_/n*Math.PI*2,b=-t*Math.cos(x);x=t*Math.sin(x),d.x=f.x+(b*y.x+x*g.x),d.y=f.y+(b*y.y+x*g.y),d.z=f.z+(b*y.z+x*g.z),c.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),h.push(p.x,p.y,p.z),u.push(o/i),u.push(_/n)}}for(_=1;_<=i;_++)for(o=1;o<=n;o++)e=(n+1)*_+(o-1),t=(n+1)*_+o,r=(n+1)*(_-1)+o,l.push((n+1)*(_-1)+(o-1),e,r),l.push(e,t,r);this.setIndex(l),this.addAttribute("position",new P(c,3)),this.addAttribute("normal",new P(h,3)),this.addAttribute("uv",new P(u,2))}function ri(e,t,i,n,r){f.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new ai(e,t,i,n,r)),this.mergeVertices()}function ai(e,t,i,n,r){L.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},e=e||1,t=t||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var a,s,o=[],l=[],c=[],h=[],u=new Te,d=new Te,p=new Te;for(a=0;a<=i;a++)for(s=0;s<=n;s++){var f=s/n*r,m=a/i*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(f),d.y=(e+t*Math.cos(m))*Math.sin(f),d.z=t*Math.sin(m),l.push(d.x,d.y,d.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),p.subVectors(d,u).normalize(),c.push(p.x,p.y,p.z),h.push(s/n),h.push(a/i)}for(a=1;a<=i;a++)for(s=1;s<=n;s++)e=(n+1)*(a-1)+s-1,t=(n+1)*(a-1)+s,r=(n+1)*a+s,o.push((n+1)*a+s-1,e,r),o.push(e,t,r);this.setIndex(o),this.addAttribute("position",new P(l,3)),this.addAttribute("normal",new P(c,3)),this.addAttribute("uv",new P(h,2))}function si(e,t,i,n,r){for(var a,s=0,o=t,l=i-n;o<i;o+=n)s+=(e[l]-e[o])*(e[o+1]+e[l+1]),l=o;if(r===0<s)for(r=t;r<i;r+=n)a=yi(r,e[r],e[r+1],a);else for(r=i-n;t<=r;r-=n)a=yi(r,e[r],e[r+1],a);return a&&fi(a,a.next)&&(_i(a),a=a.next),a}function oi(e,t){if(!e)return e;t||(t=e);do{var i=!1;if(e.steiner||!fi(e,e.next)&&0!==pi(e.prev,e,e.next))e=e.next;else{if(_i(e),(e=t=e.prev)===e.next)break;i=!0}}while(i||e!==t);return t}function li(e,t){return e.x-t.x}function ci(e,t){var i=t,n=e.x,r=e.y,a=-1/0;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var s=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=n&&a<s){if((a=s)===n){if(r===i.y)return i;if(r===i.next.y)return i.next}var o=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!o)return null;if(n===a)return o.prev;s=(t=o).x;var l=o.y,c=1/0;for(i=o.next;i!==t;){if(n>=i.x&&i.x>=s&&n!==i.x&&di(r<l?n:a,r,s,l,r<l?a:n,r,i.x,i.y)){var h=Math.abs(r-i.y)/(n-i.x);(h<c||h===c&&i.x>o.x)&&gi(i,e)&&(o=i,c=h)}i=i.next}return o}function hi(e,t,i,n,r){return 1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1)|(1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ui(e){for(var t=e,i=e;t.x<i.x&&(i=t),(t=t.next)!==e;);return i}function di(e,t,i,n,r,a,s,o){return 0<=(r-s)*(t-o)-(e-s)*(a-o)&&0<=(e-s)*(n-o)-(i-s)*(t-o)&&0<=(i-s)*(a-o)-(r-s)*(n-o)}function pi(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function fi(e,t){return e.x===t.x&&e.y===t.y}function mi(e,t,i,n){return!!(fi(e,t)&&fi(i,n)||fi(e,n)&&fi(i,t))||0<pi(e,t,i)!=0<pi(e,t,n)&&0<pi(i,n,e)!=0<pi(i,n,t)}function gi(e,t){return pi(e.prev,e,e.next)<0?0<=pi(e,t,e.next)&&0<=pi(e,e.prev,t):pi(e,t,e.prev)<0||pi(e,e.next,t)<0}function vi(e,t){var i=new xi(e.i,e.x,e.y),n=new xi(t.i,t.x,t.y),r=e.next,a=t.prev;return(e.next=t).prev=e,(i.next=r).prev=i,(n.next=i).prev=n,(a.next=n).prev=a,n}function yi(e,t,i,n){return e=new xi(e,t,i),n?(e.next=n.next,(e.prev=n).next.prev=e,n.next=e):(e.prev=e).next=e,e}function _i(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xi(e,t,i){this.i=e,this.x=t,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function bi(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function wi(e,t){for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}function Ti(e,t){f.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Ei(e,t)),this.mergeVertices()}function Ei(e,U){function t(e){function t(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}function i(e,t,i){var n=e.x-t.x,r=e.y-t.y,a=i.x-e.x,s=i.y-e.y,o=n*n+r*r;if(Math.abs(n*s-r*a)>Number.EPSILON){var l=Math.sqrt(o),c=Math.sqrt(a*a+s*s);if(o=t.x-r/l,t=t.y+n/l,(r=(a=o+n*(s=((i.x-s/c-o)*s-(i.y+a/c-t)*a)/(n*s-r*a))-e.x)*a+(n=t+r*s-e.y)*n)<=2)return new W(a,n);r=Math.sqrt(r/2)}else e=!1,n>Number.EPSILON?a>Number.EPSILON&&(e=!0):n<-Number.EPSILON?a<-Number.EPSILON&&(e=!0):Math.sign(r)===Math.sign(s)&&(e=!0),r=e?(a=-r,Math.sqrt(o)):(a=n,n=r,Math.sqrt(o/2));return new W(a/r,n/r)}function n(e,t){for(D=e.length;0<=--D;){var i=D,n=D-1;n<0&&(n=e.length-1);var r,a=d+2*m;for(r=0;r<a;r++){var s=O*r,o=O*(r+1),l=t+n+s,c=t+n+o;o=t+i+o,h(t+i+s),h(l),h(o),h(l),h(c),h(o),s=V.length/3,u((s=v.generateSideWallUV(G,V,s-6,s-3,s-2,s-1))[0]),u(s[1]),u(s[3]),u(s[1]),u(s[2]),u(s[3])}}}function r(e,t,i){s.push(e),s.push(t),s.push(i)}function a(e,t,i){h(e),h(t),h(i),e=V.length/3,u((e=v.generateTopUV(G,V,e-3,e-2,e-1))[0]),u(e[1]),u(e[2])}function h(e){V.push(s[3*e]),V.push(s[3*e+1]),V.push(s[3*e+2])}function u(e){j.push(e.x),j.push(e.y)}var s=[],o=void 0!==U.curveSegments?U.curveSegments:12,d=void 0!==U.steps?U.steps:1,l=void 0!==U.depth?U.depth:100,c=void 0===U.bevelEnabled||U.bevelEnabled,p=void 0!==U.bevelThickness?U.bevelThickness:6,f=void 0!==U.bevelSize?U.bevelSize:p-2,m=void 0!==U.bevelSegments?U.bevelSegments:3,g=U.extrudePath,v=void 0!==U.UVGenerator?U.UVGenerator:No;void 0!==U.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=U.amount);var y,_=!1;if(g){var x=g.getSpacedPoints(d);c=!(_=!0);var b=g.computeFrenetFrames(d,!1),w=new Te,T=new Te,E=new Te}c||(f=p=m=0),e=(o=e.extractPoints(o)).shape;var M=o.holes;if(!ko.isClockWise(e)){e=e.reverse();var S=0;for(y=M.length;S<y;S++){var C=M[S];ko.isClockWise(C)&&(M[S]=C.reverse())}}var A=ko.triangulateShape(e,M),P=e;for(S=0,y=M.length;S<y;S++)C=M[S],e=e.concat(C);var L,R,O=e.length,I=A.length;o=[];var D=0,k=P.length,N=k-1;for(L=D+1;D<k;D++,N++,L++)N===k&&(N=0),L===k&&(L=0),o[D]=i(P[D],P[N],P[L]);g=[];var z=o.concat();for(S=0,y=M.length;S<y;S++){C=M[S];var B=[];for(D=0,N=(k=C.length)-1,L=D+1;D<k;D++,N++,L++)N===k&&(N=0),L===k&&(L=0),B[D]=i(C[D],C[N],C[L]);g.push(B),z=z.concat(B)}for(N=0;N<m;N++){k=N/m;var H=p*Math.cos(k*Math.PI/2);for(L=f*Math.sin(k*Math.PI/2),D=0,k=P.length;D<k;D++){var F=t(P[D],o[D],L);r(F.x,F.y,-H)}for(S=0,y=M.length;S<y;S++)for(C=M[S],B=g[S],D=0,k=C.length;D<k;D++)r((F=t(C[D],B[D],L)).x,F.y,-H)}for(L=f,D=0;D<O;D++)F=c?t(e[D],z[D],L):e[D],_?(T.copy(b.normals[0]).multiplyScalar(F.x),w.copy(b.binormals[0]).multiplyScalar(F.y),E.copy(x[0]).add(T).add(w),r(E.x,E.y,E.z)):r(F.x,F.y,0);for(k=1;k<=d;k++)for(D=0;D<O;D++)F=c?t(e[D],z[D],L):e[D],_?(T.copy(b.normals[k]).multiplyScalar(F.x),w.copy(b.binormals[k]).multiplyScalar(F.y),E.copy(x[k]).add(T).add(w),r(E.x,E.y,E.z)):r(F.x,F.y,l/d*k);for(N=m-1;0<=N;N--){for(k=N/m,H=p*Math.cos(k*Math.PI/2),L=f*Math.sin(k*Math.PI/2),D=0,k=P.length;D<k;D++)r((F=t(P[D],o[D],L)).x,F.y,l+H);for(S=0,y=M.length;S<y;S++)for(C=M[S],B=g[S],D=0,k=C.length;D<k;D++)F=t(C[D],B[D],L),_?r(F.x,F.y+x[d-1].y,x[d-1].x+H):r(F.x,F.y,l+H)}!function(){var e=V.length/3;if(c){var t=0*O;for(D=0;D<I;D++)a((R=A[D])[2]+t,R[1]+t,R[0]+t);for(t=O*(d+2*m),D=0;D<I;D++)a((R=A[D])[0]+t,R[1]+t,R[2]+t)}else{for(D=0;D<I;D++)a((R=A[D])[2],R[1],R[0]);for(D=0;D<I;D++)a((R=A[D])[0]+O*d,R[1]+O*d,R[2]+O*d)}G.addGroup(e,V.length/3-e,0)}(),function(){var e=V.length/3,t=0;for(n(P,t),t+=P.length,S=0,y=M.length;S<y;S++)n(C=M[S],t),t+=C.length;G.addGroup(e,V.length/3-e,1)}()}L.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:U},e=Array.isArray(e)?e:[e];for(var G=this,V=[],j=[],i=0,n=e.length;i<n;i++)t(e[i]);this.addAttribute("position",new P(V,3)),this.addAttribute("uv",new P(j,2)),this.computeVertexNormals()}function Mi(e,t,i){if(i.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++)i.shapes.push(e[n].uuid);else i.shapes.push(e.uuid);return void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON()),i}function Si(e,t){f.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Ci(e,t)),this.mergeVertices()}function Ci(e,t){var i=(t=t||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new f;e=i.generateShapes(e,t.size),t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Ei.call(this,e,t),this.type="TextBufferGeometry"}function Ai(e,t,i,n,r,a,s){f.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Pi(e,t,i,n,r,a,s)),this.mergeVertices()}function Pi(e,t,i,n,r,a,s){L.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var o,l,c=(a=void 0!==a?a:0)+(s=void 0!==s?s:Math.PI),h=0,u=[],d=new Te,p=new Te,f=[],m=[],g=[],v=[];for(l=0;l<=i;l++){var y=[],_=l/i;for(o=0;o<=t;o++){var x=o/t;d.x=-e*Math.cos(n+x*r)*Math.sin(a+_*s),d.y=e*Math.cos(a+_*s),d.z=e*Math.sin(n+x*r)*Math.sin(a+_*s),m.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),g.push(p.x,p.y,p.z),v.push(x,1-_),y.push(h++)}u.push(y)}for(l=0;l<i;l++)for(o=0;o<t;o++)e=u[l][o+1],n=u[l][o],r=u[l+1][o],s=u[l+1][o+1],(0!==l||0<a)&&f.push(e,n,s),(l!==i-1||c<Math.PI)&&f.push(n,r,s);this.setIndex(f),this.addAttribute("position",new P(m,3)),this.addAttribute("normal",new P(g,3)),this.addAttribute("uv",new P(v,2))}function Li(e,t,i,n,r,a){f.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new Ri(e,t,i,n,r,a)),this.mergeVertices()}function Ri(e,t,i,n,r,a){L.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},e=e||.5,t=t||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var s,o,l=[],c=[],h=[],u=[],d=e,p=(t-e)/(n=void 0!==n?Math.max(1,n):1),f=new Te,m=new W;for(s=0;s<=n;s++){for(o=0;o<=i;o++)e=r+o/i*a,f.x=d*Math.cos(e),f.y=d*Math.sin(e),c.push(f.x,f.y,f.z),h.push(0,0,1),m.x=(f.x/t+1)/2,m.y=(f.y/t+1)/2,u.push(m.x,m.y);d+=p}for(s=0;s<n;s++)for(t=s*(i+1),o=0;o<i;o++)r=(e=o+t)+i+1,a=e+i+2,d=e+1,l.push(e,r,d),l.push(r,a,d);this.setIndex(l),this.addAttribute("position",new P(c,3)),this.addAttribute("normal",new P(h,3)),this.addAttribute("uv",new P(u,2))}function Oi(e,t,i,n){f.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},this.fromBufferGeometry(new Ii(e,t,i,n)),this.mergeVertices()}function Ii(e,t,i,n){L.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t)||12,i=i||0,n=n||2*Math.PI,n=ya.clamp(n,0,2*Math.PI);var r,a=[],s=[],o=[],l=1/t,c=new Te,h=new W;for(r=0;r<=t;r++){var u=i+r*l*n,d=Math.sin(u),p=Math.cos(u);for(u=0;u<=e.length-1;u++)c.x=e[u].x*d,c.y=e[u].y,c.z=e[u].x*p,s.push(c.x,c.y,c.z),h.x=r/t,h.y=u/(e.length-1),o.push(h.x,h.y)}for(r=0;r<t;r++)for(u=0;u<e.length-1;u++)l=(i=u+r*e.length)+e.length,c=i+e.length+1,h=i+1,a.push(i,l,h),a.push(l,c,h);if(this.setIndex(a),this.addAttribute("position",new P(s,3)),this.addAttribute("uv",new P(o,2)),this.computeVertexNormals(),n===2*Math.PI)for(n=this.attributes.normal.array,a=new Te,s=new Te,o=new Te,i=t*e.length*3,u=r=0;r<e.length;r++,u+=3)a.x=n[u+0],a.y=n[u+1],a.z=n[u+2],s.x=n[i+u+0],s.y=n[i+u+1],s.z=n[i+u+2],o.addVectors(a,s).normalize(),n[u+0]=n[i+u+0]=o.x,n[u+1]=n[i+u+1]=o.y,n[u+2]=n[i+u+2]=o.z}function Di(e,t){f.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ki(e,t)),this.mergeVertices()}function ki(e,o){function t(e){var t,i=c.length/3,n=(e=e.extractPoints(o)).shape,r=e.holes;for(!1===ko.isClockWise(n)&&(n=n.reverse()),e=0,t=r.length;e<t;e++){var a=r[e];!0===ko.isClockWise(a)&&(r[e]=a.reverse())}var s=ko.triangulateShape(n,r);for(e=0,t=r.length;e<t;e++)a=r[e],n=n.concat(a);for(e=0,t=n.length;e<t;e++)a=n[e],c.push(a.x,a.y,0),h.push(0,0,1),u.push(a.x,a.y);for(e=0,t=s.length;e<t;e++)n=s[e],l.push(n[0]+i,n[1]+i,n[2]+i),d+=3}L.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:o},o=o||12;var l=[],c=[],h=[],u=[],i=0,d=0;if(!1===Array.isArray(e))t(e);else for(var n=0;n<e.length;n++)t(e[n]),this.addGroup(i,d,n),i+=d,d=0;this.setIndex(l),this.addAttribute("position",new P(c,3)),this.addAttribute("normal",new P(h,3)),this.addAttribute("uv",new P(u,2))}function Ni(e,t){if(t.shapes=[],Array.isArray(e))for(var i=0,n=e.length;i<n;i++)t.shapes.push(e[i].uuid);else t.shapes.push(e.uuid);return t}function zi(e,t){L.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t};var i=[];t=Math.cos(ya.DEG2RAD*(void 0!==t?t:1));var n=[0,0],r={},a=["a","b","c"];if(e.isBufferGeometry){var s=new f;s.fromBufferGeometry(e)}else s=e.clone();s.mergeVertices(),s.computeFaceNormals(),e=s.vertices;for(var o=0,l=(s=s.faces).length;o<l;o++)for(var c=s[o],h=0;h<3;h++){var u=c[a[h]],d=c[a[(h+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d),void 0===r[u=n[0]+","+n[1]]?r[u]={index1:n[0],index2:n[1],face1:o,face2:void 0}:r[u].face2=o}for(u in r)(void 0===(n=r[u]).face2||s[n.face1].normal.dot(s[n.face2].normal)<=t)&&(a=e[n.index1],i.push(a.x,a.y,a.z),a=e[n.index2],i.push(a.x,a.y,a.z));this.addAttribute("position",new P(i,3))}function Bi(e,t,i,n,r,a,s,o){f.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new Hi(e,t,i,n,r,a,s,o)),this.mergeVertices()}function Hi(d,p,f,m,g,e,v,y){function t(e){var t,i=new W,n=new Te,r=0,a=!0===e?d:p,s=!0===e?1:-1,o=E;for(t=1;t<=m;t++)b.push(0,S*s,0),w.push(0,s,0),T.push(.5,.5),E++;var l=E;for(t=0;t<=m;t++){var c=t/m*y+v,h=Math.cos(c);c=Math.sin(c),n.x=a*c,n.y=S*s,n.z=a*h,b.push(n.x,n.y,n.z),w.push(0,s,0),i.x=.5*h+.5,i.y=.5*c*s+.5,T.push(i.x,i.y),E++}for(t=0;t<m;t++)i=o+t,n=l+t,!0===e?x.push(n,n+1,i):x.push(n+1,n,i),r+=3;_.addGroup(C,r,!0===e?1:2),C+=r}L.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:d,radiusBottom:p,height:f,radialSegments:m,heightSegments:g,openEnded:e,thetaStart:v,thetaLength:y};var _=this;d=void 0!==d?d:1,p=void 0!==p?p:1,f=f||1,m=Math.floor(m)||8,g=Math.floor(g)||1,e=void 0!==e&&e,v=void 0!==v?v:0,y=void 0!==y?y:2*Math.PI;var x=[],b=[],w=[],T=[],E=0,M=[],S=f/2,C=0;!function(){var e,t,i=new Te,n=new Te,r=0,a=(p-d)/f;for(t=0;t<=g;t++){var s=[],o=t/g,l=o*(p-d)+d;for(e=0;e<=m;e++){var c=e/m,h=c*y+v,u=Math.sin(h);h=Math.cos(h),n.x=l*u,n.y=-o*f+S,n.z=l*h,b.push(n.x,n.y,n.z),i.set(u,a,h).normalize(),w.push(i.x,i.y,i.z),T.push(c,1-o),s.push(E++)}M.push(s)}for(e=0;e<m;e++)for(t=0;t<g;t++)i=M[t+1][e],n=M[t+1][e+1],a=M[t][e+1],x.push(M[t][e],i,a),x.push(i,n,a),r+=6;_.addGroup(C,r,0),C+=r}(),!1===e&&(0<d&&t(!0),0<p&&t(!1)),this.setIndex(x),this.addAttribute("position",new P(b,3)),this.addAttribute("normal",new P(w,3)),this.addAttribute("uv",new P(T,2))}function Fi(e,t,i,n,r,a,s){Bi.call(this,0,e,t,i,n,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}function Ui(e,t,i,n,r,a,s){Hi.call(this,0,e,t,i,n,r,a,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}function Gi(e,t,i,n){f.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new Vi(e,t,i,n)),this.mergeVertices()}function Vi(e,t,i,n){L.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},e=e||1,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI;var r,a=[],s=[],o=[],l=[],c=new Te,h=new W;s.push(0,0,0),o.push(0,0,1),l.push(.5,.5);var u=0;for(r=3;u<=t;u++,r+=3){var d=i+u/t*n;c.x=e*Math.cos(d),c.y=e*Math.sin(d),s.push(c.x,c.y,c.z),o.push(0,0,1),h.x=(s[r]/e+1)/2,h.y=(s[r+1]/e+1)/2,l.push(h.x,h.y)}for(r=1;r<=t;r++)a.push(r,r+1,0);this.setIndex(a),this.addAttribute("position",new P(s,3)),this.addAttribute("normal",new P(o,3)),this.addAttribute("uv",new P(l,2))}function ji(e){k.call(this),this.type="ShadowMaterial",this.color=new p(0),this.transparent=!0,this.setValues(e)}function Wi(e){N.call(this,e),this.type="RawShaderMaterial"}function Xi(e){k.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new p(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new p(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new W(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Yi(e){Xi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(e)}function qi(e){k.call(this),this.type="MeshPhongMaterial",this.color=new p(16777215),this.specular=new p(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new p(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new W(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function $i(e){qi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Zi(e){k.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new W(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(e)}function Ji(e){k.call(this),this.type="MeshLambertMaterial",this.color=new p(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new p(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Ki(e){k.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new p(16777215),this.bumpMap=this.map=this.matcap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new W(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.lights=this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Qi(e){Rt.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function en(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function tn(e,t,i,n){en.call(this,e,t,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function nn(e,t,i,n){en.call(this,e,t,i,n)}function rn(e,t,i,n){en.call(this,e,t,i,n)}function an(e,t,i,n){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ho.convertArray(t,this.TimeBufferType),this.values=Ho.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function sn(e,t,i){an.call(this,e,t,i)}function on(e,t,i,n){an.call(this,e,t,i,n)}function ln(e,t,i,n){an.call(this,e,t,i,n)}function cn(e,t,i,n){en.call(this,e,t,i,n)}function hn(e,t,i,n){an.call(this,e,t,i,n)}function un(e,t,i,n){an.call(this,e,t,i,n)}function dn(e,t,i,n){an.call(this,e,t,i,n)}function pn(e,t,i){this.name=e,this.tracks=i,this.duration=void 0!==t?t:-1,this.uuid=ya.generateUUID(),this.duration<0&&this.resetDuration()}function fn(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ln;case"vector":case"vector2":case"vector3":case"vector4":return dn;case"color":return on;case"quaternion":return hn;case"bool":case"boolean":return sn;case"string":return un}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var i=[],n=[];Ho.flattenJSON(e.keys,i,n,"value"),e.times=i,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function mn(e,t,i){var n=this,r=!1,a=0,s=0,o=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){s++,!1===r&&void 0!==n.onStart&&n.onStart(e,a,s),r=!0},this.itemEnd=function(e){a++,void 0!==n.onProgress&&n.onProgress(e,a,s),a===s&&(r=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this}}function gn(e){this.manager=void 0!==e?e:Uo}function vn(e){this.manager=void 0!==e?e:Uo}function yn(e){this.manager=void 0!==e?e:Uo,this._parser=null}function _n(e){this.manager=void 0!==e?e:Uo,this._parser=null}function xn(e){this.manager=void 0!==e?e:Uo}function bn(e){this.manager=void 0!==e?e:Uo}function wn(e){this.manager=void 0!==e?e:Uo}function Tn(){this.type="Curve",this.arcLengthDivisions=200}function En(e,t,i,n,r,a,s,o){Tn.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=s||!1,this.aRotation=o||0}function Mn(e,t,i,n,r,a){En.call(this,e,t,i,i,n,r,a),this.type="ArcCurve"}function Sn(){var o=0,l=0,c=0,h=0;return{initCatmullRom:function(e,t,i,n,r){c=-3*(o=t)+3*i-2*(l=e=r*(i-e))-(n=r*(n-t)),h=2*t-2*i+e+n},initNonuniformCatmullRom:function(e,t,i,n,r,a,s){c=-3*(o=t)+3*i-2*(l=e=((t-e)/r-(i-e)/(r+a)+(i-t)/a)*a)-(n=((i-t)/a-(n-t)/(a+s)+(n-i)/s)*a),h=2*t-2*i+e+n},calc:function(e){var t=e*e;return o+l*e+c*t+h*t*e}}}function Cn(e,t,i,n){Tn.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=i||"centripetal",this.tension=n||.5}function An(e,t,i,n,r){var a=e*e;return(2*i-2*n+(t=.5*(n-t))+(r=.5*(r-i)))*e*a+(-3*i+3*n-2*t-r)*a+t*e+i}function Pn(e,t,i,n){var r=1-e;return r*r*t+2*(1-e)*e*i+e*e*n}function Ln(e,t,i,n,r){var a=1-e,s=1-e;return a*a*a*t+3*s*s*e*i+3*(1-e)*e*e*n+e*e*e*r}function Rn(e,t,i,n){Tn.call(this),this.type="CubicBezierCurve",this.v0=e||new W,this.v1=t||new W,this.v2=i||new W,this.v3=n||new W}function On(e,t,i,n){Tn.call(this),this.type="CubicBezierCurve3",this.v0=e||new Te,this.v1=t||new Te,this.v2=i||new Te,this.v3=n||new Te}function In(e,t){Tn.call(this),this.type="LineCurve",this.v1=e||new W,this.v2=t||new W}function Dn(e,t){Tn.call(this),this.type="LineCurve3",this.v1=e||new Te,this.v2=t||new Te}function kn(e,t,i){Tn.call(this),this.type="QuadraticBezierCurve",this.v0=e||new W,this.v1=t||new W,this.v2=i||new W}function Nn(e,t,i){Tn.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Te,this.v1=t||new Te,this.v2=i||new Te}function zn(e){Tn.call(this),this.type="SplineCurve",this.points=e||[]}function Bn(){Tn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Hn(e){Bn.call(this),this.type="Path",this.currentPoint=new W,e&&this.setFromPoints(e)}function Fn(e){Hn.call(this,e),this.uuid=ya.generateUUID(),this.type="Shape",this.holes=[]}function Un(e,t){u.call(this),this.type="Light",this.color=new p(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Gn(e,t,i){Un.call(this,e,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(u.DefaultUp),this.updateMatrix(),this.groundColor=new p(t)}function Vn(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new W(512,512),this.map=null,this.matrix=new we}function jn(){Vn.call(this,new ft(50,1,.5,500))}function Wn(e,t,i,n,r,a){Un.call(this,e,t),this.type="SpotLight",this.position.copy(u.DefaultUp),this.updateMatrix(),this.target=new u,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new jn}function Xn(e,t,i,n){Un.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Vn(new ft(90,1,.5,500))}function Yn(e,t,i,n,r,a){pt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==i?i:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function qn(){Vn.call(this,new Yn(-5,5,5,-5,.5,500))}function $n(e,t){Un.call(this,e,t),this.type="DirectionalLight",this.position.copy(u.DefaultUp),this.updateMatrix(),this.target=new u,this.shadow=new qn}function Zn(e,t){Un.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Jn(e,t,i,n){Un.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function Kn(e){this.manager=void 0!==e?e:Uo,this.textures={}}function Qn(e){this.manager=void 0!==e?e:Uo}function er(e){this.manager=void 0!==e?e:Uo,this.resourcePath=""}function tr(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Uo,this.options=void 0}function ir(){this.type="ShapePath",this.color=new p,this.subPaths=[],this.currentPath=null}function nr(e){this.type="Font",this.data=e}function rr(e){this.manager=void 0!==e?e:Uo}function ar(){}function sr(e){this.manager=void 0!==e?e:Uo}function or(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ft,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ft,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function lr(e,t,i,n){u.call(this),this.type="CubeCamera";var a=new ft(90,1,e,t);a.up.set(0,-1,0),a.lookAt(new Te(1,0,0)),this.add(a);var s=new ft(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Te(-1,0,0)),this.add(s);var o=new ft(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Te(0,1,0)),this.add(o);var l=new ft(90,1,e,t);l.up.set(0,0,-1),l.lookAt(new Te(0,-1,0)),this.add(l);var c=new ft(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new Te(0,0,1)),this.add(c);var h=new ft(90,1,e,t);h.up.set(0,-1,0),h.lookAt(new Te(0,0,-1)),this.add(h),n=n||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new r(i,i,n),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var i=e.getRenderTarget(),n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,a,n),n.activeCubeFace=1,e.render(t,s,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,l,n),n.activeCubeFace=4,e.render(t,c,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,h,n),e.setRenderTarget(i)},this.clear=function(e,t,i,n){for(var r=e.getRenderTarget(),a=this.renderTarget,s=0;s<6;s++)a.activeCubeFace=s,e.setRenderTarget(a),e.clear(t,i,n);e.setRenderTarget(r)}}function cr(e){this.autoStart=void 0===e||e,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function hr(){u.call(this),this.type="AudioListener",this.context=Zl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function ur(e){u.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function dr(e){ur.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function pr(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function fr(e,t,i){switch(this.binding=e,this.valueSize=i,e=Float64Array,t){case"quaternion":t=this._slerp;break;case"string":case"bool":e=Array,t=this._select;break;default:t=this._lerp}this.buffer=new e(4*i),this._mixBufferRegion=t,this.referenceCount=this.useCount=this.cumulativeWeight=0}function mr(e,t,i){i=i||gr.parseTrackName(t),this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function gr(e,t,i){this.path=t,this.parsedPath=i||gr.parseTrackName(t),this.node=gr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function vr(){this.uuid=ya.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function yr(e,t,i){this._mixer=e,this._clip=t,this._localRoot=i||null,t=(e=t.tracks).length,i=Array(t);for(var n={endingStart:2400,endingEnd:2400},r=0;r!==t;++r){var a=e[r].createInterpolant(null);(i[r]=a).settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(t),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function _r(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function xr(e,t){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=t),this.value=e}function br(){L.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function wr(e,t,i){Tt.call(this,e,t),this.meshPerAttribute=i||1}function Tr(e,t,i,n){"number"==typeof i&&(n=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),m.call(this,e,t,i),this.meshPerAttribute=n||1}function Er(e,t,i,n){this.ray=new z(e,t),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Mr(e,t){return e.distance-t.distance}function Sr(e,t,i,n){if(!1!==e.visible&&(e.raycast(t,i),!0===n)){n=0;for(var r=(e=e.children).length;n<r;n++)Sr(e[n],t,i,!0)}}function Cr(e,t,i){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==i?i:0,this}function Ar(e,t,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==i?i:0,this}function Pr(e,t){this.min=void 0!==e?e:new W(1/0,1/0),this.max=void 0!==t?t:new W(-1/0,-1/0)}function Lr(e,t){this.start=void 0!==e?e:new Te,this.end=void 0!==t?t:new Te}function Rr(e){u.call(this),this.material=e,this.render=function(){}}function Or(e,t,i,n){this.object=e,this.size=void 0!==t?t:1,e=void 0!==i?i:16711680,n=void 0!==n?n:1,t=0,(i=this.object.geometry)&&i.isGeometry?t=3*i.faces.length:i&&i.isBufferGeometry&&(t=i.attributes.normal.count),i=new L,t=new P(6*t,3),i.addAttribute("position",t),It.call(this,i,new Rt({color:e,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function Ir(e,t){u.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e=new L,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(var i=0,n=1;i<32;i++,n++){var r=i/32*Math.PI*2,a=n/32*Math.PI*2;t.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}e.addAttribute("position",new P(t,3)),t=new Rt({fog:!1}),this.cone=new It(e,t),this.add(this.cone),this.update()}function Dr(e){for(var t=function e(t){var i=[];t&&t.isBone&&i.push(t);for(var n=0;n<t.children.length;n++)i.push.apply(i,e(t.children[n]));return i}(e),i=new L,n=[],r=[],a=new p(0,0,1),s=new p(0,1,0),o=0;o<t.length;o++){var l=t[o];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}i.addAttribute("position",new P(n,3)),i.addAttribute("color",new P(r,3)),n=new Rt({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),It.call(this,i,n),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function kr(e,t,i){this.light=e,this.light.updateMatrixWorld(),this.color=i,e=new Pi(t,4,2),t=new H({wireframe:!0,fog:!1}),F.call(this,e,t),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Nr(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t,(e=new L).addAttribute("position",new P([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),e.computeBoundingSphere(),t=new Rt({fog:!1}),Ot.call(this,e,t),(e=new L).addAttribute("position",new P([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),e.computeBoundingSphere(),this.add(new F(e,new H({side:1,fog:!1}))),this.update()}function zr(e,t,i){u.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,(e=new $t(t)).rotateY(.5*Math.PI),this.material=new H({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),t=e.getAttribute("position"),t=new Float32Array(3*t.count),e.addAttribute("color",new m(t,3)),this.add(new F(e,this.material)),this.update()}function Br(e,t,i,n){e=e||10,t=t||10,i=new p(void 0!==i?i:4473924),n=new p(void 0!==n?n:8947848);var r=t/2,a=e/t,s=e/2;e=[];for(var o=[],l=0,c=0,h=-s;l<=t;l++,h+=a){e.push(-s,0,h,s,0,h),e.push(h,0,-s,h,0,s);var u=l===r?i:n;u.toArray(o,c),c+=3,u.toArray(o,c),c+=3,u.toArray(o,c),c+=3,u.toArray(o,c),c+=3}(t=new L).addAttribute("position",new P(e,3)),t.addAttribute("color",new P(o,3)),i=new Rt({vertexColors:2}),It.call(this,t,i)}function Hr(e,t,i,n,r,a){e=e||10,t=t||16,i=i||8,n=n||64,r=new p(void 0!==r?r:4473924),a=new p(void 0!==a?a:8947848);var s,o=[],l=[];for(s=0;s<=t;s++){var c=s/t*2*Math.PI,h=Math.sin(c)*e;c=Math.cos(c)*e,o.push(0,0,0),o.push(h,0,c);var u=1&s?r:a;l.push(u.r,u.g,u.b),l.push(u.r,u.g,u.b)}for(s=0;s<=i;s++){u=1&s?r:a;var d=e-e/i*s;for(t=0;t<n;t++)c=t/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,o.push(h,0,c),l.push(u.r,u.g,u.b),c=(t+1)/n*2*Math.PI,h=Math.sin(c)*d,c=Math.cos(c)*d,o.push(h,0,c),l.push(u.r,u.g,u.b)}(e=new L).addAttribute("position",new P(o,3)),e.addAttribute("color",new P(l,3)),o=new Rt({vertexColors:2}),It.call(this,e,o)}function Fr(e,t,i,n){this.object=e,this.size=void 0!==t?t:1,e=void 0!==i?i:16776960,n=void 0!==n?n:1,t=0,(i=this.object.geometry)&&i.isGeometry?t=i.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),i=new L,t=new P(6*t,3),i.addAttribute("position",t),It.call(this,i,new Rt({color:e,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function Ur(e,t,i){u.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===t&&(t=1),(e=new L).addAttribute("position",new P([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),t=new Rt({fog:!1}),this.lightPlane=new Ot(e,t),this.add(this.lightPlane),(e=new L).addAttribute("position",new P([0,0,0,0,0,1],3)),this.targetLine=new Ot(e,t),this.add(this.targetLine),this.update()}function Gr(e){function t(e,t,i){n(e,i),n(t,i)}function n(e,t){a.push(0,0,0),s.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(a.length/3-1)}var i=new L,r=new Rt({color:16777215,vertexColors:1}),a=[],s=[],o={},l=new p(16755200),c=new p(16711680),h=new p(43775),u=new p(16777215),d=new p(3355443);t("n1","n2",l),t("n2","n4",l),t("n4","n3",l),t("n3","n1",l),t("f1","f2",l),t("f2","f4",l),t("f4","f3",l),t("f3","f1",l),t("n1","f1",l),t("n2","f2",l),t("n3","f3",l),t("n4","f4",l),t("p","n1",c),t("p","n2",c),t("p","n3",c),t("p","n4",c),t("u1","u2",h),t("u2","u3",h),t("u3","u1",h),t("c","t",u),t("p","c",d),t("cn1","cn2",d),t("cn3","cn4",d),t("cf1","cf2",d),t("cf3","cf4",d),i.addAttribute("position",new P(a,3)),i.addAttribute("color",new P(s,3)),It.call(this,i,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Vr(e,t){this.object=e,void 0===t&&(t=16776960),e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new L;n.setIndex(new m(e,1)),n.addAttribute("position",new m(i,3)),It.call(this,n,new Rt({color:t})),this.matrixAutoUpdate=!1,this.update()}function jr(e,t){this.type="Box3Helper",this.box=e,e=void 0!==t?t:16776960,t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new L;i.setIndex(new m(t,1)),i.addAttribute("position",new P([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),It.call(this,i,new Rt({color:e})),this.geometry.computeBoundingSphere()}function Wr(e,t,i){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t,e=void 0!==i?i:16776960,(t=new L).addAttribute("position",new P([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),t.computeBoundingSphere(),Ot.call(this,t,new Rt({color:e})),(t=new L).addAttribute("position",new P([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),t.computeBoundingSphere(),this.add(new F(t,new H({color:e,opacity:.2,transparent:!0,depthWrite:!1})))}function Xr(e,t,i,n,r,a){u.call(this),void 0===e&&(e=new Te(0,0,1)),void 0===t&&(t=new Te(0,0,0)),void 0===i&&(i=1),void 0===n&&(n=16776960),void 0===r&&(r=.2*i),void 0===a&&(a=.2*r),void 0===Wl&&((Wl=new L).addAttribute("position",new P([0,0,0,0,1,0],3)),(Xl=new Hi(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Ot(Wl,new Rt({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new F(Xl,new H({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,a)}function Yr(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e];(e=new L).addAttribute("position",new P(t,3)),e.addAttribute("color",new P([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),t=new Rt({vertexColors:2}),It.call(this,e,t)}function qr(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Cn.call(this,e),this.type="catmullrom",this.closed=!0}function $r(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Cn.call(this,e),this.type="catmullrom"}function Zr(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Cn.call(this,e),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:0<e?1:+e}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){void 0!==this._listeners&&(void 0!==(e=this._listeners[e])&&(-1!==(t=e.indexOf(t))&&e.splice(t,1)))},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=0,n=(t=t.slice(0)).length;i<n;i++)t[i].call(this,e)}}}});var Jr,Kr,Qr,ea,ta,ia,na,ra,aa,sa,oa,la,ca,ha,ua,da,pa,fa,ma,ga,va,ya={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var r=[],e=0;e<256;e++)r[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(r[255&e]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255]+"-"+r[255&t]+r[t>>8&255]+"-"+r[t>>16&15|64]+r[t>>24&255]+"-"+r[63&i|128]+r[i>>8&255]+"-"+r[i>>16&255]+r[i>>24&255]+r[255&n]+r[n>>8&255]+r[n>>16&255]+r[n>>24&255]).toUpperCase()}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*ya.DEG2RAD},radToDeg:function(e){return e*ya.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(W.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(W.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,i=this.y;return e=e.elements,this.x=e[0]*t+e[3]*i+e[6],this.y=e[1]*t+e[4]*i+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(Jr=new W,Kr=new W,function(e,t){return Jr.set(e,e),Kr.set(t,t),this.clamp(Jr,Kr)}),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return t*t+(e=this.y-e.y)*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var i=Math.cos(t);t=Math.sin(t);var n=this.x-e.x,r=this.y-e.y;return this.x=n*i-r*t+e.x,this.y=n*t+r*i+e.y,this}}),Object.assign(we.prototype,{isMatrix4:!0,set:function(e,t,i,n,r,a,s,o,l,c,h,u,d,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=h,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new we).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:(oa=new Te,function(e){var t=this.elements,i=e.elements,n=1/oa.setFromMatrixColumn(e,0).length(),r=1/oa.setFromMatrixColumn(e,1).length();return e=1/oa.setFromMatrixColumn(e,2).length(),t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*e,t[9]=i[9]*e,t[10]=i[10]*e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,n=e.y,r=e.z,a=Math.cos(i);i=Math.sin(i);var s=Math.cos(n);n=Math.sin(n);var o=Math.cos(r);if(r=Math.sin(r),"XYZ"===e.order){e=a*o;var l=a*r,c=i*o,h=i*r;t[0]=s*o,t[4]=-s*r,t[8]=n,t[1]=l+c*n,t[5]=e-h*n,t[9]=-i*s,t[2]=h-e*n,t[6]=c+l*n,t[10]=a*s}else"YXZ"===e.order?(e=s*o,l=s*r,c=n*o,h=n*r,t[0]=e+h*i,t[4]=c*i-l,t[8]=a*n,t[1]=a*r,t[5]=a*o,t[9]=-i,t[2]=l*i-c,t[6]=h+e*i,t[10]=a*s):"ZXY"===e.order?(e=s*o,l=s*r,c=n*o,h=n*r,t[0]=e-h*i,t[4]=-a*r,t[8]=c+l*i,t[1]=l+c*i,t[5]=a*o,t[9]=h-e*i,t[2]=-a*n,t[6]=i,t[10]=a*s):"ZYX"===e.order?(e=a*o,l=a*r,c=i*o,h=i*r,t[0]=s*o,t[4]=c*n-l,t[8]=e*n+h,t[1]=s*r,t[5]=h*n+e,t[9]=l*n-c,t[2]=-n,t[6]=i*s,t[10]=a*s):"YZX"===e.order?(e=a*s,l=a*n,c=i*s,h=i*n,t[0]=s*o,t[4]=h-e*r,t[8]=c*r+l,t[1]=r,t[5]=a*o,t[9]=-i*o,t[2]=-n*o,t[6]=l*r+c,t[10]=e-h*r):"XZY"===e.order&&(e=a*s,l=a*n,c=i*s,h=i*n,t[0]=s*o,t[4]=-r,t[8]=n*o,t[1]=e*r+h,t[5]=a*o,t[9]=l*r-c,t[2]=c*r-l,t[6]=i*o,t[10]=h*r+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(aa=new Te(0,0,0),sa=new Te(1,1,1),function(e){return this.compose(aa,e,sa)}),lookAt:(ia=new Te,na=new Te,ra=new Te,function(e,t,i){var n=this.elements;return ra.subVectors(e,t),0===ra.lengthSq()&&(ra.z=1),ra.normalize(),ia.crossVectors(i,ra),0===ia.lengthSq()&&(1===Math.abs(i.z)?ra.x+=1e-4:ra.z+=1e-4,ra.normalize(),ia.crossVectors(i,ra)),ia.normalize(),na.crossVectors(ra,ia),n[0]=ia.x,n[4]=na.x,n[8]=ra.x,n[1]=ia.y,n[5]=na.y,n[9]=ra.y,n[2]=ia.z,n[6]=na.z,n[10]=ra.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements;t=this.elements,e=i[0];var r=i[4],a=i[8],s=i[12],o=i[1],l=i[5],c=i[9],h=i[13],u=i[2],d=i[6],p=i[10],f=i[14],m=i[3],g=i[7],v=i[11];i=i[15];var y=n[0],_=n[4],x=n[8],b=n[12],w=n[1],T=n[5],E=n[9],M=n[13],S=n[2],C=n[6],A=n[10],P=n[14],L=n[3],R=n[7],O=n[11];return n=n[15],t[0]=e*y+r*w+a*S+s*L,t[4]=e*_+r*T+a*C+s*R,t[8]=e*x+r*E+a*A+s*O,t[12]=e*b+r*M+a*P+s*n,t[1]=o*y+l*w+c*S+h*L,t[5]=o*_+l*T+c*C+h*R,t[9]=o*x+l*E+c*A+h*O,t[13]=o*b+l*M+c*P+h*n,t[2]=u*y+d*w+p*S+f*L,t[6]=u*_+d*T+p*C+f*R,t[10]=u*x+d*E+p*A+f*O,t[14]=u*b+d*M+p*P+f*n,t[3]=m*y+g*w+v*S+i*L,t[7]=m*_+g*T+v*C+i*R,t[11]=m*x+g*E+v*A+i*O,t[15]=m*b+g*M+v*P+i*n,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:(ta=new Te,function(e){for(var t=0,i=e.count;t<i;t++)ta.x=e.getX(t),ta.y=e.getY(t),ta.z=e.getZ(t),ta.applyMatrix4(this),e.setXYZ(t,ta.x,ta.y,ta.z);return e}),determinant:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],h=e[6],u=e[10],d=e[14];return e[3]*(+r*o*h-n*l*h-r*s*u+i*l*u+n*s*d-i*o*d)+e[7]*(+t*o*d-t*l*u+r*a*u-n*a*d+n*l*c-r*o*c)+e[11]*(+t*l*h-t*s*d-r*a*h+i*a*d+r*s*c-i*l*c)+e[15]*(-n*s*c-t*o*h+t*s*u+n*a*h-i*a*u+i*o*c)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,n=e.elements;e=n[0];var r=n[1],a=n[2],s=n[3],o=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],p=n[10],f=n[11],m=n[12],g=n[13],v=n[14],y=d*v*h-g*p*h+g*c*f-l*v*f-d*c*(n=n[15])+l*p*n,_=m*p*h-u*v*h-m*c*f+o*v*f+u*c*n-o*p*n,x=u*g*h-m*d*h+m*l*f-o*g*f-u*l*n+o*d*n,b=m*d*c-u*g*c-m*l*p+o*g*p+u*l*v-o*d*v,w=e*y+r*_+a*x+s*b;if(0!==w)return t=1/w,i[0]=y*t,i[1]=(g*p*s-d*v*s-g*a*f+r*v*f+d*a*n-r*p*n)*t,i[2]=(l*v*s-g*c*s+g*a*h-r*v*h-l*a*n+r*c*n)*t,i[3]=(d*c*s-l*p*s-d*a*h+r*p*h+l*a*f-r*c*f)*t,i[4]=_*t,i[5]=(u*v*s-m*p*s+m*a*f-e*v*f-u*a*n+e*p*n)*t,i[6]=(m*c*s-o*v*s-m*a*h+e*v*h+o*a*n-e*c*n)*t,i[7]=(o*p*s-u*c*s+u*a*h-e*p*h-o*a*f+e*c*f)*t,i[8]=x*t,i[9]=(m*d*s-u*g*s-m*r*f+e*g*f+u*r*n-e*d*n)*t,i[10]=(o*g*s-m*l*s+m*r*h-e*g*h-o*r*n+e*l*n)*t,i[11]=(u*l*s-o*d*s-u*r*h+e*d*h+o*r*f-e*l*f)*t,i[12]=b*t,i[13]=(u*g*a-m*d*a+m*r*p-e*g*p-u*r*v+e*d*v)*t,i[14]=(m*l*a-o*g*a-m*r*c+e*g*c+o*r*v-e*l*v)*t,i[15]=(o*d*a-u*l*a+u*r*c-e*d*c-o*r*p+e*l*p)*t,this;if(!0===t)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()},scale:function(e){var t=this.elements,i=e.x,n=e.y;return e=e.z,t[0]*=i,t[4]*=n,t[8]*=e,t[1]*=i,t[5]*=n,t[9]*=e,t[2]*=i,t[6]*=n,t[10]*=e,t[3]*=i,t[7]*=n,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t);t=Math.sin(t);var n=1-i,r=e.x,a=e.y;e=e.z;var s=n*r,o=n*a;return this.set(s*r+i,s*a-t*e,s*e+t*a,0,s*a+t*e,o*a+i,o*e-t*r,0,s*e-t*a,o*e+t*r,n*e*e+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,i){var n=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,h=s+s;t=r*l;var u=r*c;r*=h;var d=a*c;a*=h,s*=h,l*=o,c*=o,o*=h,h=i.x;var p=i.y;return i=i.z,n[0]=(1-(d+s))*h,n[1]=(u+o)*h,n[2]=(r-c)*h,n[3]=0,n[4]=(u-o)*p,n[5]=(1-(t+s))*p,n[6]=(a+l)*p,n[7]=0,n[8]=(r+c)*i,n[9]=(a-l)*i,n[10]=(1-(t+d))*i,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:(Qr=new Te,ea=new we,function(e,t,i){var n=this.elements,r=Qr.set(n[0],n[1],n[2]).length(),a=Qr.set(n[4],n[5],n[6]).length(),s=Qr.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],ea.copy(this),e=1/r,n=1/a;var o=1/s;return ea.elements[0]*=e,ea.elements[1]*=e,ea.elements[2]*=e,ea.elements[4]*=n,ea.elements[5]*=n,ea.elements[6]*=n,ea.elements[8]*=o,ea.elements[9]*=o,ea.elements[10]*=o,t.setFromRotationMatrix(ea),i.x=r,i.y=a,i.z=s,this}),makePerspective:function(e,t,i,n,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements;return s[0]=2*r/(t-e),s[4]=0,s[8]=(t+e)/(t-e),s[12]=0,s[1]=0,s[5]=2*r/(i-n),s[9]=(i+n)/(i-n),s[13]=0,s[2]=0,s[6]=0,s[10]=-(a+r)/(a-r),s[14]=-2*a*r/(a-r),s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,i,n,r,a){var s=this.elements,o=1/(t-e),l=1/(i-n),c=1/(a-r);return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-(t+e)*o,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-(i+n)*l,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-(a+r)*c,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){var t=this.elements;e=e.elements;for(var i=0;i<16;i++)if(t[i]!==e[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<16;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}),Object.assign(T,{slerp:function(e,t,i,n){return i.copy(e).slerp(t,n)},slerpFlat:function(e,t,i,n,r,a,s){var o=i[n+0],l=i[n+1],c=i[n+2];i=i[n+3],n=r[a+0];var h=r[a+1],u=r[a+2];if(i!==(r=r[a+3])||o!==n||l!==h||c!==u){a=1-s;var d=o*n+l*h+c*u+i*r,p=0<=d?1:-1,f=1-d*d;f>Number.EPSILON&&(f=Math.sqrt(f),d=Math.atan2(f,d*p),a=Math.sin(a*d)/f,s=Math.sin(s*d)/f),o=o*a+n*(p*=s),l=l*a+h*p,c=c*a+u*p,i=i*a+r*p,a===1-s&&(o*=s=1/Math.sqrt(o*o+l*l+c*c+i*i),l*=s,c*=s,i*=s)}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=i}}),Object.defineProperties(T.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(T.prototype,{isQuaternion:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,n=e._y,r=e._z;e=e.order;var a=Math.cos,s=Math.sin,o=a(i/2),l=a(n/2);return a=a(r/2),i=s(i/2),n=s(n/2),r=s(r/2),"XYZ"===e?(this._x=i*l*a+o*n*r,this._y=o*n*a-i*l*r,this._z=o*l*r+i*n*a,this._w=o*l*a-i*n*r):"YXZ"===e?(this._x=i*l*a+o*n*r,this._y=o*n*a-i*l*r,this._z=o*l*r-i*n*a,this._w=o*l*a+i*n*r):"ZXY"===e?(this._x=i*l*a-o*n*r,this._y=o*n*a+i*l*r,this._z=o*l*r+i*n*a,this._w=o*l*a-i*n*r):"ZYX"===e?(this._x=i*l*a-o*n*r,this._y=o*n*a+i*l*r,this._z=o*l*r-i*n*a,this._w=o*l*a+i*n*r):"YZX"===e?(this._x=i*l*a+o*n*r,this._y=o*n*a+i*l*r,this._z=o*l*r-i*n*a,this._w=o*l*a-i*n*r):"XZY"===e&&(this._x=i*l*a-o*n*r,this._y=o*n*a-i*l*r,this._z=o*l*r+i*n*a,this._w=o*l*a+i*n*r),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){t/=2;var i=Math.sin(t);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(t),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,i=t[0];e=t[4];var n=t[8],r=t[1],a=t[5],s=t[9],o=t[2],l=t[6],c=i+a+(t=t[10]);return this._z=0<c?(i=.5/Math.sqrt(c+1),this._w=.25/i,this._x=(l-s)*i,this._y=(n-o)*i,(r-e)*i):a<i&&t<i?(i=2*Math.sqrt(1+i-a-t),this._w=(l-s)/i,this._x=.25*i,this._y=(e+r)/i,(n+o)/i):t<a?(i=2*Math.sqrt(1+a-i-t),this._w=(n-o)/i,this._x=(e+r)/i,this._y=.25*i,(s+l)/i):(i=2*Math.sqrt(1+t-i-a),this._w=(r-e)/i,this._x=(n+o)/i,this._y=(s+l)/i,.25*i),this.onChangeCallback(),this},setFromUnitVectors:(ca=new Te,function(e,t){return void 0===ca&&(ca=new Te),(la=e.dot(t)+1)<1e-6?(la=0,Math.abs(e.x)>Math.abs(e.z)?ca.set(-e.y,e.x,0):ca.set(0,-e.z,e.y)):ca.crossVectors(e,t),this._x=ca.x,this._y=ca.y,this._z=ca.z,this._w=la,this.normalize()}),angleTo:function(e){return 2*Math.acos(Math.abs(ya.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var i=this.angleTo(e);return 0===i||this.slerp(e,Math.min(1,t/i)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,r=e._z;e=e._w;var a=t._x,s=t._y,o=t._z;return t=t._w,this._x=i*t+e*a+n*o-r*s,this._y=n*t+e*s+r*a-i*o,this._z=r*t+e*o+i*s-n*a,this._w=e*t-i*a-n*s-r*o,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,n=this._y,r=this._z,a=this._w,s=a*e._w+i*e._x+n*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s)return this._w=a,this._x=i,this._y=n,this._z=r,this;if((e=1-s*s)<=Number.EPSILON)return s=1-t,this._w=s*a+t*this._w,this._x=s*i+t*this._x,this._y=s*n+t*this._y,this._z=s*r+t*this._z,this.normalize();e=Math.sqrt(e);var o=Math.atan2(e,s);return s=Math.sin((1-t)*o)/e,t=Math.sin(t*o)/e,this._w=a*s+this._w*t,this._x=i*s+this._x*t,this._y=n*s+this._y*t,this._z=r*s+this._z*t,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Te.prototype,{isVector3:!0,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(ga=new T,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ga.setFromEuler(e))}),applyAxisAngle:(ma=new T,function(e,t){return this.applyQuaternion(ma.setFromAxisAngle(e,t))}),applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[3]*i+e[6]*n,this.y=e[1]*t+e[4]*i+e[7]*n,this.z=e[2]*t+e[5]*i+e[8]*n,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=1/((e=e.elements)[3]*t+e[7]*i+e[11]*n+e[15]);return this.x=(e[0]*t+e[4]*i+e[8]*n+e[12])*r,this.y=(e[1]*t+e[5]*i+e[9]*n+e[13])*r,this.z=(e[2]*t+e[6]*i+e[10]*n+e[14])*r,this},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,s=e.z,o=(e=e.w)*t+a*n-s*i,l=e*i+s*t-r*n,c=e*n+r*i-a*t;return t=-r*t-a*i-s*n,this.x=o*e+t*-r+l*-s-c*-a,this.y=l*e+t*-a+c*-r-o*-s,this.z=c*e+t*-s+o*-a-l*-r,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:(fa=new we,function(e){return this.applyMatrix4(fa.getInverse(e.projectionMatrix)).applyMatrix4(e.matrixWorld)}),transformDirection:function(e){var t=this.x,i=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*n,this.y=e[1]*t+e[5]*i+e[9]*n,this.z=e[2]*t+e[6]*i+e[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:(da=new Te,pa=new Te,function(e,t){return da.set(e,e,e),pa.set(t,t,t),this.clamp(da,pa)}),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var i=e.x,n=e.y;e=e.z;var r=t.x,a=t.y;return t=t.z,this.x=n*t-e*a,this.y=e*r-i*t,this.z=i*a-n*r,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:(ua=new Te,function(e){return ua.copy(this).projectOnVector(e),this.sub(ua)}),reflect:(ha=new Te,function(e){return this.sub(ha.copy(e).multiplyScalar(2*this.dot(e)))}),angleTo:function(e){return e=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq()),Math.acos(ya.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i+(e=this.z-e.z)*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,i){var n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=t,this.y=i,this.z=e,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(g.prototype,{isMatrix3:!0,set:function(e,t,i,n,r,a,s,o,l){var c=this.elements;return c[0]=e,c[1]=n,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:(va=new Te,function(e){for(var t=0,i=e.count;t<i;t++)va.x=e.getX(t),va.y=e.getY(t),va.z=e.getZ(t),va.applyMatrix3(this),e.setXYZ(t,va.x,va.y,va.z);return e}),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements;t=this.elements,e=i[0];var r=i[3],a=i[6],s=i[1],o=i[4],l=i[7],c=i[2],h=i[5];i=i[8];var u=n[0],d=n[3],p=n[6],f=n[1],m=n[4],g=n[7],v=n[2],y=n[5];return n=n[8],t[0]=e*u+r*f+a*v,t[3]=e*d+r*m+a*y,t[6]=e*p+r*g+a*n,t[1]=s*u+o*f+l*v,t[4]=s*d+o*m+l*y,t[7]=s*p+o*g+l*n,t[2]=c*u+h*f+i*v,t[5]=c*d+h*m+i*y,t[8]=c*p+h*g+i*n,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7];return t*a*(e=e[8])-t*s*l-i*r*e+i*s*o+n*r*l-n*a*o},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=e.elements;e=this.elements;var n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=i[5],c=i[6],h=i[7],u=(i=i[8])*o-l*h,d=l*c-i*s,p=h*s-o*c,f=n*u+r*d+a*p;if(0!==f)return t=1/f,e[0]=u*t,e[1]=(a*h-i*r)*t,e[2]=(l*r-a*o)*t,e[3]=d*t,e[4]=(i*n-a*c)*t,e[5]=(a*s-l*n)*t,e[6]=p*t,e[7]=(r*c-h*n)*t,e[8]=(o*n-r*s)*t,this;if(!0===t)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,i,n,r,a,s){var o=Math.cos(r);r=Math.sin(r),this.set(i*o,i*r,-i*(o*a+r*s)+a+e,-n*r,n*o,-n*(-r*a+o*s)+s+t,0,0,1)},scale:function(e,t){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this},rotate:function(e){var t=Math.cos(e);e=Math.sin(e);var i=this.elements,n=i[0],r=i[3],a=i[6],s=i[1],o=i[4],l=i[7];return i[0]=t*n+e*s,i[3]=t*r+e*o,i[6]=t*a+e*l,i[1]=-e*n+t*s,i[4]=-e*r+t*o,i[7]=-e*a+t*l,this},translate:function(e,t){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this},equals:function(e){var t=this.elements;e=e.elements;for(var i=0;i<9;i++)if(t[i]!==e[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<9;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}});var _a,xa,ba,wa,Ta,Ea,Ma,Sa,Ca,Aa,Pa,La,Ra,Oa,Ia,Da,ka,Na={getDataURL:function(e){if("undefined"==typeof HTMLCanvasElement)return e.src;if(!(e instanceof HTMLCanvasElement)){void 0===_a&&(_a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),_a.width=e.width,_a.height=e.height;var t=_a.getContext("2d");e instanceof ImageData?t.putImageData(e,0,0):t.drawImage(e,0,0,e.width,e.height),e=_a}return 2048<e.width||2048<e.height?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},za=0;d.DEFAULT_IMAGE=void 0,d.DEFAULT_MAPPING=300,d.prototype=Object.assign(Object.create(t.prototype),{constructor:d,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=ya.generateUUID()),!t&&void 0===e.images[n.uuid]){if(Array.isArray(n))for(var r=[],a=0,s=n.length;a<s;a++)r.push(Na.getDataURL(n[a]));else r=Na.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:r}}i.image=n.uuid}return t||(e.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(d.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ee.prototype,{isVector4:!0,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=this.w;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*n+e[12]*r,this.y=e[1]*t+e[5]*i+e[9]*n+e[13]*r,this.z=e[2]*t+e[6]*i+e[10]*n+e[14]*r,this.w=e[3]*t+e[7]*i+e[11]*n+e[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return this.z=t<1e-4?(this.x=1,this.y=0):(this.x=e.x/t,this.y=e.y/t,e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t=(e=e.elements)[0],i=e[4],n=e[8],r=e[1],a=e[5],s=e[9],o=e[2],l=e[6],c=e[10];return Math.abs(i-r)<.01&&Math.abs(n-o)<.01&&Math.abs(s-l)<.01?Math.abs(i+r)<.1&&Math.abs(n+o)<.1&&Math.abs(s+l)<.1&&Math.abs(t+a+c-3)<.1?this.set(1,0,0,0):(e=Math.PI,c=(c+1)/2,i=(i+r)/4,n=(n+o)/4,s=(s+l)/4,(a=(a+1)/2)<(t=(t+1)/2)&&c<t?i=t<.01?(l=0,o=.707106781):(o=i/(l=Math.sqrt(t)),n/l):c<a?i=a<.01?(o=0,l=.707106781):(l=i/(o=Math.sqrt(a)),s/o):c<.01?(o=l=.707106781,i=0):(l=n/(i=Math.sqrt(c)),o=s/i),this.set(l,o,i,e)):(e=Math.sqrt((l-s)*(l-s)+(n-o)*(n-o)+(r-i)*(r-i)),Math.abs(e)<.001&&(e=1),this.x=(l-s)/e,this.y=(n-o)/e,this.z=(r-i)/e,this.w=Math.acos((t+a+c-1)/2)),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return void 0===xa&&(xa=new Ee,ba=new Ee),xa.set(e,e,e,e),ba.set(t,t,t,t),this.clamp(xa,ba)},clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),C.prototype=Object.assign(Object.create(t.prototype),{constructor:C,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),i.prototype=Object.assign(Object.create(C.prototype),{constructor:i,isWebGLMultisampleRenderTarget:!0,copy:function(e){return C.prototype.copy.call(this,e),this.samples=e.samples,this}}),((r.prototype=Object.create(C.prototype)).constructor=r).prototype.isWebGLRenderTargetCube=!0,((Me.prototype=Object.create(d.prototype)).constructor=Me).prototype.isDataTexture=!0,Object.assign(n.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=e.length;o<l;o+=3){var c=e[o],h=e[o+1],u=e[o+2];c<t&&(t=c),h<i&&(i=h),u<n&&(n=u),r<c&&(r=c),a<h&&(a=h),s<u&&(s=u)}return this.min.set(t,i,n),this.max.set(r,a,s),this},setFromBufferAttribute:function(e){for(var t=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,s=-1/0,o=0,l=e.count;o<l;o++){var c=e.getX(o),h=e.getY(o),u=e.getZ(o);c<t&&(t=c),h<i&&(i=h),u<n&&(n=u),r<c&&(r=c),a<h&&(a=h),s<u&&(s=u)}return this.min.set(t,i,n),this.max.set(r,a,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(Sa=new Te,function(e,t){return t=Sa.copy(t).multiplyScalar(.5),this.min.copy(e).sub(t),this.max.copy(e).add(t),this}),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Te),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Te),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function t(e){var t=e.geometry;if(void 0!==t)if(t.isGeometry)for(t=t.vertices,n=0,r=t.length;n<r;n++)a.copy(t[n]),a.applyMatrix4(e.matrixWorld),i.expandByPoint(a);else if(t.isBufferGeometry&&void 0!==(t=t.attributes.position))for(n=0,r=t.count;n<r;n++)a.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),i.expandByPoint(a)}var i,n,r,a=new Te;return function(e){return i=this,e.updateMatrixWorld(!0),e.traverse(t),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Te),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Ma=new Te,function(e){return this.clampPoint(e.center,Ma),Ma.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){if(0<e.normal.x)var t=e.normal.x*this.min.x,i=e.normal.x*this.max.x;else t=e.normal.x*this.max.x,i=e.normal.x*this.min.x;return 0<e.normal.y?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant},intersectsTriangle:function(){function t(e){var t,i=0;for(t=e.length-3;i<=t;i+=3){h.fromArray(e,i);var n=u.x*Math.abs(h.x)+u.y*Math.abs(h.y)+u.z*Math.abs(h.z),r=o.dot(h),a=l.dot(h),s=c.dot(h);if(Math.max(-Math.max(r,a,s),Math.min(r,a,s))>n)return!1}return!0}var o=new Te,l=new Te,c=new Te,i=new Te,n=new Te,r=new Te,h=new Te,a=new Te,u=new Te,s=new Te;return function(e){return!this.isEmpty()&&(this.getCenter(a),u.subVectors(this.max,a),o.subVectors(e.a,a),l.subVectors(e.b,a),c.subVectors(e.c,a),i.subVectors(l,o),n.subVectors(c,l),r.subVectors(o,c),!!t(e=[0,-i.z,i.y,0,-n.z,n.y,0,-r.z,r.y,i.z,0,-i.x,n.z,0,-n.x,r.z,0,-r.x,-i.y,i.x,0,-n.y,n.x,0,-r.y,r.x,0])&&(!!t(e=[1,0,0,0,1,0,0,0,1])&&(s.crossVectors(i,n),t(e=[s.x,s.y,s.z]))))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Te),t.copy(e).clamp(this.min,this.max)},distanceToPoint:(Ea=new Te,function(e){return Ea.copy(e).clamp(this.min,this.max).sub(e).length()}),getBoundingSphere:(Ta=new Te,function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new s),this.getCenter(e.center),e.radius=.5*this.getSize(Ta).length(),e}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(wa=[new Te,new Te,new Te,new Te,new Te,new Te,new Te,new Te],function(e){return this.isEmpty()||(wa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wa)),this}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(s.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Ca=new n,function(e,t){var i=this.center;void 0!==t?i.copy(t):Ca.setFromPoints(e).getCenter(i);for(var n=t=0,r=e.length;n<r;n++)t=Math.max(t,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Te),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new n),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(v.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:(Ra=new Te,Oa=new Te,function(e,t,i){return t=Ra.subVectors(i,t).cross(Oa.subVectors(e,t)).normalize(),this.setFromNormalAndCoplanarPoint(t,e),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Te),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:(La=new Te,function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Te);var i=e.delta(La),n=this.normal.dot(i);if(0===n){if(0===this.distanceToPoint(e.start))return t.copy(e.start)}else if(!((n=-(e.start.dot(this.normal)+this.constant)/n)<0||1<n))return t.copy(i).multiplyScalar(n).add(e.start)}),intersectsLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),t<0&&0<e||e<0&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Te),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(Aa=new Te,Pa=new g,function(e,t){return t=t||Pa.getNormalMatrix(e),e=this.coplanarPoint(Aa).applyMatrix4(e),t=this.normal.applyMatrix3(t).normalize(),this.constant=-e.dot(t),this}),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Se.prototype,{set:function(e,t,i,n,r,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,i=0;i<6;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements;e=i[0];var n=i[1],r=i[2],a=i[3],s=i[4],o=i[5],l=i[6],c=i[7],h=i[8],u=i[9],d=i[10],p=i[11],f=i[12],m=i[13],g=i[14];return i=i[15],t[0].setComponents(a-e,c-s,p-h,i-f).normalize(),t[1].setComponents(a+e,c+s,p+h,i+f).normalize(),t[2].setComponents(a+n,c+o,p+u,i+m).normalize(),t[3].setComponents(a-n,c-o,p-u,i-m).normalize(),t[4].setComponents(a-r,c-l,p-d,i-g).normalize(),t[5].setComponents(a+r,c+l,p+d,i+g).normalize(),this},intersectsObject:(ka=new s,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),ka.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ka)}),intersectsSprite:(Da=new s,function(e){return Da.center.set(0,0,0),Da.radius=.7071067811865476,Da.applyMatrix4(e.matrixWorld),this.intersectsSphere(Da)}),intersectsSphere:function(e){var t=this.planes,i=e.center;e=-e.radius;for(var n=0;n<6;n++)if(t[n].distanceToPoint(i)<e)return!1;return!0},intersectsBox:(Ia=new Te,function(e){for(var t=this.planes,i=0;i<6;i++){var n=t[i];if(Ia.x=0<n.normal.x?e.max.x:e.min.x,Ia.y=0<n.normal.y?e.max.y:e.min.y,Ia.z=0<n.normal.z?e.max.z:e.min.z,n.distanceToPoint(Ia)<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}});var Ba,Ha,Fa,Ua={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick( specularColor, dotNV );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor;\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Ga={clone:Ce,merge:a},Va={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(p.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(){function n(e,t,i){return i<0&&(i+=1),1<i&&--i,i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}return function(e,t,i){return e=ya.euclideanModulo(e,1),t=ya.clamp(t,0,1),i=ya.clamp(i,0,1),0===t?this.r=this.g=this.b=i:(i=2*i-(t=i<=.5?i*(1+t):i+t-i*t),this.r=n(i,t,e+1/3),this.g=n(i,t,e),this.b=n(i,t,e-1/3)),this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(i[1])/360;var r=parseInt(i[2],10)/100,a=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(n,r,a)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(t)){if(3===(n=(i=i[1]).length))return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return t&&0<t.length&&(void 0!==(i=Va[t])?this.setHex(i):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){return void 0===t&&(t=2),t=0<t?1/t:1,this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function t(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,i=this.r,n=this.g,r=this.b,a=Math.max(i,n,r),s=Math.min(i,n,r),o=(s+a)/2;if(s===a)s=t=0;else{var l=a-s;switch(s=o<=.5?l/(a+s):l/(2-a-s),a){case i:t=(n-r)/l+(n<r?6:0);break;case n:t=(r-i)/l+2;break;case r:t=(i-n)/l+4}t/=6}return e.h=t,e.s=s,e.l=o,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(Fa={},function(e,t,i){return this.getHSL(Fa),Fa.h+=e,Fa.s+=t,Fa.l+=i,this.setHSL(Fa.h,Fa.s,Fa.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:(Ba={h:0,s:0,l:0},Ha={h:0,s:0,l:0},function(e,t){this.getHSL(Ba),e.getHSL(Ha),e=ya.lerp(Ba.h,Ha.h,t);var i=ya.lerp(Ba.s,Ha.s,t);return t=ya.lerp(Ba.l,Ha.l,t),this.setHSL(e,i,t),this}),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var ja,Wa,Xa={common:{diffuse:{value:new p(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new g},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new W(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new p(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new p(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new g}},sprite:{diffuse:{value:new p(15658734)},opacity:{value:1},center:{value:new W(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new g}}},Ya={basic:{uniforms:a([Xa.common,Xa.specularmap,Xa.envmap,Xa.aomap,Xa.lightmap,Xa.fog]),vertexShader:Ua.meshbasic_vert,fragmentShader:Ua.meshbasic_frag},lambert:{uniforms:a([Xa.common,Xa.specularmap,Xa.envmap,Xa.aomap,Xa.lightmap,Xa.emissivemap,Xa.fog,Xa.lights,{emissive:{value:new p(0)}}]),vertexShader:Ua.meshlambert_vert,fragmentShader:Ua.meshlambert_frag},phong:{uniforms:a([Xa.common,Xa.specularmap,Xa.envmap,Xa.aomap,Xa.lightmap,Xa.emissivemap,Xa.bumpmap,Xa.normalmap,Xa.displacementmap,Xa.gradientmap,Xa.fog,Xa.lights,{emissive:{value:new p(0)},specular:{value:new p(1118481)},shininess:{value:30}}]),vertexShader:Ua.meshphong_vert,fragmentShader:Ua.meshphong_frag},standard:{uniforms:a([Xa.common,Xa.envmap,Xa.aomap,Xa.lightmap,Xa.emissivemap,Xa.bumpmap,Xa.normalmap,Xa.displacementmap,Xa.roughnessmap,Xa.metalnessmap,Xa.fog,Xa.lights,{emissive:{value:new p(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ua.meshphysical_vert,fragmentShader:Ua.meshphysical_frag},matcap:{uniforms:a([Xa.common,Xa.bumpmap,Xa.normalmap,Xa.displacementmap,Xa.fog,{matcap:{value:null}}]),vertexShader:Ua.meshmatcap_vert,fragmentShader:Ua.meshmatcap_frag},points:{uniforms:a([Xa.points,Xa.fog]),vertexShader:Ua.points_vert,fragmentShader:Ua.points_frag},dashed:{uniforms:a([Xa.common,Xa.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ua.linedashed_vert,fragmentShader:Ua.linedashed_frag},depth:{uniforms:a([Xa.common,Xa.displacementmap]),vertexShader:Ua.depth_vert,fragmentShader:Ua.depth_frag},normal:{uniforms:a([Xa.common,Xa.bumpmap,Xa.normalmap,Xa.displacementmap,{opacity:{value:1}}]),vertexShader:Ua.normal_vert,fragmentShader:Ua.normal_frag},sprite:{uniforms:a([Xa.sprite,Xa.fog]),vertexShader:Ua.sprite_vert,fragmentShader:Ua.sprite_frag},background:{uniforms:{uvTransform:{value:new g},t2D:{value:null}},vertexShader:Ua.background_vert,fragmentShader:Ua.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ua.cube_vert,fragmentShader:Ua.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ua.equirect_vert,fragmentShader:Ua.equirect_frag},distanceRGBA:{uniforms:a([Xa.common,Xa.displacementmap,{referencePosition:{value:new Te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ua.distanceRGBA_vert,fragmentShader:Ua.distanceRGBA_frag},shadow:{uniforms:a([Xa.lights,Xa.fog,{color:{value:new p(0)},opacity:{value:1}}]),vertexShader:Ua.shadow_vert,fragmentShader:Ua.shadow_frag}};Ya.physical={uniforms:a([Ya.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ua.meshphysical_vert,fragmentShader:Ua.meshphysical_frag},Object.assign(y.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),o.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),o.DefaultOrder="XYZ",Object.defineProperties(o.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(o.prototype,{isEuler:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var n=ya.clamp,r=e.elements;e=r[0];var a=r[4],s=r[8],o=r[1],l=r[5],c=r[9],h=r[2],u=r[6];return r=r[10],"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,r),this._z=Math.atan2(-a,e)):(this._x=Math.atan2(u,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,r),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-h,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(-h,r),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,e))):"ZYX"===t?(this._y=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(u,r),this._z=Math.atan2(o,e)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,e)):(this._x=0,this._y=Math.atan2(s,r))):"XZY"===t?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,e)):(this._x=Math.atan2(-c,r),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:(Wa=new we,function(e,t,i){return Wa.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Wa,t,i)}),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(ja=new T,function(e){return ja.setFromEuler(this),this.setFromQuaternion(ja,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Te(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(l.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var qa,$a,Za,Ja,Ka,Qa,es,ts,is,ns,rs,as,ss,os,ls,cs,hs,us,ds=0;u.DefaultUp=new Te(0,1,0),u.DefaultMatrixAutoUpdate=!0,u.prototype=Object.assign(Object.create(t.prototype),{constructor:u,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(us=new T,function(e,t){return us.setFromAxisAngle(e,t),this.quaternion.multiply(us),this}),rotateOnWorldAxis:(hs=new T,function(e,t){return hs.setFromAxisAngle(e,t),this.quaternion.premultiply(hs),this}),rotateX:(cs=new Te(1,0,0),function(e){return this.rotateOnAxis(cs,e)}),rotateY:(ls=new Te(0,1,0),function(e){return this.rotateOnAxis(ls,e)}),rotateZ:(os=new Te(0,0,1),function(e){return this.rotateOnAxis(os,e)}),translateOnAxis:(ss=new Te,function(e,t){return ss.copy(e).applyQuaternion(this.quaternion),this.position.add(ss.multiplyScalar(t)),this}),translateX:(as=new Te(1,0,0),function(e){return this.translateOnAxis(as,e)}),translateY:(rs=new Te(0,1,0),function(e){return this.translateOnAxis(rs,e)}),translateZ:(ns=new Te(0,0,1),function(e){return this.translateOnAxis(ns,e)}),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(is=new we,function(e){return e.applyMatrix4(is.getInverse(this.matrixWorld))}),lookAt:(Ka=new T,Qa=new we,es=new Te,ts=new Te,function(e,t,i){e.isVector3?es.copy(e):es.set(e,t,i),e=this.parent,this.updateWorldMatrix(!0,!1),ts.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qa.lookAt(ts,es,this.up):Qa.lookAt(es,ts,this.up),this.quaternion.setFromRotationMatrix(Qa),e&&(Qa.extractRotation(e.matrixWorld),Ka.setFromRotationMatrix(Qa),this.quaternion.premultiply(Ka.inverse()))}),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}return-1!==(t=this.children.indexOf(e))&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(t,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Te),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Za=new Te,Ja=new Te,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new T),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Za,e,Ja),e}),getWorldScale:(qa=new Te,$a=new T,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Te),this.updateMatrixWorld(!0),this.matrixWorld.decompose(qa,$a,e),e}),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Te),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=this.children,i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(t=0,i=(e=this.children).length;t<i;t++)e[t].updateWorldMatrix(!1,!0)},toJSON:function(i){function e(e,t){return void 0===e[t.uuid]&&(e[t.uuid]=t.toJSON(i)),t.uuid}function t(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}var n=void 0===i||"string"==typeof i,r={};n&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(a.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){a.geometry=e(i.geometries,this.geometry);var s=this.geometry.parameters;if(void 0!==s&&void 0!==s.shapes)if(s=s.shapes,Array.isArray(s))for(var o=0,l=s.length;o<l;o++)e(i.shapes,s[o]);else e(i.shapes,s)}if(void 0!==this.material)if(Array.isArray(this.material)){for(s=[],o=0,l=this.material.length;o<l;o++)s.push(e(i.materials,this.material[o]));a.material=s}else a.material=e(i.materials,this.material);if(0<this.children.length)for(a.children=[],o=0;o<this.children.length;o++)a.children.push(this.children[o].toJSON(i).object);if(n){n=t(i.geometries),o=t(i.materials),l=t(i.textures);var c=t(i.images);s=t(i.shapes),0<n.length&&(r.geometries=n),0<o.length&&(r.materials=o),0<l.length&&(r.textures=l),0<c.length&&(r.images=c),0<s.length&&(r.shapes=s)}return r.object=a,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(t=0;t<e.children.length;t++)this.add(e.children[t].clone());return this}});var ps,fs,ms,gs,vs,ys,_s,xs=0;f.prototype=Object.assign(Object.create(t.prototype),{constructor:f,isGeometry:!0,applyMatrix:function(e){for(var t=(new g).getNormalMatrix(e),i=0,n=this.vertices.length;i<n;i++)this.vertices[i].applyMatrix4(e);for(i=0,n=this.faces.length;i<n;i++){(e=this.faces[i]).normal.applyMatrix3(t).normalize();for(var r=0,a=e.vertexNormals.length;r<a;r++)e.vertexNormals[r].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:(_s=new we,function(e){return _s.makeRotationX(e),this.applyMatrix(_s),this}),rotateY:(ys=new we,function(e){return ys.makeRotationY(e),this.applyMatrix(ys),this}),rotateZ:(vs=new we,function(e){return vs.makeRotationZ(e),this.applyMatrix(vs),this}),translate:(gs=new we,function(e,t,i){return gs.makeTranslation(e,t,i),this.applyMatrix(gs),this}),scale:(ms=new we,function(e,t,i){return ms.makeScale(e,t,i),this.applyMatrix(ms),this}),lookAt:(fs=new u,function(e){fs.lookAt(e),fs.updateMatrix(),this.applyMatrix(fs.matrix)}),fromBufferGeometry:function(e){function t(e,t,i,n){var r=void 0===o?[]:[a.colors[e].clone(),a.colors[t].clone(),a.colors[i].clone()];n=new y(e,t,i,void 0===s?[]:[(new Te).fromArray(s,3*e),(new Te).fromArray(s,3*t),(new Te).fromArray(s,3*i)],r,n),a.faces.push(n),void 0!==l&&a.faceVertexUvs[0].push([(new W).fromArray(l,2*e),(new W).fromArray(l,2*t),(new W).fromArray(l,2*i)]),void 0!==c&&a.faceVertexUvs[1].push([(new W).fromArray(c,2*e),(new W).fromArray(c,2*t),(new W).fromArray(c,2*i)])}var a=this,i=null!==e.index?e.index.array:void 0,n=e.attributes,r=n.position.array,s=void 0!==n.normal?n.normal.array:void 0,o=void 0!==n.color?n.color.array:void 0,l=void 0!==n.uv?n.uv.array:void 0,c=void 0!==n.uv2?n.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var h=n=0;n<r.length;n+=3,h+=2)a.vertices.push((new Te).fromArray(r,n)),void 0!==o&&a.colors.push((new p).fromArray(o,n));var u=e.groups;if(0<u.length)for(n=0;n<u.length;n++){var d=(r=u[n]).start;for(h=d,d+=r.count;h<d;h+=3)void 0!==i?t(i[h],i[h+1],i[h+2],r.materialIndex):t(h,h+1,h+2,r.materialIndex)}else if(void 0!==i)for(n=0;n<i.length;n+=3)t(i[n],i[n+1],i[n+2]);else for(n=0;n<r.length/3;n+=3)t(n,n+1,n+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(ps=new Te,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(ps).negate(),this.translate(ps.x,ps.y,ps.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius;t=0===t?1:1/t;var i=new we;return i.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new Te,t=new Te,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],a=this.vertices[r.a],s=this.vertices[r.b];e.subVectors(this.vertices[r.c],s),t.subVectors(a,s),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t;void 0===e&&(e=!0);var i=Array(this.vertices.length),n=0;for(t=this.vertices.length;n<t;n++)i[n]=new Te;if(e){var r=new Te,a=new Te;for(e=0,n=this.faces.length;e<n;e++){t=this.faces[e];var s=this.vertices[t.a],o=this.vertices[t.b],l=this.vertices[t.c];r.subVectors(l,o),a.subVectors(s,o),r.cross(a),i[t.a].add(r),i[t.b].add(r),i[t.c].add(r)}}else for(this.computeFaceNormals(),e=0,n=this.faces.length;e<n;e++)i[(t=this.faces[e]).a].add(t.normal),i[t.b].add(t.normal),i[t.c].add(t.normal);for(n=0,t=this.vertices.length;n<t;n++)i[n].normalize();for(e=0,n=this.faces.length;e<n;e++)3===(s=(t=this.faces[e]).vertexNormals).length?(s[0].copy(i[t.a]),s[1].copy(i[t.b]),s[2].copy(i[t.c])):(s[0]=i[t.a].clone(),s[1]=i[t.b].clone(),s[2]=i[t.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var t=0;for(e=this.faces.length;t<e;t++){var i=this.faces[t],n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i=0;for(t=this.faces.length;i<t;i++){var n=this.faces[i];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var r=0;for(e=n.vertexNormals.length;r<e;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var a=new f;for(a.faces=this.faces,r=0,e=this.morphTargets.length;r<e;r++){if(!this.morphNormals[r]){this.morphNormals[r]={},this.morphNormals[r].faceNormals=[],this.morphNormals[r].vertexNormals=[],n=this.morphNormals[r].faceNormals;var s=this.morphNormals[r].vertexNormals;for(i=0,t=this.faces.length;i<t;i++){var o=new Te,l={a:new Te,b:new Te,c:new Te};n.push(o),s.push(l)}}for(s=this.morphNormals[r],a.vertices=this.morphTargets[r].vertices,a.computeFaceNormals(),a.computeVertexNormals(),i=0,t=this.faces.length;i<t;i++)n=this.faces[i],o=s.faceNormals[i],l=s.vertexNormals[i],o.copy(n.normal),l.a.copy(n.vertexNormals[0]),l.b.copy(n.vertexNormals[1]),l.c.copy(n.vertexNormals[2])}for(i=0,t=this.faces.length;i<t;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new n),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new s),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e&&e.isGeometry){var n,r=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,c=this.faceVertexUvs[0],h=e.faceVertexUvs[0],u=this.colors,d=e.colors;void 0===i&&(i=0),void 0!==t&&(n=(new g).getNormalMatrix(t)),e=0;for(var p=s.length;e<p;e++){var f=s[e].clone();void 0!==t&&f.applyMatrix4(t),a.push(f)}for(e=0,p=d.length;e<p;e++)u.push(d[e].clone());for(e=0,p=l.length;e<p;e++){var m=(s=l[e]).vertexNormals;for(d=s.vertexColors,(u=new y(s.a+r,s.b+r,s.c+r)).normal.copy(s.normal),void 0!==n&&u.normal.applyMatrix3(n).normalize(),t=0,a=m.length;t<a;t++)f=m[t].clone(),void 0!==n&&f.applyMatrix3(n).normalize(),u.vertexNormals.push(f);for(u.color.copy(s.color),t=0,a=d.length;t<a;t++)f=d[t],u.vertexColors.push(f.clone());u.materialIndex=s.materialIndex+i,o.push(u)}for(e=0,p=h.length;e<p;e++)if(n=[],void 0!==(i=h[e])){for(t=0,a=i.length;t<a;t++)n.push(i[t].clone());c.push(n)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t={},i=[],n=[],r=Math.pow(10,4),a=0;for(e=this.vertices.length;a<e;a++){var s=this.vertices[a];void 0===t[s=Math.round(s.x*r)+"_"+Math.round(s.y*r)+"_"+Math.round(s.z*r)]?(t[s]=a,i.push(this.vertices[a]),n[a]=i.length-1):n[a]=n[t[s]]}for(t=[],a=0,e=this.faces.length;a<e;a++)for((r=this.faces[a]).a=n[r.a],r.b=n[r.b],r.c=n[r.c],r=[r.a,r.b,r.c],s=0;s<3;s++)if(r[s]===r[(s+1)%3]){t.push(a);break}for(a=t.length-1;0<=a;a--)for(r=t[a],this.faces.splice(r,1),n=0,e=this.faceVertexUvs.length;n<e;n++)this.faceVertexUvs[n].splice(r,1);return a=this.vertices.length-i.length,this.vertices=i,a},setFromPoints:function(e){this.vertices=[];for(var t=0,i=e.length;t<i;t++){var n=e[t];this.vertices.push(new Te(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,i=0;i<t;i++)e[i]._id=i;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var n,r,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];for(a&&a.length===t&&(n=[]),s&&s.length===t&&(r=[]),i=0;i<t;i++){var o=e[i]._id;n&&n.push(a[o]),r&&r.push(s[o])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function e(e,t,i){return i?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]||(c[t]=l.length/3,l.push(e.x,e.y,e.z)),c[t]}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]||(u[t]=h.length,h.push(e.getHex())),u[t]}function n(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]||(p[t]=d.length/2,d.push(e.x,e.y)),p[t]}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a,s=this.parameters;for(a in s)void 0!==s[a]&&(r[a]=s[a]);return r}for(s=[],a=0;a<this.vertices.length;a++){var o=this.vertices[a];s.push(o.x,o.y,o.z)}o=[];var l=[],c={},h=[],u={},d=[],p={};for(a=0;a<this.faces.length;a++){var f=this.faces[a],m=void 0!==this.faceVertexUvs[0][a],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,_=0<f.vertexColors.length,x=0;x=e(x=e(x=e(x=e(x=e(x=e(x=e(x=e(x,0,0),1,!0),2,!1),3,m),4,g),5,v),6,y),7,_),o.push(x),o.push(f.a,f.b,f.c),o.push(f.materialIndex),m&&(m=this.faceVertexUvs[0][a],o.push(n(m[0]),n(m[1]),n(m[2]))),g&&o.push(t(f.normal)),v&&(g=f.vertexNormals,o.push(t(g[0]),t(g[1]),t(g[2]))),y&&o.push(i(f.color)),_&&(f=f.vertexColors,o.push(i(f[0]),i(f[1]),i(f[2])))}return r.data={},r.data.vertices=s,r.data.normals=l,0<h.length&&(r.data.colors=h),0<d.length&&(r.data.uvs=[d]),r.data.faces=o,r},clone:function(){return(new f).copy(this)},copy:function(e){var t,i,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var r=e.vertices,a=0;for(t=r.length;a<t;a++)this.vertices.push(r[a].clone());for(a=0,t=(r=e.colors).length;a<t;a++)this.colors.push(r[a].clone());for(a=0,t=(r=e.faces).length;a<t;a++)this.faces.push(r[a].clone());for(a=0,t=e.faceVertexUvs.length;a<t;a++){var s=e.faceVertexUvs[a];for(void 0===this.faceVertexUvs[a]&&(this.faceVertexUvs[a]=[]),r=0,i=s.length;r<i;r++){var o=s[r],l=[],c=0;for(n=o.length;c<n;c++)l.push(o[c].clone());this.faceVertexUvs[a].push(l)}}for(a=0,t=(c=e.morphTargets).length;a<t;a++){if((n={}).name=c[a].name,void 0!==c[a].vertices)for(n.vertices=[],r=0,i=c[a].vertices.length;r<i;r++)n.vertices.push(c[a].vertices[r].clone());if(void 0!==c[a].normals)for(n.normals=[],r=0,i=c[a].normals.length;r<i;r++)n.normals.push(c[a].normals[r].clone());this.morphTargets.push(n)}for(a=0,t=(c=e.morphNormals).length;a<t;a++){if(n={},void 0!==c[a].vertexNormals)for(n.vertexNormals=[],r=0,i=c[a].vertexNormals.length;r<i;r++)s=c[a].vertexNormals[r],(o={}).a=s.a.clone(),o.b=s.b.clone(),o.c=s.c.clone(),n.vertexNormals.push(o);if(void 0!==c[a].faceNormals)for(n.faceNormals=[],r=0,i=c[a].faceNormals.length;r<i;r++)n.faceNormals.push(c[a].faceNormals[r].clone());this.morphNormals.push(n)}for(a=0,t=(r=e.skinWeights).length;a<t;a++)this.skinWeights.push(r[a].clone());for(a=0,t=(r=e.skinIndices).length;a<t;a++)this.skinIndices.push(r[a].clone());for(a=0,t=(r=e.lineDistances).length;a<t;a++)this.lineDistances.push(r[a]);return null!==(a=e.boundingBox)&&(this.boundingBox=a.clone()),null!==(a=e.boundingSphere)&&(this.boundingSphere=a.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(m.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(m.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new p),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),a=new W),t[i++]=a.x,t[i++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),a=new Te),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;n<r;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),a=new Ee),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(c.prototype=Object.create(m.prototype)).constructor=c,(h.prototype=Object.create(m.prototype)).constructor=h,(_.prototype=Object.create(m.prototype)).constructor=_,(x.prototype=Object.create(m.prototype)).constructor=x,(b.prototype=Object.create(m.prototype)).constructor=b,(w.prototype=Object.create(m.prototype)).constructor=w,(E.prototype=Object.create(m.prototype)).constructor=E,(P.prototype=Object.create(m.prototype)).constructor=P,(M.prototype=Object.create(m.prototype)).constructor=M,Object.assign(S.prototype,{computeGroups:function(e){var t=[],i=void 0;e=e.faces;for(var n=0;n<e.length;n++){var r=e[n];if(r.materialIndex!==i){i=r.materialIndex,void 0!==a&&(a.count=3*n-a.start,t.push(a));var a={start:3*n,materialIndex:i}}}void 0!==a&&(a.count=3*n-a.start,t.push(a)),this.groups=t},fromGeometry:function(e){var t=e.faces,i=e.vertices,n=e.faceVertexUvs,r=n[0]&&0<n[0].length,a=n[1]&&0<n[1].length,s=e.morphTargets,o=s.length;if(0<o){for(var l=[],c=0;c<o;c++)l[c]={name:s[c].name,data:[]};this.morphTargets.position=l}var h=e.morphNormals,u=h.length;if(0<u){var d=[];for(c=0;c<u;c++)d[c]={name:h[c].name,data:[]};this.morphTargets.normal=d}var p=e.skinIndices,f=e.skinWeights,m=p.length===i.length,g=f.length===i.length;for(0<i.length&&0===t.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),c=0;c<t.length;c++){var v=t[c];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;for(3===y.length?this.normals.push(y[0],y[1],y[2]):(y=v.normal,this.normals.push(y,y,y)),3===(y=v.vertexColors).length?this.colors.push(y[0],y[1],y[2]):(y=v.color,this.colors.push(y,y,y)),!0===r&&(void 0!==(y=n[0][c])?this.uvs.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new W,new W,new W))),!0===a&&(void 0!==(y=n[1][c])?this.uvs2.push(y[0],y[1],y[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new W,new W,new W))),y=0;y<o;y++){var _=s[y].vertices;l[y].data.push(_[v.a],_[v.b],_[v.c])}for(y=0;y<u;y++)_=h[y].vertexNormals[c],d[y].data.push(_.a,_.b,_.c);m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var bs,ws,Ts,Es,Ms,Ss,Cs,As,Ps,Ls,Rs=1;L.prototype=Object.assign(Object.create(t.prototype),{constructor:L,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<A(e)?E:b)(e,1):this.index=e},addAttribute:function(e,t,i){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?("index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t)):this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new m(t,i)))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;return void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0),void 0!==(t=this.attributes.normal)&&((new g).getNormalMatrix(e).applyToBufferAttribute(t),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:(Ls=new we,function(e){return Ls.makeRotationX(e),this.applyMatrix(Ls),this}),rotateY:(Ps=new we,function(e){return Ps.makeRotationY(e),this.applyMatrix(Ps),this}),rotateZ:(As=new we,function(e){return As.makeRotationZ(e),this.applyMatrix(As),this}),translate:(Cs=new we,function(e,t,i){return Cs.makeTranslation(e,t,i),this.applyMatrix(Cs),this}),scale:(Ss=new we,function(e,t,i){return Ss.makeScale(e,t,i),this.applyMatrix(Ss),this}),lookAt:(Ms=new u,function(e){Ms.lookAt(e),Ms.updateMatrix(),this.applyMatrix(Ms.matrix)}),center:(Es=new Te,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Es).negate(),this.translate(Es.x,Es.y,Es.z),this}),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){e=new P(3*t.vertices.length,3);var i=new P(3*t.colors.length,3);this.addAttribute("position",e.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new P(t.lineDistances.length,1),this.addAttribute("lineDistance",e.copyArray(t.lineDistances))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new P(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var i=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(i=void 0,t.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(t);i.verticesNeedUpdate=t.verticesNeedUpdate,i.normalsNeedUpdate=t.normalsNeedUpdate,i.colorsNeedUpdate=t.colorsNeedUpdate,i.uvsNeedUpdate=t.uvsNeedUpdate,i.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=i}return!0===t.verticesNeedUpdate&&(void 0!==(i=this.attributes.position)&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(void 0!==(i=this.attributes.normal)&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(void 0!==(i=this.attributes.color)&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(void 0!==(i=this.attributes.uv)&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(void 0!==(i=this.attributes.lineDistance)&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new S).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);for(var i in this.addAttribute("position",new m(t,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.addAttribute("normal",new m(t,3).copyVector3sArray(e.normals))),0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.addAttribute("color",new m(t,3).copyColorsArray(e.colors))),0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.addAttribute("uv",new m(t,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.addAttribute("uv2",new m(t,2).copyVector2sArray(e.uvs2))),this.groups=e.groups,e.morphTargets){t=[];for(var n=e.morphTargets[i],r=0,a=n.length;r<a;r++){var s=n[r],o=new P(3*s.data.length,3);o.name=s.name,t.push(o.copyVector3sArray(s.data))}this.morphAttributes[i]=t}return 0<e.skinIndices.length&&(i=new P(4*e.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(i=new P(4*e.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(e.skinWeights))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new n);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:(ws=new n,Ts=new Te,function(){null===this.boundingSphere&&(this.boundingSphere=new s);var e=this.attributes.position;if(e){var t=this.boundingSphere.center;ws.setFromBufferAttribute(e),ws.getCenter(t);for(var i=0,n=0,r=e.count;n<r;n++)Ts.x=e.getX(n),Ts.y=e.getY(n),Ts.z=e.getZ(n),i=Math.max(i,t.distanceToSquared(Ts));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new m(new Float32Array(i.length),3));else for(var n=t.normal.array,r=0,a=n.length;r<a;r++)n[r]=0;n=t.normal.array;var s=new Te,o=new Te,l=new Te,c=new Te,h=new Te;if(e){var u=e.array;for(r=0,a=e.count;r<a;r+=3){e=3*u[r+0];var d=3*u[r+1],p=3*u[r+2];s.fromArray(i,e),o.fromArray(i,d),l.fromArray(i,p),c.subVectors(l,o),h.subVectors(s,o),c.cross(h),n[e]+=c.x,n[e+1]+=c.y,n[e+2]+=c.z,n[d]+=c.x,n[d+1]+=c.y,n[d+2]+=c.z,n[p]+=c.x,n[p+1]+=c.y,n[p+2]+=c.z}}else for(r=0,a=i.length;r<a;r+=9)s.fromArray(i,r),o.fromArray(i,r+3),l.fromArray(i,r+6),c.subVectors(l,o),h.subVectors(s,o),c.cross(h),n[r]=c.x,n[r+1]=c.y,n[r+2]=c.z,n[r+3]=c.x,n[r+4]=c.y,n[r+5]=c.z,n[r+6]=c.x,n[r+7]=c.y,n[r+8]=c.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i,n=this.attributes;for(i in n)if(void 0!==e.attributes[i]){var r=n[i].array,a=e.attributes[i],s=a.array,o=0;for(a=a.itemSize*t;o<s.length;o++,a++)r[a]=s[o]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:(bs=new Te,function(){for(var e=this.attributes.normal,t=0,i=e.count;t<i;t++)bs.x=e.getX(t),bs.y=e.getY(t),bs.z=e.getZ(t),bs.normalize(),e.setXYZ(t,bs.x,bs.y,bs.z)}),toNonIndexed:function(){function e(e,t){var i=e.array;e=e.itemSize;for(var n,r=new i.constructor(t.length*e),a=0,s=0,o=t.length;s<o;s++){n=t[s]*e;for(var l=0;l<e;l++)r[a++]=i[n++]}return new m(r,e)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t,i=new L,n=this.index.array,r=this.attributes;for(t in r){var a=r[t];a=e(a,n),i.addAttribute(t,a)}var s=this.morphAttributes;for(t in s){var o=[],l=s[t];r=0;for(var c=l.length;r<c;r++)a=e(a=l[r],n),o.push(a);i.morphAttributes[t]=o}for(r=0,t=(n=this.groups).length;r<t;r++)a=n[r],i.addGroup(a.start,a.count,a.materialIndex);return i},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),0<Object.keys(this.userData).length&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var i=this.index;for(r in null!==i&&(t=Array.prototype.slice.call(i.array),e.data.index={type:i.array.constructor.name,array:t}),i=this.attributes){var n=i[r];t=Array.prototype.slice.call(n.array),e.data.attributes[r]={itemSize:n.itemSize,type:n.array.constructor.name,array:t,normalized:n.normalized}}var r=this.groups;return 0<r.length&&(e.data.groups=JSON.parse(JSON.stringify(r))),null!==(r=this.boundingSphere)&&(e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),e},clone:function(){return(new L).copy(this)},copy:function(e){var t;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var i=e.index;for(s in null!==i&&this.setIndex(i.clone()),i=e.attributes)this.addAttribute(s,i[s].clone());var n=e.morphAttributes;for(s in n){var r=[],a=n[s];for(i=0,t=a.length;i<t;i++)r.push(a[i].clone());this.morphAttributes[s]=r}var s=e.groups;for(i=0,t=s.length;i<t;i++)n=s[i],this.addGroup(n.start,n.count,n.materialIndex);return null!==(s=e.boundingBox)&&(this.boundingBox=s.clone()),null!==(s=e.boundingSphere)&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(R.prototype=Object.create(f.prototype)).constructor=R,(O.prototype=Object.create(L.prototype)).constructor=O,(I.prototype=Object.create(f.prototype)).constructor=I,(D.prototype=Object.create(L.prototype)).constructor=D;var Os,Is,Ds,ks,Ns,zs,Bs,Hs,Fs,Us,Gs,Vs,js,Ws,Xs,Ys,qs,$s,Zs,Js,Ks,Qs,eo,to,io,no=0;k.prototype=Object.assign(Object.create(t.prototype),{constructor:k,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0===i)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"===t)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else{var n=this[t];void 0===n?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i}}},toJSON:function(e){function t(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}var i=void 0===e||"string"==typeof e;i&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),i&&(i=t(e.textures),e=t(e.images),0<i.length&&(n.textures=i),0<e.length&&(n.images=e)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(null!==t){var n=t.length;i=Array(n);for(var r=0;r!==n;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),((N.prototype=Object.create(k.prototype)).constructor=N).prototype.isShaderMaterial=!0,N.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ce(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},N.prototype.toJSON=function(e){var t=k.prototype.toJSON.call(this,e);for(var i in t.uniforms={},this.uniforms){var n=this.uniforms[i].value;t.uniforms[i]=n&&n.isTexture?{type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?{type:"c",value:n.getHex()}:n&&n.isVector2?{type:"v2",value:n.toArray()}:n&&n.isVector3?{type:"v3",value:n.toArray()}:n&&n.isVector4?{type:"v4",value:n.toArray()}:n&&n.isMatrix3?{type:"m3",value:n.toArray()}:n&&n.isMatrix4?{type:"m4",value:n.toArray()}:{value:n}}for(var r in 0<Object.keys(this.defines).length&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,e={},this.extensions)!0===this.extensions[r]&&(e[r]=!0);return 0<Object.keys(e).length&&(t.extensions=e),t},Object.assign(z.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Te),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:(Gs=new Te,function(e){return this.origin.copy(this.at(e,Gs)),this}),closestPointToPoint:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Te),t.subVectors(e,this.origin),(e=t.dot(this.direction))<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:(Us=new Te,function(e){var t=Us.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Us.copy(this.direction).multiplyScalar(t).add(this.origin),Us.distanceToSquared(e))}),distanceSqToSegment:(Bs=new Te,Hs=new Te,Fs=new Te,function(e,t,i,n){Bs.copy(e).add(t).multiplyScalar(.5),Hs.copy(t).sub(e).normalize(),Fs.copy(this.origin).sub(Bs);var r=.5*e.distanceTo(t),a=-this.direction.dot(Hs),s=Fs.dot(this.direction),o=-Fs.dot(Hs),l=Fs.lengthSq(),c=Math.abs(1-a*a);if(0<c){t=a*s-o;var h=r*c;a=0<=(e=a*o-s)?-h<=t?t<=h?(e*=r=1/c)*(e+a*(t*=r)+2*s)+t*(a*e+t+2*o)+l:(t=r,-(e=Math.max(0,-(a*t+s)))*e+t*(t+2*o)+l):(t=-r,-(e=Math.max(0,-(a*t+s)))*e+t*(t+2*o)+l):t<=-h?-(e=Math.max(0,-(-a*r+s)))*e+(t=0<e?-r:Math.min(Math.max(-r,-o),r))*(t+2*o)+l:t<=h?(e=0,(t=Math.min(Math.max(-r,-o),r))*(t+2*o)+l):-(e=Math.max(0,-(a*r+s)))*e+(t=0<e?r:Math.min(Math.max(-r,-o),r))*(t+2*o)+l}else t=0<a?-r:r,a=-(e=Math.max(0,-(a*t+s)))*e+t*(t+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(e).add(this.origin),n&&n.copy(Hs).multiplyScalar(t).add(Bs),a}),intersectSphere:(zs=new Te,function(e,t){zs.subVectors(e.center,this.origin);var i=zs.dot(this.direction),n=zs.dot(zs)-i*i;return(e=e.radius*e.radius)<n?null:(n=i-(e=Math.sqrt(e-n)),i+=e,n<0&&i<0?null:n<0?this.at(i,t):this.at(n,t))}),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:0<=(e=-(this.origin.dot(e.normal)+e.constant)/t)?e:null},intersectPlane:function(e,t){return null===(e=this.distanceToPlane(e))?null:this.at(e,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var i=1/this.direction.x,n=1/this.direction.y,r=1/this.direction.z,a=this.origin;if(0<=i){var s=(e.min.x-a.x)*i;i*=e.max.x-a.x}else s=(e.max.x-a.x)*i,i*=e.min.x-a.x;if(0<=n){var o=(e.min.y-a.y)*n;n*=e.max.y-a.y}else o=(e.max.y-a.y)*n,n*=e.min.y-a.y;return n<s||i<o?null:((s<o||s!=s)&&(s=o),(n<i||i!=i)&&(i=n),(e=0<=r?(o=(e.min.z-a.z)*r,(e.max.z-a.z)*r):(o=(e.max.z-a.z)*r,(e.min.z-a.z)*r))<s||i<o?null:((s<o||s!=s)&&(s=o),(e<i||i!=i)&&(i=e),i<0?null:this.at(0<=s?s:i,t)))},intersectsBox:(Ns=new Te,function(e){return null!==this.intersectBox(e,Ns)}),intersectTriangle:(Os=new Te,Is=new Te,Ds=new Te,ks=new Te,function(e,t,i,n,r){if(Is.subVectors(t,e),Ds.subVectors(i,e),ks.crossVectors(Is,Ds),0<(t=this.direction.dot(ks))){if(n)return null;n=1}else{if(!(t<0))return null;n=-1,t=-t}return Os.subVectors(this.origin,e),(e=n*this.direction.dot(Ds.crossVectors(Os,Ds)))<0?null:(i=n*this.direction.dot(Is.cross(Os)))<0||t<e+i?null:(e=-n*Os.dot(ks))<0?null:this.at(e/t,r)}),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(B,{getNormal:(qs=new Te,function(e,t,i,n){return void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new Te),n.subVectors(i,t),qs.subVectors(e,t),n.cross(qs),0<(e=n.lengthSq())?n.multiplyScalar(1/Math.sqrt(e)):n.set(0,0,0)}),getBarycoord:(Ws=new Te,Xs=new Te,Ys=new Te,function(e,t,i,n,r){Ws.subVectors(n,t),Xs.subVectors(i,t),Ys.subVectors(e,t),e=Ws.dot(Ws),t=Ws.dot(Xs),i=Ws.dot(Ys);var a=Xs.dot(Xs);n=Xs.dot(Ys);var s=e*a-t*t;return void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Te),0===s?r.set(-2,-1,-1):(a=(a*i-t*n)*(s=1/s),e=(e*n-t*i)*s,r.set(1-a-e,e,a))}),containsPoint:(js=new Te,function(e,t,i,n){return B.getBarycoord(e,t,i,n,js),0<=js.x&&0<=js.y&&js.x+js.y<=1}),getUV:(Vs=new Te,function(e,t,i,n,r,a,s,o){return this.getBarycoord(e,t,i,n,Vs),o.set(0,0),o.addScaledVector(r,Vs.x),o.addScaledVector(a,Vs.y),o.addScaledVector(s,Vs.z),o})}),Object.assign(B.prototype,{set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:(to=new Te,io=new Te,function(){return to.subVectors(this.c,this.b),io.subVectors(this.a,this.b),.5*to.cross(io).length()}),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Te),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return B.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Te),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return B.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return B.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,i,n,r){return B.getUV(e,this.a,this.b,this.c,t,i,n,r)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:($s=new Te,Zs=new Te,Js=new Te,Ks=new Te,Qs=new Te,eo=new Te,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Te);var i=this.a,n=this.b,r=this.c;$s.subVectors(n,i),Zs.subVectors(r,i),Ks.subVectors(e,i);var a=$s.dot(Ks),s=Zs.dot(Ks);if(a<=0&&s<=0)return t.copy(i);Qs.subVectors(e,n);var o=$s.dot(Qs),l=Zs.dot(Qs);if(0<=o&&l<=o)return t.copy(n);var c=a*l-o*s;if(c<=0&&0<=a&&o<=0)return n=a/(a-o),t.copy(i).addScaledVector($s,n);eo.subVectors(e,r),e=$s.dot(eo);var h=Zs.dot(eo);return 0<=h&&e<=h?t.copy(r):(a=e*s-a*h)<=0&&0<=s&&h<=0?(c=s/(s-h),t.copy(i).addScaledVector(Zs,c)):(s=o*h-e*l)<=0&&0<=l-o&&0<=e-h?(Js.subVectors(r,n),c=(l-o)/(l-o+(e-h)),t.copy(n).addScaledVector(Js,c)):(n=a*(r=1/(s+a+c)),c*=r,t.copy(i).addScaledVector($s,n).addScaledVector(Zs,c))}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),((H.prototype=Object.create(k.prototype)).constructor=H).prototype.isMeshBasicMaterial=!0,H.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},F.prototype=Object.assign(Object.create(u.prototype),{constructor:F,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return u.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var i=e[t[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=i.length;e<t;e++){var n=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}else void 0!==(e=e.morphTargets)&&0<e.length&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},raycast:function(){function b(e,t,i,n,r,a,s,o){return null===(1===t.side?n.intersectTriangle(s,a,r,!0,o):n.intersectTriangle(r,a,s,2!==t.side,o))?null:(l.copy(o),l.applyMatrix4(e.matrixWorld),(t=i.ray.origin.distanceTo(l))<i.near||t>i.far?null:{distance:t,point:l.clone(),object:e})}function w(e,t,i,n,r,a,s,o,l){return S.fromBufferAttribute(r,s),C.fromBufferAttribute(r,o),A.fromBufferAttribute(r,l),(e=b(e,t,i,n,S,C,A,k))&&(a&&(O.fromBufferAttribute(a,s),I.fromBufferAttribute(a,o),D.fromBufferAttribute(a,l),e.uv=B.getUV(k,S,C,A,O,I,D,new W)),a=new y(s,o,l),B.getNormal(S,C,A,a.normal),e.face=a),e}var T=new we,E=new z,M=new s,S=new Te,C=new Te,A=new Te,P=new Te,L=new Te,R=new Te,O=new W,I=new W,D=new W,k=new Te,l=new Te;return function(e,t){var i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0!==n&&(null===i.boundingSphere&&i.computeBoundingSphere(),M.copy(i.boundingSphere),M.applyMatrix4(r),!1!==e.ray.intersectsSphere(M)&&(T.getInverse(r),E.copy(e.ray).applyMatrix4(T),null===i.boundingBox||!1!==E.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var a,s,o=i.index,l=i.attributes.position,c=i.attributes.uv,h=i.groups;if(i=i.drawRange,null!==o)if(Array.isArray(n)){var u=0;for(a=h.length;u<a;u++){var d=h[u],p=n[d.materialIndex],f=Math.max(d.start,i.start);for(s=r=Math.min(d.start+d.count,i.start+i.count);f<s;f+=3){r=o.getX(f);var m=o.getX(f+1),g=o.getX(f+2);(r=w(this,p,e,E,l,c,r,m,g))&&(r.faceIndex=Math.floor(f/3),r.face.materialIndex=d.materialIndex,t.push(r))}}}else for(u=f=Math.max(0,i.start),a=r=Math.min(o.count,i.start+i.count);u<a;u+=3)r=o.getX(u),m=o.getX(u+1),g=o.getX(u+2),(r=w(this,n,e,E,l,c,r,m,g))&&(r.faceIndex=Math.floor(u/3),t.push(r));else if(void 0!==l)if(Array.isArray(n))for(u=0,a=h.length;u<a;u++)for(p=n[(d=h[u]).materialIndex],f=Math.max(d.start,i.start),s=r=Math.min(d.start+d.count,i.start+i.count);f<s;f+=3)(r=w(this,p,e,E,l,c,r=f,m=f+1,g=f+2))&&(r.faceIndex=Math.floor(f/3),r.face.materialIndex=d.materialIndex,t.push(r));else for(u=f=Math.max(0,i.start),a=r=Math.min(l.count,i.start+i.count);u<a;u+=3)(r=w(this,n,e,E,l,c,r=u,m=u+1,g=u+2))&&(r.faceIndex=Math.floor(u/3),t.push(r))}else if(i.isGeometry)for(l=Array.isArray(n),c=i.vertices,h=i.faces,0<(r=i.faceVertexUvs[0]).length&&(o=r),p=0,f=h.length;p<f;p++)if(s=h[p],void 0!==(r=l?n[s.materialIndex]:n)){if(u=c[s.a],a=c[s.b],d=c[s.c],!0===r.morphTargets){m=i.morphTargets,g=this.morphTargetInfluences,S.set(0,0,0),C.set(0,0,0),A.set(0,0,0);for(var v=0,y=m.length;v<y;v++){var _=g[v];if(0!==_){var x=m[v].vertices;S.addScaledVector(P.subVectors(x[s.a],u),_),C.addScaledVector(L.subVectors(x[s.b],a),_),A.addScaledVector(R.subVectors(x[s.c],d),_)}}S.add(u),C.add(a),A.add(d),u=S,a=C,d=A}(r=b(this,r,e,E,u,a,d,k))&&(o&&o[p]&&(m=o[p],O.copy(m[0]),I.copy(m[1]),D.copy(m[2]),r.uv=B.getUV(k,u,a,d,O,I,D,new W)),r.face=s,r.faceIndex=p,t.push(r))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),((G.prototype=Object.create(d.prototype)).constructor=G).prototype.isCubeTexture=!0,Object.defineProperty(G.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),((V.prototype=Object.create(d.prototype)).constructor=V).prototype.isDataTexture3D=!0;var ro=new d,ao=new V,so=new G,oo=[],lo=[],co=new Float32Array(16),ho=new Float32Array(9),uo=new Float32Array(4);xe.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Y(t,e)},be.prototype.setValue=function(e,t,i){for(var n=this.seq,r=0,a=n.length;r!==a;++r){var s=n[r];s.setValue(e,t[s.id],i)}};var po=/([\w\d_]+)(\])?(\[|\.)?/g;Fe.prototype.setValue=function(e,t,i){void 0!==(t=this.map[t])&&t.setValue(e,i,this.renderer)},Fe.prototype.setOptional=function(e,t,i){void 0!==(t=t[i])&&this.setValue(e,i,t)},Fe.upload=function(e,t,i,n){for(var r=0,a=t.length;r!==a;++r){var s=t[r],o=i[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,n)}},Fe.seqWithValue=function(e,t){for(var i=[],n=0,r=e.length;n!==r;++n){var a=e[n];a.id in t&&i.push(a)}return i};var fo=0,mo=0;((st.prototype=Object.create(k.prototype)).constructor=st).prototype.isMeshDepthMaterial=!0,st.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},((ot.prototype=Object.create(k.prototype)).constructor=ot).prototype.isMeshDistanceMaterial=!0,ot.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},dt.prototype=Object.assign(Object.create(u.prototype),{constructor:dt,isGroup:!0}),pt.prototype=Object.assign(Object.create(u.prototype),{constructor:pt,isCamera:!0,copy:function(e,t){return u.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Te),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){u.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ft.prototype=Object.assign(Object.create(pt.prototype),{constructor:ft,isPerspectiveCamera:!0,copy:function(e,t){return pt.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*ya.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*ya.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*ya.RAD2DEG*Math.atan(Math.tan(.5*ya.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,n,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*ya.DEG2RAD*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==this.view&&this.view.enabled){var s=a.fullWidth,o=a.fullHeight;r+=a.offsetX*n/s,t-=a.offsetY*i/o,n*=a.width/s,i*=a.height/o}0!==(a=this.filmOffset)&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return(e=u.prototype.toJSON.call(this,e)).object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),mt.prototype=Object.assign(Object.create(ft.prototype),{constructor:mt,isArrayCamera:!0});var go,vo,yo,_o,xo,bo,wo,To,Eo,Mo,So,Co,Ao,Po,Lo,Ro,Oo=new Te,Io=new Te;xt.prototype.isFogExp2=!0,xt.prototype.clone=function(){return new xt(this.color,this.density)},xt.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},bt.prototype.isFog=!0,bt.prototype.clone=function(){return new bt(this.color,this.near,this.far)},bt.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},wt.prototype=Object.assign(Object.create(u.prototype),{constructor:wt,isScene:!0,copy:function(e,t){return u.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=u.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Tt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Tt.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(var n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(Et.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Et.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}}),((Mt.prototype=Object.create(k.prototype)).constructor=Mt).prototype.isSpriteMaterial=!0,Mt.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},St.prototype=Object.assign(Object.create(u.prototype),{constructor:St,isSprite:!0,raycast:function(){function s(e,t,i,n,r,a){h.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(u.x=a*h.x-r*h.y,u.y=r*h.x+a*h.y):u.copy(h),e.copy(t),e.x+=u.x,e.y+=u.y,e.applyMatrix4(d)}var o=new Te,l=new Te,c=new Te,h=new W,u=new W,d=new we,p=new Te,f=new Te,m=new Te,g=new W,v=new W,y=new W;return function(e,t){l.setFromMatrixScale(this.matrixWorld),d.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),c.setFromMatrixPosition(this.modelViewMatrix);var i=this.material.rotation;if(0!==i)var n=Math.cos(i),r=Math.sin(i);i=this.center,s(p.set(-.5,-.5,0),c,i,l,r,n),s(f.set(.5,-.5,0),c,i,l,r,n),s(m.set(.5,.5,0),c,i,l,r,n),g.set(0,0),v.set(1,0),y.set(1,1);var a=e.ray.intersectTriangle(p,f,m,!1,o);null===a&&(s(f.set(-.5,.5,0),c,i,l,r,n),v.set(0,1),null===(a=e.ray.intersectTriangle(p,m,f,!1,o)))||(r=e.ray.origin.distanceTo(o))<e.near||r>e.far||t.push({distance:r,point:o.clone(),uv:B.getUV(o,p,f,m,g,v,y,new W),face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return u.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Ct.prototype=Object.assign(Object.create(u.prototype),{constructor:Ct,copy:function(e){u.prototype.copy.call(this,e,!1);for(var t=0,i=(e=e.levels).length;t<i;t++){var n=e[t];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=this.levels,n=0;n<i.length&&!(t<i[n].distance);n++);i.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,i=1,n=t.length;i<n&&!(e<t[i].distance);i++);return t[i-1].object},raycast:(_o=new Te,function(e,t){_o.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(_o);this.getObjectForDistance(i).raycast(e,t)}),update:(vo=new Te,yo=new Te,function(e){var t=this.levels;if(1<t.length){vo.setFromMatrixPosition(e.matrixWorld),yo.setFromMatrixPosition(this.matrixWorld),e=vo.distanceTo(yo),t[0].object.visible=!0;for(var i=1,n=t.length;i<n&&e>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(;i<n;i++)t[i].object.visible=!1}}),toJSON:function(e){(e=u.prototype.toJSON.call(this,e)).object.levels=[];for(var t=this.levels,i=0,n=t.length;i<n;i++){var r=t[i];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}}),At.prototype=Object.assign(Object.create(F.prototype),{constructor:At,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Ee,t=this.geometry.attributes.skinWeight,i=0,n=t.count;i<n;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);var r=1/e.manhattanLength();1/0!==r?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){F.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(Pt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new we;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},pose:function(){var e,t,i=0;for(t=this.bones.length;i<t;i++)(e=this.bones[i])&&e.matrixWorld.getInverse(this.boneInverses[i]);for(i=0,t=this.bones.length;i<t;i++)(e=this.bones[i])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(xo=new we,bo=new we,function(){for(var e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture,r=0,a=e.length;r<a;r++)xo.multiplyMatrices(e[r]?e[r].matrixWorld:bo,t[r]),xo.toArray(i,16*r);void 0!==n&&(n.needsUpdate=!0)}),clone:function(){return new Pt(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,i=this.bones.length;t<i;t++){var n=this.bones[t];if(n.name===e)return n}}}),Lt.prototype=Object.assign(Object.create(u.prototype),{constructor:Lt,isBone:!0}),((Rt.prototype=Object.create(k.prototype)).constructor=Rt).prototype.isLineBasicMaterial=!0,Rt.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Ot.prototype=Object.assign(Object.create(u.prototype),{constructor:Ot,isLine:!0,computeLineDistances:(Mo=new Te,So=new Te,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[0],n=1,r=t.count;n<r;n++)Mo.fromBufferAttribute(t,n-1),So.fromBufferAttribute(t,n),i[n]=i[n-1],i[n]+=Mo.distanceTo(So);e.addAttribute("lineDistance",new P(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(t=e.vertices,(i=e.lineDistances)[0]=0,n=1,r=t.length;n<r;n++)i[n]=i[n-1],i[n]+=t[n-1].distanceTo(t[n]);return this}),raycast:(wo=new we,To=new z,Eo=new s,function(e,t){var i=e.linePrecision,n=this.geometry,r=this.matrixWorld;if(null===n.boundingSphere&&n.computeBoundingSphere(),Eo.copy(n.boundingSphere),Eo.applyMatrix4(r),Eo.radius+=i,!1!==e.ray.intersectsSphere(Eo)){wo.getInverse(r),To.copy(e.ray).applyMatrix4(wo),i/=(this.scale.x+this.scale.y+this.scale.z)/3,i*=i;var a=new Te,s=new Te;r=new Te;var o=new Te,l=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var c=n.index,h=n.attributes.position.array;if(null!==c){n=0;for(var u=(c=c.array).length-1;n<u;n+=l){var d=c[n+1];a.fromArray(h,3*c[n]),s.fromArray(h,3*d),i<(d=To.distanceSqToSegment(a,s,o,r))||(o.applyMatrix4(this.matrixWorld),(d=e.ray.origin.distanceTo(o))<e.near||d>e.far||t.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}else for(n=0,u=h.length/3-1;n<u;n+=l)a.fromArray(h,3*n),s.fromArray(h,3*n+3),i<(d=To.distanceSqToSegment(a,s,o,r))||(o.applyMatrix4(this.matrixWorld),(d=e.ray.origin.distanceTo(o))<e.near||d>e.far||t.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}else if(n.isGeometry)for(s=(a=n.vertices).length,n=0;n<s-1;n+=l)i<(d=To.distanceSqToSegment(a[n],a[n+1],o,r))||(o.applyMatrix4(this.matrixWorld),(d=e.ray.origin.distanceTo(o))<e.near||d>e.far||t.push({distance:d,point:r.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this}))}}),copy:function(e){return u.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),It.prototype=Object.assign(Object.create(Ot.prototype),{constructor:It,isLineSegments:!0,computeLineDistances:(Co=new Te,Ao=new Te,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[],n=0,r=t.count;n<r;n+=2)Co.fromBufferAttribute(t,n),Ao.fromBufferAttribute(t,n+1),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+Co.distanceTo(Ao);e.addAttribute("lineDistance",new P(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry)for(t=e.vertices,i=e.lineDistances,n=0,r=t.length;n<r;n+=2)Co.copy(t[n]),Ao.copy(t[n+1]),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+Co.distanceTo(Ao);return this})}),Dt.prototype=Object.assign(Object.create(Ot.prototype),{constructor:Dt,isLineLoop:!0}),((kt.prototype=Object.create(k.prototype)).constructor=kt).prototype.isPointsMaterial=!0,kt.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Nt.prototype=Object.assign(Object.create(u.prototype),{constructor:Nt,isPoints:!0,raycast:(Po=new we,Lo=new z,Ro=new s,function(n,r){function e(e,t){var i=Lo.distanceSqToPoint(e);i<o&&(Lo.closestPointToPoint(e,l),l.applyMatrix4(s),(e=n.ray.origin.distanceTo(l))<n.near||e>n.far||r.push({distance:e,distanceToRay:Math.sqrt(i),point:l.clone(),index:t,face:null,object:a}))}var a=this,t=this.geometry,s=this.matrixWorld,i=n.params.Points.threshold;if(null===t.boundingSphere&&t.computeBoundingSphere(),Ro.copy(t.boundingSphere),Ro.applyMatrix4(s),Ro.radius+=i,!1!==n.ray.intersectsSphere(Ro)){Po.getInverse(s),Lo.copy(n.ray).applyMatrix4(Po);var o=(i/=(this.scale.x+this.scale.y+this.scale.z)/3)*i;i=new Te;var l=new Te;if(t.isBufferGeometry){var c=t.index;if(t=t.attributes.position.array,null!==c){var h=c.array;c=0;for(var u=h.length;c<u;c++){var d=h[c];i.fromArray(t,3*d),e(i,d)}}else for(c=0,h=t.length/3;c<h;c++)i.fromArray(t,3*c),e(i,c)}else for(c=0,h=(i=t.vertices).length;c<h;c++)e(i[c],c)}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),zt.prototype=Object.assign(Object.create(d.prototype),{constructor:zt,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),((Bt.prototype=Object.create(d.prototype)).constructor=Bt).prototype.isCompressedTexture=!0,((Ht.prototype=Object.create(d.prototype)).constructor=Ht).prototype.isCanvasTexture=!0,((Ft.prototype=Object.create(d.prototype)).constructor=Ft).prototype.isDepthTexture=!0,(Ut.prototype=Object.create(L.prototype)).constructor=Ut,(Gt.prototype=Object.create(f.prototype)).constructor=Gt,(Vt.prototype=Object.create(L.prototype)).constructor=Vt,(jt.prototype=Object.create(f.prototype)).constructor=jt,(Wt.prototype=Object.create(L.prototype)).constructor=Wt,(Xt.prototype=Object.create(f.prototype)).constructor=Xt,(Yt.prototype=Object.create(Wt.prototype)).constructor=Yt,(qt.prototype=Object.create(f.prototype)).constructor=qt,($t.prototype=Object.create(Wt.prototype)).constructor=$t,(Zt.prototype=Object.create(f.prototype)).constructor=Zt,(Jt.prototype=Object.create(Wt.prototype)).constructor=Jt,(Kt.prototype=Object.create(f.prototype)).constructor=Kt,(Qt.prototype=Object.create(Wt.prototype)).constructor=Qt,(ei.prototype=Object.create(f.prototype)).constructor=ei,(ti.prototype=Object.create(L.prototype)).constructor=ti,(ii.prototype=Object.create(f.prototype)).constructor=ii,(ni.prototype=Object.create(L.prototype)).constructor=ni,(ri.prototype=Object.create(f.prototype)).constructor=ri,(ai.prototype=Object.create(L.prototype)).constructor=ai;var Do=function(e,t,i){i=i||2;var n,r=t&&t.length,a=r?t[0]*i:e.length,s=si(e,0,a,i,!0),o=[];if(!s)return o;if(r){var l,c=i;r=[];var h=0;for(l=t.length;h<l;h++){var u=t[h]*c;(u=si(e,u,h<l-1?t[h+1]*c:e.length,c,!1))===u.next&&(u.steiner=!0),r.push(ui(u))}for(r.sort(li),h=0;h<r.length;h++)(c=ci(t=r[h],c=s))&&oi(t=vi(c,t),t.next),s=oi(s,s.next)}if(e.length>80*i){var d=n=e[0],p=r=e[1];for(c=i;c<a;c+=i)(h=e[c])<d&&(d=h),(t=e[c+1])<p&&(p=t),n<h&&(n=h),r<t&&(r=t);n=0!==(n=Math.max(n-d,r-p))?1/n:0}return function e(t,i,n,r,a,s,o){if(t){if(!o&&s){for(var l=t,c=l;null===c.z&&(c.z=hi(c.x,c.y,r,a,s)),c.prevZ=c.prev,(c=c.nextZ=c.next)!==l;);c.prevZ.nextZ=null,c.prevZ=null,l=c;var h,u,d,p,f=1;do{c=l;var m=l=null;for(u=0;c;){u++;var g=c;for(h=d=0;h<f&&(d++,g=g.nextZ);h++);for(p=f;0<d||0<p&&g;)0!==d&&(0===p||!g||c.z<=g.z)?(c=(h=c).nextZ,d--):(g=(h=g).nextZ,p--),m?m.nextZ=h:l=h,h.prevZ=m,m=h;c=g}m.nextZ=null,f*=2}while(1<u)}for(l=t;t.prev!==t.next;){if(c=t.prev,g=t.next,s)e:{p=r;var v=a,y=s;if(0<=pi(u=(m=t).prev,d=m,f=m.next))m=!1;else{var _=u.x>d.x?u.x>f.x?u.x:f.x:d.x>f.x?d.x:f.x,x=u.y>d.y?u.y>f.y?u.y:f.y:d.y>f.y?d.y:f.y;for(h=hi(u.x<d.x?u.x<f.x?u.x:f.x:d.x<f.x?d.x:f.x,u.y<d.y?u.y<f.y?u.y:f.y:d.y<f.y?d.y:f.y,p,v,y),p=hi(_,x,p,v,y),v=m.nextZ;v&&v.z<=p;){if(v!==m.prev&&v!==m.next&&di(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=pi(v.prev,v,v.next)){m=!1;break e}v=v.nextZ}for(v=m.prevZ;v&&v.z>=h;){if(v!==m.prev&&v!==m.next&&di(u.x,u.y,d.x,d.y,f.x,f.y,v.x,v.y)&&0<=pi(v.prev,v,v.next)){m=!1;break e}v=v.prevZ}m=!0}}else e:if(m=t,u=m.prev,d=m,f=m.next,0<=pi(u,d,f))m=!1;else{for(h=m.next.next;h!==m.prev;){if(di(u.x,u.y,d.x,d.y,f.x,f.y,h.x,h.y)&&0<=pi(h.prev,h,h.next)){m=!1;break e}h=h.next}m=!0}if(m)i.push(c.i/n),i.push(t.i/n),i.push(g.i/n),_i(t),l=t=g.next;else if((t=g)===l){if(o){if(1===o){for(o=i,l=n,c=t;!fi(g=c.prev,m=c.next.next)&&mi(g,c,c.next,m)&&gi(g,m)&&gi(m,g)&&(o.push(g.i/l),o.push(c.i/l),o.push(m.i/l),_i(c),_i(c.next),c=t=m),(c=c.next)!==t;);e(t=c,i,n,r,a,s,2)}else if(2===o)e:{o=t;do{for(l=o.next.next;l!==o.prev;){if(c=o.i!==l.i){if(g=l,m=(c=o).next.i!==g.i&&c.prev.i!==g.i){t:{m=c;do{if(m.i!==c.i&&m.next.i!==c.i&&m.i!==g.i&&m.next.i!==g.i&&mi(m,m.next,c,g)){m=!0;break t}m=m.next}while(m!==c);m=!1}m=!m}if(m=m&&gi(c,g)&&gi(g,c)){for(u=!1,d=((m=c).x+g.x)/2,g=(c.y+g.y)/2;m.y>g!=m.next.y>g&&m.next.y!==m.y&&d<(m.next.x-m.x)*(g-m.y)/(m.next.y-m.y)+m.x&&(u=!u),(m=m.next)!==c;);m=u}c=m}if(c){t=vi(o,l),o=oi(o,o.next),t=oi(t,t.next),e(o,i,n,r,a,s),e(t,i,n,r,a,s);break e}l=l.next}o=o.next}while(o!==t)}}else e(oi(t),i,n,r,a,s,1);break}}}}(s,o,i,d,p,n),o},ko={area:function(e){for(var t=e.length,i=0,n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i},isClockWise:function(e){return ko.area(e)<0},triangulateShape:function(e,t){var i=[],n=[],r=[];bi(e),wi(i,e);var a=e.length;for(t.forEach(bi),e=0;e<t.length;e++)n.push(a),a+=t[e].length,wi(i,t[e]);for(t=Do(i,n),e=0;e<t.length;e+=3)r.push(t.slice(e,e+3));return r}};((Ti.prototype=Object.create(f.prototype)).constructor=Ti).prototype.toJSON=function(){var e=f.prototype.toJSON.call(this);return Mi(this.parameters.shapes,this.parameters.options,e)},((Ei.prototype=Object.create(L.prototype)).constructor=Ei).prototype.toJSON=function(){var e=L.prototype.toJSON.call(this);return Mi(this.parameters.shapes,this.parameters.options,e)};var No={generateTopUV:function(e,t,i,n,r){e=t[3*n],n=t[3*n+1];var a=t[3*r];return r=t[3*r+1],[new W(t[3*i],t[3*i+1]),new W(e,n),new W(a,r)]},generateSideWallUV:function(e,t,i,n,r,a){e=t[3*i];var s=t[3*i+1];i=t[3*i+2];var o=t[3*n],l=t[3*n+1];n=t[3*n+2];var c=t[3*r],h=t[3*r+1];r=t[3*r+2];var u=t[3*a],d=t[3*a+1];return t=t[3*a+2],Math.abs(s-l)<.01?[new W(e,1-i),new W(o,1-n),new W(c,1-r),new W(u,1-t)]:[new W(s,1-i),new W(l,1-n),new W(h,1-r),new W(d,1-t)]}};(Si.prototype=Object.create(f.prototype)).constructor=Si,(Ci.prototype=Object.create(Ei.prototype)).constructor=Ci,(Ai.prototype=Object.create(f.prototype)).constructor=Ai,(Pi.prototype=Object.create(L.prototype)).constructor=Pi,(Li.prototype=Object.create(f.prototype)).constructor=Li,(Ri.prototype=Object.create(L.prototype)).constructor=Ri,(Oi.prototype=Object.create(f.prototype)).constructor=Oi,(Ii.prototype=Object.create(L.prototype)).constructor=Ii,((Di.prototype=Object.create(f.prototype)).constructor=Di).prototype.toJSON=function(){var e=f.prototype.toJSON.call(this);return Ni(this.parameters.shapes,e)},((ki.prototype=Object.create(L.prototype)).constructor=ki).prototype.toJSON=function(){var e=L.prototype.toJSON.call(this);return Ni(this.parameters.shapes,e)},(zi.prototype=Object.create(L.prototype)).constructor=zi,(Bi.prototype=Object.create(f.prototype)).constructor=Bi,(Hi.prototype=Object.create(L.prototype)).constructor=Hi,(Fi.prototype=Object.create(Bi.prototype)).constructor=Fi,(Ui.prototype=Object.create(Hi.prototype)).constructor=Ui,(Gi.prototype=Object.create(f.prototype)).constructor=Gi,(Vi.prototype=Object.create(L.prototype)).constructor=Vi;var zo=Object.freeze({WireframeGeometry:Ut,ParametricGeometry:Gt,ParametricBufferGeometry:Vt,TetrahedronGeometry:Xt,TetrahedronBufferGeometry:Yt,OctahedronGeometry:qt,OctahedronBufferGeometry:$t,IcosahedronGeometry:Zt,IcosahedronBufferGeometry:Jt,DodecahedronGeometry:Kt,DodecahedronBufferGeometry:Qt,PolyhedronGeometry:jt,PolyhedronBufferGeometry:Wt,TubeGeometry:ei,TubeBufferGeometry:ti,TorusKnotGeometry:ii,TorusKnotBufferGeometry:ni,TorusGeometry:ri,TorusBufferGeometry:ai,TextGeometry:Si,TextBufferGeometry:Ci,SphereGeometry:Ai,SphereBufferGeometry:Pi,RingGeometry:Li,RingBufferGeometry:Ri,PlaneGeometry:I,PlaneBufferGeometry:D,LatheGeometry:Oi,LatheBufferGeometry:Ii,ShapeGeometry:Di,ShapeBufferGeometry:ki,ExtrudeGeometry:Ti,ExtrudeBufferGeometry:Ei,EdgesGeometry:zi,ConeGeometry:Fi,ConeBufferGeometry:Ui,CylinderGeometry:Bi,CylinderBufferGeometry:Hi,CircleGeometry:Gi,CircleBufferGeometry:Vi,BoxGeometry:R,BoxBufferGeometry:O});((ji.prototype=Object.create(k.prototype)).constructor=ji).prototype.isShadowMaterial=!0,ji.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this},((Wi.prototype=Object.create(N.prototype)).constructor=Wi).prototype.isRawShaderMaterial=!0,((Xi.prototype=Object.create(k.prototype)).constructor=Xi).prototype.isMeshStandardMaterial=!0,Xi.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Yi.prototype=Object.create(Xi.prototype)).constructor=Yi).prototype.isMeshPhysicalMaterial=!0,Yi.prototype.copy=function(e){return Xi.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},((qi.prototype=Object.create(k.prototype)).constructor=qi).prototype.isMeshPhongMaterial=!0,qi.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},(($i.prototype=Object.create(qi.prototype)).constructor=$i).prototype.isMeshToonMaterial=!0,$i.prototype.copy=function(e){return qi.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},((Zi.prototype=Object.create(k.prototype)).constructor=Zi).prototype.isMeshNormalMaterial=!0,Zi.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Ji.prototype=Object.create(k.prototype)).constructor=Ji).prototype.isMeshLambertMaterial=!0,Ji.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Ki.prototype=Object.create(k.prototype)).constructor=Ki).prototype.isMeshMatcapMaterial=!0,Ki.prototype.copy=function(e){return k.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Qi.prototype=Object.create(Rt.prototype)).constructor=Qi).prototype.isLineDashedMaterial=!0,Qi.prototype.copy=function(e){return Rt.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Bo=Object.freeze({ShadowMaterial:ji,SpriteMaterial:Mt,RawShaderMaterial:Wi,ShaderMaterial:N,PointsMaterial:kt,MeshPhysicalMaterial:Yi,MeshStandardMaterial:Xi,MeshPhongMaterial:qi,MeshToonMaterial:$i,MeshNormalMaterial:Zi,MeshLambertMaterial:Ji,MeshDepthMaterial:st,MeshDistanceMaterial:ot,MeshBasicMaterial:H,MeshMatcapMaterial:Ki,LineDashedMaterial:Qi,LineBasicMaterial:Rt,Material:k}),Ho={arraySlice:function(e,t,i){return Ho.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(i){for(var e=i.length,t=Array(e),n=0;n!==e;++n)t[n]=n;return t.sort(function(e,t){return i[e]-i[t]}),t},sortedArray:function(e,t,i){for(var n=e.length,r=new e.constructor(n),a=0,s=0;s!==n;++a)for(var o=i[a]*t,l=0;l!==t;++l)r[s++]=e[o+l];return r},flattenJSON:function(e,t,i,n){for(var r=1,a=e[0];void 0!==a&&void 0===a[n];)a=e[r++];if(void 0!==a){var s=a[n];if(void 0!==s)if(Array.isArray(s))for(;void 0!==(s=a[n])&&(t.push(a.time),i.push.apply(i,s)),void 0!==(a=e[r++]););else if(void 0!==s.toArray)for(;void 0!==(s=a[n])&&(t.push(a.time),s.toArray(i,i.length)),void 0!==(a=e[r++]););else for(;void 0!==(s=a[n])&&(t.push(a.time),i.push(s)),void 0!==(a=e[r++]););}}};Object.assign(en.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{i:{n:if(!(e<n)){for(var a=i+2;;){if(void 0===n){if(e<r)break n;return this._cachedIndex=i=t.length,this.afterEnd_(i-1,e,r)}if(i===a)break;if(r=n,e<(n=t[++i]))break t}n=t.length;break i}if(r<=e)break e;for(e<(a=t[1])&&(i=2,r=a),a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(i===a)break;if(n=r,(r=t[--i-1])<=e)break t}n=i,i=0}for(;i<n;)e<t[r=i+n>>>1]?n=r:i=r+1;if(n=t[i],void 0===(r=t[i-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return this._cachedIndex=i=t.length,this.afterEnd_(i-1,r,e)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize;e*=n;for(var r=0;r!==n;++r)t[r]=i[e+r];return t},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(en.prototype,{beforeStart_:en.prototype.copySampleValue_,afterEnd_:en.prototype.copySampleValue_}),tn.prototype=Object.assign(Object.create(en.prototype),{constructor:tn,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,i){var n=this.parameterPositions,r=e-2,a=e+1,s=n[r],o=n[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:r=e,s=2*t-i;break;case 2402:s=t+n[r=n.length-2]-n[r+1];break;default:r=e,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*i-t;break;case 2402:o=i+n[a=1]-n[0];break;default:a=e-1,o=t}e=.5*(i-t),n=this.valueSize,this._weightPrev=e/(t-s),this._weightNext=e/(o-i),this._offsetPrev=r*n,this._offsetNext=a*n},interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(e*=s)-s,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,u=this._weightNext,d=(i-t)/(n-t);for(t=-h*(n=(i=d*d)*d)+2*h*i-h*d,h=(1+h)*n+(-1.5-2*h)*i+(-.5+h)*d+1,d=(-1-u)*n+(1.5+u)*i+.5*d,u=u*n-u*i,i=0;i!==s;++i)r[i]=t*a[l+i]+h*a[o+i]+d*a[e+i]+u*a[c+i];return r}}),nn.prototype=Object.assign(Object.create(en.prototype),{constructor:nn,interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(e*=s)-s;for(i=1-(t=(i-t)/(n-t)),n=0;n!==s;++n)r[n]=a[o+n]*i+a[e+n]*t;return r}}),rn.prototype=Object.assign(Object.create(en.prototype),{constructor:rn,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(an,{toJSON:function(e){var t=e.constructor;if(void 0!==t.toJSON)t=t.toJSON(e);else{t={name:e.name,times:Ho.convertArray(e.times,Array),values:Ho.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}),Object.assign(an.prototype,{constructor:an,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new rn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new nn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new tn(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)return this.createInterpolant=t,this;if(t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,n=i.length,r=0,a=n-1;r!==n&&i[r]<e;)++r;for(;-1!==a&&i[a]>t;)--a;return++a,0===r&&a===n||(a<=r&&(r=(a=Math.max(a,1))-1),e=this.getValueSize(),this.times=Ho.arraySlice(i,r,a),this.values=Ho.arraySlice(this.values,r*e,a*e)),this},validate:function(){var e=!0,t=this.getValueSize();0!=t-Math.floor(t)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var i=this.times;t=this.values;var n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var r=null,a=0;a!==n;a++){var s=i[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==r&&s<r){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,r),e=!1;break}r=s}if(void 0!==t&&Ho.isTypedArray(t))for(a=0,i=t.length;a!==i;++a)if(n=t[a],isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,n),e=!1;break}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,a=e.length-1,s=1;s<a;++s){var o=!1,l=e[s];if(l!==e[s+1]&&(1!==s||l!==l[0]))if(n)o=!0;else{var c=s*i,h=c-i,u=c+i;for(l=0;l!==i;++l){var d=t[c+l];if(d!==t[h+l]||d!==t[u+l]){o=!0;break}}}if(o){if(s!==r)for(e[r]=e[s],o=s*i,c=r*i,l=0;l!==i;++l)t[c+l]=t[o+l];++r}}if(0<a){for(e[r]=e[a],o=a*i,c=r*i,l=0;l!==i;++l)t[c+l]=t[o+l];++r}return r!==e.length&&(this.times=Ho.arraySlice(e,0,r),this.values=Ho.arraySlice(t,0,r*i)),this},clone:function(){var e=Ho.arraySlice(this.times,0),t=Ho.arraySlice(this.values,0);return(e=new this.constructor(this.name,e,t)).createInterpolant=this.createInterpolant,e}}),sn.prototype=Object.assign(Object.create(an.prototype),{constructor:sn,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),on.prototype=Object.assign(Object.create(an.prototype),{constructor:on,ValueTypeName:"color"}),ln.prototype=Object.assign(Object.create(an.prototype),{constructor:ln,ValueTypeName:"number"}),cn.prototype=Object.assign(Object.create(en.prototype),{constructor:cn,interpolate_:function(e,t,i,n){var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize;for(t=(i-t)/(n-t),i=(e*=s)+s;e!==i;e+=4)T.slerpFlat(r,0,a,e-s,a,e,t);return r}}),hn.prototype=Object.assign(Object.create(an.prototype),{constructor:hn,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new cn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),un.prototype=Object.assign(Object.create(an.prototype),{constructor:un,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),dn.prototype=Object.assign(Object.create(an.prototype),{constructor:dn,ValueTypeName:"vector"}),Object.assign(pn,{parse:function(e){for(var t=[],i=e.tracks,n=1/(e.fps||1),r=0,a=i.length;r!==a;++r)t.push(fn(i[r]).scale(n));return new pn(e.name,e.duration,t)},toJSON:function(e){var t=[],i=e.tracks;e={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid};for(var n=0,r=i.length;n!==r;++n)t.push(an.toJSON(i[n]));return e},CreateFromMorphTargetSequence:function(e,t,i,n){for(var r=t.length,a=[],s=0;s<r;s++){var o=[],l=[];o.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);var c=Ho.getKeyframeOrder(o);o=Ho.sortedArray(o,1,c),l=Ho.sortedArray(l,1,c),n||0!==o[0]||(o.push(r),l.push(l[0])),a.push(new ln(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/i))}return new pn(e,-1,a)},findByName:function(e,t){var i=e;for(Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations),e=0;e<i.length;e++)if(i[e].name===t)return i[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,a=0,s=e.length;a<s;a++){var o=e[a],l=o.name.match(r);if(l&&1<l.length){var c=l[1];(l=n[c])||(n[c]=l=[]),l.push(o)}}for(c in e=[],n)e.push(pn.CreateFromMorphTargetSequence(c,n[c],t,i));return e},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var i=function(e,t,i,n,r){if(0!==i.length){var a=[],s=[];Ho.flattenJSON(i,a,s,n),0!==a.length&&r.push(new e(t,a,s))}},n=[],r=e.name||"default",a=e.length||-1,s=e.fps||30;e=e.hierarchy||[];for(var o=0;o<e.length;o++){var l=e[o].keys;if(l&&0!==l.length)if(l[0].morphTargets){a={};for(var c=0;c<l.length;c++)if(l[c].morphTargets)for(var h=0;h<l[c].morphTargets.length;h++)a[l[c].morphTargets[h]]=-1;for(var u in a){var d=[],p=[];for(h=0;h!==l[c].morphTargets.length;++h){var f=l[c];d.push(f.time),p.push(f.morphTarget===u?1:0)}n.push(new ln(".morphTargetInfluence["+u+"]",d,p))}a=a.length*(s||1)}else i(dn,(c=".bones["+t[o].name+"]")+".position",l,"pos",n),i(hn,c+".quaternion",l,"rot",n),i(dn,c+".scale",l,"scl",n)}return 0===n.length?null:new pn(r,a,n)}}),Object.assign(pn.prototype,{resetDuration:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new pn(this.name,this.duration,e)}});var Fo={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Uo=new mn,Go={};Object.assign(gn.prototype,{load:function(s,e,t,i){void 0===s&&(s=""),void 0!==this.path&&(s=this.path+s),s=this.manager.resolveURL(s);var o=this,n=Fo.get(s);if(void 0!==n)return o.manager.itemStart(s),setTimeout(function(){e&&e(n),o.manager.itemEnd(s)},0),n;if(void 0===Go[s]){var r=s.match(/^data:(.*?)(;base64)?,(.*)$/);if(r){t=r[1];var a=!!r[2];r=r[3],r=decodeURIComponent(r),a&&(r=atob(r));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":var c=new Uint8Array(r.length);for(a=0;a<r.length;a++)c[a]=r.charCodeAt(a);var h="blob"===l?new Blob([c.buffer],{type:t}):c.buffer;break;case"document":h=(new DOMParser).parseFromString(r,t);break;case"json":h=JSON.parse(r);break;default:h=r}setTimeout(function(){e&&e(h),o.manager.itemEnd(s)},0)}catch(e){setTimeout(function(){i&&i(e),o.manager.itemError(s),o.manager.itemEnd(s)},0)}}else{Go[s]=[],Go[s].push({onLoad:e,onProgress:t,onError:i});var u=new XMLHttpRequest;for(a in u.open("GET",s,!0),u.addEventListener("load",function(e){var t=this.response;Fo.add(s,t);var i=Go[s];if(delete Go[s],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var n=0,r=i.length;n<r;n++){var a=i[n];a.onLoad&&a.onLoad(t)}}else{for(n=0,r=i.length;n<r;n++)(a=i[n]).onError&&a.onError(e);o.manager.itemError(s)}o.manager.itemEnd(s)},!1),u.addEventListener("progress",function(e){for(var t=Go[s],i=0,n=t.length;i<n;i++){var r=t[i];r.onProgress&&r.onProgress(e)}},!1),u.addEventListener("error",function(e){var t=Go[s];delete Go[s];for(var i=0,n=t.length;i<n;i++){var r=t[i];r.onError&&r.onError(e)}o.manager.itemError(s),o.manager.itemEnd(s)},!1),u.addEventListener("abort",function(e){var t=Go[s];delete Go[s];for(var i=0,n=t.length;i<n;i++){var r=t[i];r.onError&&r.onError(e)}o.manager.itemError(s),o.manager.itemEnd(s)},!1),void 0!==this.responseType&&(u.responseType=this.responseType),void 0!==this.withCredentials&&(u.withCredentials=this.withCredentials),u.overrideMimeType&&u.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)u.setRequestHeader(a,this.requestHeader[a]);u.send(null)}return o.manager.itemStart(s),u}Go[s].push({onLoad:e,onProgress:t,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(vn.prototype,{load:function(e,t,i,n){var r=this,a=new gn(r.manager);a.setPath(r.path),a.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},parse:function(e,t){for(var i=[],n=0;n<e.length;n++){var r=pn.parse(e[n]);i.push(r)}t(i)},setPath:function(e){return this.path=e,this}}),Object.assign(yn.prototype,{load:function(e,r,i,n){function t(t){l.load(e[t],function(e){e=a._parser(e,!0),s[t]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},6===(c+=1)&&(1===e.mipmapCount&&(o.minFilter=1006),o.format=e.format,o.needsUpdate=!0,r&&r(o))},i,n)}var a=this,s=[],o=new Bt;o.image=s;var l=new gn(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,h=0,u=e.length;h<u;++h)t(h);else l.load(e,function(e){if((e=a._parser(e,!0)).isCubemap)for(var t=e.mipmaps.length/e.mipmapCount,i=0;i<t;i++){s[i]={mipmaps:[]};for(var n=0;n<e.mipmapCount;n++)s[i].mipmaps.push(e.mipmaps[i*e.mipmapCount+n]),s[i].format=e.format,s[i].width=e.width,s[i].height=e.height}else o.image.width=e.width,o.image.height=e.height,o.mipmaps=e.mipmaps;1===e.mipmapCount&&(o.minFilter=1006),o.format=e.format,o.needsUpdate=!0,r&&r(o)},i,n);return o},setPath:function(e){return this.path=e,this}}),Object.assign(_n.prototype,{load:function(e,t,i,n){var r=this,a=new Me,s=new gn(this.manager);return s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(e,function(e){(e=r._parser(e))&&(void 0!==e.image?a.image=e.image:void 0!==e.data&&(a.image.width=e.width,a.image.height=e.height,a.image.data=e.data),a.wrapS=void 0!==e.wrapS?e.wrapS:1001,a.wrapT=void 0!==e.wrapT?e.wrapT:1001,a.magFilter=void 0!==e.magFilter?e.magFilter:1006,a.minFilter=void 0!==e.minFilter?e.minFilter:1008,a.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(a.format=e.format),void 0!==e.type&&(a.type=e.type),void 0!==e.mipmaps&&(a.mipmaps=e.mipmaps),1===e.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,t&&t(a,e))},i,n),a},setPath:function(e){return this.path=e,this}}),Object.assign(xn.prototype,{crossOrigin:"anonymous",load:function(t,e,i,n){function r(){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),Fo.add(t,this),e&&e(this),s.manager.itemEnd(t)}function a(e){l.removeEventListener("load",r,!1),l.removeEventListener("error",a,!1),n&&n(e),s.manager.itemError(t),s.manager.itemEnd(t)}void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var s=this,o=Fo.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");return l.addEventListener("load",r,!1),l.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(t),l.src=t,l},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(bn.prototype,{crossOrigin:"anonymous",load:function(e,i,t,n){function r(t){s.load(e[t],function(e){a.images[t]=e,6===++o&&(a.needsUpdate=!0,i&&i(a))},void 0,n)}var a=new G,s=new xn(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var o=0;for(t=0;t<e.length;++t)r(t);return a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(wn.prototype,{crossOrigin:"anonymous",load:function(t,i,e,n){var r=new d,a=new xn(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(t,function(e){r.image=e,e=0<t.search(/\.jpe?g($|\?)/i)||0===t.search(/^data:image\/jpeg/),r.format=e?1022:1023,r.needsUpdate=!0,void 0!==i&&i(r)},e,n),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Tn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){return e=this.getUtoTmapping(e),this.getPoint(e,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i=[],n=this.getPoint(0),r=0;for(i.push(0),t=1;t<=e;t++){var a=this.getPoint(t/e);r+=a.distanceTo(n),i.push(r),n=a}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var i=this.getLengths(),n=i.length;t=t||e*i[n-1];for(var r,a=0,s=n-1;a<=s;)if((r=i[e=Math.floor(a+(s-a)/2)]-t)<0)a=e+1;else{if(!(0<r)){s=e;break}s=e-1}return i[e=s]===t?e/(n-1):(e+(t-(a=i[e]))/(i[e+1]-a))/(n-1)},getTangent:function(e){var t=e-1e-4;return t<0&&(t=0),1<(e+=1e-4)&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},computeFrenetFrames:function(e,t){var i,n=new Te,r=[],a=[],s=[],o=new Te,l=new we;for(i=0;i<=e;i++){var c=i/e;r[i]=this.getTangentAt(c),r[i].normalize()}a[0]=new Te,s[0]=new Te,i=Number.MAX_VALUE,c=Math.abs(r[0].x);var h=Math.abs(r[0].y),u=Math.abs(r[0].z);for(c<=i&&(i=c,n.set(1,0,0)),h<=i&&(i=h,n.set(0,1,0)),u<=i&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],o),s[0].crossVectors(r[0],a[0]),i=1;i<=e;i++)a[i]=a[i-1].clone(),s[i]=s[i-1].clone(),o.crossVectors(r[i-1],r[i]),o.length()>Number.EPSILON&&(o.normalize(),n=Math.acos(ya.clamp(r[i-1].dot(r[i]),-1,1)),a[i].applyMatrix4(l.makeRotationAxis(o,n))),s[i].crossVectors(r[i],a[i]);if(!0===t)for(n=Math.acos(ya.clamp(a[0].dot(a[e]),-1,1)),n/=e,0<r[0].dot(o.crossVectors(a[0],a[e]))&&(n=-n),i=1;i<=e;i++)a[i].applyMatrix4(l.makeRotationAxis(r[i],n*i)),s[i].crossVectors(r[i],a[i]);return{tangents:r,normals:a,binormals:s}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),((En.prototype=Object.create(Tn.prototype)).constructor=En).prototype.isEllipseCurve=!0,En.prototype.getPoint=function(e,t){t=t||new W;for(var i=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=i;for(;i<n;)n-=i;n<Number.EPSILON&&(n=r?0:i),!0!==this.aClockwise||r||(n=n===i?-i:n-i),i=this.aStartAngle+e*n,e=this.aX+this.xRadius*Math.cos(i);var a=this.aY+this.yRadius*Math.sin(i);return 0!==this.aRotation&&(i=Math.cos(this.aRotation),n=Math.sin(this.aRotation),e=(r=e-this.aX)*i-(a-=this.aY)*n+this.aX,a=r*n+a*i+this.aY),t.set(e,a)},En.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},En.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},En.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},((Mn.prototype=Object.create(En.prototype)).constructor=Mn).prototype.isArcCurve=!0;var Vo=new Te,jo=new Sn,Wo=new Sn,Xo=new Sn;((Cn.prototype=Object.create(Tn.prototype)).constructor=Cn).prototype.isCatmullRomCurve3=!0,Cn.prototype.getPoint=function(e,t){t=t||new Te;var i=this.points,n=i.length;e*=n-(this.closed?0:1);var r=Math.floor(e);if(e-=r,this.closed?r+=0<r?0:(Math.floor(Math.abs(r)/n)+1)*n:0===e&&r===n-1&&(r=n-2,e=1),this.closed||0<r)var a=i[(r-1)%n];else Vo.subVectors(i[0],i[1]).add(i[0]),a=Vo;var s=i[r%n],o=i[(r+1)%n];if(i=this.closed||r+2<n?i[(r+2)%n]:(Vo.subVectors(i[n-1],i[n-2]).add(i[n-1]),Vo),"centripetal"===this.curveType||"chordal"===this.curveType){var l="chordal"===this.curveType?.5:.25;n=Math.pow(a.distanceToSquared(s),l),(r=Math.pow(s.distanceToSquared(o),l))<1e-4&&(r=1),n<1e-4&&(n=r),(l=Math.pow(o.distanceToSquared(i),l))<1e-4&&(l=r),jo.initNonuniformCatmullRom(a.x,s.x,o.x,i.x,n,r,l),Wo.initNonuniformCatmullRom(a.y,s.y,o.y,i.y,n,r,l),Xo.initNonuniformCatmullRom(a.z,s.z,o.z,i.z,n,r,l)}else"catmullrom"===this.curveType&&(jo.initCatmullRom(a.x,s.x,o.x,i.x,this.tension),Wo.initCatmullRom(a.y,s.y,o.y,i.y,this.tension),Xo.initCatmullRom(a.z,s.z,o.z,i.z,this.tension));return t.set(jo.calc(e),Wo.calc(e),Xo.calc(e)),t},Cn.prototype.copy=function(e){Tn.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Cn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Cn.prototype.fromJSON=function(e){Tn.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push((new Te).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},((Rn.prototype=Object.create(Tn.prototype)).constructor=Rn).prototype.isCubicBezierCurve=!0,Rn.prototype.getPoint=function(e,t){t=t||new W;var i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(Ln(e,i.x,n.x,r.x,a.x),Ln(e,i.y,n.y,r.y,a.y)),t},Rn.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Rn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Rn.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((On.prototype=Object.create(Tn.prototype)).constructor=On).prototype.isCubicBezierCurve3=!0,On.prototype.getPoint=function(e,t){t=t||new Te;var i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(Ln(e,i.x,n.x,r.x,a.x),Ln(e,i.y,n.y,r.y,a.y),Ln(e,i.z,n.z,r.z,a.z)),t},On.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},On.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},On.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((In.prototype=Object.create(Tn.prototype)).constructor=In).prototype.isLineCurve=!0,In.prototype.getPoint=function(e,t){return t=t||new W,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},In.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},In.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},In.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},In.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},In.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((Dn.prototype=Object.create(Tn.prototype)).constructor=Dn).prototype.isLineCurve3=!0,Dn.prototype.getPoint=function(e,t){return t=t||new Te,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},Dn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Dn.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Dn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Dn.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((kn.prototype=Object.create(Tn.prototype)).constructor=kn).prototype.isQuadraticBezierCurve=!0,kn.prototype.getPoint=function(e,t){t=t||new W;var i=this.v0,n=this.v1,r=this.v2;return t.set(Pn(e,i.x,n.x,r.x),Pn(e,i.y,n.y,r.y)),t},kn.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},kn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},kn.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((Nn.prototype=Object.create(Tn.prototype)).constructor=Nn).prototype.isQuadraticBezierCurve3=!0,Nn.prototype.getPoint=function(e,t){t=t||new Te;var i=this.v0,n=this.v1,r=this.v2;return t.set(Pn(e,i.x,n.x,r.x),Pn(e,i.y,n.y,r.y),Pn(e,i.z,n.z,r.z)),t},Nn.prototype.copy=function(e){return Tn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Nn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Nn.prototype.fromJSON=function(e){return Tn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((zn.prototype=Object.create(Tn.prototype)).constructor=zn).prototype.isSplineCurve=!0,zn.prototype.getPoint=function(e,t){t=t||new W;var i=this.points,n=(i.length-1)*e;n-=e=Math.floor(n);var r=i[0===e?e:e-1],a=i[e],s=i[e>i.length-2?i.length-1:e+1];return i=i[e>i.length-3?i.length-1:e+2],t.set(An(n,r.x,a.x,s.x,i.x),An(n,r.y,a.y,s.y,i.y)),t},zn.prototype.copy=function(e){Tn.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this},zn.prototype.toJSON=function(){var e=Tn.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e},zn.prototype.fromJSON=function(e){Tn.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var n=e.points[t];this.points.push((new W).fromArray(n))}return this};var Yo=Object.freeze({ArcCurve:Mn,CatmullRomCurve3:Cn,CubicBezierCurve:Rn,CubicBezierCurve3:On,EllipseCurve:En,LineCurve:In,LineCurve3:Dn,QuadraticBezierCurve:kn,QuadraticBezierCurve3:Nn,SplineCurve:zn});Bn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Bn,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new In(t,e))},getPoint:function(e){var t=e*this.getLength(),i=this.getCurveLengths();for(e=0;e<i.length;){if(i[e]>=t)return t=i[e]-t,i=(e=this.curves[e]).getLength(),e.getPointAt(0===i?0:1-t/i);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,i=[],n=0,r=this.curves;n<r.length;n++){var a=r[n];a=a.getPoints(a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e);for(var s=0;s<a.length;s++){var o=a[s];t&&t.equals(o)||(i.push(o),t=o)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(e){Tn.prototype.copy.call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=Tn.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){Tn.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var n=e.curves[t];this.curves.push((new Yo[n.type]).fromJSON(n))}return this}}),Hn.prototype=Object.assign(Object.create(Bn.prototype),{constructor:Hn,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new In(this.currentPoint.clone(),new W(e,t));this.curves.push(i),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,n){e=new kn(this.currentPoint.clone(),new W(e,t),new W(i,n)),this.curves.push(e),this.currentPoint.set(i,n)},bezierCurveTo:function(e,t,i,n,r,a){e=new Rn(this.currentPoint.clone(),new W(e,t),new W(i,n),new W(r,a)),this.curves.push(e),this.currentPoint.set(r,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);t=new zn(t),this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,n,r,a){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,a)},absarc:function(e,t,i,n,r,a){this.absellipse(e,t,i,i,n,r,a)},ellipse:function(e,t,i,n,r,a,s,o){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,a,s,o)},absellipse:function(e,t,i,n,r,a,s,o){e=new En(e,t,i,n,r,a,s,o),0<this.curves.length&&((t=e.getPoint(0)).equals(this.currentPoint)||this.lineTo(t.x,t.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e)},copy:function(e){return Bn.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Bn.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Bn.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Fn.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Fn,getPointsHoles:function(e){for(var t=[],i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Hn.prototype.copy.call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=Hn.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){Hn.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var n=e.holes[t];this.holes.push((new Hn).fromJSON(n))}return this}}),Un.prototype=Object.assign(Object.create(u.prototype),{constructor:Un,isLight:!0,copy:function(e){return u.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return(e=u.prototype.toJSON.call(this,e)).object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Gn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Gn,isHemisphereLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Vn.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),jn.prototype=Object.assign(Object.create(Vn.prototype),{constructor:jn,isSpotLightShadow:!0,update:function(e){var t=this.camera,i=2*ya.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height;e=e.distance||t.far,i===t.fov&&n===t.aspect&&e===t.far||(t.fov=i,t.aspect=n,t.far=e,t.updateProjectionMatrix())}}),Wn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Wn,isSpotLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Xn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Xn,isPointLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Yn.prototype=Object.assign(Object.create(pt.prototype),{constructor:Yn,isOrthographicCamera:!0,copy:function(e,t){return pt.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e;if(i+=e,e=n+t,t=n-t,null!==this.view&&this.view.enabled){i=this.zoom/(this.view.width/this.view.fullWidth),t=this.zoom/(this.view.height/this.view.fullHeight);var a=(this.right-this.left)/this.view.width;n=(this.top-this.bottom)/this.view.height,i=(r+=this.view.offsetX/i*a)+this.view.width/i*a,t=(e-=this.view.offsetY/t*n)-this.view.height/t*n}this.projectionMatrix.makeOrthographic(r,i,e,t,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){return(e=u.prototype.toJSON.call(this,e)).object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),qn.prototype=Object.assign(Object.create(Vn.prototype),{constructor:qn}),$n.prototype=Object.assign(Object.create(Un.prototype),{constructor:$n,isDirectionalLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Zn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Zn,isAmbientLight:!0}),Jn.prototype=Object.assign(Object.create(Un.prototype),{constructor:Jn,isRectAreaLight:!0,copy:function(e){return Un.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return(e=Un.prototype.toJSON.call(this,e)).object.width=this.width,e.object.height=this.height,e}}),Object.assign(Kn.prototype,{load:function(e,t,i,n){var r=this,a=new gn(r.manager);a.setPath(r.path),a.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},parse:function(e){function t(e){return void 0===i[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),i[e]}var i=this.textures,n=new Bo[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.uniforms)for(var r in e.uniforms){var a=e.uniforms[r];switch(n.uniforms[r]={},a.type){case"t":n.uniforms[r].value=t(a.value);break;case"c":n.uniforms[r].value=(new p).setHex(a.value);break;case"v2":n.uniforms[r].value=(new W).fromArray(a.value);break;case"v3":n.uniforms[r].value=(new Te).fromArray(a.value);break;case"v4":n.uniforms[r].value=(new Ee).fromArray(a.value);break;case"m3":n.uniforms[r].value=(new g).fromArray(a.value);case"m4":n.uniforms[r].value=(new we).fromArray(a.value);break;default:n.uniforms[r].value=a.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var s in e.extensions)n.extensions[s]=e.extensions[s];return void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=t(e.map)),void 0!==e.alphaMap&&(n.alphaMap=t(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=t(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale&&(r=e.normalScale,!1===Array.isArray(r)&&(r=[r,r]),n.normalScale=(new W).fromArray(r)),void 0!==e.displacementMap&&(n.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=t(e.specularMap)),void 0!==e.envMap&&(n.envMap=t(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=t(e.gradientMap)),n},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var qo={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};Object.assign(Qn.prototype,{load:function(e,t,i,n){var r=this,a=new gn(r.manager);a.setPath(r.path),a.load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},parse:function(e){var t=new L,i=e.data.index;void 0!==i&&(i=new $o[i.type](i.array),t.setIndex(new m(i,1)));var n=e.data.attributes;for(a in n){var r=n[a];i=new $o[r.type](r.array),t.addAttribute(a,new m(i,r.itemSize,r.normalized))}var a=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==a)for(i=0,n=a.length;i!==n;++i)r=a[i],t.addGroup(r.start,r.count,r.materialIndex);return void 0!==(a=e.data.boundingSphere)&&(i=new Te,void 0!==a.center&&i.fromArray(a.center),t.boundingSphere=new s(i,a.radius)),e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var $o={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(er.prototype,{crossOrigin:"anonymous",load:function(i,n,e,r){var a=this,t=void 0===this.path?qo.extractUrlBase(i):this.path;this.resourcePath=this.resourcePath||t,(t=new gn(a.manager)).setPath(this.path),t.load(i,function(e){var t=null;try{t=JSON.parse(e)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+i+".",e.message)}void 0===(e=t.metadata)||void 0===e.type||"geometry"===e.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+i):a.parse(t,n)},e,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var i=this.parseShape(e.shapes);i=this.parseGeometries(e.geometries,i);var n=this.parseImages(e.images,function(){void 0!==t&&t(r)});n=this.parseTextures(e.textures,n),n=this.parseMaterials(e.materials,n);var r=this.parseObject(e.object,i,n);return e.animations&&(r.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0===t||t(r),r},parseShape:function(e){var t={};if(void 0!==e)for(var i=0,n=e.length;i<n;i++){var r=(new Fn).fromJSON(e[i]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var i={};if(void 0!==e)for(var n=new Qn,r=0,a=e.length;r<a;r++){var s=e[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":var o=new zo[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new zo[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new zo[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new zo[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new zo[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new zo[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new zo[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new zo[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new zo[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new zo[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new zo[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new zo[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":o=[];for(var l=0,c=s.shapes.length;l<c;l++){var h=t[s.shapes[l]];o.push(h)}o=new zo[s.type](o,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(o=[],l=0,c=s.shapes.length;l<c;l++)h=t[s.shapes[l]],o.push(h);void 0!==(l=s.options.extrudePath)&&(s.options.extrudePath=(new Yo[l.type]).fromJSON(l)),o=new zo[s.type](o,s.options);break;case"BufferGeometry":o=n.parse(s);break;case"Geometry":"THREE"in window&&"LegacyJSONLoader"in THREE?o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry:console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),i[s.uuid]=o}return i},parseMaterials:function(e,t){var i={},n={};if(void 0!==e){var r=new Kn;r.setTextures(t),t=0;for(var a=e.length;t<a;t++){var s=e[t];if("MultiMaterial"===s.type){for(var o=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===i[c.uuid]&&(i[c.uuid]=r.parse(c)),o.push(i[c.uuid])}n[s.uuid]=o}else void 0===i[s.uuid]&&(i[s.uuid]=r.parse(s)),n[s.uuid]=i[s.uuid]}}return n},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i],r=pn.parse(n);void 0!==n.uuid&&(r.uuid=n.uuid),t.push(r)}return t},parseImages:function(e,t){function i(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}var n=this,r={};if(void 0!==e&&0<e.length){var a=new xn(t=new mn(t));a.setCrossOrigin(this.crossOrigin),t=0;for(var s=e.length;t<s;t++){var o=e[t],l=o.url;if(Array.isArray(l)){r[o.uuid]=[];for(var c=0,h=l.length;c<h;c++){var u=l[c];u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u,r[o.uuid].push(i(u))}}else u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o.url)?o.url:n.resourcePath+o.url,r[o.uuid]=i(u)}}return r},parseTextures:function(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var o=Array.isArray(t[s.image])?new G(t[s.image]):new d(t[s.image]);o.needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=i(s.mapping,el)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=i(s.wrap[0],tl),o.wrapT=i(s.wrap[1],tl)),void 0!==s.format&&(o.format=s.format),void 0!==s.type&&(o.type=s.type),void 0!==s.encoding&&(o.encoding=s.encoding),void 0!==s.minFilter&&(o.minFilter=i(s.minFilter,il)),void 0!==s.magFilter&&(o.magFilter=i(s.magFilter,il)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(o.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(o.unpackAlignment=s.unpackAlignment),n[s.uuid]=o}return n},parseObject:function(e,t,a){function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function n(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i];void 0===a[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(a[r])}return t}return void 0===a[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),a[e]}}switch(e.type){case"Scene":var r=new wt;void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new p(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new bt(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new xt(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new ft(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Yn(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new Zn(e.color,e.intensity);break;case"DirectionalLight":r=new $n(e.color,e.intensity);break;case"PointLight":r=new Xn(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new Jn(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new Wn(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new Gn(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":r=i(e.geometry);var s=n(e.material);r=r.bones&&0<r.bones.length?new At(r,s):new F(r,s),void 0!==e.drawMode&&r.setDrawMode(e.drawMode);break;case"LOD":r=new Ct;break;case"Line":r=new Ot(i(e.geometry),n(e.material),e.mode);break;case"LineLoop":r=new Dt(i(e.geometry),n(e.material));break;case"LineSegments":r=new It(i(e.geometry),n(e.material));break;case"PointCloud":case"Points":r=new Nt(i(e.geometry),n(e.material));break;case"Sprite":r=new St(n(e.material));break;case"Group":r=new dt;break;default:r=new u}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children){s=e.children;for(var o=0;o<s.length;o++)r.add(this.parseObject(s[o],t,a))}if("LOD"===e.type)for(e=e.levels,s=0;s<e.length;s++){o=e[s];var l=r.getObjectByProperty("uuid",o.object);void 0!==l&&r.addLevel(l,o.distance)}return r}});var Zo,Jo,Ko,Qo,el={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},tl={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},il={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};tr.prototype={constructor:tr,setOptions:function(e){return this.options=e,this},load:function(t,i,e,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=Fo.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){i&&i(a),r.manager.itemEnd(t)},0),a;fetch(t).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(e){Fo.add(t,e),i&&i(e),r.manager.itemEnd(t)}).catch(function(e){n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(ir.prototype,{moveTo:function(e,t){this.currentPath=new Hn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,n){this.currentPath.quadraticCurveTo(e,t,i,n)},bezierCurveTo:function(e,t,i,n,r,a){this.currentPath.bezierCurveTo(e,t,i,n,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){for(var t=[],i=0,n=e.length;i<n;i++){var r=e[i],a=new Fn;a.curves=r.curves,t.push(a)}return t}function n(e,t){for(var i=t.length,n=!1,r=i-1,a=0;a<i;r=a++){var s=t[r],o=t[a],l=o.x-s.x,c=o.y-s.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(s=t[a],l=-l,o=t[r],c=-c),!(e.y<s.y||e.y>o.y))if(e.y===s.y){if(e.x===s.x)return!0}else{if(0===(r=c*(e.x-s.x)-l*(e.y-s.y)))return!0;r<0||(n=!n)}}else if(e.y===s.y&&(o.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=o.x))return!0}return n}var r=ko.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return i(a);if(t=[],1===a.length){var s=a[0],o=new Fn;return o.curves=s.curves,t.push(o),t}var l=!r(a[0].getPoints());l=e?!l:l,o=[];var c=[],h=[],u=0;c[u]=void 0,h[u]=[];for(var d=0,p=a.length;d<p;d++){var f=(s=a[d]).getPoints(),m=r(f);(m=e?!m:m)?(!l&&c[u]&&u++,c[u]={s:new Fn,p:f},c[u].s.curves=s.curves,l&&u++,h[u]=[]):h[u].push({h:s,p:f[0]})}if(!c[0])return i(a);if(1<c.length){for(d=!1,e=[],r=0,a=c.length;r<a;r++)o[r]=[];for(r=0,a=c.length;r<a;r++)for(s=h[r],m=0;m<s.length;m++){for(l=s[m],u=!0,f=0;f<c.length;f++)n(l.p,c[f].p)&&(r!==f&&e.push({froms:r,tos:f,hole:m}),u?(u=!1,o[f].push(l)):d=!0);u&&o[r].push(l)}0<e.length&&(d||(h=o))}for(d=0,r=c.length;d<r;d++)for(o=c[d].s,t.push(o),a=0,s=(e=h[d]).length;a<s;a++)o.holes.push(e[a].h);return t}}),Object.assign(nr.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);var i=[],n=t;t=this.data;var r=Array.from?Array.from(e):String(e).split("");n/=t.resolution;var a=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*n;e=[];for(var s=0,o=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,o-=a;else{var h=n,u=s,d=o;if(c=t.glyphs[c]||t.glyphs["?"]){var p=new ir;if(c.o)for(var f=c._cachedOutline||(c._cachedOutline=c.o.split(" ")),m=0,g=f.length;m<g;)switch(f[m++]){case"m":var v=f[m++]*h+u,y=f[m++]*h+d;p.moveTo(v,y);break;case"l":v=f[m++]*h+u,y=f[m++]*h+d,p.lineTo(v,y);break;case"q":var _=f[m++]*h+u,x=f[m++]*h+d,b=f[m++]*h+u,w=f[m++]*h+d;p.quadraticCurveTo(b,w,_,x);break;case"b":_=f[m++]*h+u,x=f[m++]*h+d,b=f[m++]*h+u,w=f[m++]*h+d,v=f[m++]*h+u,y=f[m++]*h+d,p.bezierCurveTo(b,w,v,y,_,x)}h={offsetX:c.ha*h,path:p}}else h=void 0;s+=h.offsetX,e.push(h.path)}}for(t=0,r=e.length;t<r;t++)Array.prototype.push.apply(i,e[t].toShapes());return i}}),Object.assign(rr.prototype,{load:function(e,n,t,i){var r=this,a=new gn(this.manager);a.setPath(this.path),a.load(e,function(t){try{var i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}t=r.parse(i),n&&n(t)},t,i)},parse:function(e){return new nr(e)},setPath:function(e){return this.path=e,this}}),ar.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,n=t.length;i<n;i+=2){var r=t[i+1];if(t[i].test(e))return r}return null}},Object.assign(ar.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,i){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t,i);return n},createMaterial:(Zo={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},Jo=new p,Ko=new wn,Qo=new Kn,function(e,s,o){function t(e,t,i,n,r){e=s+e;var a=ar.Handlers.get(e);return e=null!==a?a.load(e):(Ko.setCrossOrigin(o),Ko.load(e)),void 0!==t&&(e.repeat.fromArray(t),1!==t[0]&&(e.wrapS=1e3),1!==t[1]&&(e.wrapT=1e3)),void 0!==i&&e.offset.fromArray(i),void 0!==n&&("repeat"===n[0]&&(e.wrapS=1e3),"mirror"===n[0]&&(e.wrapS=1002),"repeat"===n[1]&&(e.wrapT=1e3),"mirror"===n[1]&&(e.wrapT=1002)),void 0!==r&&(e.anisotropy=r),t=ya.generateUUID(),l[t]=e,t}var i,l={},n={uuid:ya.generateUUID(),type:"MeshLambertMaterial"};for(i in e){var r=e[i];switch(i){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":n.name=r;break;case"blending":n.blending=Zo[r];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",i,"is no longer supported.");break;case"colorDiffuse":n.color=Jo.fromArray(r).getHex();break;case"colorSpecular":n.specular=Jo.fromArray(r).getHex();break;case"colorEmissive":n.emissive=Jo.fromArray(r).getHex();break;case"specularCoef":n.shininess=r;break;case"shading":"basic"===r.toLowerCase()&&(n.type="MeshBasicMaterial"),"phong"===r.toLowerCase()&&(n.type="MeshPhongMaterial"),"standard"===r.toLowerCase()&&(n.type="MeshStandardMaterial");break;case"mapDiffuse":n.map=t(r,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":n.emissiveMap=t(r,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":n.lightMap=t(r,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":n.aoMap=t(r,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":n.bumpMap=t(r,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":n.bumpScale=r;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":n.normalMap=t(r,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":n.normalScale=r;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":n.specularMap=t(r,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":n.metalnessMap=t(r,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":n.roughnessMap=t(r,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":n.alphaMap=t(r,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":n.side=1;break;case"doubleSided":n.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),n.opacity=r;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":n[i]=r;break;case"vertexColors":!0===r&&(n.vertexColors=2),"face"===r&&(n.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",i,r)}}return"MeshBasicMaterial"===n.type&&delete n.emissive,"MeshPhongMaterial"!==n.type&&delete n.specular,n.opacity<1&&(n.transparent=!0),Qo.setTextures(l),Qo.parse(n)})});var nl,rl,al,sl,ol,ll,cl,hl,ul,dl,pl,fl,ml,gl,vl,yl,_l,xl,bl,wl,Tl,El,Ml,Sl,Cl,Al,Pl,Ll,Rl,Ol,Il,Dl,kl,Nl,zl,Bl,Hl,Fl,Ul,Gl,Vl,jl,Wl,Xl,Yl,ql,$l,Zl={getContext:function(){return void 0===nl&&(nl=new(window.AudioContext||window.webkitAudioContext)),nl},setContext:function(e){nl=e}};Object.assign(sr.prototype,{load:function(e,t,i,n){var r=new gn(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(e,function(e){e=e.slice(0),Zl.getContext().decodeAudioData(e,function(e){t(e)})},i,n)},setPath:function(e){return this.path=e,this}}),Object.assign(or.prototype,{update:(dl=new we,pl=new we,function(e){if(rl!==this||al!==e.focus||sl!==e.fov||ol!==e.aspect*this.aspect||ll!==e.near||cl!==e.far||hl!==e.zoom||ul!==this.eyeSep){rl=this,al=e.focus,sl=e.fov,ol=e.aspect*this.aspect,ll=e.near,cl=e.far,hl=e.zoom;var t=e.projectionMatrix.clone(),i=(ul=this.eyeSep/2)*ll/al,n=ll*Math.tan(ya.DEG2RAD*sl*.5)/hl;pl.elements[12]=-ul,dl.elements[12]=ul;var r=-n*ol+i,a=n*ol+i;t.elements[0]=2*ll/(a-r),t.elements[8]=(a+r)/(a-r),this.cameraL.projectionMatrix.copy(t),r=-n*ol-i,a=n*ol-i,t.elements[0]=2*ll/(a-r),t.elements[8]=(a+r)/(a-r),this.cameraR.projectionMatrix.copy(t)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(pl),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(dl)})}),(lr.prototype=Object.create(u.prototype)).constructor=lr,Object.assign(cr.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),hr.prototype=Object.assign(Object.create(u.prototype),{constructor:hr,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:(fl=new Te,ml=new T,gl=new Te,vl=new Te,yl=new cr,function(e){u.prototype.updateMatrixWorld.call(this,e),e=this.context.listener;var t=this.up;if(this.timeDelta=yl.getDelta(),this.matrixWorld.decompose(fl,ml,gl),vl.set(0,0,-1).applyQuaternion(ml),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(fl.x,i),e.positionY.linearRampToValueAtTime(fl.y,i),e.positionZ.linearRampToValueAtTime(fl.z,i),e.forwardX.linearRampToValueAtTime(vl.x,i),e.forwardY.linearRampToValueAtTime(vl.y,i),e.forwardZ.linearRampToValueAtTime(vl.z,i),e.upX.linearRampToValueAtTime(t.x,i),e.upY.linearRampToValueAtTime(t.y,i),e.upZ.linearRampToValueAtTime(t.z,i)}else e.setPosition(fl.x,fl.y,fl.z),e.setOrientation(vl.x,vl.y,vl.z,t.x,t.y,t.z)})}),ur.prototype=Object.assign(Object.create(u.prototype),{constructor:ur,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),dr.prototype=Object.assign(Object.create(ur.prototype),{constructor:dr,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this},updateMatrixWorld:(_l=new Te,xl=new T,bl=new Te,wl=new Te,function(e){if(u.prototype.updateMatrixWorld.call(this,e),!1!==this.isPlaying)if(this.matrixWorld.decompose(_l,xl,bl),wl.set(0,0,1).applyQuaternion(xl),(e=this.panner).positionX){var t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(_l.x,t),e.positionY.linearRampToValueAtTime(_l.y,t),e.positionZ.linearRampToValueAtTime(_l.z,t),e.orientationX.linearRampToValueAtTime(wl.x,t),e.orientationY.linearRampToValueAtTime(wl.y,t),e.orientationZ.linearRampToValueAtTime(wl.z,t)}else e.setPosition(_l.x,_l.y,_l.z),e.setOrientation(wl.x,wl.y,wl.z)})}),Object.assign(pr.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}),Object.assign(fr.prototype,{accumulate:function(e,t){var i=this.buffer,n=this.valueSize;e=e*n+n;var r=this.cumulativeWeight;if(0===r){for(r=0;r!==n;++r)i[e+r]=i[r];r=t}else r+=t,this._mixBufferRegion(i,e,0,t/r,n);this.cumulativeWeight=r},apply:function(e){var t=this.valueSize,i=this.buffer;e=e*t+t;var n=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,n<1&&this._mixBufferRegion(i,e,3*t,1-n,t);for(var a=(n=t)+t;n!==a;++n)if(i[n]!==i[n+t]){r.setValue(i,e);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,i=3*t;this.binding.getValue(e,i);for(var n=t;n!==i;++n)e[n]=e[i+n%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,i,n,r){if(.5<=n)for(n=0;n!==r;++n)e[t+n]=e[i+n]},_slerp:function(e,t,i,n){T.slerpFlat(e,t,e,t,e,i,n)},_lerp:function(e,t,i,n,r){for(var a=1-n,s=0;s!==r;++s){var o=t+s;e[o]=e[o]*a+e[i+s]*n}}}),Object.assign(mr.prototype,{getValue:function(e,t){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(gr,{Composite:mr,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new gr.Composite(e,t,i):new gr(e,t,i)},sanitizeNodeName:(Tl=/[\[\]\.:\/]/g,function(e){return e.replace(/\s/g,"_").replace(Tl,"")}),parseTrackName:function(){var e="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",t=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");e=/(WCOD+)?/.source.replace("WCOD",e);var i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),n=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),r=new RegExp("^"+t+e+i+n+"$"),a=["material","materials","bones"];return function(e){var t=r.exec(e);if(!t)throw Error("PropertyBinding: Cannot parse trackName: "+e);var i=(t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]}).nodeName&&t.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=t.nodeName.substring(i+1);-1!==a.indexOf(n)&&(t.nodeName=t.nodeName.substring(0,i),t.objectName=n)}if(null===t.propertyName||0===t.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t}}(),findNode:function(e,n){if(!n||""===n||"root"===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){var t=e.skeleton.getBoneByName(n);if(void 0!==t)return t}if(e.children){var r=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.name===n||i.uuid===n||(i=r(i.children)))return i}return null};if(e=r(e.children))return e}return null}}),Object.assign(gr.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)e[t++]=i[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(e||(this.node=e=gr.findNode(this.rootNode,t.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var a=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(e=e.skeleton.bones,i=0;i<e.length;i++)if(e[i].name===a){a=i;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}if(void 0===(a=e[n]))console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+n+" but it wasn't found.",e);else{if(t=this.Versioning.None,void 0!==(this.targetObject=e).needsUpdate?t=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(t=this.Versioning.MatrixWorldNeedsUpdate),i=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(i=0;i<this.node.geometry.morphAttributes.position.length;i++)if(e.geometry.morphAttributes.position[i].name===r){r=i;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(i=0;i<this.node.geometry.morphTargets.length;i++)if(e.geometry.morphTargets[i].name===r){r=i;break}}}i=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(i=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][t]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(gr.prototype,{_getValue_unbound:gr.prototype.getValue,_setValue_unbound:gr.prototype.setValue}),Object.assign(vr.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length,l=void 0,c=0,h=arguments.length;c!==h;++c){var u=arguments[c],d=u.uuid,p=n[d];if(void 0===p){p=t++,n[d]=p,e.push(u),d=0;for(var f=o;d!==f;++d)s[d].push(new gr(u,r[d],a[d]))}else if(p<i){l=e[p];var m=--i;for(e[n[(f=e[m]).uuid]=p]=f,e[n[d]=m]=u,d=0,f=o;d!==f;++d){var g=s[d],v=g[p];g[p]=g[m],void 0===v&&(v=new gr(u,r[d],a[d])),g[m]=v}}else e[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,a=0,s=arguments.length;a!==s;++a){var o=arguments[a],l=o.uuid,c=i[l];if(void 0!==c&&t<=c){var h=t++,u=e[h];for(e[i[u.uuid]=c]=u,e[i[l]=h]=o,o=0,l=r;o!==l;++o){var d=(u=n[o])[c];u[c]=u[h],u[h]=d}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,a=r.length,s=0,o=arguments.length;s!==o;++s){var l=arguments[s].uuid,c=n[l];if(void 0!==c)if(delete n[l],c<i){var h=e[l=--i],u=--t,d=e[u];for(e[n[h.uuid]=c]=h,e[n[d.uuid]=l]=d,e.pop(),h=0,d=a;h!==d;++h){var p=r[h],f=p[u];p[c]=p[l],p[l]=f,p.pop()}}else for(e[n[(d=e[u=--t]).uuid]=c]=d,e.pop(),h=0,d=a;h!==d;++h)(p=r[h])[c]=p[u],p.pop()}this.nCachedObjects_=i},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,n=i[e],r=this._bindings;if(void 0!==n)return r[n];var a=this._paths,s=this._parsedPaths,o=this._objects,l=this.nCachedObjects_,c=Array(o.length);for(n=r.length,i[e]=n,a.push(e),s.push(t),r.push(c),i=l,n=o.length;i!==n;++i)c[i]=new gr(o[i],e,t);return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){var n=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];a[t[e[s]]=i]=o,a.pop(),r[i]=r[s],r.pop(),n[i]=n[s],n.pop()}}}),Object.assign(yr.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){i=this._clip.duration;var n=e._clip.duration,r=i/n;e.warp(1,n/i,t),this.warp(r,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var n=this._mixer,r=n.time,a=this._timeScaleInterpolant,s=this.timeScale;return null===a&&(this._timeScaleInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,n[1]=r+i,a[0]=e/s,a[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,n){if(this.enabled){var r=this._startTime;if(null!==r){if((t=(e-r)*i)<0||0===i)return;this._startTime=null,t*=i}if(t*=this._updateTimeScale(e),i=this._updateTime(t),0<(e=this._updateWeight(e))){t=this._interpolants,r=this._propertyBindings;for(var a=0,s=t.length;a!==s;++a)t[a].evaluate(i),r[a].accumulate(n,e)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i)t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e,i=this._clip.duration,n=this.loop,r=this._loopCount,a=2202===n;if(0===e)return-1===r?t:a&&1==(1&r)?i-t:t;if(2200===n)e:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),i<=t)t=i;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}else{if(-1===r&&(0<=e?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i<=t||t<0){t-=i*(n=Math.floor(t/i)),r+=Math.abs(n);var s=this.repetitions-r;s<=0?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<e?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1})):(1===s?(e=e<0,this._setEndings(e,!e,a)):this._setEndings(!1,!1,a),this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n}))}if(a&&1==(1&r))return i-(this.time=t)}return this.time=t},_setEndings:function(e,t,i){var n=this._interpolantSettings;n.endingEnd=i?n.endingStart=2401:(n.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,i){var n=this._mixer,r=n.time,a=this._weightInterpolant;return null===a&&(this._weightInterpolant=a=n._lendControlInterpolant()),n=a.parameterPositions,a=a.sampleValues,n[0]=r,a[0]=t,n[1]=r+e,a[1]=i,this}}),_r.prototype=Object.assign(Object.create(t.prototype),{constructor:_r,_bindAction:function(e,t){var i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,a=e._propertyBindings;e=e._interpolants;var s=i.uuid,o=this._bindingsByRootAndName,l=o[s];for(void 0===l&&(l={},o[s]=l),o=0;o!==r;++o){var c=n[o],h=c.name,u=l[h];if(void 0===u){if(void 0!==(u=a[o])){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,h));continue}++(u=new fr(gr.create(i,h,t&&t._propertyBindings[o].binding.parsedPath),c.ValueTypeName,c.getValueSize())).referenceCount,this._addInactiveBinding(u,s,h)}a[o]=u,e[o].resultBuffer=u.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}for(i=0,n=(t=e._propertyBindings).length;i!==n;++i){var r=t[i];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return null!==(e=e._cacheIndex)&&e<this._nActiveActions},_addInactiveAction:function(e,t,i){var n=this._actions,r=this._actionsByClip,a=r[t];void 0===a?(a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a):(t=a.knownActions,e._byClipCacheIndex=t.length,t.push(e)),e._cacheIndex=n.length,n.push(e),a.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex;t[i._cacheIndex=n]=i,t.pop(),e._cacheIndex=null,t=e._clip.uuid;var r=(n=(i=this._actionsByClip)[t]).knownActions,a=r[r.length-1],s=e._byClipCacheIndex;r[a._byClipCacheIndex=s]=a,r.pop(),e._byClipCacheIndex=null,delete n.actionByRoot[(e._localRoot||this._root).uuid],0===r.length&&delete i[t],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=0,i=(e=e._propertyBindings).length;t!==i;++t){var n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r},_addInactiveBinding:function(e,t,i){var n=this._bindingsByRootAndName,r=n[t],a=this._bindings;void 0===r&&(r={},n[t]=r),(r[i]=e)._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid;i=i.path;var r=this._bindingsByRootAndName,a=r[n],s=t[t.length-1];e=e._cacheIndex,t[s._cacheIndex=e]=s,t.pop(),delete a[i];e:{for(var o in a)break e;delete r[n]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];t[e._cacheIndex=n]=e,t[r._cacheIndex=i]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&(e[(i=new nn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t]=i),i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];t[e.__cacheIndex=n]=e,t[r.__cacheIndex=i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,n=i.uuid;e=null!==(i="string"==typeof e?pn.findByName(i,e):e)?i.uuid:e;var r=this._actionsByClip[e],a=null;if(void 0!==r){if(void 0!==(a=r.actionByRoot[n]))return a;a=r.knownActions[0],null===i&&(i=a._clip)}return null===i?null:(t=new yr(this,i,t),this._bindAction(t,a),this._addInactiveAction(t,e,n),t)},existingAction:function(e,t){var i=t||this._root;return t=i.uuid,i="string"==typeof e?pn.findByName(i,e):e,void 0!==(e=this._actionsByClip[i?i.uuid:e])&&e.actionByRoot[t]||null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==t;++r)e[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,s=0;s!==i;++s)t[s]._update(n,e,r,a);for(e=this._bindings,t=this._nActiveBindings,s=0;s!==t;++s)e[s].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions;e=e.uuid;var i=this._actionsByClip,n=i[e];if(void 0!==n){for(var r=0,a=(n=n.knownActions).length;r!==a;++r){var s=n[r];this._deactivateAction(s);var o=s._cacheIndex,l=t[t.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,t[l._cacheIndex=o]=l,t.pop(),this._removeInactiveBindingsForAction(s)}delete i[e]}},uncacheRoot:function(e){e=e.uuid;var t=this._actionsByClip;for(n in t){var i=t[n].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[e];if(void 0!==n)for(var r in n)(e=n[r]).restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,t){null!==(e=this.existingAction(e,t))&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),xr.prototype.clone=function(){return new xr(void 0===this.value.clone?this.value:this.value.clone())},br.prototype=Object.assign(Object.create(L.prototype),{constructor:br,isInstancedBufferGeometry:!0,copy:function(e){return L.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),wr.prototype=Object.assign(Object.create(Tt.prototype),{constructor:wr,isInstancedInterleavedBuffer:!0,copy:function(e){return Tt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Tr.prototype=Object.assign(Object.create(m.prototype),{constructor:Tr,isInstancedBufferAttribute:!0,copy:function(e){return m.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Er.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,i){return Sr(e,this,i=i||[],t),i.sort(Mr),i},intersectObjects:function(e,t,i){if(i=i||[],!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=e.length;n<r;n++)Sr(e[n],this,i,t);return i.sort(Mr),i}}),Object.assign(Cr.prototype,{set:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(e,i),this.phi=Math.acos(ya.clamp(t/this.radius,-1,1))),this}}),Object.assign(Ar.prototype,{set:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}}),Object.assign(Pr.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(Ml=new W,function(e,t){return t=Ml.copy(t).multiplyScalar(.5),this.min.copy(e).sub(t),this.max.copy(e).add(t),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new W),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new W),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new W),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new W),t.copy(e).clamp(this.min,this.max)},distanceToPoint:(El=new W,function(e){return El.copy(e).clamp(this.min,this.max).sub(e).length()}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Lr.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Te),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Te),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Te),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Sl=new Te,Cl=new Te,function(e,t){return Sl.subVectors(e,this.start),Cl.subVectors(this.end,this.start),e=Cl.dot(Cl),e=Cl.dot(Sl)/e,t&&(e=ya.clamp(e,0,1)),e}),closestPointToPoint:function(e,t,i){return e=this.closestPointToPointParameter(e,t),void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new Te),this.delta(i).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),((Rr.prototype=Object.create(u.prototype)).constructor=Rr).prototype.isImmediateRenderObject=!0,((Or.prototype=Object.create(It.prototype)).constructor=Or).prototype.update=(Al=new Te,Pl=new Te,Ll=new g,function(){var e=["a","b","c"];this.object.updateMatrixWorld(!0),Ll.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,i=this.geometry.attributes.position,n=this.object.geometry;if(n&&n.isGeometry)for(var r=n.vertices,a=n.faces,s=n=0,o=a.length;s<o;s++)for(var l=a[s],c=0,h=l.vertexNormals.length;c<h;c++){var u=l.vertexNormals[c];Al.copy(r[l[e[c]]]).applyMatrix4(t),Pl.copy(u).applyMatrix3(Ll).normalize().multiplyScalar(this.size).add(Al),i.setXYZ(n,Al.x,Al.y,Al.z),n+=1,i.setXYZ(n,Pl.x,Pl.y,Pl.z),n+=1}else if(n&&n.isBufferGeometry)for(e=n.attributes.position,r=n.attributes.normal,c=n=0,h=e.count;c<h;c++)Al.set(e.getX(c),e.getY(c),e.getZ(c)).applyMatrix4(t),Pl.set(r.getX(c),r.getY(c),r.getZ(c)),Pl.applyMatrix3(Ll).normalize().multiplyScalar(this.size).add(Al),i.setXYZ(n,Al.x,Al.y,Al.z),n+=1,i.setXYZ(n,Pl.x,Pl.y,Pl.z),n+=1;i.needsUpdate=!0}),((Ir.prototype=Object.create(u.prototype)).constructor=Ir).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ir.prototype.update=(Rl=new Te,function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Rl.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Rl),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}),((Dr.prototype=Object.create(It.prototype)).constructor=Dr).prototype.updateMatrixWorld=(Ol=new Te,Il=new we,Dl=new we,function(e){var t=this.bones,i=this.geometry,n=i.getAttribute("position");Dl.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<t.length;r++){var s=t[r];s.parent&&s.parent.isBone&&(Il.multiplyMatrices(Dl,s.matrixWorld),Ol.setFromMatrixPosition(Il),n.setXYZ(a,Ol.x,Ol.y,Ol.z),Il.multiplyMatrices(Dl,s.parent.matrixWorld),Ol.setFromMatrixPosition(Il),n.setXYZ(a+1,Ol.x,Ol.y,Ol.z),a+=2)}i.getAttribute("position").needsUpdate=!0,u.prototype.updateMatrixWorld.call(this,e)}),((kr.prototype=Object.create(F.prototype)).constructor=kr).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},kr.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},((Nr.prototype=Object.create(Ot.prototype)).constructor=Nr).prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);1<t&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},Nr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},((zr.prototype=Object.create(u.prototype)).constructor=zr).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},zr.prototype.update=(kl=new Te,Nl=new p,zl=new p,function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Nl.copy(this.light.color),zl.copy(this.light.groundColor);for(var i=0,n=t.count;i<n;i++){var r=i<n/2?Nl:zl;t.setXYZ(i,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(kl.setFromMatrixPosition(this.light.matrixWorld).negate())}),(Br.prototype=Object.create(It.prototype)).constructor=Br,(Hr.prototype=Object.create(It.prototype)).constructor=Hr,((Fr.prototype=Object.create(It.prototype)).constructor=Fr).prototype.update=(Bl=new Te,Hl=new Te,Fl=new g,function(){this.object.updateMatrixWorld(!0),Fl.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,i=this.object.geometry,n=i.vertices,r=0,a=0,s=(i=i.faces).length;a<s;a++){var o=i[a],l=o.normal;Bl.copy(n[o.a]).add(n[o.b]).add(n[o.c]).divideScalar(3).applyMatrix4(e),Hl.copy(l).applyMatrix3(Fl).normalize().multiplyScalar(this.size).add(Bl),t.setXYZ(r,Bl.x,Bl.y,Bl.z),r+=1,t.setXYZ(r,Hl.x,Hl.y,Hl.z),r+=1}t.needsUpdate=!0}),((Ur.prototype=Object.create(u.prototype)).constructor=Ur).prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Ur.prototype.update=(Ul=new Te,Gl=new Te,Vl=new Te,function(){Ul.setFromMatrixPosition(this.light.matrixWorld),Gl.setFromMatrixPosition(this.light.target.matrixWorld),Vl.subVectors(Gl,Ul),this.lightPlane.lookAt(Gl),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gl),this.targetLine.scale.z=Vl.length()}),((Gr.prototype=Object.create(It.prototype)).constructor=Gr).prototype.update=function(){function e(e,t,i,n){if(s.set(t,i,n).unproject(o),void 0!==(e=a[e]))for(t=r.getAttribute("position"),i=0,n=e.length;i<n;i++)t.setXYZ(e[i],s.x,s.y,s.z)}var r,a,s=new Te,o=new pt;return function(){r=this.geometry,a=this.pointMap,o.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),r.getAttribute("position").needsUpdate=!0}}(),((Vr.prototype=Object.create(It.prototype)).constructor=Vr).prototype.update=(jl=new n,function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&jl.setFromObject(this.object),!jl.isEmpty()){e=jl.min;var t=jl.max,i=this.geometry.attributes.position,n=i.array;n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=e.x,n[4]=t.y,n[5]=t.z,n[6]=e.x,n[7]=e.y,n[8]=t.z,n[9]=t.x,n[10]=e.y,n[11]=t.z,n[12]=t.x,n[13]=t.y,n[14]=e.z,n[15]=e.x,n[16]=t.y,n[17]=e.z,n[18]=e.x,n[19]=e.y,n[20]=e.z,n[21]=t.x,n[22]=e.y,n[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}),Vr.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Vr.prototype.copy=function(e){return It.prototype.copy.call(this,e),this.object=e.object,this},Vr.prototype.clone=function(){return(new this.constructor).copy(this)},((jr.prototype=Object.create(It.prototype)).constructor=jr).prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),u.prototype.updateMatrixWorld.call(this,e))},((Wr.prototype=Object.create(Ot.prototype)).constructor=Wr).prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),u.prototype.updateMatrixWorld.call(this,e)},((Xr.prototype=Object.create(u.prototype)).constructor=Xr).prototype.setDirection=(ql=new Te,function(e){.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(ql.set(e.z,0,-e.x).normalize(),Yl=Math.acos(e.y),this.quaternion.setFromAxisAngle(ql,Yl))}),Xr.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},Xr.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Xr.prototype.copy=function(e){return u.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Xr.prototype.clone=function(){return(new this.constructor).copy(this)},(Yr.prototype=Object.create(It.prototype)).constructor=Yr,Tn.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Tn.prototype),(e.prototype.constructor=e).prototype.getPoint=t,e},Object.assign(Bn.prototype,{createPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new f,i=0,n=e.length;i<n;i++){var r=e[i];t.vertices.push(new Te(r.x,r.y,r.z||0))}return t}}),Object.assign(Hn.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),qr.prototype=Object.create(Cn.prototype),$r.prototype=Object.create(Cn.prototype),Zr.prototype=Object.create(Cn.prototype),Object.assign(Zr.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Br.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Dr.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(ar.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),qo.extractUrlBase(e)}}),Object.assign(er.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Pr.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(n.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Lr.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(ya,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ya.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ya.ceilPowerOfTwo(e)}}),Object.assign(g.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(we.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return void 0===$l&&($l=new Te),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),$l.setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,n,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,i,r,a)}}),v.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},T.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(z.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(B.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(B,{barycoordFromPoint:function(e,t,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),B.getBarycoord(e,t,i,n,r)},normal:function(e,t,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),B.getNormal(e,t,i,n)}}),Object.assign(Fn.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ti(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Di(this,e)}}),Object.assign(W.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Te.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ee.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(f.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(u.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(u.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ct.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Pt.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),At.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Tn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),ft.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Un.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(m.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(L.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(L.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Ei.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(xr.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(k.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new p}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(qi.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(N.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(_t.prototype,{clearTarget:function(e,t,i,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,i,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(_t.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(lt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(C.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(vt.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),ur.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new sr).load(e,function(e){t.setBuffer(e)}),this},pr.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},lr.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Na.crossOrigin=void 0,Na.loadTexture=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new wn;return r.setCrossOrigin(this.crossOrigin),e=r.load(e,i,void 0,n),t&&(e.mapping=t),e},Na.loadTextureCube=function(e,t,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new bn;return r.setCrossOrigin(this.crossOrigin),e=r.load(e,i,void 0,n),t&&(e.mapping=t),e},Na.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Na.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},e.WebGLMultisampleRenderTarget=i,e.WebGLRenderTargetCube=r,e.WebGLRenderTarget=C,e.WebGLRenderer=_t,e.ShaderLib=Ya,e.UniformsLib=Xa,e.UniformsUtils=Ga,e.ShaderChunk=Ua,e.FogExp2=xt,e.Fog=bt,e.Scene=wt,e.Sprite=St,e.LOD=Ct,e.SkinnedMesh=At,e.Skeleton=Pt,e.Bone=Lt,e.Mesh=F,e.LineSegments=It,e.LineLoop=Dt,e.Line=Ot,e.Points=Nt,e.Group=dt,e.VideoTexture=zt,e.DataTexture=Me,e.DataTexture3D=V,e.CompressedTexture=Bt,e.CubeTexture=G,e.CanvasTexture=Ht,e.DepthTexture=Ft,e.Texture=d,e.AnimationLoader=vn,e.CompressedTextureLoader=yn,e.DataTextureLoader=_n,e.CubeTextureLoader=bn,e.TextureLoader=wn,e.ObjectLoader=er,e.MaterialLoader=Kn,e.BufferGeometryLoader=Qn,e.DefaultLoadingManager=Uo,e.LoadingManager=mn,e.ImageLoader=xn,e.ImageBitmapLoader=tr,e.FontLoader=rr,e.FileLoader=gn,e.Loader=ar,e.LoaderUtils=qo,e.Cache=Fo,e.AudioLoader=sr,e.SpotLightShadow=jn,e.SpotLight=Wn,e.PointLight=Xn,e.RectAreaLight=Jn,e.HemisphereLight=Gn,e.DirectionalLightShadow=qn,e.DirectionalLight=$n,e.AmbientLight=Zn,e.LightShadow=Vn,e.Light=Un,e.StereoCamera=or,e.PerspectiveCamera=ft,e.OrthographicCamera=Yn,e.CubeCamera=lr,e.ArrayCamera=mt,e.Camera=pt,e.AudioListener=hr,e.PositionalAudio=dr,e.AudioContext=Zl,e.AudioAnalyser=pr,e.Audio=ur,e.VectorKeyframeTrack=dn,e.StringKeyframeTrack=un,e.QuaternionKeyframeTrack=hn,e.NumberKeyframeTrack=ln,e.ColorKeyframeTrack=on,e.BooleanKeyframeTrack=sn,e.PropertyMixer=fr,e.PropertyBinding=gr,e.KeyframeTrack=an,e.AnimationUtils=Ho,e.AnimationObjectGroup=vr,e.AnimationMixer=_r,e.AnimationClip=pn,e.Uniform=xr,e.InstancedBufferGeometry=br,e.BufferGeometry=L,e.Geometry=f,e.InterleavedBufferAttribute=Et,e.InstancedInterleavedBuffer=wr,e.InterleavedBuffer=Tt,e.InstancedBufferAttribute=Tr,e.Face3=y,e.Object3D=u,e.Raycaster=Er,e.Layers=l,e.EventDispatcher=t,e.Clock=cr,e.QuaternionLinearInterpolant=cn,e.LinearInterpolant=nn,e.DiscreteInterpolant=rn,e.CubicInterpolant=tn,e.Interpolant=en,e.Triangle=B,e.Math=ya,e.Spherical=Cr,e.Cylindrical=Ar,e.Plane=v,e.Frustum=Se,e.Sphere=s,e.Ray=z,e.Matrix4=we,e.Matrix3=g,e.Box3=n,e.Box2=Pr,e.Line3=Lr,e.Euler=o,e.Vector4=Ee,e.Vector3=Te,e.Vector2=W,e.Quaternion=T,e.Color=p,e.ImmediateRenderObject=Rr,e.VertexNormalsHelper=Or,e.SpotLightHelper=Ir,e.SkeletonHelper=Dr,e.PointLightHelper=kr,e.RectAreaLightHelper=Nr,e.HemisphereLightHelper=zr,e.GridHelper=Br,e.PolarGridHelper=Hr,e.FaceNormalsHelper=Fr,e.DirectionalLightHelper=Ur,e.CameraHelper=Gr,e.BoxHelper=Vr,e.Box3Helper=jr,e.PlaneHelper=Wr,e.ArrowHelper=Xr,e.AxesHelper=Yr,e.Shape=Fn,e.Path=Hn,e.ShapePath=ir,e.Font=nr,e.CurvePath=Bn,e.Curve=Tn,e.ImageUtils=Na,e.ShapeUtils=ko,e.WebGLUtils=ut,e.WireframeGeometry=Ut,e.ParametricGeometry=Gt,e.ParametricBufferGeometry=Vt,e.TetrahedronGeometry=Xt,e.TetrahedronBufferGeometry=Yt,e.OctahedronGeometry=qt,e.OctahedronBufferGeometry=$t,e.IcosahedronGeometry=Zt,e.IcosahedronBufferGeometry=Jt,e.DodecahedronGeometry=Kt,e.DodecahedronBufferGeometry=Qt,e.PolyhedronGeometry=jt,e.PolyhedronBufferGeometry=Wt,e.TubeGeometry=ei,e.TubeBufferGeometry=ti,e.TorusKnotGeometry=ii,e.TorusKnotBufferGeometry=ni,e.TorusGeometry=ri,e.TorusBufferGeometry=ai,e.TextGeometry=Si,e.TextBufferGeometry=Ci,e.SphereGeometry=Ai,e.SphereBufferGeometry=Pi,e.RingGeometry=Li,e.RingBufferGeometry=Ri,e.PlaneGeometry=I,e.PlaneBufferGeometry=D,e.LatheGeometry=Oi,e.LatheBufferGeometry=Ii,e.ShapeGeometry=Di,e.ShapeBufferGeometry=ki,e.ExtrudeGeometry=Ti,e.ExtrudeBufferGeometry=Ei,e.EdgesGeometry=zi,e.ConeGeometry=Fi,e.ConeBufferGeometry=Ui,e.CylinderGeometry=Bi,e.CylinderBufferGeometry=Hi,e.CircleGeometry=Gi,e.CircleBufferGeometry=Vi,e.BoxGeometry=R,e.CubeGeometry=R,e.BoxBufferGeometry=O,e.ShadowMaterial=ji,e.SpriteMaterial=Mt,e.RawShaderMaterial=Wi,e.ShaderMaterial=N,e.PointsMaterial=kt,e.MeshPhysicalMaterial=Yi,e.MeshStandardMaterial=Xi,e.MeshPhongMaterial=qi,e.MeshToonMaterial=$i,e.MeshNormalMaterial=Zi,e.MeshLambertMaterial=Ji,e.MeshDepthMaterial=st,e.MeshDistanceMaterial=ot,e.MeshBasicMaterial=H,e.MeshMatcapMaterial=Ki,e.LineDashedMaterial=Qi,e.LineBasicMaterial=Rt,e.Material=k,e.Float64BufferAttribute=M,e.Float32BufferAttribute=P,e.Uint32BufferAttribute=E,e.Int32BufferAttribute=w,e.Uint16BufferAttribute=b,e.Int16BufferAttribute=x,e.Uint8ClampedBufferAttribute=_,e.Uint8BufferAttribute=h,e.Int8BufferAttribute=c,e.BufferAttribute=m,e.ArcCurve=Mn,e.CatmullRomCurve3=Cn,e.CubicBezierCurve=Rn,e.CubicBezierCurve3=On,e.EllipseCurve=En,e.LineCurve=In,e.LineCurve3=Dn,e.QuadraticBezierCurve=kn,e.QuadraticBezierCurve3=Nn,e.SplineCurve=zn,e.REVISION="101",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=0,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.FrontSide=0,e.BackSide=1,e.DoubleSide=2,e.FlatShading=1,e.SmoothShading=2,e.NoColors=0,e.FaceColors=1,e.VertexColors=2,e.NoBlending=0,e.NormalBlending=1,e.AdditiveBlending=2,e.SubtractiveBlending=3,e.MultiplyBlending=4,e.CustomBlending=5,e.AddEquation=100,e.SubtractEquation=101,e.ReverseSubtractEquation=102,e.MinEquation=103,e.MaxEquation=104,e.ZeroFactor=200,e.OneFactor=201,e.SrcColorFactor=202,e.OneMinusSrcColorFactor=203,e.SrcAlphaFactor=204,e.OneMinusSrcAlphaFactor=205,e.DstAlphaFactor=206,e.OneMinusDstAlphaFactor=207,e.DstColorFactor=208,e.OneMinusDstColorFactor=209,e.SrcAlphaSaturateFactor=210,e.NeverDepth=0,e.AlwaysDepth=1,e.LessDepth=2,e.LessEqualDepth=3,e.EqualDepth=4,e.GreaterEqualDepth=5,e.GreaterDepth=6,e.NotEqualDepth=7,e.MultiplyOperation=0,e.MixOperation=1,e.AddOperation=2,e.NoToneMapping=0,e.LinearToneMapping=1,e.ReinhardToneMapping=2,e.Uncharted2ToneMapping=3,e.CineonToneMapping=4,e.ACESFilmicToneMapping=5,e.UVMapping=300,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.SphericalReflectionMapping=305,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.RepeatWrapping=1e3,e.ClampToEdgeWrapping=1001,e.MirroredRepeatWrapping=1002,e.NearestFilter=1003,e.NearestMipMapNearestFilter=1004,e.NearestMipMapLinearFilter=1005,e.LinearFilter=1006,e.LinearMipMapNearestFilter=1007,e.LinearMipMapLinearFilter=1008,e.UnsignedByteType=1009,e.ByteType=1010,e.ShortType=1011,e.UnsignedShortType=1012,e.IntType=1013,e.UnsignedIntType=1014,e.FloatType=1015,e.HalfFloatType=1016,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedInt248Type=1020,e.AlphaFormat=1021,e.RGBFormat=1022,e.RGBAFormat=1023,e.LuminanceFormat=1024,e.LuminanceAlphaFormat=1025,e.RGBEFormat=1023,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.RedFormat=1028,e.RGB_S3TC_DXT1_Format=33776,e.RGBA_S3TC_DXT1_Format=33777,e.RGBA_S3TC_DXT3_Format=33778,e.RGBA_S3TC_DXT5_Format=33779,e.RGB_PVRTC_4BPPV1_Format=35840,e.RGB_PVRTC_2BPPV1_Format=35841,e.RGBA_PVRTC_4BPPV1_Format=35842,e.RGBA_PVRTC_2BPPV1_Format=35843,e.RGB_ETC1_Format=36196,e.RGBA_ASTC_4x4_Format=37808,e.RGBA_ASTC_5x4_Format=37809,e.RGBA_ASTC_5x5_Format=37810,e.RGBA_ASTC_6x5_Format=37811,e.RGBA_ASTC_6x6_Format=37812,e.RGBA_ASTC_8x5_Format=37813,e.RGBA_ASTC_8x6_Format=37814,e.RGBA_ASTC_8x8_Format=37815,e.RGBA_ASTC_10x5_Format=37816,e.RGBA_ASTC_10x6_Format=37817,e.RGBA_ASTC_10x8_Format=37818,e.RGBA_ASTC_10x10_Format=37819,e.RGBA_ASTC_12x10_Format=37820,e.RGBA_ASTC_12x12_Format=37821,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=0,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=3e3,e.sRGBEncoding=3001,e.GammaEncoding=3007,e.RGBEEncoding=3002,e.LogLuvEncoding=3003,e.RGBM7Encoding=3004,e.RGBM16Encoding=3005,e.RGBDEncoding=3006,e.BasicDepthPacking=3200,e.RGBADepthPacking=3201,e.TangentSpaceNormalMap=0,e.ObjectSpaceNormalMap=1,e.Face4=function(e,t,i,n,r,a,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new y(e,t,i,r,a,s)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,(e.materials=e).clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Nt(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new St(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Nt(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new kt(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new kt(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new kt(e)},e.Vertex=function(e,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Te(e,t,i)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new m(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new c(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new h(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new _(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new x(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new b(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new w(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new E(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new P(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new M(e,t)},e.ClosedSplineCurve3=qr,e.SplineCurve3=$r,e.Spline=Zr,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Yr(e)},e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Vr(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new It(new zi(e.geometry),new Rt({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new It(new Ut(e.geometry),new Rt({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new gn(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new _n(e)},e.GeometryUtils={merge:function(e,t,i){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();var n=t.matrix;t=t.geometry}e.merge(t,n,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},e.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},e.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.dat={})}(this,function(e){"use strict";function t(e,t){var i=e.__state.conversionName.toString(),n=Math.round(e.r),r=Math.round(e.g),a=Math.round(e.b),s=e.a,o=Math.round(e.h),l=e.s.toFixed(1),c=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===i||"SIX_CHAR_HEX"===i){for(var h=e.hex.toString(16);h.length<6;)h="0"+h;return"#"+h}return"CSS_RGB"===i?"rgb("+n+","+r+","+a+")":"CSS_RGBA"===i?"rgba("+n+","+r+","+a+","+s+")":"HEX"===i?"0x"+e.hex.toString(16):"RGB_ARRAY"===i?"["+n+","+r+","+a+"]":"RGBA_ARRAY"===i?"["+n+","+r+","+a+","+s+"]":"RGB_OBJ"===i?"{r:"+n+",g:"+r+",b:"+a+"}":"RGBA_OBJ"===i?"{r:"+n+",g:"+r+",b:"+a+",a:"+s+"}":"HSV_OBJ"===i?"{h:"+o+",s:"+l+",v:"+c+"}":"HSVA_OBJ"===i?"{h:"+o+",s:"+l+",v:"+c+",a:"+s+"}":"unknown format"}var s=Array.prototype.forEach,n=Array.prototype.slice,m={BREAK:{},extend:function(i){return this.each(n.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(e){this.isUndefined(t[e])||(i[e]=t[e])}.bind(this))},this),i},defaults:function(i){return this.each(n.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(e){this.isUndefined(i[e])&&(i[e]=t[e])}.bind(this))},this),i},compose:function(){var i=n.call(arguments);return function(){for(var e=n.call(arguments),t=i.length-1;0<=t;t--)e=[i[t].apply(this,e)];return e[0]}},each:function(e,t,i){if(e)if(s&&e.forEach&&e.forEach===s)e.forEach(t,i);else if(e.length===e.length+0){var n,r=void 0;for(r=0,n=e.length;r<n;r++)if(r in e&&t.call(i,e[r],r)===this.BREAK)return}else for(var a in e)if(t.call(i,e[a],a)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(n,r,a){var s=void 0;return function(){var e=this,t=arguments;var i=a||!s;clearTimeout(s),s=setTimeout(function(){s=null,a||n.apply(e,t)},r),i&&n.apply(e,t)}},toArray:function(e){return e.toArray?e.toArray():n.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},r=[{litmus:m.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:t},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:t},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:t},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:t}}},{litmus:m.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:m.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:m.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(m.isNumber(e.r)&&m.isNumber(e.g)&&m.isNumber(e.b)&&m.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(m.isNumber(e.r)&&m.isNumber(e.g)&&m.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(m.isNumber(e.h)&&m.isNumber(e.s)&&m.isNumber(e.v)&&m.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(m.isNumber(e.h)&&m.isNumber(e.s)&&m.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],a=void 0,o=void 0,g=function(){o=!1;var i=1<arguments.length?m.toArray(arguments):arguments[0];return m.each(r,function(e){if(e.litmus(i))return m.each(e.conversions,function(e,t){if(a=e.read(i),!1===o&&!1!==a)return(o=a).conversionName=t,a.conversion=e,m.BREAK}),m.BREAK}),o},l=void 0,c={hsv_to_rgb:function(e,t,i){var n=Math.floor(e/60)%6,r=e/60-Math.floor(e/60),a=i*(1-t),s=i*(1-r*t),o=i*(1-(1-r)*t),l=[[i,o,a],[s,i,a],[a,i,o],[a,s,i],[o,a,i],[i,a,s]][n];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,i){var n=Math.min(e,t,i),r=Math.max(e,t,i),a=r-n,s=void 0;return 0===r?{h:NaN,s:0,v:0}:(s=e===r?(t-i)/a:t===r?2+(i-e)/a:4+(e-t)/a,(s/=6)<0&&(s+=1),{h:360*s,s:a/r,v:r/255})},rgb_to_hex:function(e,t,i){var n=this.hex_with_component(0,2,e);return n=this.hex_with_component(n,1,t),n=this.hex_with_component(n,0,i)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,i){return i<<(l=8*t)|e&~(255<<l)}},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},d=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),p=function e(t,i,n){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,i);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0},i=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},y=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},_=function(){function e(){if(v(this,e),this.__state=g.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return d(e,[{key:"toString",value:function(){return t(this)}},{key:"toHexString",value:function(){return t(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function u(e,t,i){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||_.recalculateRGB(this,t,i),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(_.recalculateRGB(this,t,i),this.__state.space="RGB"),this.__state[t]=e}})}function f(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||_.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(_.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}_.recalculateRGB=function(e,t,i){if("HEX"===e.__state.space)e.__state[t]=c.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");m.extend(e.__state,c.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},_.recalculateHSV=function(e){var t=c.rgb_to_hsv(e.r,e.g,e.b);m.extend(e.__state,{s:t.s,v:t.v}),m.isNaN(t.h)?m.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},_.COMPONENTS=["r","g","b","h","s","v","hex","a"],u(_.prototype,"r",2),u(_.prototype,"g",1),u(_.prototype,"b",0),f(_.prototype,"h"),f(_.prototype,"s"),f(_.prototype,"v"),Object.defineProperty(_.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(_.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=c.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var x=function(){function i(e,t){v(this,i),this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return d(i,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),i}(),b={};m.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){m.each(e,function(e){b[e]=t})});var w=/(\d+(\.\d+)?)px/;function T(e){if("0"===e||m.isUndefined(e))return 0;var t=e.match(w);return m.isNull(t)?0:parseFloat(t[1])}var E={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,i){var n=i,r=t;m.isUndefined(r)&&(r=!0),m.isUndefined(n)&&(n=!0),e.style.position="absolute",r&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,i,n){var r=i||{},a=b[t];if(!a)throw new Error("Event type "+t+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":var o=r.x||r.clientX||0,l=r.y||r.clientY||0;s.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,o,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=s.initKeyboardEvent||s.initKeyEvent;m.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(t,r.bubbles||!1,r.cancelable||!0)}m.defaults(s,n),e.dispatchEvent(s)},bind:function(e,t,i,n){var r=n||!1;return e.addEventListener?e.addEventListener(t,i,r):e.attachEvent&&e.attachEvent("on"+t,i),E},unbind:function(e,t,i,n){var r=n||!1;return e.removeEventListener?e.removeEventListener(t,i,r):e.detachEvent&&e.detachEvent("on"+t,i),E},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var i=e.className.split(/ +/);-1===i.indexOf(t)&&(i.push(t),e.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return E},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var i=e.className.split(/ +/),n=i.indexOf(t);-1!==n&&(i.splice(n,1),e.className=i.join(" "))}else e.className=void 0;return E},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return T(t["border-left-width"])+T(t["border-right-width"])+T(t["padding-left"])+T(t["padding-right"])+T(t.width)},getHeight:function(e){var t=getComputedStyle(e);return T(t["border-top-width"])+T(t["border-bottom-width"])+T(t["padding-top"])+T(t["padding-bottom"])+T(t.height)},getOffset:function(e){var t=e,i={left:0,top:0};if(t.offsetParent)for(;i.left+=t.offsetLeft,i.top+=t.offsetTop,t=t.offsetParent;);return i},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},M=function(e){function r(e,t){v(this,r);var i=y(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t)),n=i;return i.__prev=i.getValue(),i.__checkbox=document.createElement("input"),i.__checkbox.setAttribute("type","checkbox"),E.bind(i.__checkbox,"change",function(){n.setValue(!n.__prev)},!1),i.domElement.appendChild(i.__checkbox),i.updateDisplay(),i}return i(r,x),d(r,[{key:"setValue",value:function(e){var t=p(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),p(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"updateDisplay",this).call(this)}}]),r}(),S=function(e){function o(e,t,i){v(this,o);var n=y(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t)),r=i,a=n;if(n.__select=document.createElement("select"),m.isArray(r)){var s={};m.each(r,function(e){s[e]=e}),r=s}return m.each(r,function(e,t){var i=document.createElement("option");i.innerHTML=t,i.setAttribute("value",e),a.__select.appendChild(i)}),n.updateDisplay(),E.bind(n.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),n.domElement.appendChild(n.__select),n}return i(o,x),d(o,[{key:"setValue",value:function(e){var t=p(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t}},{key:"updateDisplay",value:function(){return E.isActive(this.__select)?this:(this.__select.value=this.getValue(),p(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"updateDisplay",this).call(this))}}]),o}(),C=function(e){function a(e,t){v(this,a);var i=y(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t)),n=i;function r(){n.setValue(n.__input.value)}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),E.bind(i.__input,"keyup",r),E.bind(i.__input,"change",r),E.bind(i.__input,"blur",function(){n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())}),E.bind(i.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return i(a,x),d(a,[{key:"updateDisplay",value:function(){return E.isActive(this.__input)||(this.__input.value=this.getValue()),p(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"updateDisplay",this).call(this)}}]),a}();function A(e){var t=e.toString();return-1<t.indexOf(".")?t.length-t.indexOf(".")-1:0}var P=function(e){function a(e,t,i){v(this,a);var n=y(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t)),r=i||{};return n.__min=r.min,n.__max=r.max,n.__step=r.step,m.isUndefined(n.__step)?0===n.initialValue?n.__impliedStep=1:n.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(n.initialValue))/Math.LN10))/10:n.__impliedStep=n.__step,n.__precision=A(n.__impliedStep),n}return i(a,x),d(a,[{key:"setValue",value:function(e){var t=e;return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),p(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setValue",this).call(this,t)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=A(e),this}}]),a}();var L=function(e){function c(e,t,i){v(this,c);var n=y(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e,t,i));n.__truncationSuspended=!1;var r=n,a=void 0;function s(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}function o(e){var t=a-e.clientY;r.setValue(r.getValue()+t*r.__impliedStep),a=e.clientY}function l(){E.unbind(window,"mousemove",o),E.unbind(window,"mouseup",l),s()}return n.__input=document.createElement("input"),n.__input.setAttribute("type","text"),E.bind(n.__input,"change",function(){var e=parseFloat(r.__input.value);m.isNaN(e)||r.setValue(e)}),E.bind(n.__input,"blur",function(){s()}),E.bind(n.__input,"mousedown",function(e){E.bind(window,"mousemove",o),E.bind(window,"mouseup",l),a=e.clientY}),E.bind(n.__input,"keydown",function(e){13===e.keyCode&&(r.__truncationSuspended=!0,this.blur(),r.__truncationSuspended=!1,s())}),n.updateDisplay(),n.domElement.appendChild(n.__input),n}return i(c,P),d(c,[{key:"updateDisplay",value:function(){var e,t,i;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),t=this.__precision,i=Math.pow(10,t),Math.round(e*i)/i),p(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"updateDisplay",this).call(this)}}]),c}();function R(e,t,i,n,r){return n+(e-t)/(i-t)*(r-n)}var O=function(e){function u(e,t,i,n,r){v(this,u);var a=y(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,t,{min:i,max:n,step:r})),s=a;function o(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(R(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function l(){E.unbind(window,"mousemove",o),E.unbind(window,"mouseup",l),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(e){var t=e.touches[0].clientX,i=s.__background.getBoundingClientRect();s.setValue(R(t,i.left,i.right,s.__min,s.__max))}function h(){E.unbind(window,"touchmove",c),E.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),E.bind(a.__background,"mousedown",function(e){document.activeElement.blur(),E.bind(window,"mousemove",o),E.bind(window,"mouseup",l),o(e)}),E.bind(a.__background,"touchstart",function(e){if(1!==e.touches.length)return;E.bind(window,"touchmove",c),E.bind(window,"touchend",h),c(e)}),E.addClass(a.__background,"slider"),E.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return i(u,P),d(u,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",p(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"updateDisplay",this).call(this)}}]),u}(),I=function(e){function a(e,t,i){v(this,a);var n=y(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t)),r=n;return n.__button=document.createElement("div"),n.__button.innerHTML=void 0===i?"Fire":i,E.bind(n.__button,"click",function(e){return e.preventDefault(),r.fire(),!1}),E.addClass(n.__button,"button"),n.domElement.appendChild(n.__button),n}return i(a,x),d(a,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),a}(),D=function(e){function f(e,t){v(this,f);var i=y(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e,t));i.__color=new _(i.getValue()),i.__temp=new _(0);var o=i;i.domElement=document.createElement("div"),E.makeSelectable(i.domElement,!1),i.__selector=document.createElement("div"),i.__selector.className="selector",i.__saturation_field=document.createElement("div"),i.__saturation_field.className="saturation-field",i.__field_knob=document.createElement("div"),i.__field_knob.className="field-knob",i.__field_knob_border="2px solid ",i.__hue_knob=document.createElement("div"),i.__hue_knob.className="hue-knob",i.__hue_field=document.createElement("div"),i.__hue_field.className="hue-field",i.__input=document.createElement("input"),i.__input.type="text",i.__input_textShadow="0 1px 1px ",E.bind(i.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),E.bind(i.__input,"blur",h),E.bind(i.__selector,"mousedown",function(){E.addClass(this,"drag").bind(window,"mouseup",function(){E.removeClass(o.__selector,"drag")})}),E.bind(i.__selector,"touchstart",function(){E.addClass(this,"drag").bind(window,"touchend",function(){E.removeClass(o.__selector,"drag")})});var n,r=document.createElement("div");function a(e){d(e),E.bind(window,"mousemove",d),E.bind(window,"touchmove",d),E.bind(window,"mouseup",l),E.bind(window,"touchend",l)}function s(e){p(e),E.bind(window,"mousemove",p),E.bind(window,"touchmove",p),E.bind(window,"mouseup",c),E.bind(window,"touchend",c)}function l(){E.unbind(window,"mousemove",d),E.unbind(window,"touchmove",d),E.unbind(window,"mouseup",l),E.unbind(window,"touchend",l),u()}function c(){E.unbind(window,"mousemove",p),E.unbind(window,"touchmove",p),E.unbind(window,"mouseup",c),E.unbind(window,"touchend",c),u()}function h(){var e=g(this.value);!1!==e?(o.__color.__state=e,o.setValue(o.__color.toOriginal())):this.value=o.__color.toString()}function u(){o.__onFinishChange&&o.__onFinishChange.call(o,o.__color.toOriginal())}function d(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=o.__saturation_field.getBoundingClientRect(),i=e.touches&&e.touches[0]||e,n=i.clientX,r=i.clientY,a=(n-t.left)/(t.right-t.left),s=1-(r-t.top)/(t.bottom-t.top);return 1<s?s=1:s<0&&(s=0),1<a?a=1:a<0&&(a=0),o.__color.v=s,o.__color.s=a,o.setValue(o.__color.toOriginal()),!1}function p(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=o.__hue_field.getBoundingClientRect(),i=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return 1<i?i=1:i<0&&(i=0),o.__color.h=360*i,o.setValue(o.__color.toOriginal()),!1}return m.extend(i.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),m.extend(i.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:i.__field_knob_border+(i.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),m.extend(i.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),m.extend(i.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),m.extend(r.style,{width:"100%",height:"100%",background:"none"}),N(r,"top","rgba(0,0,0,0)","#000"),m.extend(i.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(n=i.__hue_field).style.background="",n.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",n.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",n.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",m.extend(i.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:i.__input_textShadow+"rgba(0,0,0,0.7)"}),E.bind(i.__saturation_field,"mousedown",a),E.bind(i.__saturation_field,"touchstart",a),E.bind(i.__field_knob,"mousedown",a),E.bind(i.__field_knob,"touchstart",a),E.bind(i.__hue_field,"mousedown",s),E.bind(i.__hue_field,"touchstart",s),i.__saturation_field.appendChild(r),i.__selector.appendChild(i.__field_knob),i.__selector.appendChild(i.__saturation_field),i.__selector.appendChild(i.__hue_field),i.__hue_field.appendChild(i.__hue_knob),i.domElement.appendChild(i.__input),i.domElement.appendChild(i.__selector),i.updateDisplay(),i}return i(f,x),d(f,[{key:"updateDisplay",value:function(){var t=g(this.getValue());if(!1!==t){var i=!1;m.each(_.COMPONENTS,function(e){if(!m.isUndefined(t[e])&&!m.isUndefined(this.__color.__state[e])&&t[e]!==this.__color.__state[e])return i=!0,{}},this),i&&m.extend(this.__color.__state,t)}m.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var e=this.__color.v<.5||.5<this.__color.s?255:0,n=255-e;m.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+e+","+e+","+e+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,N(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),m.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+e+","+e+","+e+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}}]),f}(),k=["-moz-","-o-","-webkit-","-ms-",""];function N(t,i,n,r){t.style.background="",m.each(k,function(e){t.style.cssText+="background: "+e+"linear-gradient("+i+", "+n+" 0%, "+r+" 100%); "})}var z=function(e,t){var i=t||document,n=document.createElement("style");n.type="text/css",n.innerHTML=e;var r=i.getElementsByTagName("head")[0];try{r.appendChild(n)}catch(e){}},B=function(e,t){var i=e[t];return m.isArray(arguments[2])||m.isObject(arguments[2])?new S(e,t,arguments[2]):m.isNumber(i)?m.isNumber(arguments[2])&&m.isNumber(arguments[3])?m.isNumber(arguments[4])?new O(e,t,arguments[2],arguments[3],arguments[4]):new O(e,t,arguments[2],arguments[3]):m.isNumber(arguments[4])?new L(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new L(e,t,{min:arguments[2],max:arguments[3]}):m.isString(i)?new C(e,t):m.isFunction(i)?new I(e,t,""):m.isBoolean(i)?new M(e,t):null};var H=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},F=function(){function t(){v(this,t),this.backgroundElement=document.createElement("div"),m.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),E.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),m.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;E.bind(this.backgroundElement,"click",function(){e.hide()})}return d(t,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),m.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,e=function e(){t.domElement.style.display="none",t.backgroundElement.style.display="none",E.unbind(t.domElement,"webkitTransitionEnd",e),E.unbind(t.domElement,"transitionend",e),E.unbind(t.domElement,"oTransitionEnd",e)};E.bind(this.domElement,"webkitTransitionEnd",e),E.bind(this.domElement,"transitionend",e),E.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-E.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-E.getHeight(this.domElement)/2+"px"}}]),t}();z(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var U="Default",G=function(){try{return!!window.localStorage}catch(e){return!1}}(),V=void 0,j=!0,W=void 0,X=!1,Y=[],q=function t(e){var i=this,n=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),E.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=m.defaults(n,{closeOnTop:!1,autoPlace:!0,width:t.DEFAULT_WIDTH}),n=m.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),m.isUndefined(n.load)?n.load={preset:U}:n.preset&&(n.load.preset=n.preset),m.isUndefined(n.parent)&&n.hideable&&Y.push(this),n.resizable=m.isUndefined(n.parent)&&n.resizable,n.autoPlace&&m.isUndefined(n.scrollable)&&(n.scrollable=!0);var r,a=G&&"true"===localStorage.getItem(ee(this,"isLocal")),s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return i.parent?i.getRoot().preset:n.load.preset},set:function(e){i.parent?i.getRoot().preset=e:n.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),i.revert()}},width:{get:function(){return n.width},set:function(e){n.width=e,ne(i,e)}},name:{get:function(){return n.name},set:function(e){n.name=e,titleRowName&&(titleRowName.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(e){n.closed=e,n.closed?E.addClass(i.__ul,t.CLASS_CLOSED):E.removeClass(i.__ul,t.CLASS_CLOSED),this.onResize(),i.__closeButton&&(i.__closeButton.innerHTML=e?t.TEXT_OPEN:t.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return a},set:function(e){G&&((a=e)?E.bind(window,"unload",s):E.unbind(window,"unload",s),localStorage.setItem(ee(i,"isLocal"),e))}}}),m.isUndefined(n.parent)){if(n.closed=!1,E.addClass(this.domElement,t.CLASS_MAIN),E.makeSelectable(this.domElement,!1),G&&a){i.useLocalStorage=!0;var o=localStorage.getItem(ee(this,"gui"));o&&(n.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=t.TEXT_CLOSED,E.addClass(this.__closeButton,t.CLASS_CLOSE_BUTTON),n.closeOnTop?(E.addClass(this.__closeButton,t.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(E.addClass(this.__closeButton,t.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),E.bind(this.__closeButton,"click",function(){i.closed=!i.closed})}else{void 0===n.closed&&(n.closed=!0);var l=document.createTextNode(n.name);E.addClass(l,"controller-name");var c=$(i,l);E.addClass(this.__ul,t.CLASS_CLOSED),E.addClass(c,"title"),E.bind(c,"click",function(e){return e.preventDefault(),i.closed=!i.closed,!1}),n.closed||(this.closed=!1)}n.autoPlace&&(m.isUndefined(n.parent)&&(j&&(W=document.createElement("div"),E.addClass(W,"dg"),E.addClass(W,t.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(W),j=!1),W.appendChild(this.domElement),E.addClass(this.domElement,t.CLASS_AUTO_PLACE)),this.parent||ne(i,n.width)),this.__resizeHandler=function(){i.onResizeDebounced()},E.bind(window,"resize",this.__resizeHandler),E.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),E.bind(this.__ul,"transitionend",this.__resizeHandler),E.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&function(t){var i=void 0;function n(e){return e.preventDefault(),t.width+=i-e.clientX,t.onResize(),i=e.clientX,!1}function r(){E.removeClass(t.__closeButton,q.CLASS_DRAG),E.unbind(window,"mousemove",n),E.unbind(window,"mouseup",r)}function e(e){return e.preventDefault(),i=e.clientX,E.addClass(t.__closeButton,q.CLASS_DRAG),E.bind(window,"mousemove",n),E.bind(window,"mouseup",r),!1}t.__resize_handle=document.createElement("div"),m.extend(t.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),E.bind(t.__resize_handle,"mousedown",e),E.bind(t.__closeButton,"mousedown",e),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}(this),s=function(){G&&"true"===localStorage.getItem(ee(i,"isLocal"))&&localStorage.setItem(ee(i,"gui"),JSON.stringify(i.getSaveObject()))},this.saveToLocalStorageIfPossible=s,n.parent||((r=i.getRoot()).width+=1,m.defer(function(){r.width-=1}))};function $(e,t,i){var n=document.createElement("li");return t&&n.appendChild(t),i?e.__ul.insertBefore(n,i):e.__ul.appendChild(n),e.onResize(),n}function Z(e){E.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&E.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function J(e,t){var i=e.__preset_select[e.__preset_select.selectedIndex];i.innerHTML=t?i.value+"*":i.value}function K(e,t){var i=e.getRoot(),n=i.__rememberedObjects.indexOf(t.object);if(-1!==n){var r=i.__rememberedObjectIndecesToControllers[n];if(void 0===r&&(r={},i.__rememberedObjectIndecesToControllers[n]=r),r[t.property]=t,i.load&&i.load.remembered){var a=i.load.remembered,s=void 0;if(a[e.preset])s=a[e.preset];else{if(!a[U])return;s=a[U]}if(s[n]&&void 0!==s[n][t.property]){var o=s[n][t.property];t.initialValue=o,t.setValue(o)}}}}function Q(e,t,i,n){if(void 0===t[i])throw new Error('Object "'+t+'" has no property "'+i+'"');var r=void 0;if(n.color)r=new D(t,i);else{var a=[t,i].concat(n.factoryArgs);r=B.apply(e,a)}n.before instanceof x&&(n.before=n.before.__li),K(e,r),E.addClass(r.domElement,"c");var s=document.createElement("span");E.addClass(s,"property-name"),s.innerHTML=r.property;var o=document.createElement("div");o.appendChild(s),o.appendChild(r.domElement);var l=$(e,o,n.before);return E.addClass(l,q.CLASS_CONTROLLER_ROW),r instanceof D?E.addClass(l,"color"):E.addClass(l,h(r.getValue())),function(r,t,a){if(a.__li=t,a.__gui=r,m.extend(a,{options:function(e){if(1<arguments.length){var t=a.__li.nextElementSibling;return a.remove(),Q(r,a.object,a.property,{before:t,factoryArgs:[m.toArray(arguments)]})}if(m.isArray(e)||m.isObject(e)){var i=a.__li.nextElementSibling;return a.remove(),Q(r,a.object,a.property,{before:i,factoryArgs:[e]})}},name:function(e){return a.__li.firstElementChild.firstElementChild.innerHTML=e,a},listen:function(){return a.__gui.listen(a),a},remove:function(){return a.__gui.remove(a),a}}),a instanceof O){var n=new L(a.object,a.property,{min:a.__min,max:a.__max,step:a.__step});m.each(["updateDisplay","onChange","onFinishChange","step"],function(e){var t=a[e],i=n[e];a[e]=n[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(n,e),t.apply(a,e)}}),E.addClass(t,"has-slider"),a.domElement.insertBefore(n.domElement,a.domElement.firstElementChild)}else if(a instanceof L){var e=function(e){if(m.isNumber(a.__min)&&m.isNumber(a.__max)){var t=a.__li.firstElementChild.firstElementChild.innerHTML,i=-1<a.__gui.__listening.indexOf(a);a.remove();var n=Q(r,a.object,a.property,{before:a.__li.nextElementSibling,factoryArgs:[a.__min,a.__max,a.__step]});return n.name(t),i&&n.listen(),n}return e};a.min=m.compose(e,a.min),a.max=m.compose(e,a.max)}else a instanceof M?(E.bind(t,"click",function(){E.fakeEvent(a.__checkbox,"click")}),E.bind(a.__checkbox,"click",function(e){e.stopPropagation()})):a instanceof I?(E.bind(t,"click",function(){E.fakeEvent(a.__button,"click")}),E.bind(t,"mouseover",function(){E.addClass(a.__button,"hover")}),E.bind(t,"mouseout",function(){E.removeClass(a.__button,"hover")})):a instanceof D&&(E.addClass(t,"color"),a.updateDisplay=m.compose(function(e){return t.style.borderLeftColor=a.__color.toString(),e},a.updateDisplay),a.updateDisplay());a.setValue=m.compose(function(e){return r.getRoot().__preset_select&&a.isModified()&&J(r.getRoot(),!0),e},a.setValue)}(e,l,r),e.__controllers.push(r),r}function ee(e,t){return document.location.href+"."+t}function te(e,t,i){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.__preset_select.appendChild(n),i&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function ie(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ne(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function re(r,a){var s={};return m.each(r.__rememberedObjects,function(e,t){var i={},n=r.__rememberedObjectIndecesToControllers[t];m.each(n,function(e,t){i[t]=a?e.initialValue:e.getValue()}),s[t]=i}),s}q.toggleHide=function(){X=!X,m.each(Y,function(e){e.domElement.style.display=X?"none":""})},q.CLASS_AUTO_PLACE="a",q.CLASS_AUTO_PLACE_CONTAINER="ac",q.CLASS_MAIN="main",q.CLASS_CONTROLLER_ROW="cr",q.CLASS_TOO_TALL="taller-than-window",q.CLASS_CLOSED="closed",q.CLASS_CLOSE_BUTTON="close-button",q.CLASS_CLOSE_TOP="close-top",q.CLASS_CLOSE_BOTTOM="close-bottom",q.CLASS_DRAG="drag",q.DEFAULT_WIDTH=245,q.TEXT_CLOSED="Close Controls",q.TEXT_OPEN="Open Controls",q._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||q.toggleHide()},E.bind(window,"keydown",q._keydownHandler,!1),m.extend(q.prototype,{add:function(e,t){return Q(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return Q(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;m.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&W.removeChild(this.domElement);var t=this;m.each(this.__folders,function(e){t.removeFolder(e)}),E.unbind(window,"keydown",q._keydownHandler,!1),Z(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var i=new q(t);this.__folders[e]=i;var n=$(this,i.domElement);return E.addClass(n,"folder"),i},removeFolder:function(t){this.__ul.removeChild(t.domElement.parentElement),delete this.__folders[t.name],this.load&&this.load.folders&&this.load.folders[t.name]&&delete this.load.folders[t.name],Z(t);var e=this;m.each(t.__folders,function(e){t.removeFolder(e)}),m.defer(function(){e.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var t=this.getRoot();if(t.scrollable){var e=E.getOffset(t.__ul).top,i=0;m.each(t.__ul.childNodes,function(e){t.autoPlace&&e===t.__save_row||(i+=E.getHeight(e))}),window.innerHeight-e-20<i?(E.addClass(t.domElement,q.CLASS_TOO_TALL),t.__ul.style.height=window.innerHeight-e-20+"px"):(E.removeClass(t.domElement,q.CLASS_TOO_TALL),t.__ul.style.height="auto")}t.__resize_handle&&m.defer(function(){t.__resize_handle.style.height=t.__ul.offsetHeight+"px"}),t.__closeButton&&(t.__closeButton.style.width=t.width+"px")},onResizeDebounced:m.debounce(function(){this.onResize()},50),remember:function(){if(m.isUndefined(V)&&((V=new F).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var t=this;m.each(Array.prototype.slice.call(arguments),function(e){0===t.__rememberedObjects.length&&function(i){var e=i.__save_row=document.createElement("li");E.addClass(i.domElement,"has-save"),i.__ul.insertBefore(e,i.__ul.firstChild),E.addClass(e,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",E.addClass(t,"button gears");var n=document.createElement("span");n.innerHTML="Save",E.addClass(n,"button"),E.addClass(n,"save");var r=document.createElement("span");r.innerHTML="New",E.addClass(r,"button"),E.addClass(r,"save-as");var a=document.createElement("span");a.innerHTML="Revert",E.addClass(a,"button"),E.addClass(a,"revert");var s=i.__preset_select=document.createElement("select");i.load&&i.load.remembered?m.each(i.load.remembered,function(e,t){te(i,t,t===i.preset)}):te(i,U,!1);if(E.bind(s,"change",function(){for(var e=0;e<i.__preset_select.length;e++)i.__preset_select[e].innerHTML=i.__preset_select[e].value;i.preset=this.value}),e.appendChild(s),e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(a),G){var o=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage"),c=document.getElementById("dg-save-locally");c.style.display="block","true"===localStorage.getItem(ee(i,"isLocal"))&&l.setAttribute("checked","checked"),ie(i,o),E.bind(l,"change",function(){i.useLocalStorage=!i.useLocalStorage,ie(i,o)})}var h=document.getElementById("dg-new-constructor");E.bind(h,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||V.hide()}),E.bind(t,"click",function(){h.innerHTML=JSON.stringify(i.getSaveObject(),void 0,2),V.show(),h.focus(),h.select()}),E.bind(n,"click",function(){i.save()}),E.bind(r,"click",function(){var e=prompt("Enter a new preset name.");e&&i.saveAs(e)}),E.bind(a,"click",function(){i.revert()})}(t),-1===t.__rememberedObjects.indexOf(e)&&t.__rememberedObjects.push(e)}),this.autoPlace&&ne(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var i=this.load;return i.closed=this.closed,0<this.__rememberedObjects.length&&(i.preset=this.preset,i.remembered||(i.remembered={}),i.remembered[this.preset]=re(this)),i.folders={},m.each(this.__folders,function(e,t){i.folders[t]=e.getSaveObject()}),i},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=re(this),J(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[U]=re(this,!0)),this.load.remembered[e]=re(this),this.preset=e,te(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(t){m.each(this.__controllers,function(e){this.getRoot().load.remembered?K(t||this.getRoot(),e):e.setValue(e.initialValue),e.__onFinishChange&&e.__onFinishChange.call(e,e.getValue())},this),m.each(this.__folders,function(e){e.revert(e)}),t||J(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&H.call(window,function(){e(t)});m.each(t,function(e){e.updateDisplay()})}(this.__listening)},updateDisplay:function(){m.each(this.__controllers,function(e){e.updateDisplay()}),m.each(this.__folders,function(e){e.updateDisplay()})}});var ae={Color:_,math:c,interpret:g},se={Controller:x,BooleanController:M,OptionController:S,StringController:C,NumberController:P,NumberControllerBox:L,NumberControllerSlider:O,FunctionController:I,ColorController:D},oe={dom:E},le={GUI:q},ce=q,he={color:ae,controllers:se,dom:oe,gui:le,GUI:ce};e.color=ae,e.controllers=se,e.dom=oe,e.gui=le,e.GUI=ce,e.default=he,Object.defineProperty(e,"__esModule",{value:!0})}),function(){function _(e){var t,i=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(r){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":if("function"!=typeof THREE.TGALoader)return void console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");null===THREE.Loader.Handlers.get(".tga")&&THREE.Loader.Handlers.add(/\.tga$/i,new THREE.TGALoader),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof i)return"data:"+t+";base64,"+i;var a=new Uint8Array(i);return window.URL.createObjectURL(new Blob([a],{type:t}))}function x(e,t,i,n){var r=function(e,t,i,n){var r,a,s=t.path,o=n.get(e.id).children;void 0!==o&&0<o.length&&void 0!==i[o[0].ID]&&(0!==(r=i[o[0].ID]).indexOf("blob:")&&0!==r.indexOf("data:")||t.setPath(void 0));a="tga"===e.FileName.slice(-3).toLowerCase()?THREE.Loader.Handlers.get(".tga").load(r):t.load(r);return t.setPath(s),a}(e,t,i,n);r.ID=e.id,r.name=e.attrName;var a=e.WrapModeU,s=e.WrapModeV,o=void 0!==a?a.value:0,l=void 0!==s?s.value:0;if(r.wrapS=0===o?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,r.wrapT=0===l?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in e){var c=e.Scaling.value;r.repeat.x=c[0],r.repeat.y=c[1]}return r}function b(e,t,i,n){var r=t.id,a=t.attrName,s=t.ShadingModel;if("object"==typeof s&&(s=s.value),!n.has(r))return null;var o,l=function(i,e,n,t,r){var a={};e.BumpFactor&&(a.bumpScale=e.BumpFactor.value);e.Diffuse?a.color=(new THREE.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(a.color=(new THREE.Color).fromArray(e.DiffuseColor.value));e.DisplacementFactor&&(a.displacementScale=e.DisplacementFactor.value);e.Emissive?a.emissive=(new THREE.Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(a.emissive=(new THREE.Color).fromArray(e.EmissiveColor.value));e.EmissiveFactor&&(a.emissiveIntensity=parseFloat(e.EmissiveFactor.value));e.Opacity&&(a.opacity=parseFloat(e.Opacity.value));a.opacity<1&&(a.transparent=!0);e.ReflectionFactor&&(a.reflectivity=e.ReflectionFactor.value);e.Shininess&&(a.shininess=e.Shininess.value);e.Specular?a.specular=(new THREE.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(a.specular=(new THREE.Color).fromArray(e.SpecularColor.value));return r.get(t).children.forEach(function(e){var t=e.relationship;switch(t){case"Bump":a.bumpMap=n.get(e.ID);break;case"DiffuseColor":a.map=c(i,n,e.ID,r);break;case"DisplacementColor":a.displacementMap=c(i,n,e.ID,r);break;case"EmissiveColor":a.emissiveMap=c(i,n,e.ID,r);break;case"NormalMap":a.normalMap=c(i,n,e.ID,r);break;case"ReflectionColor":a.envMap=c(i,n,e.ID,r),a.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":a.specularMap=c(i,n,e.ID,r);break;case"TransparentColor":a.alphaMap=c(i,n,e.ID,r),a.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",t)}}),a}(e,t,i,r,n);switch(s.toLowerCase()){case"phong":o=new THREE.MeshPhongMaterial;break;case"lambert":o=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),o=new THREE.MeshPhongMaterial({color:3342591})}return o.setValues(l),o.name=a,o}function c(e,t,i,n){return"LayeredTexture"in e.Objects&&i in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),i=n.get(i).children[0].ID),t.get(i)}function w(e,n){var r=[];return e.children.forEach(function(e){var t=n[e.ID];if("Cluster"===t.attrType){var i={ID:e.ID,indices:[],weights:[],transform:(new THREE.Matrix4).fromArray(t.Transform.a),transformLink:(new THREE.Matrix4).fromArray(t.TransformLink.a),linkMode:t.Mode};"Indexes"in t&&(i.indices=t.Indexes.a,i.weights=t.Weights.a),r.push(i)}}),{rawBones:r,bones:[]}}function T(e,t,i,n){for(var r=[],a=0;a<e.children.length;a++){if(8===a){console.warn("FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.");break}var s=e.children[a],o=i[s.ID],l={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;n.get(parseInt(s.ID)).children.forEach(function(e){"DeformPercent"===e.relationship?l.weightCurveID=e.ID:l.geoID=e.ID}),r.push(l)}return r}function E(e,t,i,n){switch(i.attrType){case"Mesh":return function(t,e,i,n){var r=n.skeletons,a=n.morphTargets,s=e.parents.map(function(e){return t.Objects.Model[e.ID]});if(0===s.length)return;var o=e.children.reduce(function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e},null),l=e.children.reduce(function(e,t){return void 0!==a[t.ID]&&(e=a[t.ID]),e},null),c=new THREE.Matrix4,h=s[0];if("GeometricRotation"in h){var u=h.GeometricRotation.value.map(THREE.Math.degToRad);u[3]="ZYX",c.makeRotationFromEuler((new THREE.Euler).fromArray(u))}"GeometricTranslation"in h&&c.setPosition((new THREE.Vector3).fromArray(h.GeometricTranslation.value));"GeometricScaling"in h&&c.scale((new THREE.Vector3).fromArray(h.GeometricScaling.value));return function(e,t,i,n,r){var a=new THREE.BufferGeometry;t.attrName&&(a.name=t.attrName);var s=function(e,t){var r={};r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Colors.a,r=[];"IndexToDirect"===i&&(r=e.ColorIndex.a);return{dataSize:4,buffer:n,indices:r,mappingType:t,referenceType:i}}(e.LayerElementColor[0]));e.LayerElementMaterial&&(r.material=function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};for(var n=e.Materials.a,r=[],a=0;a<n.length;++a)r.push(a);return{dataSize:1,buffer:n,indices:r,mappingType:t,referenceType:i}}(e.LayerElementMaterial[0]));e.LayerElementNormal&&(r.normal=function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Normals.a,r=[];"IndexToDirect"===i&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a));return{dataSize:3,buffer:n,indices:r,mappingType:t,referenceType:i}}(e.LayerElementNormal[0]));if(e.LayerElementUV){r.uv=[];for(var i=0;e.LayerElementUV[i];)r.uv.push(S(e.LayerElementUV[i])),i++}r.weightTable={},null!==t&&(r.skeleton=t).rawBones.forEach(function(i,n){i.indices.forEach(function(e,t){void 0===r.weightTable[e]&&(r.weightTable[e]=[]),r.weightTable[e].push({id:n,weight:i.weights[t]})})});return r}(t,i),o=M(s),l=new THREE.Float32BufferAttribute(o.vertex,3);r.applyToBufferAttribute(l),a.addAttribute("position",l),0<o.colors.length&&a.addAttribute("color",new THREE.Float32BufferAttribute(o.colors,3));i&&(a.addAttribute("skinIndex",new THREE.Uint16BufferAttribute(o.weightsIndices,4)),a.addAttribute("skinWeight",new THREE.Float32BufferAttribute(o.vertexWeights,4)),a.FBX_Deformer=i);if(0<o.normal.length){var c=new THREE.Float32BufferAttribute(o.normal,3),h=(new THREE.Matrix3).getNormalMatrix(r);h.applyToBufferAttribute(c),a.addAttribute("normal",c)}if(o.uvs.forEach(function(e,t){var i="uv"+(t+1).toString();0===t&&(i="uv"),a.addAttribute(i,new THREE.Float32BufferAttribute(o.uvs[t],2))}),s.material&&"AllSame"!==s.material.mappingType){var u=o.materialIndex[0],d=0;if(o.materialIndex.forEach(function(e,t){e!==u&&(a.addGroup(d,t-d,u),u=e,d=t)}),0<a.groups.length){var p=a.groups[a.groups.length-1],f=p.start+p.count;f!==o.materialIndex.length&&a.addGroup(f,o.materialIndex.length-f,u)}0===a.groups.length&&a.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return m=e,g=a,v=t,y=n,_=r,null!==y&&(g.morphAttributes.position=[],g.morphAttributes.normal=[],y.rawTargets.forEach(function(e){var t=m.Objects.Geometry[e.geoID];void 0!==t&&function(e,t,i,n){var r=new THREE.BufferGeometry;i.attrName&&(r.name=i.attrName);for(var a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==t.Vertices?t.Vertices.a.slice():[],o=void 0!==i.Vertices?i.Vertices.a:[],l=void 0!==i.Indexes?i.Indexes.a:[],c=0;c<l.length;c++){var h=3*l[c];s[h]+=o[3*c],s[h+1]+=o[3*c+1],s[h+2]+=o[3*c+2]}var u=M({vertexIndices:a,vertexPositions:s}),d=new THREE.Float32BufferAttribute(u.vertex,3);d.name=i.attrName,n.applyToBufferAttribute(d),e.morphAttributes.position.push(d)}(g,v,t,_)})),a;var m,g,v,y,_}(t,i,o,l,c)}(e,t,i,n);case"NurbsCurve":return function(e){if(void 0===THREE.NURBSCurve)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new THREE.BufferGeometry;for(var i,n,r=t-1,a=e.KnotVector.a,s=[],o=e.Points.a,l=0,c=o.length;l<c;l+=4)s.push((new THREE.Vector4).fromArray(o,l));if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){i=r,n=a.length-1-i;for(var l=0;l<r;++l)s.push(s[l])}var h=new THREE.NURBSCurve(r,a,s,i,n).getPoints(7*s.length),u=new Float32Array(3*h.length);h.forEach(function(e,t){e.toArray(u,3*t)});var d=new THREE.BufferGeometry;return d.addAttribute("position",new THREE.BufferAttribute(u,3)),d}(i)}}function M(h){var u={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},d=0,p=0,f=!1,m=[],g=[],v=[],y=[],_=[],x=[];return h.vertexIndices.forEach(function(n,r){var e=!1;n<0&&(n^=-1,e=!0);var i=[],t=[];if(m.push(3*n,3*n+1,3*n+2),h.color){var a=C(r,d,n,h.color);v.push(a[0],a[1],a[2])}if(h.skeleton){if(void 0!==h.weightTable[n]&&h.weightTable[n].forEach(function(e){t.push(e.weight),i.push(e.id)}),4<t.length){f||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),f=!0);var s=[0,0,0,0],o=[0,0,0,0];t.forEach(function(e,t){var r=e,a=i[t];o.forEach(function(e,t,i){if(e<r){i[t]=r,r=e;var n=s[t];s[t]=a,a=n}})}),i=s,t=o}for(;t.length<4;)t.push(0),i.push(0);for(var l=0;l<4;++l)_.push(t[l]),x.push(i[l])}if(h.normal){a=C(r,d,n,h.normal);g.push(a[0],a[1],a[2])}if(h.material&&"AllSame"!==h.material.mappingType)var c=C(r,d,n,h.material)[0];h.uv&&h.uv.forEach(function(e,t){var i=C(r,d,n,e);void 0===y[t]&&(y[t]=[]),y[t].push(i[0]),y[t].push(i[1])}),p++,e&&(!function(i,e,t,n,r,a,s,o,l,c){for(var h=2;h<c;h++)i.vertex.push(e.vertexPositions[t[0]]),i.vertex.push(e.vertexPositions[t[1]]),i.vertex.push(e.vertexPositions[t[2]]),i.vertex.push(e.vertexPositions[t[3*(h-1)]]),i.vertex.push(e.vertexPositions[t[3*(h-1)+1]]),i.vertex.push(e.vertexPositions[t[3*(h-1)+2]]),i.vertex.push(e.vertexPositions[t[3*h]]),i.vertex.push(e.vertexPositions[t[3*h+1]]),i.vertex.push(e.vertexPositions[t[3*h+2]]),e.skeleton&&(i.vertexWeights.push(o[0]),i.vertexWeights.push(o[1]),i.vertexWeights.push(o[2]),i.vertexWeights.push(o[3]),i.vertexWeights.push(o[4*(h-1)]),i.vertexWeights.push(o[4*(h-1)+1]),i.vertexWeights.push(o[4*(h-1)+2]),i.vertexWeights.push(o[4*(h-1)+3]),i.vertexWeights.push(o[4*h]),i.vertexWeights.push(o[4*h+1]),i.vertexWeights.push(o[4*h+2]),i.vertexWeights.push(o[4*h+3]),i.weightsIndices.push(l[0]),i.weightsIndices.push(l[1]),i.weightsIndices.push(l[2]),i.weightsIndices.push(l[3]),i.weightsIndices.push(l[4*(h-1)]),i.weightsIndices.push(l[4*(h-1)+1]),i.weightsIndices.push(l[4*(h-1)+2]),i.weightsIndices.push(l[4*(h-1)+3]),i.weightsIndices.push(l[4*h]),i.weightsIndices.push(l[4*h+1]),i.weightsIndices.push(l[4*h+2]),i.weightsIndices.push(l[4*h+3])),e.color&&(i.colors.push(a[0]),i.colors.push(a[1]),i.colors.push(a[2]),i.colors.push(a[3*(h-1)]),i.colors.push(a[3*(h-1)+1]),i.colors.push(a[3*(h-1)+2]),i.colors.push(a[3*h]),i.colors.push(a[3*h+1]),i.colors.push(a[3*h+2])),e.material&&"AllSame"!==e.material.mappingType&&(i.materialIndex.push(n),i.materialIndex.push(n),i.materialIndex.push(n)),e.normal&&(i.normal.push(r[0]),i.normal.push(r[1]),i.normal.push(r[2]),i.normal.push(r[3*(h-1)]),i.normal.push(r[3*(h-1)+1]),i.normal.push(r[3*(h-1)+2]),i.normal.push(r[3*h]),i.normal.push(r[3*h+1]),i.normal.push(r[3*h+2])),e.uv&&e.uv.forEach(function(e,t){void 0===i.uvs[t]&&(i.uvs[t]=[]),i.uvs[t].push(s[t][0]),i.uvs[t].push(s[t][1]),i.uvs[t].push(s[t][2*(h-1)]),i.uvs[t].push(s[t][2*(h-1)+1]),i.uvs[t].push(s[t][2*h]),i.uvs[t].push(s[t][2*h+1])})}(u,h,m,c,g,v,y,_,x,p),d++,p=0,m=[],g=[],v=[],y=[],_=[],x=[])}),u}function S(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.UV.a,r=[];return"IndexToDirect"===i&&(r=e.UVIndex.a),{dataSize:2,buffer:n,indices:r,mappingType:t,referenceType:i}}THREE.FBXLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},Object.assign(THREE.FBXLoader.prototype,{load:function(i,n,e,r){var a=this,s=THREE.LoaderUtils.extractUrlBase(i),t=new THREE.FileLoader(this.manager);t.setResponseType("arraybuffer"),t.load(i,function(e){try{var t=a.parse(e,s);n(t)}catch(e){window.setTimeout(function(){r&&r(e),a.manager.itemError(i)},0)}},e,r)},parse:function(e,t){var i,n,r;if(r="Kaydara FBX Binary  \0",(n=e).byteLength>=r.length&&r===H(n,0,r.length))i=(new N).parse(e);else{var a=H(e);if(!function(i){var e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;function t(e){var t=i[e-1];return i=i.slice(n+e),n++,t}for(var r=0;r<e.length;++r){var a=t(1);if(a===e[r])return!1}return!0}(a))throw new Error("THREE.FBXLoader: Unknown format.");if(z(a)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+z(a));i=(new k).parse(a)}var s,o,l,c,h,u,d,p,f=function(e){var s=new Map;if("Connections"in e){var t=e.Connections.connections;t.forEach(function(e){var t=e[0],i=e[1],n=e[2];s.has(t)||s.set(t,{parents:[],children:[]});var r={ID:i,relationship:n};s.get(t).parents.push(r),s.has(i)||s.set(i,{parents:[],children:[]});var a={ID:t,relationship:n};s.get(i).children.push(a)})}return s}(i),m=function(e){var t={},i={};if("Video"in e.Objects){var n=e.Objects.Video;for(var r in n){var a=n[r],s=parseInt(r);if(t[s]=a.RelativeFilename||a.Filename,"Content"in a){var o=a.Content instanceof ArrayBuffer&&0<a.Content.byteLength,l="string"==typeof a.Content&&""!==a.Content;if(o||l){var c=_(n[r]);i[a.RelativeFilename||a.Filename]=c}}}}for(var s in t){var h=t[s];void 0!==i[h]?t[s]=i[h]:t[s]=t[s].split("\\").pop()}return t}(i),g=function(e,t,i){var n=new Map;if("Material"in e.Objects){var r=e.Objects.Material;for(var a in r){var s=b(e,r[a],t,i);null!==s&&n.set(parseInt(a),s)}}return n}(i,function(e,t,i,n){var r=new Map;if("Texture"in e.Objects){var a=e.Objects.Texture;for(var s in a){var o=x(a[s],t,i,n);r.set(parseInt(s),o)}}return r}(i,new THREE.TextureLoader(this.manager).setPath(t),m,f),f),v=function(e,t){var i={},n={};if("Deformer"in e.Objects){var r=e.Objects.Deformer;for(var a in r){var s=r[a],o=t.get(parseInt(a));if("Skin"===s.attrType){var l=w(o,r);l.ID=a,1<o.parents.length&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=o.parents[0].ID,i[a]=l}else if("BlendShape"===s.attrType){var c={id:a};c.rawTargets=T(o,s,r,t),c.id=a,1<o.parents.length&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),c.parentGeoID=o.parents[0].ID,n[a]=c}}}return{skeletons:i,morphTargets:n}}(i,f),y=function(e,t,i){var n=new Map;if("Geometry"in e.Objects){var r=e.Objects.Geometry;for(var a in r){var s=t.get(parseInt(a)),o=E(e,s,r[a],i);n.set(parseInt(a),o)}}return n}(i,f,v);return s=i,o=f,l=v.skeletons,c=y,h=g,u=new THREE.Group,d=function(e,t,i,n,r){var a=new Map,s=e.Objects.Model;for(var o in s){var l=parseInt(o),c=s[o],h=r.get(l),u=A(h,t,l,c.attrName);if(!u){switch(c.attrType){case"Camera":u=P(e,h);break;case"Light":u=L(e,h);break;case"Mesh":u=R(e,h,i,n);break;case"NurbsCurve":u=O(h,i);break;case"LimbNode":case"Null":default:u=new THREE.Group}u.name=THREE.PropertyBinding.sanitizeNodeName(c.attrName),u.ID=l}I(e,u,c),a.set(l,u)}return a}(s,l,c,h,o),p=s.Objects.Model,d.forEach(function(i){var e=p[i.ID];!function(n,r,e,t,a){if("LookAtProperty"in e){var i=t.get(r.ID).children;i.forEach(function(e){if("LookAtProperty"===e.relationship){var t=n.Objects.Model[e.ID];if("Lcl_Translation"in t){var i=t.Lcl_Translation.value;void 0!==r.target?(r.target.position.fromArray(i),a.add(r.target)):r.lookAt((new THREE.Vector3).fromArray(i))}}})}}(s,i,e,o,u),o.get(i.ID).parents.forEach(function(e){var t=d.get(e.ID);void 0!==t&&t.add(i)}),null===i.parent&&u.add(i)}),function(e,t,n,r,a){var s=function(e){var t={};if("Pose"in e.Objects){var i=e.Objects.Pose;for(var n in i)if("BindPose"===i[n].attrType){var r=i[n].PoseNode;Array.isArray(r)?r.forEach(function(e){t[e.Node]=(new THREE.Matrix4).fromArray(e.Matrix.a)}):t[r.Node]=(new THREE.Matrix4).fromArray(r.Matrix.a)}}return t}(e);for(var i in t){var o=t[i],l=a.get(parseInt(o.ID)).parents;l.forEach(function(e){if(n.has(e.ID)){var t=e.ID,i=a.get(t);i.parents.forEach(function(e){if(r.has(e.ID)){var t=r.get(e.ID);t.bind(new THREE.Skeleton(o.bones),s[e.ID])}})}})}}(s,l,c,d,o),function(e,t,i){i.animations=[];var n=function(e,t){if(void 0!==e.Objects.AnimationCurve){var i=function(e){var t=e.Objects.AnimationCurveNode,i=new Map;for(var n in t){var r=t[n];if(null!==r.attrName.match(/S|R|T/)){var a={id:r.id,attr:r.attrName,curves:{}};i.set(a.id,a)}}return i}(e);!function(e,t,i){var n=e.Objects.AnimationCurve;for(var r in n){var a={id:n[r].id,times:n[r].KeyTime.a.map(B),values:n[r].KeyValueFloat.a},s=t.get(a.id);if(void 0!==s){var o=s.parents[0].ID,l=s.parents[0].relationship;l.match(/X/)?i.get(o).curves.x=a:l.match(/Y/)?i.get(o).curves.y=a:l.match(/Z/)&&(i.get(o).curves.z=a)}}}(e,t,i);var n=function(s,o,l){var e=s.Objects.AnimationLayer,t=new Map;for(var i in e){var c=[],n=o.get(parseInt(i));if(void 0!==n){var r=n.children;r.forEach(function(e,t){if(l.has(e.ID)){var i=l.get(e.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===c[t]){var n;o.get(e.ID).parents.forEach(function(e){void 0!==e.relationship&&(n=e.ID)});var r=s.Objects.Model[n.toString()],a={modelName:THREE.PropertyBinding.sanitizeNodeName(r.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};"Lcl_Translation"in r&&(a.initialPosition=r.Lcl_Translation.value),"Lcl_Rotation"in r&&(a.initialRotation=r.Lcl_Rotation.value),"Lcl_Scaling"in r&&(a.initialScale=r.Lcl_Scaling.value),"PreRotation"in r&&(a.preRotations=r.PreRotation.value),c[t]=a}c[t][i.attr]=i}}}),t.set(parseInt(i),c)}}return t}(e,t,i);return function(e,t,i){var n=e.Objects.AnimationStack,r={};for(var a in n){var s=t.get(parseInt(a)).children;1<s.length&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var o=i.get(s[0].ID);r[a]={name:n[a].attrName,layer:o}}return r}(e,t,n)}}(e,t);if(void 0!==n)for(var r in n){var a=n[r],s=D(a);i.animations.push(s)}}(s,o,u),function(e,t){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var i=e.GlobalSettings.AmbientColor.value,n=i[0],r=i[1],a=i[2];if(0!==n||0!==r||0!==a){var s=new THREE.Color(n,r,a);t.add(new THREE.AmbientLight(s,1))}}}(s,u),u}});var o=[];function C(e,t,i,n){var r;switch(n.mappingType){case"ByPolygonVertex":r=e;break;case"ByPolygon":r=t;break;case"ByVertice":r=i;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(r=n.indices[r]);var a=r*n.dataSize,s=a+n.dataSize;return function(e,t,i,n){for(var r=i,a=0;r<n;r++,a++)e[a]=t[r];return e}(o,n.buffer,a,s)}function A(e,t,a,s){var o=null;return e.parents.forEach(function(n){for(var e in t){var r=t[e];r.rawBones.forEach(function(e,t){if(e.ID===n.ID){var i=o;(o=new THREE.Bone).matrixWorld.copy(e.transformLink),o.name=THREE.PropertyBinding.sanitizeNodeName(s),o.ID=a,r.bones[t]=o,null!==i&&o.add(i)}})}}),o}function P(i,e){var t,n;if(e.children.forEach(function(e){var t=i.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)}),void 0===n)t=new THREE.Object3D;else{var r=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(r=1);var a=1;void 0!==n.NearPlane&&(a=n.NearPlane.value/1e3);var s=1e3;void 0!==n.FarPlane&&(s=n.FarPlane.value/1e3);var o=window.innerWidth,l=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(o=n.AspectWidth.value,l=n.AspectHeight.value);var c=o/l,h=45;void 0!==n.FieldOfView&&(h=n.FieldOfView.value);var u=n.FocalLength?n.FocalLength.value:null;switch(r){case 0:t=new THREE.PerspectiveCamera(h,c,a,s),null!==u&&t.setFocalLength(u);break;case 1:t=new THREE.OrthographicCamera(-o/2,o/2,l/2,-l/2,a,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new THREE.Object3D}}return t}function L(i,e){var t,n;if(e.children.forEach(function(e){var t=i.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)}),void 0===n)t=new THREE.Object3D;else{var r;r=void 0===n.LightType?0:n.LightType.value;var a=16777215;void 0!==n.Color&&(a=(new THREE.Color).fromArray(n.Color.value));var s=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(s=0);var o=0;void 0!==n.FarAttenuationEnd&&(o=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);switch(r){case 0:t=new THREE.PointLight(a,s,o,1);break;case 1:t=new THREE.DirectionalLight(a,s);break;case 2:var l=Math.PI/3;void 0!==n.InnerAngle&&(l=THREE.Math.degToRad(n.InnerAngle.value));var c=0;void 0!==n.OuterAngle&&(c=THREE.Math.degToRad(n.OuterAngle.value),c=Math.max(c,1)),t=new THREE.SpotLight(a,s,o,l,c,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a THREE.PointLight."),t=new THREE.PointLight(a,s)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}function R(e,t,i,n){var r=null,a=null,s=[];return t.children.forEach(function(e){i.has(e.ID)&&(r=i.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))}),1<s.length?a=s:0<s.length?a=s[0]:(a=new THREE.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in r.attributes&&s.forEach(function(e){e.vertexColors=THREE.VertexColors}),r.FBX_Deformer?(s.forEach(function(e){e.skinning=!0}),new THREE.SkinnedMesh(r,a)):new THREE.Mesh(r,a)}function O(e,i){var t=e.children.reduce(function(e,t){return i.has(t.ID)&&(e=i.get(t.ID)),e},null),n=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(t,n)}function I(e,t,i){if("RotationOrder"in i){var n=parseInt(i.RotationOrder.value,10);0<n&&n<6?console.warn("THREE.FBXLoader: unsupported Euler Order: %s. Currently only XYZ order is supported. Animations and rotations may be incorrect.",["XYZ","XZY","YZX","ZXY","YXZ","ZYX","SphericXYZ"][n]):6===n&&console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.")}if("Lcl_Translation"in i&&t.position.fromArray(i.Lcl_Translation.value),"Lcl_Rotation"in i){var r=i.Lcl_Rotation.value.map(THREE.Math.degToRad);r.push("ZYX"),t.quaternion.setFromEuler((new THREE.Euler).fromArray(r))}if("Lcl_Scaling"in i&&t.scale.fromArray(i.Lcl_Scaling.value),"PreRotation"in i){var a=i.PreRotation.value.map(THREE.Math.degToRad);a[3]="ZYX";var s=(new THREE.Euler).fromArray(a);s=(new THREE.Quaternion).setFromEuler(s),t.quaternion.premultiply(s)}}function D(e){var t=[];return e.layer.forEach(function(e){t=t.concat(function(e){var t=[];if(void 0!==e.T&&0<Object.keys(e.T.curves).length){var i=a(e.modelName,e.T.curves,e.initialPosition,"position");void 0!==i&&t.push(i)}if(void 0!==e.R&&0<Object.keys(e.R.curves).length){var n=function(e,t,i,n){void 0!==t.x&&(d(t.x),t.x.values=t.x.values.map(THREE.Math.degToRad));void 0!==t.y&&(d(t.y),t.y.values=t.y.values.map(THREE.Math.degToRad));void 0!==t.z&&(d(t.z),t.z.values=t.z.values.map(THREE.Math.degToRad));var r=u(t),a=h(r,t,i);void 0!==n&&((n=n.map(THREE.Math.degToRad)).push("ZYX"),n=(new THREE.Euler).fromArray(n),n=(new THREE.Quaternion).setFromEuler(n));for(var s=new THREE.Quaternion,o=new THREE.Euler,l=[],c=0;c<a.length;c+=3)o.set(a[c],a[c+1],a[c+2],"ZYX"),s.setFromEuler(o),void 0!==n&&s.premultiply(n),s.toArray(l,c/3*4);return new THREE.QuaternionKeyframeTrack(e+".quaternion",r,l)}(e.modelName,e.R.curves,e.initialRotation,e.preRotations);void 0!==n&&t.push(n)}if(void 0!==e.S&&0<Object.keys(e.S.curves).length){var r=a(e.modelName,e.S.curves,e.initialScale,"scale");void 0!==r&&t.push(r)}return t}(e))}),new THREE.AnimationClip(e.name,-1,t)}function a(e,t,i,n){var r=u(t),a=h(r,t,i);return new THREE.VectorKeyframeTrack(e+"."+n,r,a)}function h(e,r,t){var a=t,s=[],o=-1,l=-1,c=-1;return e.forEach(function(e){if(r.x&&(o=r.x.times.indexOf(e)),r.y&&(l=r.y.times.indexOf(e)),r.z&&(c=r.z.times.indexOf(e)),-1!==o){var t=r.x.values[o];s.push(t),a[0]=t}else s.push(a[0]);if(-1!==l){var i=r.y.values[l];s.push(i),a[1]=i}else s.push(a[1]);if(-1!==c){var n=r.z.values[c];s.push(n),a[2]=n}else s.push(a[2])}),s}function u(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort(function(e,t){return e-t}).filter(function(e,t,i){return i.indexOf(e)==t})}function d(e){for(var t=1;t<e.values.length;t++){var i=e.values[t-1],n=e.values[t]-i,r=Math.abs(n);if(180<=r){for(var a=r/180,s=n/a,o=i+s,l=e.times[t-1],c=(e.times[t]-l)/a,h=l+c,u=[],d=[];h<e.times[t];)u.push(h),h+=c,d.push(o),o+=s;e.times=f(e.times,t,u),e.values=f(e.values,t,d)}}}function k(){}function N(){}function l(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function s(){}function z(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function B(e){return e/46186158e3}function p(e){return e.split(",").map(function(e){return parseFloat(e)})}function H(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=e.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(e,t,i))}function f(e,t,i){return e.slice(0,t).concat(i).concat(e.slice(t))}Object.assign(k.prototype,{getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new s,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var o=this,l=e.split("\n");return l.forEach(function(e,t){var i=e.match(/^[\s\t]*;/),n=e.match(/^[\s\t]*$/);if(!i&&!n){var r=e.match("^\\t{"+o.currentIndent+"}(\\w+):(.*){",""),a=e.match("^\\t{"+o.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),s=e.match("^\\t{"+(o.currentIndent-1)+"}}");r?o.parseNodeBegin(e,r):a?o.parseNodeProperty(e,a,l[++t]):s?o.popStack():e.match(/^[^\s\t}]/)&&o.parseNodePropertyContinued(e)}}),this.allNodes},parseNodeBegin:function(e,t){var i=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),r={name:i},a=this.parseNodeAttr(n),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,r):i in s?("PoseNode"===i?s.PoseNode.push(r):void 0!==s[i].id&&(s[i]={},s[i][s[i].id]=s[i]),""!==a.id&&(s[i][a.id]=r)):"number"==typeof a.id?(s[i]={},s[i][a.id]=r):"Properties70"!==i&&(s[i]="PoseNode"===i?[r]:r),"number"==typeof a.id&&(r.id=a.id),""!==a.name&&(r.attrName=a.name),""!==a.type&&(r.attrType=a.type),this.pushStack(r)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var i="",n="";return 1<e.length&&(i=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:i,type:n}},parseNodeProperty:function(e,t,i){var n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===r&&(r=i.replace(/"/g,"").replace(/,$/,"").trim());var a=this.getCurrentNode();if("Properties70"!==a.name){if("C"===n){var s=r.split(",").slice(1),o=parseInt(s[0]),l=parseInt(s[1]),c=r.split(",").slice(3);n="connections",function(e,t){for(var i=0,n=e.length,r=t.length;i<r;i++,n++)e[n]=t[i]}(r=[o,l],c=c.map(function(e){return e.trim().replace(/^"/,"")})),void 0===a[n]&&(a[n]=[])}"Node"===n&&(a.id=r),n in a&&Array.isArray(a[n])?a[n].push(r):"a"!==n?a[n]=r:a.a=r,this.setCurrentProp(a,n),"a"===n&&","!==r.slice(-1)&&(a.a=p(r))}else this.parseNodeSpecialProperty(e,n,r)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=p(t.a))},parseNodeSpecialProperty:function(e,t,i){var n=i.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),r=n[0],a=n[1],s=n[2],o=n[3],l=n[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=p(l)}this.getPrevNode()[r]={type:a,type2:s,flag:o,value:l},this.setCurrentProp(this.getPrevNode(),r)}}),Object.assign(N.prototype,{parse:function(e){var t=new l(e);t.skip(23);var i=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+i);for(var n=new s;!this.endOfContent(t);){var r=this.parseNode(t,i);null!==r&&n.add(r.name,r)}return n},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var i={},n=7500<=t?e.getUint64():e.getUint32(),r=7500<=t?e.getUint64():e.getUint32(),a=(7500<=t?e.getUint64():e.getUint32(),e.getUint8()),s=e.getString(a);if(0===n)return null;for(var o=[],l=0;l<r;l++)o.push(this.parseProperty(e));var c=0<o.length?o[0]:"",h=1<o.length?o[1]:"",u=2<o.length?o[2]:"";for(i.singleProperty=1===r&&e.getOffset()===n;n>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(s,i,d)}return i.propertyList=o,"number"==typeof c&&(i.id=c),""!==h&&(i.attrName=h),""!==u&&(i.attrType=u),""!==s&&(i.name=s),i},parseSubNode:function(e,t,i){if(!0===i.singleProperty){var n=i.propertyList[0];Array.isArray(n)?(t[i.name]=i).a=n:t[i.name]=n}else if("Connections"===e&&"C"===i.name){var r=[];i.propertyList.forEach(function(e,t){0!==t&&r.push(e)}),void 0===t.connections&&(t.connections=[]),t.connections.push(r)}else if("Properties70"===i.name){Object.keys(i).forEach(function(e){t[e]=i[e]})}else if("Properties70"===e&&"P"===i.name){var a,s=i.propertyList[0],o=i.propertyList[1],l=i.propertyList[2],c=i.propertyList[3];0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),0===o.indexOf("Lcl ")&&(o=o.replace("Lcl ","Lcl_")),a="Color"===o||"ColorRGB"===o||"Vector"===o||"Vector3D"===o||0===o.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],t[s]={type:o,type2:l,flag:c,value:a}}else void 0===t[i.name]?"number"==typeof i.id?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:"PoseNode"===i.name?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):void 0===t[i.name][i.id]&&(t[i.name][i.id]=i)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var i=e.getUint32();return e.getArrayBuffer(i);case"S":i=e.getUint32();return e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n=e.getUint32(),r=e.getUint32(),a=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}void 0===window.Zlib&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var s=new l(new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(a))).decompress().buffer);switch(t){case"b":case"c":return s.getBooleanArray(n);case"d":return s.getFloat64Array(n);case"f":return s.getFloat32Array(n);case"i":return s.getInt32Array(n);case"l":return s.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}),Object.assign(l.prototype,{getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=new Uint8Array(e),i=0;i<e;i++)t[i]=this.getUint8();var n=t.indexOf(0);return 0<=n&&(t=t.slice(0,n)),THREE.LoaderUtils.decodeText(t)}}),Object.assign(s.prototype,{add:function(e,t){this[e]=t}})}(),THREE.GLTFLoader=function(){function e(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.dracoLoader=null}function n(){var i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(t,i,e,n){var r,a=this;r=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:THREE.LoaderUtils.extractUrlBase(t),a.manager.itemStart(t);var s=function(e){n?n(e):console.error(e),a.manager.itemError(t),a.manager.itemEnd(t)},o=new THREE.FileLoader(a.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.load(t,function(e){try{a.parse(e,r,function(e){i(e),a.manager.itemEnd(t)},s)}catch(e){s(e)}},e,s)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,t,i,n){var r,a={};if("string"==typeof e)r=e;else if(THREE.LoaderUtils.decodeText(new Uint8Array(e,0,4))===p){try{a[f.KHR_BINARY_GLTF]=new m(e)}catch(e){return void(n&&n(e))}r=a[f.KHR_BINARY_GLTF].content}else r=THREE.LoaderUtils.decodeText(new Uint8Array(e));var s=JSON.parse(r);if(void 0===s.asset||s.asset.version[0]<2)n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(s.extensionsUsed)for(var o=0;o<s.extensionsUsed.length;++o){var l=s.extensionsUsed[o],c=s.extensionsRequired||[];switch(l){case f.KHR_LIGHTS_PUNCTUAL:a[l]=new u(s);break;case f.KHR_MATERIALS_UNLIT:a[l]=new d(s);break;case f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[l]=new y(s);break;case f.KHR_DRACO_MESH_COMPRESSION:a[l]=new g(s,this.dracoLoader);break;case f.MSFT_TEXTURE_DDS:a[f.MSFT_TEXTURE_DDS]=new h;break;case f.KHR_TEXTURE_TRANSFORM:a[f.KHR_TEXTURE_TRANSFORM]=new v(s);break;default:0<=c.indexOf(l)&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}new j(s,a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(i,n)}}};var f={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function h(){if(!THREE.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=f.MSFT_TEXTURE_DDS,this.ddsLoader=new THREE.DDSLoader}function u(e){this.name=f.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[f.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function d(e){this.name=f.KHR_MATERIALS_UNLIT}u.prototype.loadLight=function(e){var t,i=this.lightDefs[e],n=new THREE.Color(16777215);void 0!==i.color&&n.fromArray(i.color);var r=void 0!==i.range?i.range:0;switch(i.type){case"directional":(t=new THREE.DirectionalLight(n)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new THREE.PointLight(n)).distance=r;break;case"spot":(t=new THREE.SpotLight(n)).distance=r,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,t.angle=i.spot.outerConeAngle,t.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+i.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==i.intensity&&(t.intensity=i.intensity),t.name=i.name||"light_"+e,Promise.resolve(t)},d.prototype.getMaterialType=function(e){return THREE.MeshBasicMaterial},d.prototype.extendParams=function(e,t,i){var n=[];e.color=new THREE.Color(1,1,1),e.opacity=1;var r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){var a=r.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==r.baseColorTexture&&n.push(i.assignTexture(e,"map",r.baseColorTexture))}return Promise.all(n)};var p="glTF",l=12,c={JSON:1313821514,BIN:5130562};function m(e){this.name=f.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,l);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==p)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var i=new DataView(e,l),n=0;n<i.byteLength;){var r=i.getUint32(n,!0);n+=4;var a=i.getUint32(n,!0);if(n+=4,a===c.JSON){var s=new Uint8Array(e,l+n,r);this.content=THREE.LoaderUtils.decodeText(s)}else if(a===c.BIN){var o=l+n;this.body=e.slice(o,o+r)}n+=r}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function g(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=f.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function v(e){this.name=f.KHR_TEXTURE_TRANSFORM}function y(){return{name:f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(e,t,i){var n=t.extensions[this.name],r=THREE.ShaderLib.standard,a=THREE.UniformsUtils.clone(r.uniforms),s=["#ifdef USE_SPECULARMAP","   uniform sampler2D specularMap;","#endif"].join("\n"),o=["#ifdef USE_GLOSSINESSMAP","   uniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","   vec4 texelSpecular = texture2D( specularMap, vUv );","   texelSpecular = sRGBToLinear( texelSpecular );","   // reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","   specularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","   vec4 texelGlossiness = texture2D( glossinessMap, vUv );","   // reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","   glossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),u=r.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",s).replace("#include <metalnessmap_pars_fragment>",o).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",h);delete a.roughness,delete a.metalness,delete a.roughnessMap,delete a.metalnessMap,a.specular={value:(new THREE.Color).setHex(1118481)},a.glossiness={value:.5},a.specularMap={value:null},a.glossinessMap={value:null},e.vertexShader=r.vertexShader,e.fragmentShader=u,e.uniforms=a,e.defines={STANDARD:""},e.color=new THREE.Color(1,1,1),e.opacity=1;var d=[];if(Array.isArray(n.diffuseFactor)){var p=n.diffuseFactor;e.color.fromArray(p),e.opacity=p[3]}if(void 0!==n.diffuseTexture&&d.push(i.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new THREE.Color(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new THREE.Color(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var f=n.specularGlossinessTexture;d.push(i.assignTexture(e,"glossinessMap",f)),d.push(i.assignTexture(e,"specularMap",f))}return Promise.all(d)},createMaterial:function(e){var t=new THREE.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var i=this.specularGlossinessParams,n=0,r=i.length;n<r;n++)t[i[n]]=e[i[n]];return t},refreshUniforms:function(e,t,i,n,r,a){if(!0===r.isGLTFSpecularGlossinessMaterial){var s,o=r.uniforms,l=r.defines;o.opacity.value=r.opacity,o.diffuse.value.copy(r.color),o.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),o.map.value=r.map,o.specularMap.value=r.specularMap,o.alphaMap.value=r.alphaMap,o.lightMap.value=r.lightMap,o.lightMapIntensity.value=r.lightMapIntensity,o.aoMap.value=r.aoMap,o.aoMapIntensity.value=r.aoMapIntensity,r.map?s=r.map:r.specularMap?s=r.specularMap:r.displacementMap?s=r.displacementMap:r.normalMap?s=r.normalMap:r.bumpMap?s=r.bumpMap:r.glossinessMap?s=r.glossinessMap:r.alphaMap?s=r.alphaMap:r.emissiveMap&&(s=r.emissiveMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),o.uvTransform.value.copy(s.matrix)),r.envMap&&(o.envMap.value=r.envMap,o.envMapIntensity.value=r.envMapIntensity,o.flipEnvMap.value=r.envMap.isCubeTexture?-1:1,o.reflectivity.value=r.reflectivity,o.refractionRatio.value=r.refractionRatio,o.maxMipLevel.value=e.properties.get(r.envMap).__maxMipLevel),o.specular.value.copy(r.specular),o.glossiness.value=r.glossiness,o.glossinessMap.value=r.glossinessMap,o.emissiveMap.value=r.emissiveMap,o.bumpMap.value=r.bumpMap,o.normalMap.value=r.normalMap,o.displacementMap.value=r.displacementMap,o.displacementScale.value=r.displacementScale,o.displacementBias.value=r.displacementBias,null!==o.glossinessMap.value&&void 0===l.USE_GLOSSINESSMAP&&(l.USE_GLOSSINESSMAP="",l.USE_ROUGHNESSMAP=""),null===o.glossinessMap.value&&void 0!==l.USE_GLOSSINESSMAP&&(delete l.USE_GLOSSINESSMAP,delete l.USE_ROUGHNESSMAP)}}}}function E(e,t,i,n){THREE.Interpolant.call(this,e,t,i,n)}g.prototype.decodePrimitive=function(e,t){var i=this.json,n=this.dracoLoader,r=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,s={},o={},l={};for(var c in a){var h=R[c]||c.toLowerCase();s[h]=a[c]}for(c in e.attributes){h=R[c]||c.toLowerCase();if(void 0!==a[c]){var u=i.accessors[e.attributes[c]],d=C[u.componentType];l[h]=d,o[h]=!0===u.normalized}}return t.getDependency("bufferView",r).then(function(e){return new Promise(function(r){n.decodeDracoFile(e,function(e){for(var t in e.attributes){var i=e.attributes[t],n=o[t];void 0!==n&&(i.normalized=n)}r(e)},s,l)})})},v.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},((E.prototype=Object.create(THREE.Interpolant.prototype)).constructor=E).prototype.beforeStart_=E.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n*3+n,a=0;a!==n;a++)t[a]=i[r+a];return t},E.prototype.afterEnd_=E.prototype.copySampleValue_,E.prototype.interpolate_=function(e,t,i,n){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=2*s,l=3*s,c=n-t,h=(i-t)/c,u=h*h,d=u*h,p=e*l,f=p-l,m=-2*d+3*u,g=d-u,v=1-m,y=g-u+h,_=0;_!==s;_++){var x=a[f+_+s],b=a[f+_+o]*c,w=a[p+_+s],T=a[p+_]*c;r[_]=v*x+y*b+m*w+g*T}return r};var a,_=0,x=1,b=2,w=3,T=4,M=5,S=6,C=(Number,THREE.Matrix3,THREE.Matrix4,THREE.Vector2,THREE.Vector3,THREE.Vector4,THREE.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),A={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},P={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},L=(THREE.BackSide,THREE.FrontSide,THREE.NeverDepth,THREE.LessDepth,THREE.EqualDepth,THREE.LessEqualDepth,THREE.GreaterEqualDepth,THREE.NotEqualDepth,THREE.GreaterEqualDepth,THREE.AlwaysDepth,THREE.AddEquation,THREE.SubtractEquation,THREE.ReverseSubtractEquation,THREE.ZeroFactor,THREE.OneFactor,THREE.SrcColorFactor,THREE.OneMinusSrcColorFactor,THREE.SrcAlphaFactor,THREE.OneMinusSrcAlphaFactor,THREE.DstAlphaFactor,THREE.OneMinusDstAlphaFactor,THREE.DstColorFactor,THREE.OneMinusDstColorFactor,THREE.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),R={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},O={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},I={CUBICSPLINE:void 0,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},D="OPAQUE",k="MASK",N="BLEND",z={"image/png":THREE.RGBAFormat,"image/jpeg":THREE.RGBFormat};function B(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function H(e,t,i){for(var n in i.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=i.extensions[n])}function F(e,t){void 0!==t.extras&&("object"==typeof t.extras?e.userData=t.extras:console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function U(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var i=0,n=t.weights.length;i<n;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){var r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(i=0,n=r.length;i<n;i++)e.morphTargetDictionary[r[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function G(e){for(var t="",i=Object.keys(e).sort(),n=0,r=i.length;n<r;n++)t+=i[n]+":"+e[i[n]]+";";return t}function V(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,i=e.itemSize,n=e.array.slice(0,t*i),r=0,a=0;r<t;++r)n[a++]=e.getX(r),2<=i&&(n[a++]=e.getY(r)),3<=i&&(n[a++]=e.getZ(r)),4<=i&&(n[a++]=e.getW(r));return new THREE.BufferAttribute(n,i,e.normalized)}return e.clone()}function j(e,t,i){this.json=e||{},this.extensions=t||{},this.options=i||{},this.cache=new n,this.primitiveCache={},this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function W(i,e,n){var t=e.attributes,r=[];function a(e,t){return n.getDependency("accessor",e).then(function(e){i.addAttribute(t,e)})}for(var s in t){var o=R[s]||s.toLowerCase();o in i.attributes||r.push(a(t[s],o))}if(void 0!==e.indices&&!i.index){var l=n.getDependency("accessor",e.indices).then(function(e){i.setIndex(e)});r.push(l)}return F(i,e),Promise.all(r).then(function(){return void 0!==e.targets?function(p,f,e){for(var m=!1,g=!1,t=0,i=f.length;t<i&&(void 0!==(a=f[t]).POSITION&&(m=!0),void 0!==a.NORMAL&&(g=!0),!m||!g);t++);if(!m&&!g)return Promise.resolve(p);var n=[],r=[];for(t=0,i=f.length;t<i;t++){var a=f[t];if(m){var s=void 0!==a.POSITION?e.getDependency("accessor",a.POSITION):p.attributes.position;n.push(s)}g&&(s=void 0!==a.NORMAL?e.getDependency("accessor",a.NORMAL):p.attributes.normal,r.push(s))}return Promise.all([Promise.all(n),Promise.all(r)]).then(function(e){for(var t=e[0],i=e[1],n=0,r=t.length;n<r;n++)p.attributes.position!==t[n]&&(t[n]=V(t[n]));for(n=0,r=i.length;n<r;n++)p.attributes.normal!==i[n]&&(i[n]=V(i[n]));for(n=0,r=f.length;n<r;n++){var a=f[n],s="morphTarget"+n;if(m&&void 0!==a.POSITION){var o=t[n];o.name=s;for(var l=p.attributes.position,c=0,h=o.count;c<h;c++)o.setXYZ(c,o.getX(c)+l.getX(c),o.getY(c)+l.getY(c),o.getZ(c)+l.getZ(c))}if(g&&void 0!==a.NORMAL){var u=i[n];u.name=s;var d=p.attributes.normal;for(c=0,h=u.count;c<h;c++)u.setXYZ(c,u.getX(c)+d.getX(c),u.getY(c)+d.getY(c),u.getZ(c)+d.getZ(c))}}return m&&(p.morphAttributes.position=t),g&&(p.morphAttributes.normal=i),p})}(i,e.targets,n):i})}return j.prototype.parse=function(i,e){var n=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(e){var t={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};H(a,t,r),i(t)}).catch(e)},j.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[],n={},r={},a=0,s=t.length;a<s;a++)for(var o=t[a].joints,l=0,c=o.length;l<c;l++)e[o[l]].isBone=!0;for(var h=0,u=e.length;h<u;h++){var d=e[h];void 0!==d.mesh&&(void 0===n[d.mesh]&&(n[d.mesh]=r[d.mesh]=0),n[d.mesh]++,void 0!==d.skin&&(i[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=n,this.json.meshUses=r},j.prototype.getDependency=function(e,t){var i=e+":"+t,n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this.loadMesh(t);break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this.loadBufferView(t);break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this.loadMaterial(t);break;case"texture":n=this.loadTexture(t);break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;case"light":n=this.extensions[f.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,n)}return n},j.prototype.getDependencies=function(i){var e=this.cache.get(i);if(!e){var n=this,t=this.json[i+("mesh"===i?"es":"s")]||[];e=Promise.all(t.map(function(e,t){return n.getDependency(i,t)})),this.cache.add(i,e)}return e},j.prototype.loadBuffer=function(e){var i=this.json.buffers[e],n=this.fileLoader;if(i.type&&"arraybuffer"!==i.type)throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(void 0===i.uri&&0===e)return Promise.resolve(this.extensions[f.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(e,t){n.load(B(i.uri,r.path),e,void 0,function(){t(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})},j.prototype.loadBufferView=function(e){var n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(e){var t=n.byteLength||0,i=n.byteOffset||0;return e.slice(i,i+t)})},j.prototype.loadAccessor=function(e){var w=this,T=this.json,E=this.json.accessors[e];if(void 0===E.bufferView&&void 0===E.sparse)return Promise.resolve(null);var t=[];return void 0!==E.bufferView?t.push(this.getDependency("bufferView",E.bufferView)):t.push(null),void 0!==E.sparse&&(t.push(this.getDependency("bufferView",E.sparse.indices.bufferView)),t.push(this.getDependency("bufferView",E.sparse.values.bufferView))),Promise.all(t).then(function(e){var t,i,n=e[0],r=L[E.type],a=C[E.componentType],s=a.BYTES_PER_ELEMENT,o=s*r,l=E.byteOffset||0,c=void 0!==E.bufferView?T.bufferViews[E.bufferView].byteStride:void 0,h=!0===E.normalized;if(c&&c!==o){var u="InterleavedBuffer:"+E.bufferView+":"+E.componentType,d=w.cache.get(u);d||(t=new a(n),d=new THREE.InterleavedBuffer(t,c/s),w.cache.add(u,d)),i=new THREE.InterleavedBufferAttribute(d,r,l/s,h)}else t=null===n?new a(E.count*r):new a(n,l,E.count*r),i=new THREE.BufferAttribute(t,r,h);if(void 0!==E.sparse){var p=L.SCALAR,f=C[E.sparse.indices.componentType],m=E.sparse.indices.byteOffset||0,g=E.sparse.values.byteOffset||0,v=new f(e[1],m,E.sparse.count*p),y=new a(e[2],g,E.sparse.count*r);null!==n&&i.setArray(i.array.slice());for(var _=0,x=v.length;_<x;_++){var b=v[_];if(i.setX(b,y[_*r]),2<=r&&i.setY(b,y[_*r+1]),3<=r&&i.setZ(b,y[_*r+2]),4<=r&&i.setW(b,y[_*r+3]),5<=r)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i})},j.prototype.loadTexture=function(e){var i,t=this,n=this.json,r=this.options,a=this.textureLoader,s=window.URL||window.webkitURL,o=n.textures[e],l=o.extensions||{},c=(i=l[f.MSFT_TEXTURE_DDS]?n.images[l[f.MSFT_TEXTURE_DDS].source]:n.images[o.source]).uri,h=!1;return void 0!==i.bufferView&&(c=t.getDependency("bufferView",i.bufferView).then(function(e){h=!0;var t=new Blob([e],{type:i.mimeType});return c=s.createObjectURL(t)})),Promise.resolve(c).then(function(i){var n=THREE.Loader.Handlers.get(i);return n||(n=l[f.MSFT_TEXTURE_DDS]?t.extensions[f.MSFT_TEXTURE_DDS].ddsLoader:a),new Promise(function(e,t){n.load(B(i,r.path),e,void 0,t)})}).then(function(e){!0===h&&s.revokeObjectURL(c),e.flipY=!1,void 0!==o.name&&(e.name=o.name),i.mimeType in z&&(e.format=z[i.mimeType]);var t=(n.samplers||{})[o.sampler]||{};return e.magFilter=A[t.magFilter]||THREE.LinearFilter,e.minFilter=A[t.minFilter]||THREE.LinearMipMapLinearFilter,e.wrapS=P[t.wrapS]||THREE.RepeatWrapping,e.wrapT=P[t.wrapT]||THREE.RepeatWrapping,e})},j.prototype.assignTexture=function(i,n,r){var a=this;return this.getDependency("texture",r.index).then(function(e){switch(n){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":e.format=THREE.RGBFormat}if(a.extensions[f.KHR_TEXTURE_TRANSFORM]){var t=void 0!==r.extensions?r.extensions[f.KHR_TEXTURE_TRANSFORM]:void 0;t&&(e=a.extensions[f.KHR_TEXTURE_TRANSFORM].extendTexture(e,t))}i[n]=e})},j.prototype.assignFinalMaterial=function(e){var t=e.geometry,i=e.material,n=this.extensions,r=void 0!==t.attributes.tangent,a=void 0!==t.attributes.color,s=void 0===t.attributes.normal,o=!0===e.isSkinnedMesh,l=0<Object.keys(t.morphAttributes).length,c=l&&void 0!==t.morphAttributes.normal;if(e.isPoints){var h="PointsMaterial:"+i.uuid,u=this.cache.get(h);u||(u=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.lights=!1,this.cache.add(h,u)),i=u}else if(e.isLine){h="LineBasicMaterial:"+i.uuid;var d=this.cache.get(h);d||(d=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(d,i),d.color.copy(i.color),d.lights=!1,this.cache.add(h,d)),i=d}if(r||a||s||o||l){h="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),o&&(h+="skinning:"),r&&(h+="vertex-tangents:"),a&&(h+="vertex-colors:"),s&&(h+="flat-shading:"),l&&(h+="morph-targets:"),c&&(h+="morph-normals:");var p=this.cache.get(h);p||(p=i.isGLTFSpecularGlossinessMaterial?n[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(i):i.clone(),o&&(p.skinning=!0),r&&(p.vertexTangents=!0),a&&(p.vertexColors=THREE.VertexColors),s&&(p.flatShading=!0),l&&(p.morphTargets=!0),c&&(p.morphNormals=!0),this.cache.add(h,p)),i=p}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),t.addAttribute("uv2",new THREE.BufferAttribute(t.attributes.uv.array,2))),i.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=n[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=i},j.prototype.loadMaterial=function(e){var t,i=this.json,n=this.extensions,r=i.materials[e],a={},s=r.extensions||{},o=[];if(s[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var l=n[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=l.getMaterialType(r),o.push(l.extendParams(a,r,this))}else if(s[f.KHR_MATERIALS_UNLIT]){var c=n[f.KHR_MATERIALS_UNLIT];t=c.getMaterialType(r),o.push(c.extendParams(a,r,this))}else{t=THREE.MeshStandardMaterial;var h=r.pbrMetallicRoughness||{};if(a.color=new THREE.Color(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){var u=h.baseColorFactor;a.color.fromArray(u),a.opacity=u[3]}void 0!==h.baseColorTexture&&o.push(this.assignTexture(a,"map",h.baseColorTexture)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(o.push(this.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),o.push(this.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture)))}!0===r.doubleSided&&(a.side=THREE.DoubleSide);var d=r.alphaMode||D;return d===N?a.transparent=!0:(a.transparent=!1,d===k&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&t!==THREE.MeshBasicMaterial&&(o.push(this.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new THREE.Vector2(1,1),void 0!==r.normalTexture.scale&&a.normalScale.set(r.normalTexture.scale,r.normalTexture.scale)),void 0!==r.occlusionTexture&&t!==THREE.MeshBasicMaterial&&(o.push(this.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&t!==THREE.MeshBasicMaterial&&(a.emissive=(new THREE.Color).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&t!==THREE.MeshBasicMaterial&&o.push(this.assignTexture(a,"emissiveMap",r.emissiveTexture)),Promise.all(o).then(function(){var e;return e=t===THREE.ShaderMaterial?n[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new t(a),void 0!==r.name&&(e.name=r.name),e.map&&(e.map.encoding=THREE.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=THREE.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=THREE.sRGBEncoding),F(e,r),r.extensions&&H(n,e,r),e})},j.prototype.loadGeometries=function(e){var i=this,n=this.extensions,t=this.primitiveCache;function r(t){return n[f.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,i).then(function(e){return W(e,t,i)})}for(var a,s,o=[],l=0,c=e.length;l<c;l++){var h,u=e[l],d=(void 0,(s=(a=u).extensions&&a.extensions[f.KHR_DRACO_MESH_COMPRESSION])?"draco:"+s.bufferView+":"+s.indices+":"+G(s.attributes):a.indices+":"+G(a.attributes)+":"+a.mode),p=t[d];if(p)o.push(p.promise);else h=u.extensions&&u.extensions[f.KHR_DRACO_MESH_COMPRESSION]?r(u):W(new THREE.BufferGeometry,u,i),t[d]={primitive:u,promise:h},o.push(h)}return Promise.all(o)},j.prototype.loadMesh=function(h){for(var u=this,e=this.json,d=(this.extensions,e.meshes[h]),p=d.primitives,t=[],i=0,n=p.length;i<n;i++){var r=void 0===p[i].material?a=a||new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide}):this.getDependency("material",p[i].material);t.push(r)}return Promise.all(t).then(function(c){return u.loadGeometries(p).then(function(e){for(var t=[],i=0,n=e.length;i<n;i++){var r,a=e[i],s=p[i],o=c[i];if(s.mode===T||s.mode===M||s.mode===S||void 0===s.mode)!0===(r=!0===d.isSkinnedMesh?new THREE.SkinnedMesh(a,o):new THREE.Mesh(a,o)).isSkinnedMesh&&r.normalizeSkinWeights(),s.mode===M?r.drawMode=THREE.TriangleStripDrawMode:s.mode===S&&(r.drawMode=THREE.TriangleFanDrawMode);else if(s.mode===x)r=new THREE.LineSegments(a,o);else if(s.mode===w)r=new THREE.Line(a,o);else if(s.mode===b)r=new THREE.LineLoop(a,o);else{if(s.mode!==_)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+s.mode);r=new THREE.Points(a,o)}0<Object.keys(r.geometry.morphAttributes).length&&U(r,d),r.name=d.name||"mesh_"+h,1<e.length&&(r.name+="_"+i),F(r,d),u.assignFinalMaterial(r),t.push(r)}if(1===t.length)return t[0];var l=new THREE.Group;for(i=0,n=t.length;i<n;i++)l.add(t[i]);return l})})},j.prototype.loadCamera=function(e){var t,i=this.json.cameras[e],n=i[i.type];if(n)return"perspective"===i.type?t=new THREE.PerspectiveCamera(THREE.Math.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===i.type&&(t=new THREE.OrthographicCamera(n.xmag/-2,n.xmag/2,n.ymag/2,n.ymag/-2,n.znear,n.zfar)),void 0!==i.name&&(t.name=i.name),F(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},j.prototype.loadSkin=function(e){var t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return i.inverseBindMatrices=e,i})},j.prototype.loadAnimation=function(w){for(var T=this.json.animations[w],e=[],t=[],i=[],n=[],r=[],a=0,s=T.channels.length;a<s;a++){var o=T.channels[a],l=T.samplers[o.sampler],c=o.target,h=void 0!==c.node?c.node:c.id,u=void 0!==T.parameters?T.parameters[l.input]:l.input,d=void 0!==T.parameters?T.parameters[l.output]:l.output;e.push(this.getDependency("node",h)),t.push(this.getDependency("accessor",u)),i.push(this.getDependency("accessor",d)),n.push(l),r.push(c)}return Promise.all([Promise.all(e),Promise.all(t),Promise.all(i),Promise.all(n),Promise.all(r)]).then(function(e){for(var t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=[],o=0,l=t.length;o<l;o++){var c=t[o],h=i[o],u=n[o],d=r[o],p=a[o];if(void 0!==c){var f;switch(c.updateMatrix(),c.matrixAutoUpdate=!0,O[p.path]){case O.weights:f=THREE.NumberKeyframeTrack;break;case O.rotation:f=THREE.QuaternionKeyframeTrack;break;case O.position:case O.scale:default:f=THREE.VectorKeyframeTrack}var m=c.name?c.name:c.uuid,g=void 0!==d.interpolation?I[d.interpolation]:THREE.InterpolateLinear,v=[];O[p.path]===O.weights?c.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)}):v.push(m);for(var y=0,_=v.length;y<_;y++){var x=new f(v[y]+"."+O[p.path],h.array,u.array,g);"CUBICSPLINE"===d.interpolation&&(x.createInterpolant=function(e){return new E(this.times,this.values,this.getValueSize()/3,e)},x.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),s.push(x)}}}var b=void 0!==T.name?T.name:"animation_"+w;return new THREE.AnimationClip(b,void 0,s)})},j.prototype.loadNode=function(e){var t=this.json,i=this.extensions,n=this,a=t.meshReferences,s=t.meshUses,o=t.nodes[e];return(!0===o.isBone?Promise.resolve(new THREE.Bone):void 0!==o.mesh?n.getDependency("mesh",o.mesh).then(function(e){var t;if(1<a[o.mesh]){var i=s[o.mesh]++;(t=e.clone()).name+="_instance_"+i,t.onBeforeRender=e.onBeforeRender;for(var n=0,r=t.children.length;n<r;n++)t.children[n].name+="_instance_"+i,t.children[n].onBeforeRender=e.children[n].onBeforeRender}else t=e;return void 0!==o.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,i=o.weights.length;t<i;t++)e.morphTargetInfluences[t]=o.weights[t]}),t}):void 0!==o.camera?n.getDependency("camera",o.camera):o.extensions&&o.extensions[f.KHR_LIGHTS_PUNCTUAL]&&void 0!==o.extensions[f.KHR_LIGHTS_PUNCTUAL].light?n.getDependency("light",o.extensions[f.KHR_LIGHTS_PUNCTUAL].light):Promise.resolve(new THREE.Object3D)).then(function(e){if(void 0!==o.name&&(e.name=THREE.PropertyBinding.sanitizeNodeName(o.name)),F(e,o),o.extensions&&H(i,e,o),void 0!==o.matrix){var t=new THREE.Matrix4;t.fromArray(o.matrix),e.applyMatrix(t)}else void 0!==o.translation&&e.position.fromArray(o.translation),void 0!==o.rotation&&e.quaternion.fromArray(o.rotation),void 0!==o.scale&&e.scale.fromArray(o.scale);return e})},j.prototype.loadScene=function(){function h(e,s,o,l){var c=o.nodes[e];return l.getDependency("node",e).then(function(u){return void 0===c.skin?u:l.getDependency("skin",c.skin).then(function(e){for(var t=[],i=0,n=(d=e).joints.length;i<n;i++)t.push(l.getDependency("node",d.joints[i]));return Promise.all(t)}).then(function(e){for(var t=!0===u.isGroup?u.children:[u],i=0,n=t.length;i<n;i++){for(var r=t[i],a=[],s=[],o=0,l=e.length;o<l;o++){var c=e[o];if(c){a.push(c);var h=new THREE.Matrix4;void 0!==d.inverseBindMatrices&&h.fromArray(d.inverseBindMatrices.array,16*o),s.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',d.joints[o])}r.bind(new THREE.Skeleton(a,s),r.matrixWorld)}return u});var d}).then(function(e){s.add(e);var t=[];if(c.children)for(var i=c.children,n=0,r=i.length;n<r;n++){var a=i[n];t.push(h(a,e,o,l))}return Promise.all(t)})}return function(e){var t=this.json,i=this.extensions,n=this.json.scenes[e],r=new THREE.Scene;void 0!==n.name&&(r.name=n.name),F(r,n),n.extensions&&H(i,r,n);for(var a=n.nodes||[],s=[],o=0,l=a.length;o<l;o++)s.push(h(a[o],r,t,this));return Promise.all(s).then(function(){return r})}}(),e}(),function(a,o,e,b){"use strict";function l(e,t,i){return setTimeout(r(e,i),t)}function n(e,t,i){return!!Array.isArray(e)&&(s(e,i[t],i),!0)}function s(e,t,i){var n;if(e)if(e.forEach)e.forEach(t,i);else if(e.length!==b)for(n=0;n<e.length;)t.call(i,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(i,e[n],n,e)}function t(n,e,t){var r="DEPRECATED METHOD: "+e+"\n"+t+" AT \n";return function(){var e=new Error("get-stack-trace"),t=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=a.console&&(a.console.warn||a.console.log);return i&&i.call(a.console,r,t),n.apply(this,arguments)}}function i(e,t,i){var n,r=t.prototype;(n=e.prototype=Object.create(r)).constructor=e,n._super=r,i&&J(n,i)}function r(e,t){return function(){return e.apply(t,arguments)}}function c(e,t){return typeof e==ee?e.apply(t&&t[0]||b,t):e}function h(e,t){return e===b?t:e}function u(t,e,i){s(f(e),function(e){t.addEventListener(e,i,!1)})}function d(t,e,i){s(f(e),function(e){t.removeEventListener(e,i,!1)})}function w(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function p(e,t){return-1<e.indexOf(t)}function f(e){return e.trim().split(/\s+/g)}function m(e,t,i){if(e.indexOf&&!i)return e.indexOf(t);for(var n=0;n<e.length;){if(i&&e[n][i]==t||!i&&e[n]===t)return n;n++}return-1}function g(e){return Array.prototype.slice.call(e,0)}function v(e,i,t){for(var n=[],r=[],a=0;a<e.length;){var s=i?e[a][i]:e[a];m(r,s)<0&&n.push(e[a]),r[a]=s,a++}return t&&(n=i?n.sort(function(e,t){return e[i]>t[i]}):n.sort()),n}function y(e,t){for(var i,n,r=t[0].toUpperCase()+t.slice(1),a=0;a<K.length;){if((n=(i=K[a])?i+r:t)in e)return n;a++}return b}function _(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}function x(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&i.handler(e)},this.init()}function T(e,t,i){var n=i.pointers.length,r=i.changedPointers.length,a=t&de&&n-r==0,s=t&(pe|fe)&&n-r==0;i.isFirst=!!a,i.isFinal=!!s,a&&(e.session={}),i.eventType=t,function(e,t){var i=e.session,n=t.pointers,r=n.length;i.firstInput||(i.firstInput=E(t)),1<r&&!i.firstMultiple?i.firstMultiple=E(t):1===r&&(i.firstMultiple=!1);var a=i.firstInput,s=i.firstMultiple,o=s?s.center:a.center,l=t.center=M(n);t.timeStamp=ne(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=P(o,l),t.distance=A(o,l),c=i,h=t,u=h.center,d=c.offsetDelta||{},p=c.prevDelta||{},f=c.prevInput||{},h.eventType!==de&&f.eventType!==pe||(p=c.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=c.offsetDelta={x:u.x,y:u.y}),h.deltaX=p.x+(u.x-d.x),h.deltaY=p.y+(u.y-d.y),t.offsetDirection=C(t.deltaX,t.deltaY);var c,h,u,d,p,f;var m=S(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=m.x,t.overallVelocityY=m.y,t.overallVelocity=ie(m.x)>ie(m.y)?m.x:m.y,t.scale=s?(y=s.pointers,_=n,A(_[0],_[1],Ee)/A(y[0],y[1],Ee)):1,t.rotation=s?(g=s.pointers,v=n,P(v[1],v[0],Ee)+P(g[1],g[0],Ee)):0,t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length,function(e,t){var i,n,r,a,s=e.lastInterval||t,o=t.timeStamp-s.timeStamp;if(t.eventType!=fe&&(ue<o||s.velocity===b)){var l=t.deltaX-s.deltaX,c=t.deltaY-s.deltaY,h=S(o,l,c);n=h.x,r=h.y,i=ie(h.x)>ie(h.y)?h.x:h.y,a=C(l,c),e.lastInterval=t}else i=s.velocity,n=s.velocityX,r=s.velocityY,a=s.direction;t.velocity=i,t.velocityX=n,t.velocityY=r,t.direction=a}(i,t);var g,v;var y,_;var x=e.element;w(t.srcEvent.target,x)&&(x=t.srcEvent.target),t.target=x}(e,i),e.emit("hammer.input",i),e.recognize(i),e.session.prevInput=i}function E(e){for(var t=[],i=0;i<e.pointers.length;)t[i]={clientX:te(e.pointers[i].clientX),clientY:te(e.pointers[i].clientY)},i++;return{timeStamp:ne(),pointers:t,center:M(t),deltaX:e.deltaX,deltaY:e.deltaY}}function M(e){var t=e.length;if(1===t)return{x:te(e[0].clientX),y:te(e[0].clientY)};for(var i=0,n=0,r=0;r<t;)i+=e[r].clientX,n+=e[r].clientY,r++;return{x:te(i/t),y:te(n/t)}}function S(e,t,i){return{x:t/e||0,y:i/e||0}}function C(e,t){return e===t?me:ie(e)>=ie(t)?e<0?ge:ve:t<0?ye:_e}function A(e,t,i){i||(i=Te);var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return Math.sqrt(n*n+r*r)}function P(e,t,i){i||(i=Te);var n=t[i[0]]-e[i[0]],r=t[i[1]]-e[i[1]];return 180*Math.atan2(r,n)/Math.PI}function L(){this.evEl=Se,this.evWin=Ce,this.pressed=!1,x.apply(this,arguments)}function R(){this.evEl=Le,this.evWin=Re,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,x.apply(this,arguments)}function I(){this.evTarget=De,this.targetIds={},x.apply(this,arguments)}function D(){x.apply(this,arguments);var e=r(this.handler,this);this.touch=new I(this.manager,e),this.mouse=new L(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function k(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var e=n.indexOf(i);-1<e&&n.splice(e,1)},ke)}}function N(e,t){this.manager=e,this.set(t)}function z(e){this.options=J({},this.defaults,e||{}),this.id=se++,this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=Ve,this.simultaneous={},this.requireFail=[]}function B(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function H(e){return e==_e?"down":e==ye?"up":e==ge?"left":e==ve?"right":""}function F(e,t){var i=t.manager;return i?i.get(e):e}function U(){z.apply(this,arguments)}function G(){U.apply(this,arguments),this.pX=null,this.pY=null}function V(){U.apply(this,arguments)}function j(){z.apply(this,arguments),this._timer=null,this._input=null}function W(){U.apply(this,arguments)}function X(){U.apply(this,arguments)}function Y(){z.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function q(e,t){return(t=t||{}).recognizers=h(t.recognizers,q.defaults.preset),new $(e,t)}function $(e,t){var i;this.options=J({},q.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((i=this).options.inputClass||(le?R:ce?I:oe?D:L))(i,T),this.touchAction=new N(this,this.options.touchAction),Z(this,!0),s(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function Z(i,n){var r,a=i.element;a.style&&(s(i.options.cssProps,function(e,t){r=y(a.style,t),a.style[r]=n?(i.oldCssProps[r]=a.style[r],e):i.oldCssProps[r]||""}),n||(i.oldCssProps={}))}var J,K=["","webkit","Moz","MS","ms","o"],Q=o.createElement("div"),ee="function",te=Math.round,ie=Math.abs,ne=Date.now;J="function"!=typeof Object.assign?function(e){if(e===b||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==b&&null!==n)for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}:Object.assign;var re=t(function(e,t,i){for(var n=Object.keys(t),r=0;r<n.length;)(!i||i&&e[n[r]]===b)&&(e[n[r]]=t[n[r]]),r++;return e},"extend","Use `assign`."),ae=t(function(e,t){return re(e,t,!0)},"merge","Use `assign`."),se=1,oe="ontouchstart"in a,le=y(a,"PointerEvent")!==b,ce=oe&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),he="touch",ue=25,de=1,pe=4,fe=8,me=1,ge=2,ve=4,ye=8,_e=16,xe=ge|ve,be=ye|_e,we=xe|be,Te=["x","y"],Ee=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&u(this.element,this.evEl,this.domHandler),this.evTarget&&u(this.target,this.evTarget,this.domHandler),this.evWin&&u(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(_(this.element),this.evWin,this.domHandler)}};var Me={mousedown:de,mousemove:2,mouseup:pe},Se="mousedown",Ce="mousemove mouseup";i(L,x,{handler:function(e){var t=Me[e.type];t&de&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=pe),this.pressed&&(t&pe&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var Ae={pointerdown:de,pointermove:2,pointerup:pe,pointercancel:fe,pointerout:fe},Pe={2:he,3:"pen",4:"mouse",5:"kinect"},Le="pointerdown",Re="pointermove pointerup pointercancel";a.MSPointerEvent&&!a.PointerEvent&&(Le="MSPointerDown",Re="MSPointerMove MSPointerUp MSPointerCancel"),i(R,x,{handler:function(e){var t=this.store,i=!1,n=e.type.toLowerCase().replace("ms",""),r=Ae[n],a=Pe[e.pointerType]||e.pointerType,s=a==he,o=m(t,e.pointerId,"pointerId");r&de&&(0===e.button||s)?o<0&&(t.push(e),o=t.length-1):r&(pe|fe)&&(i=!0),o<0||(t[o]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),i&&t.splice(o,1))}});var Oe={touchstart:de,touchmove:2,touchend:pe,touchcancel:fe};i(O,x,{handler:function(e){var t=Oe[e.type];if(t===de&&(this.started=!0),this.started){var i=function(e,t){var i=g(e.touches),n=g(e.changedTouches);return t&(pe|fe)&&(i=v(i.concat(n),"identifier",!0)),[i,n]}.call(this,e,t);t&(pe|fe)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:he,srcEvent:e})}}});var Ie={touchstart:de,touchmove:2,touchend:pe,touchcancel:fe},De="touchstart touchmove touchend touchcancel";i(I,x,{handler:function(e){var t=Ie[e.type],i=function(e,t){var i=g(e.touches),n=this.targetIds;if(t&(2|de)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,a,s=g(e.changedTouches),o=[],l=this.target;if(a=i.filter(function(e){return w(e.target,l)}),t===de)for(r=0;r<a.length;)n[a[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&o.push(s[r]),t&(pe|fe)&&delete n[s[r].identifier],r++;return o.length?[v(a.concat(o),"identifier",!0),o]:void 0}.call(this,e,t);i&&this.callback(this.manager,t,{pointers:i[0],changedPointers:i[1],pointerType:he,srcEvent:e})}});var ke=2500;i(D,x,{handler:function(e,t,i){var n=i.pointerType==he,r="mouse"==i.pointerType;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(e,t){e&de?(this.primaryTouch=t.changedPointers[0].identifier,k.call(this,t)):e&(pe|fe)&&k.call(this,t)}).call(this,t,i);else if(r&&function(e){for(var t=e.srcEvent.clientX,i=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],a=Math.abs(t-r.x),s=Math.abs(i-r.y);if(a<=25&&s<=25)return!0}return!1}.call(this,i))return;this.callback(e,t,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ne=y(Q.style,"touchAction"),ze=Ne!==b,Be="manipulation",He="none",Fe="pan-x",Ue="pan-y",Ge=function(){if(!ze)return!1;var t={},i=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(e){t[e]=!i||a.CSS.supports("touch-action",e)}),t}();N.prototype={set:function(e){"compute"==e&&(e=this.compute()),ze&&this.manager.element.style&&Ge[e]&&(this.manager.element.style[Ne]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(e){if(p(e,He))return He;var t=p(e,Fe),i=p(e,Ue);return t&&i?He:t||i?t?Fe:Ue:p(e,Be)?Be:"auto"}(t.join(" "))},preventDefaults:function(e){var t=e.srcEvent,i=e.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,r=p(n,He)&&!Ge.none,a=p(n,Ue)&&!Ge[Ue],s=p(n,Fe)&&!Ge[Fe];if(r){var o=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(o&&l&&c)return}return s&&a?void 0:r||a&&i&xe||s&&i&be?this.preventSrc(t):void 0}t.preventDefault()},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Ve=1;z.prototype={defaults:{},set:function(e){return J(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=F(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=F(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===m(t,e=F(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=F(e,this);var t=m(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){function e(e){i.manager.emit(e,t)}var i=this,n=this.state;n<8&&e(i.options.event+B(n)),e(i.options.event),t.additionalEvent&&e(t.additionalEvent),8<=n&&e(i.options.event+B(n))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Ve)))return!1;e++}return!0},recognize:function(e){var t=J({},e);return c(this.options.enable,[this,t])?(56&this.state&&(this.state=Ve),this.state=this.process(t),void(30&this.state&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(e){},getTouchAction:function(){},reset:function(){}},i(U,z,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,i=e.eventType,n=6&t,r=this.attrTest(e);return n&&(i&fe||!r)?16|t:n||r?i&pe?8|t:2&t?4|t:2:32}}),i(G,U,{defaults:{event:"pan",threshold:10,pointers:1,direction:we},getTouchAction:function(){var e=this.options.direction,t=[];return e&xe&&t.push(Ue),e&be&&t.push(Fe),t},directionTest:function(e){var t=this.options,i=!0,n=e.distance,r=e.direction,a=e.deltaX,s=e.deltaY;return r&t.direction||(n=t.direction&xe?(r=0===a?me:a<0?ge:ve,i=a!=this.pX,Math.abs(e.deltaX)):(r=0===s?me:s<0?ye:_e,i=s!=this.pY,Math.abs(e.deltaY))),e.direction=r,i&&n>t.threshold&&r&t.direction},attrTest:function(e){return U.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=H(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),i(V,U,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[He]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),i(j,z,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!n||!i||e.eventType&(pe|fe)&&!r)this.reset();else if(e.eventType&de)this.reset(),this._timer=l(function(){this.state=8,this.tryEmit()},t.time,this);else if(e.eventType&pe)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&e.eventType&pe?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ne(),this.manager.emit(this.options.event,this._input)))}}),i(W,U,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[He]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),i(X,U,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:xe|be,pointers:1},getTouchAction:function(){return G.prototype.getTouchAction.call(this)},attrTest:function(e){var t,i=this.options.direction;return i&(xe|be)?t=e.overallVelocity:i&xe?t=e.overallVelocityX:i&be&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&i&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ie(t)>this.options.velocity&&e.eventType&pe},emit:function(e){var t=H(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),i(Y,z,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Be]},process:function(e){var t=this.options,i=e.pointers.length===t.pointers,n=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&de&&0===this.count)return this.failTimeout();if(n&&r&&i){if(e.eventType!=pe)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||A(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=l(function(){this.state=8,this.tryEmit()},t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=l(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),q.VERSION="2.0.8",q.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[W,{enable:!1}],[V,{enable:!1},["rotate"]],[X,{direction:xe}],[G,{direction:xe},["swipe"]],[Y],[Y,{event:"doubletap",taps:2},["tap"]],[j]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};$.prototype={set:function(e){return J(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var i,n=this.recognizers,r=t.curRecognizer;(!r||r&&8&r.state)&&(r=t.curRecognizer=null);for(var a=0;a<n.length;)i=n[a],2===t.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(e),!r&&14&i.state&&(r=t.curRecognizer=i),a++}},get:function(e){if(e instanceof z)return e;for(var t=this.recognizers,i=0;i<t.length;i++)if(t[i].options.event==e)return t[i];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(n(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,i=m(t,e);-1!==i&&(t.splice(i,1),this.touchAction.update())}return this},on:function(e,t){if(e!==b&&t!==b){var i=this.handlers;return s(f(e),function(e){i[e]=i[e]||[],i[e].push(t)}),this}},off:function(e,t){if(e!==b){var i=this.handlers;return s(f(e),function(e){t?i[e]&&i[e].splice(m(i[e],t),1):delete i[e]}),this}},emit:function(e,t){var i,n,r;this.options.domEvents&&(i=e,n=t,(r=o.createEvent("Event")).initEvent(i,!0,!0),(r.gesture=n).target.dispatchEvent(r));var a=this.handlers[e]&&this.handlers[e].slice();if(a&&a.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var s=0;s<a.length;)a[s](t),s++}},destroy:function(){this.element&&Z(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},J(q,{INPUT_START:de,INPUT_MOVE:2,INPUT_END:pe,INPUT_CANCEL:fe,STATE_POSSIBLE:Ve,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:me,DIRECTION_LEFT:ge,DIRECTION_RIGHT:ve,DIRECTION_UP:ye,DIRECTION_DOWN:_e,DIRECTION_HORIZONTAL:xe,DIRECTION_VERTICAL:be,DIRECTION_ALL:we,Manager:$,Input:x,TouchAction:N,TouchInput:I,MouseInput:L,PointerEventInput:R,TouchMouseInput:D,SingleTouchInput:O,Recognizer:z,AttrRecognizer:U,Tap:Y,Pan:G,Swipe:X,Pinch:V,Rotate:W,Press:j,on:u,off:d,each:s,merge:ae,extend:re,assign:J,inherit:i,bindFn:r,prefixed:y}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=q,"function"==typeof define&&define.amd?define(function(){return q}):"undefined"!=typeof module&&module.exports?module.exports=q:a.Hammer=q}(window,document),function(){"use strict";var w=void 0,a=this;function e(e,t){var i,n=e.split("."),r=a;!(n[0]in r)&&r.execScript&&r.execScript("var "+n[0]);for(;n.length&&(i=n.shift());)n.length||t===w?r=r[i]?r[i]:r[i]={}:r[i]=t}var T="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function E(e){var t,i,n,r,a,s,o,l,c,h,u=e.length,d=0,p=Number.POSITIVE_INFINITY;for(l=0;l<u;++l)e[l]>d&&(d=e[l]),e[l]<p&&(p=e[l]);for(t=1<<d,i=new(T?Uint32Array:Array)(t),n=1,r=0,a=2;n<=d;){for(l=0;l<u;++l)if(e[l]===n){for(o=r,c=s=0;c<n;++c)s=s<<1|1&o,o>>=1;for(h=n<<16|l,c=s;c<t;c+=a)i[c]=h;++r}++n,r<<=1,a<<=1}return[i,d,p]}function r(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=T?new Uint8Array(e):e,this.m=!1,this.i=S,this.r=!1,(t||(t={},0))&&(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case M:this.b=32768,this.c=new(T?Uint8Array:Array)(32768+this.h+258);break;case S:this.b=0,this.c=new(T?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var M=0,S=1,t=M,i=S;r.prototype.k=function(){for(;!this.m;){var e=L(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,i=this.a,n=this.c,r=this.b,a=t.length,s=w,o=n.length,l=w;if(this.d=this.f=0,a<=i+1)throw Error("invalid uncompressed block header: LEN");if(s=t[i++]|t[i++]<<8,a<=i+1)throw Error("invalid uncompressed block header: NLEN");if(s===~(t[i++]|t[i++]<<8))throw Error("invalid uncompressed block header: length verify");if(i+s>t.length)throw Error("input buffer is broken");switch(this.i){case M:for(;r+s>n.length;){if(s-=l=o-r,T)n.set(t.subarray(i,i+l),r),r+=l,i+=l;else for(;l--;)n[r++]=t[i++];this.b=r,n=this.e(),r=this.b}break;case S:for(;r+s>n.length;)n=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(T)n.set(t.subarray(i,i+s),r),r+=s,i+=s;else for(;s--;)n[r++]=t[i++];this.a=i,this.b=r,this.c=n;break;case 1:this.j(A,P);break;case 2:var c,h,u,d,p=L(this,5)+257,f=L(this,5)+1,m=L(this,4)+4,g=new(T?Uint8Array:Array)(C.length),v=w,y=w,_=w,x=w,b=w;for(b=0;b<m;++b)g[C[b]]=L(this,3);if(!T)for(b=m,m=g.length;b<m;++b)g[C[b]]=0;for(c=E(g),v=new(T?Uint8Array:Array)(p+f),b=0,d=p+f;b<d;)switch(y=R(this,c),y){case 16:for(x=3+L(this,2);x--;)v[b++]=_;break;case 17:for(x=3+L(this,3);x--;)v[b++]=0;_=0;break;case 18:for(x=11+L(this,7);x--;)v[b++]=0;_=0;break;default:_=v[b++]=y}h=E(T?v.subarray(0,p):v.slice(0,p)),u=E(T?v.subarray(p):v.slice(p)),this.j(h,u);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var n,s,o=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=T?new Uint16Array(o):o,l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],c=T?new Uint16Array(l):l,h=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],u=T?new Uint8Array(h):h,d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],p=T?new Uint16Array(d):d,f=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],m=T?new Uint8Array(f):f,g=new(T?Uint8Array:Array)(288);for(n=0,s=g.length;n<s;++n)g[n]=n<=143?8:n<=255?9:n<=279?7:8;var v,y,A=E(g),_=new(T?Uint8Array:Array)(30);for(v=0,y=_.length;v<y;++v)_[v]=5;var P=E(_);function L(e,t){for(var i,n=e.f,r=e.d,a=e.input,s=e.a,o=a.length;r<t;){if(o<=s)throw Error("input buffer is broken");n|=a[s++]<<r,r+=8}return i=n&(1<<t)-1,e.f=n>>>t,e.d=r-t,e.a=s,i}function R(e,t){for(var i,n,r=e.f,a=e.d,s=e.input,o=e.a,l=s.length,c=t[0],h=t[1];a<h&&!(l<=o);)r|=s[o++]<<a,a+=8;if(a<(n=(i=c[r&(1<<h)-1])>>>16))throw Error("invalid code length: "+n);return e.f=r>>n,e.d=a-n,e.a=o,65535&i}function x(e,t){var i,n;switch(this.input=e,this.a=0,(t||(t={},0))&&(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),i=e[this.a++],n=e[this.a++],15&i){case b:this.method=b;break;default:throw Error("unsupported compression method")}if(0!=((i<<8)+n)%31)throw Error("invalid fcheck flag:"+((i<<8)+n)%31);if(32&n)throw Error("fdict flag is not supported");this.q=new r(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}r.prototype.j=function(e,t){var i=this.c,n=this.b;this.o=e;for(var r,a,s,o,l=i.length-258;256!==(r=R(this,e));)if(r<256)l<=n&&(this.b=n,i=this.e(),n=this.b),i[n++]=r;else for(o=c[a=r-257],0<u[a]&&(o+=L(this,u[a])),r=R(this,t),s=p[r],0<m[r]&&(s+=L(this,m[r])),l<=n&&(this.b=n,i=this.e(),n=this.b);o--;)i[n]=i[n++-s];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},r.prototype.w=function(e,t){var i=this.c,n=this.b;this.o=e;for(var r,a,s,o,l=i.length;256!==(r=R(this,e));)if(r<256)l<=n&&(l=(i=this.e()).length),i[n++]=r;else for(o=c[a=r-257],0<u[a]&&(o+=L(this,u[a])),r=R(this,t),s=p[r],0<m[r]&&(s+=L(this,m[r])),l<n+o&&(l=(i=this.e()).length);o--;)i[n]=i[n++-s];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},r.prototype.e=function(){var e,t,i=new(T?Uint8Array:Array)(this.b-32768),n=this.b-32768,r=this.c;if(T)i.set(r.subarray(32768,i.length));else for(e=0,t=i.length;e<t;++e)i[e]=r[e+32768];if(this.g.push(i),this.l+=i.length,T)r.set(r.subarray(n,n+32768));else for(e=0;e<32768;++e)r[e]=r[n+e];return this.b=32768,r},r.prototype.z=function(e){var t,i,n,r=this.input.length/this.a+1|0,a=this.input,s=this.c;return e&&("number"==typeof e.p&&(r=e.p),"number"==typeof e.u&&(r+=e.u)),i=r<2?(n=(a.length-this.a)/this.o[2]/2*258|0)<s.length?s.length+n:s.length<<1:s.length*r,T?(t=new Uint8Array(i)).set(s):t=s,this.c=t},r.prototype.n=function(){var e,t,i,n,r,a=0,s=this.c,o=this.g,l=new(T?Uint8Array:Array)(this.l+(this.b-32768));if(0===o.length)return T?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,i=o.length;t<i;++t)for(n=0,r=(e=o[t]).length;n<r;++n)l[a++]=e[n];for(t=32768,i=this.b;t<i;++t)l[a++]=s[t];return this.g=[],this.buffer=l},r.prototype.v=function(){var e,t=this.b;return T?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},x.prototype.k=function(){var e,t,i=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var n=e;if("string"==typeof n){var r,a,s=n.split("");for(r=0,a=s.length;r<a;r++)s[r]=(255&s[r].charCodeAt(0))>>>0;n=s}for(var o,l=1,c=0,h=n.length,u=0;0<h;){for(h-=o=1024<h?1024:h;c+=l+=n[u++],--o;);l%=65521,c%=65521}if(t!==(c<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var b=8;e("Zlib.Inflate",x),e("Zlib.Inflate.prototype.decompress",x.prototype.k);var O,I,D,k,N={ADAPTIVE:i,BLOCK:t};if(Object.keys)O=Object.keys(N);else for(I in O=[],D=0,N)O[D++]=I;for(D=0,k=O.length;D<k;++D)e("Zlib.Inflate.BufferType."+(I=O[D]),N[I])}.call(this),THREE.OBJLoader=function(){var j=/^[og]\s*(.+)?/,W=/^mtllib /,X=/^usemtl /;function Y(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&0<t.length?t[t.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&1<this.materials.length)for(var i=this.materials.length-1;0<=i;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},i&&i.name&&"function"==typeof i.clone){var n=i.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var i=parseInt(e,10);return 3*(0<=i?i-1:i+t/3)},parseNormalIndex:function(e,t){var i=parseInt(e,10);return 3*(0<=i?i-1:i+t/3)},parseUVIndex:function(e,t){var i=parseInt(e,10);return 2*(0<=i?i-1:i+t/2)},addVertex:function(e,t,i){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){var n=this.normals,r=this.object.geometry.normals;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addColor:function(e,t,i){var n=this.colors,r=this.object.geometry.colors;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addUV:function(e,t,i){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[e+0],n[e+1]),r.push(n[t+0],n[t+1]),r.push(n[i+0],n[i+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,n,r,a,s,o,l){var c=this.vertices.length,h=this.parseVertexIndex(e,c),u=this.parseVertexIndex(t,c),d=this.parseVertexIndex(i,c);if(this.addVertex(h,u,d),void 0!==n&&""!==n){var p=this.uvs.length;h=this.parseUVIndex(n,p),u=this.parseUVIndex(r,p),d=this.parseUVIndex(a,p),this.addUV(h,u,d)}if(void 0!==s&&""!==s){var f=this.normals.length;h=this.parseNormalIndex(s,f),u=s===o?h:this.parseNormalIndex(o,f),d=s===l?h:this.parseNormalIndex(l,f),this.addNormal(h,u,d)}0<this.colors.length&&this.addColor(h,u,d)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,i=0,n=e.length;i<n;i++)this.addVertexPoint(this.parseVertexIndex(e[i],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var i=this.vertices.length,n=this.uvs.length,r=0,a=e.length;r<a;r++)this.addVertexLine(this.parseVertexIndex(e[r],i));var s=0;for(a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],n))}};return e.startObject("",!1),e}function e(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null}return e.prototype={constructor:e,load:function(e,t,i,n){var r=this,a=new THREE.FileLoader(r.manager);a.setPath(this.path),a.load(e,function(e){t(r.parse(e))},i,n)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(e){console.time("OBJLoader");var t=new Y;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));for(var i=e.split("\n"),n="",r="",a=[],s="function"==typeof"".trimLeft,o=0,l=i.length;o<l;o++)if(n=i[o],0!==(n=s?n.trimLeft():n.trim()).length&&"#"!==(r=n.charAt(0)))if("v"===r){var c=n.split(/\s+/);switch(c[0]){case"v":t.vertices.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3])),8===c.length&&t.colors.push(parseFloat(c[4]),parseFloat(c[5]),parseFloat(c[6]));break;case"vn":t.normals.push(parseFloat(c[1]),parseFloat(c[2]),parseFloat(c[3]));break;case"vt":t.uvs.push(parseFloat(c[1]),parseFloat(c[2]))}}else if("f"===r){for(var h=n.substr(1).trim().split(/\s+/),u=[],d=0,p=h.length;d<p;d++){var f=h[d];if(0<f.length){var m=f.split("/");u.push(m)}}var g=u[0];for(d=1,p=u.length-1;d<p;d++){var v=u[d],y=u[d+1];t.addFace(g[0],v[0],y[0],g[1],v[1],y[1],g[2],v[2],y[2])}}else if("l"===r){var _=n.substring(1).trim().split(" "),x=[],b=[];if(-1===n.indexOf("/"))x=_;else for(var w=0,T=_.length;w<T;w++){var E=_[w].split("/");""!==E[0]&&x.push(E[0]),""!==E[1]&&b.push(E[1])}t.addLineGeometry(x,b)}else if("p"===r){var M=n.substr(1).trim().split(" ");t.addPointGeometry(M)}else if(null!==(a=j.exec(n))){var S=(" "+a[0].substr(1).trim()).substr(1);t.startObject(S)}else if(X.test(n))t.object.startMaterial(n.substring(7).trim(),t.materialLibraries);else if(W.test(n))t.materialLibraries.push(n.substring(7).trim());else{if("s"!==r){if("\0"===n)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+n+'"')}if(1<(a=n.split(" ")).length){var C=a[1].trim().toLowerCase();t.object.smooth="0"!==C&&"off"!==C}else t.object.smooth=!0;(U=t.object.currentMaterial())&&(U.smooth=t.object.smooth)}t.finalize();var A=new THREE.Group;A.materialLibraries=[].concat(t.materialLibraries);for(o=0,l=t.objects.length;o<l;o++){var P=t.objects[o],L=P.geometry,R=P.materials,O="Line"===L.type,I="Points"===L.type,D=!1;if(0!==L.vertices.length){var k=new THREE.BufferGeometry;k.addAttribute("position",new THREE.Float32BufferAttribute(L.vertices,3)),0<L.normals.length?k.addAttribute("normal",new THREE.Float32BufferAttribute(L.normals,3)):k.computeVertexNormals(),0<L.colors.length&&(D=!0,k.addAttribute("color",new THREE.Float32BufferAttribute(L.colors,3))),0<L.uvs.length&&k.addAttribute("uv",new THREE.Float32BufferAttribute(L.uvs,2));for(var N,z=[],B=0,H=R.length;B<H;B++){var F=R[B],U=void 0;if(null!==this.materials)if(U=this.materials.create(F.name),!O||!U||U instanceof THREE.LineBasicMaterial){if(I&&U&&!(U instanceof THREE.PointsMaterial)){var G=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});V.copy(U),U=G}}else{var V=new THREE.LineBasicMaterial;V.copy(U),V.lights=!1,U=V}U||((U=O?new THREE.LineBasicMaterial:I?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial).name=F.name),U.flatShading=!F.smooth,U.vertexColors=D?THREE.VertexColors:THREE.NoColors,z.push(U)}if(1<z.length){for(B=0,H=R.length;B<H;B++){F=R[B];k.addGroup(F.groupStart,F.groupCount,B)}N=O?new THREE.LineSegments(k,z):I?new THREE.Points(k,z):new THREE.Mesh(k,z)}else N=O?new THREE.LineSegments(k,z[0]):I?new THREE.Points(k,z[0]):new THREE.Mesh(k,z[0]);N.name=P.name,A.add(N)}}return console.timeEnd("OBJLoader"),A}},e}(),THREE.OrbitControls=function(e,t){var i,n,r,a,s;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){o.target0.copy(o.target),o.position0.copy(o.object.position),o.zoom0=o.object.zoom},this.reset=function(){o.target.copy(o.target0),o.object.position.copy(o.position0),o.object.zoom=o.zoom0,o.object.updateProjectionMatrix(),o.dispatchEvent(l),o.update(),d=u.NONE},this.update=(i=new THREE.Vector3,n=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),r=n.clone().inverse(),a=new THREE.Vector3,s=new THREE.Quaternion,function(){var e=o.object.position;return i.copy(e).sub(o.target),i.applyQuaternion(n),f.setFromVector3(i),o.autoRotate&&d===u.NONE&&P(2*Math.PI/60/60*o.autoRotateSpeed),f.theta+=m.theta,f.phi+=m.phi,f.theta=Math.max(o.minAzimuthAngle,Math.min(o.maxAzimuthAngle,f.theta)),f.phi=Math.max(o.minPolarAngle,Math.min(o.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=g,f.radius=Math.max(o.minDistance,Math.min(o.maxDistance,f.radius)),o.target.add(v),i.setFromSpherical(f),i.applyQuaternion(r),e.copy(o.target).add(i),o.object.lookAt(o.target),!0===o.enableDamping?(m.theta*=1-o.dampingFactor,m.phi*=1-o.dampingFactor,v.multiplyScalar(1-o.dampingFactor)):(m.set(0,0,0),v.set(0,0,0)),g=1,!(!(y||a.distanceToSquared(o.object.position)>p||8*(1-s.dot(o.object.quaternion))>p)||(o.dispatchEvent(l),a.copy(o.object.position),s.copy(o.object.quaternion),y=!1))}),this.dispose=function(){o.domElement.removeEventListener("contextmenu",Y,!1),o.domElement.removeEventListener("mousedown",H,!1),o.domElement.removeEventListener("wheel",G,!1),o.domElement.removeEventListener("touchstart",j,!1),o.domElement.removeEventListener("touchend",X,!1),o.domElement.removeEventListener("touchmove",W,!1),document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",U,!1),window.removeEventListener("keydown",V,!1)};var o=this,l={type:"change"},c={type:"start"},h={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},d=u.NONE,p=1e-6,f=new THREE.Spherical,m=new THREE.Spherical,g=1,v=new THREE.Vector3,y=!1,_=new THREE.Vector2,x=new THREE.Vector2,b=new THREE.Vector2,w=new THREE.Vector2,T=new THREE.Vector2,E=new THREE.Vector2,M=new THREE.Vector2,S=new THREE.Vector2,C=new THREE.Vector2;function A(){return Math.pow(.95,o.zoomSpeed)}function P(e){m.theta-=e}function L(e){m.phi-=e}var R,O,I,D=(R=new THREE.Vector3,function(e,t){R.setFromMatrixColumn(t,0),R.multiplyScalar(-e),v.add(R)}),k=(O=new THREE.Vector3,function(e,t){!0===o.screenSpacePanning?O.setFromMatrixColumn(t,1):(O.setFromMatrixColumn(t,0),O.crossVectors(o.object.up,O)),O.multiplyScalar(e),v.add(O)}),N=(I=new THREE.Vector3,function(e,t){var i=o.domElement===document?o.domElement.body:o.domElement;if(o.object.isPerspectiveCamera){var n=o.object.position;I.copy(n).sub(o.target);var r=I.length();r*=Math.tan(o.object.fov/2*Math.PI/180),D(2*e*r/i.clientHeight,o.object.matrix),k(2*t*r/i.clientHeight,o.object.matrix)}else o.object.isOrthographicCamera?(D(e*(o.object.right-o.object.left)/o.object.zoom/i.clientWidth,o.object.matrix),k(t*(o.object.top-o.object.bottom)/o.object.zoom/i.clientHeight,o.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),o.enablePan=!1)});function z(e){o.object.isPerspectiveCamera?g/=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom*e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function B(e){o.object.isPerspectiveCamera?g*=e:o.object.isOrthographicCamera?(o.object.zoom=Math.max(o.minZoom,Math.min(o.maxZoom,o.object.zoom/e)),o.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),o.enableZoom=!1)}function H(e){if(!1!==o.enabled){switch(e.preventDefault(),e.button){case o.mouseButtons.ORBIT:if(!1===o.enableRotate)return;n=e,_.set(n.clientX,n.clientY),d=u.ROTATE;break;case o.mouseButtons.ZOOM:if(!1===o.enableZoom)return;i=e,M.set(i.clientX,i.clientY),d=u.DOLLY;break;case o.mouseButtons.PAN:if(!1===o.enablePan)return;t=e,w.set(t.clientX,t.clientY),d=u.PAN}var t,i,n;d!==u.NONE&&(document.addEventListener("mousemove",F,!1),document.addEventListener("mouseup",U,!1),o.dispatchEvent(c))}}function F(e){var t,i;if(!1!==o.enabled)switch(e.preventDefault(),d){case u.ROTATE:if(!1===o.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),b.subVectors(x,_).multiplyScalar(o.rotateSpeed);var t=o.domElement===document?o.domElement.body:o.domElement;P(2*Math.PI*b.x/t.clientWidth),L(2*Math.PI*b.y/t.clientHeight),_.copy(x),o.update()}(e);break;case u.DOLLY:if(!1===o.enableZoom)return;i=e,S.set(i.clientX,i.clientY),C.subVectors(S,M),0<C.y?z(A()):C.y<0&&B(A()),M.copy(S),o.update();break;case u.PAN:if(!1===o.enablePan)return;t=e,T.set(t.clientX,t.clientY),E.subVectors(T,w).multiplyScalar(o.panSpeed),N(E.x,E.y),w.copy(T),o.update()}}function U(e){!1!==o.enabled&&(document.removeEventListener("mousemove",F,!1),document.removeEventListener("mouseup",U,!1),o.dispatchEvent(h),d=u.NONE)}function G(e){var t;!1===o.enabled||!1===o.enableZoom||d!==u.NONE&&d!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),o.dispatchEvent(c),(t=e).deltaY<0?B(A()):0<t.deltaY&&z(A()),o.update(),o.dispatchEvent(h))}function V(e){!1!==o.enabled&&!1!==o.enableKeys&&!1!==o.enablePan&&function(e){switch(e.keyCode){case o.keys.UP:N(0,o.keyPanSpeed),o.update();break;case o.keys.BOTTOM:N(0,-o.keyPanSpeed),o.update();break;case o.keys.LEFT:N(o.keyPanSpeed,0),o.update();break;case o.keys.RIGHT:N(-o.keyPanSpeed,0),o.update()}}(e)}function j(e){if(!1!==o.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===o.enableRotate)return;t=e,_.set(t.touches[0].pageX,t.touches[0].pageY),d=u.TOUCH_ROTATE;break;case 2:if(!1===o.enableZoom&&!1===o.enablePan)return;!function(e){if(o.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);M.set(0,n)}if(o.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(r,a)}}(e),d=u.TOUCH_DOLLY_PAN;break;default:d=u.NONE}var t;d!==u.NONE&&o.dispatchEvent(c)}}function W(e){if(!1!==o.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===o.enableRotate)return;if(d!==u.TOUCH_ROTATE)return;!function(e){x.set(e.touches[0].pageX,e.touches[0].pageY),b.subVectors(x,_).multiplyScalar(o.rotateSpeed);var t=o.domElement===document?o.domElement.body:o.domElement;P(2*Math.PI*b.x/t.clientWidth),L(2*Math.PI*b.y/t.clientHeight),_.copy(x),o.update()}(e);break;case 2:if(!1===o.enableZoom&&!1===o.enablePan)return;if(d!==u.TOUCH_DOLLY_PAN)return;!function(e){if(o.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);S.set(0,n),C.set(0,Math.pow(S.y/M.y,o.zoomSpeed)),z(C.y),M.copy(S)}if(o.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);T.set(r,a),E.subVectors(T,w).multiplyScalar(o.panSpeed),N(E.x,E.y),w.copy(T)}o.update()}(e);break;default:d=u.NONE}}function X(e){!1!==o.enabled&&(o.dispatchEvent(h),d=u.NONE)}function Y(e){!1!==o.enabled&&e.preventDefault()}o.domElement.addEventListener("contextmenu",Y,!1),o.domElement.addEventListener("mousedown",H,!1),o.domElement.addEventListener("wheel",G,!1),o.domElement.addEventListener("touchstart",j,!1),o.domElement.addEventListener("touchend",X,!1),o.domElement.addEventListener("touchmove",W,!1),window.addEventListener("keydown",V,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Swiper=t()}(this,function(){"use strict";var m="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,U="undefined"==typeof window?{document:m,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window,l=function(e){for(var t=0;t<e.length;t+=1)this[t]=e[t];return this.length=e.length,this};function R(e,t){var i=[],n=0;if(e&&!t&&e instanceof l)return e;if(e)if("string"==typeof e){var r,a,s=e.trim();if(0<=s.indexOf("<")&&0<=s.indexOf(">")){var o="div";for(0===s.indexOf("<li")&&(o="ul"),0===s.indexOf("<tr")&&(o="tbody"),0!==s.indexOf("<td")&&0!==s.indexOf("<th")||(o="tr"),0===s.indexOf("<tbody")&&(o="table"),0===s.indexOf("<option")&&(o="select"),(a=m.createElement(o)).innerHTML=s,n=0;n<a.childNodes.length;n+=1)i.push(a.childNodes[n])}else for(r=t||"#"!==e[0]||e.match(/[ .<>:~]/)?(t||m).querySelectorAll(e.trim()):[m.getElementById(e.trim().split("#")[1])],n=0;n<r.length;n+=1)r[n]&&i.push(r[n])}else if(e.nodeType||e===U||e===m)i.push(e);else if(0<e.length&&e[0].nodeType)for(n=0;n<e.length;n+=1)i.push(e[n]);return new l(i)}function a(e){for(var t=[],i=0;i<e.length;i+=1)-1===t.indexOf(e[i])&&t.push(e[i]);return t}R.fn=l.prototype,R.Class=l,R.Dom7=l;var t={addClass:function(e){if(void 0===e)return this;for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var n=0;n<this.length;n+=1)void 0!==this[n]&&void 0!==this[n].classList&&this[n].classList.add(t[i]);return this},removeClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var n=0;n<this.length;n+=1)void 0!==this[n]&&void 0!==this[n].classList&&this[n].classList.remove(t[i]);return this},hasClass:function(e){return!!this[0]&&this[0].classList.contains(e)},toggleClass:function(e){for(var t=e.split(" "),i=0;i<t.length;i+=1)for(var n=0;n<this.length;n+=1)void 0!==this[n]&&void 0!==this[n].classList&&this[n].classList.toggle(t[i]);return this},attr:function(e,t){var i=arguments;if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===i.length)this[n].setAttribute(e,t);else for(var r in e)this[n][r]=e[r],this[n].setAttribute(r,e[r]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},data:function(e,t){var i;if(void 0!==t){for(var n=0;n<this.length;n+=1)(i=this[n]).dom7ElementDataStorage||(i.dom7ElementDataStorage={}),i.dom7ElementDataStorage[e]=t;return this}if(i=this[0]){if(i.dom7ElementDataStorage&&e in i.dom7ElementDataStorage)return i.dom7ElementDataStorage[e];var r=i.getAttribute("data-"+e);return r||void 0}},transform:function(e){for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransform=e,i.transform=e}return this},transition:function(e){"string"!=typeof e&&(e+="ms");for(var t=0;t<this.length;t+=1){var i=this[t].style;i.webkitTransitionDuration=e,i.transitionDuration=e}return this},on:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var n=t[0],a=t[1],s=t[2],r=t[3];function o(e){var t=e.target;if(t){var i=e.target.dom7EventData||[];if(i.indexOf(e)<0&&i.unshift(e),R(t).is(a))s.apply(t,i);else for(var n=R(t).parents(),r=0;r<n.length;r+=1)R(n[r]).is(a)&&s.apply(n[r],i)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),s.apply(this,t)}"function"==typeof t[1]&&(n=(e=t)[0],s=e[1],r=e[2],a=void 0),r||(r=!1);for(var c,h=n.split(" "),u=0;u<this.length;u+=1){var d=this[u];if(a)for(c=0;c<h.length;c+=1){var p=h[c];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[p]||(d.dom7LiveListeners[p]=[]),d.dom7LiveListeners[p].push({listener:s,proxyListener:o}),d.addEventListener(p,o,r)}else for(c=0;c<h.length;c+=1){var f=h[c];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[f]||(d.dom7Listeners[f]=[]),d.dom7Listeners[f].push({listener:s,proxyListener:l}),d.addEventListener(f,l,r)}}return this},off:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var n=t[0],r=t[1],a=t[2],s=t[3];"function"==typeof t[1]&&(n=(e=t)[0],a=e[1],s=e[2],r=void 0),s||(s=!1);for(var o=n.split(" "),l=0;l<o.length;l+=1)for(var c=o[l],h=0;h<this.length;h+=1){var u=this[h],d=void 0;if(!r&&u.dom7Listeners?d=u.dom7Listeners[c]:r&&u.dom7LiveListeners&&(d=u.dom7LiveListeners[c]),d&&d.length)for(var p=d.length-1;0<=p;p-=1){var f=d[p];a&&f.listener===a?(u.removeEventListener(c,f.proxyListener,s),d.splice(p,1)):a||(u.removeEventListener(c,f.proxyListener,s),d.splice(p,1))}}return this},trigger:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=e[0].split(" "),n=e[1],r=0;r<i.length;r+=1)for(var a=i[r],s=0;s<this.length;s+=1){var o=this[s],l=void 0;try{l=new U.CustomEvent(a,{detail:n,bubbles:!0,cancelable:!0})}catch(e){(l=m.createEvent("Event")).initEvent(a,!0,!0),l.detail=n}o.dom7EventData=e.filter(function(e,t){return 0<t}),o.dispatchEvent(l),o.dom7EventData=[],delete o.dom7EventData}return this},transitionEnd:function(t){var i,n=["webkitTransitionEnd","transitionend"],r=this;function a(e){if(e.target===this)for(t.call(this,e),i=0;i<n.length;i+=1)r.off(n[i],a)}if(t)for(i=0;i<n.length;i+=1)r.on(n[i],a);return this},outerWidth:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(0<this.length){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},offset:function(){if(0<this.length){var e=this[0],t=e.getBoundingClientRect(),i=m.body,n=e.clientTop||i.clientTop||0,r=e.clientLeft||i.clientLeft||0,a=e===U?U.scrollY:e.scrollTop,s=e===U?U.scrollX:e.scrollLeft;return{top:t.top+a-n,left:t.left+s-r}}return null},css:function(e,t){var i;if(1===arguments.length){if("string"!=typeof e){for(i=0;i<this.length;i+=1)for(var n in e)this[i].style[n]=e[n];return this}if(this[0])return U.getComputedStyle(this[0],null).getPropertyValue(e)}if(2!==arguments.length||"string"!=typeof e)return this;for(i=0;i<this.length;i+=1)this[i].style[e]=t;return this},each:function(e){if(!e)return this;for(var t=0;t<this.length;t+=1)if(!1===e.call(this[t],t,this[t]))return this;return this},html:function(e){if(void 0===e)return this[0]?this[0].innerHTML:void 0;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,i,n=this[0];if(!n||void 0===e)return!1;if("string"==typeof e){if(n.matches)return n.matches(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);for(t=R(e),i=0;i<t.length;i+=1)if(t[i]===n)return!0;return!1}if(e===m)return n===m;if(e===U)return n===U;if(e.nodeType||e instanceof l){for(t=e.nodeType?[e]:e,i=0;i<t.length;i+=1)if(t[i]===n)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if(void 0===e)return this;var t,i=this.length;return new l(i-1<e?[]:e<0?(t=i+e)<0?[]:[this[t]]:[this[e]])},append:function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];for(var n=0;n<t.length;n+=1){e=t[n];for(var r=0;r<this.length;r+=1)if("string"==typeof e){var a=m.createElement("div");for(a.innerHTML=e;a.firstChild;)this[r].appendChild(a.firstChild)}else if(e instanceof l)for(var s=0;s<e.length;s+=1)this[r].appendChild(e[s]);else this[r].appendChild(e)}return this},prepend:function(e){var t,i;for(t=0;t<this.length;t+=1)if("string"==typeof e){var n=m.createElement("div");for(n.innerHTML=e,i=n.childNodes.length-1;0<=i;i-=1)this[t].insertBefore(n.childNodes[i],this[t].childNodes[0])}else if(e instanceof l)for(i=0;i<e.length;i+=1)this[t].insertBefore(e[i],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return 0<this.length?e?this[0].nextElementSibling&&R(this[0].nextElementSibling).is(e)?new l([this[0].nextElementSibling]):new l([]):this[0].nextElementSibling?new l([this[0].nextElementSibling]):new l([]):new l([])},nextAll:function(e){var t=[],i=this[0];if(!i)return new l([]);for(;i.nextElementSibling;){var n=i.nextElementSibling;e?R(n).is(e)&&t.push(n):t.push(n),i=n}return new l(t)},prev:function(e){if(0<this.length){var t=this[0];return e?t.previousElementSibling&&R(t.previousElementSibling).is(e)?new l([t.previousElementSibling]):new l([]):t.previousElementSibling?new l([t.previousElementSibling]):new l([])}return new l([])},prevAll:function(e){var t=[],i=this[0];if(!i)return new l([]);for(;i.previousElementSibling;){var n=i.previousElementSibling;e?R(n).is(e)&&t.push(n):t.push(n),i=n}return new l(t)},parent:function(e){for(var t=[],i=0;i<this.length;i+=1)null!==this[i].parentNode&&(e?R(this[i].parentNode).is(e)&&t.push(this[i].parentNode):t.push(this[i].parentNode));return R(a(t))},parents:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var n=this[i].parentNode;n;)e?R(n).is(e)&&t.push(n):t.push(n),n=n.parentNode;return R(a(t))},closest:function(e){var t=this;return void 0===e?new l([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var n=this[i].querySelectorAll(e),r=0;r<n.length;r+=1)t.push(n[r]);return new l(t)},children:function(e){for(var t=[],i=0;i<this.length;i+=1)for(var n=this[i].childNodes,r=0;r<n.length;r+=1)e?1===n[r].nodeType&&R(n[r]).is(e)&&t.push(n[r]):1===n[r].nodeType&&t.push(n[r]);return new l(a(t))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this},add:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n;for(i=0;i<e.length;i+=1){var r=R(e[i]);for(n=0;n<r.length;n+=1)this[this.length]=r[n],this.length+=1}return this},styles:function(){return this[0]?U.getComputedStyle(this[0],null):{}}};Object.keys(t).forEach(function(e){R.fn[e]=t[e]});var e,i,n,G={deleteProps:function(e){var t=e;Object.keys(t).forEach(function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})},nextTick:function(e,t){return void 0===t&&(t=0),setTimeout(e,t)},now:function(){return Date.now()},getTranslate:function(e,t){var i,n,r;void 0===t&&(t="x");var a=U.getComputedStyle(e,null);return U.WebKitCSSMatrix?(6<(n=a.transform||a.webkitTransform).split(",").length&&(n=n.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),r=new U.WebKitCSSMatrix("none"===n?"":n)):i=(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(n=U.WebKitCSSMatrix?r.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(n=U.WebKitCSSMatrix?r.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),n||0},parseUrlQuery:function(e){var t,i,n,r,a={},s=e||U.location.href;if("string"==typeof s&&s.length)for(r=(i=(s=-1<s.indexOf("?")?s.replace(/\S*\?/,""):"").split("&").filter(function(e){return""!==e})).length,t=0;t<r;t+=1)n=i[t].replace(/#\S+/g,"").split("="),a[decodeURIComponent(n[0])]=void 0===n[1]?void 0:decodeURIComponent(n[1])||"";return a},isObject:function(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object},extend:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i=Object(e[0]),n=1;n<e.length;n+=1){var r=e[n];if(null!=r)for(var a=Object.keys(Object(r)),s=0,o=a.length;s<o;s+=1){var l=a[s],c=Object.getOwnPropertyDescriptor(r,l);void 0!==c&&c.enumerable&&(G.isObject(i[l])&&G.isObject(r[l])?G.extend(i[l],r[l]):!G.isObject(i[l])&&G.isObject(r[l])?(i[l]={},G.extend(i[l],r[l])):i[l]=r[l])}}return i}},V=(n=m.createElement("div"),{touch:U.Modernizr&&!0===U.Modernizr.touch||!!("ontouchstart"in U||U.DocumentTouch&&m instanceof U.DocumentTouch),pointerEvents:!(!U.navigator.pointerEnabled&&!U.PointerEvent),prefixedPointerEvents:!!U.navigator.msPointerEnabled,transition:(i=n.style,"transition"in i||"webkitTransition"in i||"MozTransition"in i),transforms3d:U.Modernizr&&!0===U.Modernizr.csstransforms3d||(e=n.style,"webkitPerspective"in e||"MozPerspective"in e||"OPerspective"in e||"MsPerspective"in e||"perspective"in e),flexbox:function(){for(var e=n.style,t="alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "),i=0;i<t.length;i+=1)if(t[i]in e)return!0;return!1}(),observer:"MutationObserver"in U||"WebkitMutationObserver"in U,passiveListener:function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});U.addEventListener("testPassiveListener",null,t)}catch(e){}return e}(),gestures:"ongesturestart"in U}),r=function(e){void 0===e&&(e={});var t=this;t.params=e,t.eventsListeners={},t.params&&t.params.on&&Object.keys(t.params.on).forEach(function(e){t.on(e,t.params.on[e])})},s={components:{configurable:!0}};r.prototype.on=function(e,t,i){var n=this;if("function"!=typeof t)return n;var r=i?"unshift":"push";return e.split(" ").forEach(function(e){n.eventsListeners[e]||(n.eventsListeners[e]=[]),n.eventsListeners[e][r](t)}),n},r.prototype.once=function(n,r,e){var a=this;if("function"!=typeof r)return a;return a.on(n,function e(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];r.apply(a,t),a.off(n,e)},e)},r.prototype.off=function(e,n){var r=this;return r.eventsListeners&&e.split(" ").forEach(function(i){void 0===n?r.eventsListeners[i]=[]:r.eventsListeners[i]&&r.eventsListeners[i].length&&r.eventsListeners[i].forEach(function(e,t){e===n&&r.eventsListeners[i].splice(t,1)})}),r},r.prototype.emit=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n,r,a=this;return a.eventsListeners&&(r="string"==typeof e[0]||Array.isArray(e[0])?(i=e[0],n=e.slice(1,e.length),a):(i=e[0].events,n=e[0].data,e[0].context||a),(Array.isArray(i)?i:i.split(" ")).forEach(function(e){if(a.eventsListeners&&a.eventsListeners[e]){var t=[];a.eventsListeners[e].forEach(function(e){t.push(e)}),t.forEach(function(e){e.apply(r,n)})}})),a},r.prototype.useModulesParams=function(i){var n=this;n.modules&&Object.keys(n.modules).forEach(function(e){var t=n.modules[e];t.params&&G.extend(i,t.params)})},r.prototype.useModules=function(n){void 0===n&&(n={});var r=this;r.modules&&Object.keys(r.modules).forEach(function(e){var i=r.modules[e],t=n[e]||{};i.instance&&Object.keys(i.instance).forEach(function(e){var t=i.instance[e];r[e]="function"==typeof t?t.bind(r):t}),i.on&&r.on&&Object.keys(i.on).forEach(function(e){r.on(e,i.on[e])}),i.create&&i.create.bind(r)(t)})},s.components.set=function(e){this.use&&this.use(e)},r.installModule=function(t){for(var e=[],i=arguments.length-1;0<i--;)e[i]=arguments[i+1];var n=this;n.prototype.modules||(n.prototype.modules={});var r=t.name||Object.keys(n.prototype.modules).length+"_"+G.now();return(n.prototype.modules[r]=t).proto&&Object.keys(t.proto).forEach(function(e){n.prototype[e]=t.proto[e]}),t.static&&Object.keys(t.static).forEach(function(e){n[e]=t.static[e]}),t.install&&t.install.apply(n,e),n},r.use=function(e){for(var t=[],i=arguments.length-1;0<i--;)t[i]=arguments[i+1];var n=this;return Array.isArray(e)?(e.forEach(function(e){return n.installModule(e)}),n):n.installModule.apply(n,[e].concat(t))},Object.defineProperties(r,s);var o={updateSize:function(){var e,t,i=this.$el;e=void 0!==this.params.width?this.params.width:i[0].clientWidth,t=void 0!==this.params.height?this.params.height:i[0].clientHeight,0===e&&this.isHorizontal()||0===t&&this.isVertical()||(e=e-parseInt(i.css("padding-left"),10)-parseInt(i.css("padding-right"),10),t=t-parseInt(i.css("padding-top"),10)-parseInt(i.css("padding-bottom"),10),G.extend(this,{width:e,height:t,size:this.isHorizontal()?e:t}))},updateSlides:function(){var e=this,t=e.params,i=e.$wrapperEl,n=e.size,r=e.rtlTranslate,a=e.wrongRTL,s=e.virtual&&t.virtual.enabled,o=s?e.virtual.slides.length:e.slides.length,l=i.children("."+e.params.slideClass),c=s?e.virtual.slides.length:l.length,h=[],u=[],d=[],p=t.slidesOffsetBefore;"function"==typeof p&&(p=t.slidesOffsetBefore.call(e));var f=t.slidesOffsetAfter;"function"==typeof f&&(f=t.slidesOffsetAfter.call(e));var m=e.snapGrid.length,g=e.snapGrid.length,v=t.spaceBetween,y=-p,_=0,x=0;if(void 0!==n){var b,w;"string"==typeof v&&0<=v.indexOf("%")&&(v=parseFloat(v.replace("%",""))/100*n),e.virtualSize=-v,r?l.css({marginLeft:"",marginTop:""}):l.css({marginRight:"",marginBottom:""}),1<t.slidesPerColumn&&(b=Math.floor(c/t.slidesPerColumn)===c/e.params.slidesPerColumn?c:Math.ceil(c/t.slidesPerColumn)*t.slidesPerColumn,"auto"!==t.slidesPerView&&"row"===t.slidesPerColumnFill&&(b=Math.max(b,t.slidesPerView*t.slidesPerColumn)));for(var T,E=t.slidesPerColumn,M=b/E,S=M-(t.slidesPerColumn*M-c),C=0;C<c;C+=1){w=0;var A=l.eq(C);if(1<t.slidesPerColumn){var P=void 0,L=void 0,R=void 0;"column"===t.slidesPerColumnFill?(R=C-(L=Math.floor(C/E))*E,(S<L||L===S&&R===E-1)&&E<=(R+=1)&&(R=0,L+=1),P=L+R*b/E,A.css({"-webkit-box-ordinal-group":P,"-moz-box-ordinal-group":P,"-ms-flex-order":P,"-webkit-order":P,order:P})):L=C-(R=Math.floor(C/M))*M,A.css("margin-"+(e.isHorizontal()?"top":"left"),0!==R&&t.spaceBetween&&t.spaceBetween+"px").attr("data-swiper-column",L).attr("data-swiper-row",R)}if("none"!==A.css("display")){if("auto"===t.slidesPerView){var O=U.getComputedStyle(A[0],null),I=A[0].style.transform,D=A[0].style.webkitTransform;I&&(A[0].style.transform="none"),D&&(A[0].style.webkitTransform="none"),w=t.roundLengths?e.isHorizontal()?A.outerWidth(!0):A.outerHeight(!0):e.isHorizontal()?A[0].getBoundingClientRect().width+parseFloat(O.getPropertyValue("margin-left"))+parseFloat(O.getPropertyValue("margin-right")):A[0].getBoundingClientRect().height+parseFloat(O.getPropertyValue("margin-top"))+parseFloat(O.getPropertyValue("margin-bottom")),I&&(A[0].style.transform=I),D&&(A[0].style.webkitTransform=D),t.roundLengths&&(w=Math.floor(w))}else w=(n-(t.slidesPerView-1)*v)/t.slidesPerView,t.roundLengths&&(w=Math.floor(w)),l[C]&&(e.isHorizontal()?l[C].style.width=w+"px":l[C].style.height=w+"px");l[C]&&(l[C].swiperSlideSize=w),d.push(w),t.centeredSlides?(y=y+w/2+_/2+v,0===_&&0!==C&&(y=y-n/2-v),0===C&&(y=y-n/2-v),Math.abs(y)<.001&&(y=0),t.roundLengths&&(y=Math.floor(y)),x%t.slidesPerGroup==0&&h.push(y),u.push(y)):(t.roundLengths&&(y=Math.floor(y)),x%t.slidesPerGroup==0&&h.push(y),u.push(y),y=y+w+v),e.virtualSize+=w+v,_=w,x+=1}}if(e.virtualSize=Math.max(e.virtualSize,n)+f,r&&a&&("slide"===t.effect||"coverflow"===t.effect)&&i.css({width:e.virtualSize+t.spaceBetween+"px"}),V.flexbox&&!t.setWrapperSize||(e.isHorizontal()?i.css({width:e.virtualSize+t.spaceBetween+"px"}):i.css({height:e.virtualSize+t.spaceBetween+"px"})),1<t.slidesPerColumn&&(e.virtualSize=(w+t.spaceBetween)*b,e.virtualSize=Math.ceil(e.virtualSize/t.slidesPerColumn)-t.spaceBetween,e.isHorizontal()?i.css({width:e.virtualSize+t.spaceBetween+"px"}):i.css({height:e.virtualSize+t.spaceBetween+"px"}),t.centeredSlides)){T=[];for(var k=0;k<h.length;k+=1){var N=h[k];t.roundLengths&&(N=Math.floor(N)),h[k]<e.virtualSize+h[0]&&T.push(N)}h=T}if(!t.centeredSlides){T=[];for(var z=0;z<h.length;z+=1){var B=h[z];t.roundLengths&&(B=Math.floor(B)),h[z]<=e.virtualSize-n&&T.push(B)}h=T,1<Math.floor(e.virtualSize-n)-Math.floor(h[h.length-1])&&h.push(e.virtualSize-n)}if(0===h.length&&(h=[0]),0!==t.spaceBetween&&(e.isHorizontal()?r?l.css({marginLeft:v+"px"}):l.css({marginRight:v+"px"}):l.css({marginBottom:v+"px"})),t.centerInsufficientSlides){var H=0;if(d.forEach(function(e){H+=e+(t.spaceBetween?t.spaceBetween:0)}),(H-=t.spaceBetween)<n){var F=(n-H)/2;h.forEach(function(e,t){h[t]=e-F}),u.forEach(function(e,t){u[t]=e+F})}}G.extend(e,{slides:l,snapGrid:h,slidesGrid:u,slidesSizesGrid:d}),c!==o&&e.emit("slidesLengthChange"),h.length!==m&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),u.length!==g&&e.emit("slidesGridLengthChange"),(t.watchSlidesProgress||t.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,i=this,n=[],r=0;if("number"==typeof e?i.setTransition(e):!0===e&&i.setTransition(i.params.speed),"auto"!==i.params.slidesPerView&&1<i.params.slidesPerView)for(t=0;t<Math.ceil(i.params.slidesPerView);t+=1){var a=i.activeIndex+t;if(a>i.slides.length)break;n.push(i.slides.eq(a)[0])}else n.push(i.slides.eq(i.activeIndex)[0]);for(t=0;t<n.length;t+=1)if(void 0!==n[t]){var s=n[t].offsetHeight;r=r<s?s:r}r&&i.$wrapperEl.css("height",r+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,i=t.params,n=t.slides,r=t.rtlTranslate;if(0!==n.length){void 0===n[0].swiperSlideOffset&&t.updateSlidesOffset();var a=-e;r&&(a=e),n.removeClass(i.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var s=0;s<n.length;s+=1){var o=n[s],l=(a+(i.centeredSlides?t.minTranslate():0)-o.swiperSlideOffset)/(o.swiperSlideSize+i.spaceBetween);if(i.watchSlidesVisibility){var c=-(a-o.swiperSlideOffset),h=c+t.slidesSizesGrid[s];(0<=c&&c<t.size||0<h&&h<=t.size||c<=0&&h>=t.size)&&(t.visibleSlides.push(o),t.visibleSlidesIndexes.push(s),n.eq(s).addClass(i.slideVisibleClass))}o.progress=r?-l:l}t.visibleSlides=R(t.visibleSlides)}},updateProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,i=t.params,n=t.maxTranslate()-t.minTranslate(),r=t.progress,a=t.isBeginning,s=t.isEnd,o=a,l=s;s=0===n?a=!(r=0):(a=(r=(e-t.minTranslate())/n)<=0,1<=r),G.extend(t,{progress:r,isBeginning:a,isEnd:s}),(i.watchSlidesProgress||i.watchSlidesVisibility)&&t.updateSlidesProgress(e),a&&!o&&t.emit("reachBeginning toEdge"),s&&!l&&t.emit("reachEnd toEdge"),(o&&!a||l&&!s)&&t.emit("fromEdge"),t.emit("progress",r)},updateSlidesClasses:function(){var e,t=this.slides,i=this.params,n=this.$wrapperEl,r=this.activeIndex,a=this.realIndex,s=this.virtual&&i.virtual.enabled;t.removeClass(i.slideActiveClass+" "+i.slideNextClass+" "+i.slidePrevClass+" "+i.slideDuplicateActiveClass+" "+i.slideDuplicateNextClass+" "+i.slideDuplicatePrevClass),(e=s?this.$wrapperEl.find("."+i.slideClass+'[data-swiper-slide-index="'+r+'"]'):t.eq(r)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+a+'"]').addClass(i.slideDuplicateActiveClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+a+'"]').addClass(i.slideDuplicateActiveClass));var o=e.nextAll("."+i.slideClass).eq(0).addClass(i.slideNextClass);i.loop&&0===o.length&&(o=t.eq(0)).addClass(i.slideNextClass);var l=e.prevAll("."+i.slideClass).eq(0).addClass(i.slidePrevClass);i.loop&&0===l.length&&(l=t.eq(-1)).addClass(i.slidePrevClass),i.loop&&(o.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+o.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicateNextClass),l.hasClass(i.slideDuplicateClass)?n.children("."+i.slideClass+":not(."+i.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass):n.children("."+i.slideClass+"."+i.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(i.slideDuplicatePrevClass))},updateActiveIndex:function(e){var t,i=this,n=i.rtlTranslate?i.translate:-i.translate,r=i.slidesGrid,a=i.snapGrid,s=i.params,o=i.activeIndex,l=i.realIndex,c=i.snapIndex,h=e;if(void 0===h){for(var u=0;u<r.length;u+=1)void 0!==r[u+1]?n>=r[u]&&n<r[u+1]-(r[u+1]-r[u])/2?h=u:n>=r[u]&&n<r[u+1]&&(h=u+1):n>=r[u]&&(h=u);s.normalizeSlideIndex&&(h<0||void 0===h)&&(h=0)}if((t=0<=a.indexOf(n)?a.indexOf(n):Math.floor(h/s.slidesPerGroup))>=a.length&&(t=a.length-1),h!==o){var d=parseInt(i.slides.eq(h).attr("data-swiper-slide-index")||h,10);G.extend(i,{snapIndex:t,realIndex:d,previousIndex:o,activeIndex:h}),i.emit("activeIndexChange"),i.emit("snapIndexChange"),l!==d&&i.emit("realIndexChange"),i.emit("slideChange")}else t!==c&&(i.snapIndex=t,i.emit("snapIndexChange"))},updateClickedSlide:function(e){var t=this,i=t.params,n=R(e.target).closest("."+i.slideClass)[0],r=!1;if(n)for(var a=0;a<t.slides.length;a+=1)t.slides[a]===n&&(r=!0);if(!n||!r)return t.clickedSlide=void 0,void(t.clickedIndex=void 0);t.clickedSlide=n,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(R(n).attr("data-swiper-slide-index"),10):t.clickedIndex=R(n).index(),i.slideToClickedSlide&&void 0!==t.clickedIndex&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}};var c={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this.params,i=this.rtlTranslate,n=this.translate,r=this.$wrapperEl;if(t.virtualTranslate)return i?-n:n;var a=G.getTranslate(r[0],e);return i&&(a=-a),a||0},setTranslate:function(e,t){var i=this,n=i.rtlTranslate,r=i.params,a=i.$wrapperEl,s=i.progress,o=0,l=0;i.isHorizontal()?o=n?-e:e:l=e,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),r.virtualTranslate||(V.transforms3d?a.transform("translate3d("+o+"px, "+l+"px, 0px)"):a.transform("translate("+o+"px, "+l+"px)")),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?o:l;var c=i.maxTranslate()-i.minTranslate();(0===c?0:(e-i.minTranslate())/c)!==s&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]}};var h={setTransition:function(e,t){this.$wrapperEl.transition(e),this.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,n=this.params,r=this.previousIndex;n.autoHeight&&this.updateAutoHeight();var a=t;if(a||(a=r<i?"next":i<r?"prev":"reset"),this.emit("transitionStart"),e&&i!==r){if("reset"===a)return void this.emit("slideResetTransitionStart");this.emit("slideChangeTransitionStart"),"next"===a?this.emit("slideNextTransitionStart"):this.emit("slidePrevTransitionStart")}},transitionEnd:function(e,t){void 0===e&&(e=!0);var i=this.activeIndex,n=this.previousIndex;this.animating=!1,this.setTransition(0);var r=t;if(r||(r=n<i?"next":i<n?"prev":"reset"),this.emit("transitionEnd"),e&&i!==n){if("reset"===r)return void this.emit("slideResetTransitionEnd");this.emit("slideChangeTransitionEnd"),"next"===r?this.emit("slideNextTransitionEnd"):this.emit("slidePrevTransitionEnd")}}};var u={slideTo:function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var r=this,a=e;a<0&&(a=0);var s=r.params,o=r.snapGrid,l=r.slidesGrid,c=r.previousIndex,h=r.activeIndex,u=r.rtlTranslate;if(r.animating&&s.preventInteractionOnTransition)return!1;var d=Math.floor(a/s.slidesPerGroup);d>=o.length&&(d=o.length-1),(h||s.initialSlide||0)===(c||0)&&i&&r.emit("beforeSlideChangeStart");var p,f=-o[d];if(r.updateProgress(f),s.normalizeSlideIndex)for(var m=0;m<l.length;m+=1)-Math.floor(100*f)>=Math.floor(100*l[m])&&(a=m);if(r.initialized&&a!==h){if(!r.allowSlideNext&&f<r.translate&&f<r.minTranslate())return!1;if(!r.allowSlidePrev&&f>r.translate&&f>r.maxTranslate()&&(h||0)!==a)return!1}return p=h<a?"next":a<h?"prev":"reset",u&&-f===r.translate||!u&&f===r.translate?(r.updateActiveIndex(a),s.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==s.effect&&r.setTranslate(f),"reset"!==p&&(r.transitionStart(i,p),r.transitionEnd(i,p)),!1):(0!==t&&V.transition?(r.setTransition(t),r.setTranslate(f),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,n),r.transitionStart(i,p),r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.$wrapperEl[0].removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].removeEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(i,p))}),r.$wrapperEl[0].addEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.$wrapperEl[0].addEventListener("webkitTransitionEnd",r.onSlideToWrapperTransitionEnd))):(r.setTransition(0),r.setTranslate(f),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,n),r.transitionStart(i,p),r.transitionEnd(i,p)),!0)},slideToLoop:function(e,t,i,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0);var r=e;return this.params.loop&&(r+=this.loopedSlides),this.slideTo(r,t,i,n)},slideNext:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this.params,r=this.animating;return n.loop?!r&&(this.loopFix(),this._clientLeft=this.$wrapperEl[0].clientLeft,this.slideTo(this.activeIndex+n.slidesPerGroup,e,t,i)):this.slideTo(this.activeIndex+n.slidesPerGroup,e,t,i)},slidePrev:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this,r=n.params,a=n.animating,s=n.snapGrid,o=n.slidesGrid,l=n.rtlTranslate;if(r.loop){if(a)return!1;n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft}function c(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var h,u=c(l?n.translate:-n.translate),d=s.map(function(e){return c(e)}),p=(o.map(function(e){return c(e)}),s[d.indexOf(u)],s[d.indexOf(u)-1]);return void 0!==p&&(h=o.indexOf(p))<0&&(h=n.activeIndex-1),n.slideTo(h,e,t,i)},slideReset:function(e,t,i){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,i)},slideToClosest:function(e,t,i){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var n=this,r=n.activeIndex,a=Math.floor(r/n.params.slidesPerGroup);if(a<n.snapGrid.length-1){var s=n.rtlTranslate?n.translate:-n.translate,o=n.snapGrid[a];(n.snapGrid[a+1]-o)/2<s-o&&(r=n.params.slidesPerGroup)}return n.slideTo(r,e,t,i)},slideToClickedSlide:function(){var e,t=this,i=t.params,n=t.$wrapperEl,r="auto"===i.slidesPerView?t.slidesPerViewDynamic():i.slidesPerView,a=t.clickedIndex;if(i.loop){if(t.animating)return;e=parseInt(R(t.clickedSlide).attr("data-swiper-slide-index"),10),i.centeredSlides?a<t.loopedSlides-r/2||a>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),a=n.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),G.nextTick(function(){t.slideTo(a)})):t.slideTo(a):a>t.slides.length-r?(t.loopFix(),a=n.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+i.slideDuplicateClass+")").eq(0).index(),G.nextTick(function(){t.slideTo(a)})):t.slideTo(a)}else t.slideTo(a)}};var d={loopCreate:function(){var n=this,e=n.params,t=n.$wrapperEl;t.children("."+e.slideClass+"."+e.slideDuplicateClass).remove();var r=t.children("."+e.slideClass);if(e.loopFillGroupWithBlank){var i=e.slidesPerGroup-r.length%e.slidesPerGroup;if(i!==e.slidesPerGroup){for(var a=0;a<i;a+=1){var s=R(m.createElement("div")).addClass(e.slideClass+" "+e.slideBlankClass);t.append(s)}r=t.children("."+e.slideClass)}}"auto"!==e.slidesPerView||e.loopedSlides||(e.loopedSlides=r.length),n.loopedSlides=parseInt(e.loopedSlides||e.slidesPerView,10),n.loopedSlides+=e.loopAdditionalSlides,n.loopedSlides>r.length&&(n.loopedSlides=r.length);var o=[],l=[];r.each(function(e,t){var i=R(t);e<n.loopedSlides&&l.push(t),e<r.length&&e>=r.length-n.loopedSlides&&o.push(t),i.attr("data-swiper-slide-index",e)});for(var c=0;c<l.length;c+=1)t.append(R(l[c].cloneNode(!0)).addClass(e.slideDuplicateClass));for(var h=o.length-1;0<=h;h-=1)t.prepend(R(o[h].cloneNode(!0)).addClass(e.slideDuplicateClass))},loopFix:function(){var e,t=this,i=t.params,n=t.activeIndex,r=t.slides,a=t.loopedSlides,s=t.allowSlidePrev,o=t.allowSlideNext,l=t.snapGrid,c=t.rtlTranslate;t.allowSlidePrev=!0,t.allowSlideNext=!0;var h=-l[n]-t.getTranslate();n<a?(e=r.length-3*a+n,e+=a,t.slideTo(e,0,!1,!0)&&0!==h&&t.setTranslate((c?-t.translate:t.translate)-h)):("auto"===i.slidesPerView&&2*a<=n||n>=r.length-a)&&(e=-r.length+n+a,e+=a,t.slideTo(e,0,!1,!0)&&0!==h&&t.setTranslate((c?-t.translate:t.translate)-h));t.allowSlidePrev=s,t.allowSlideNext=o},loopDestroy:function(){var e=this.$wrapperEl,t=this.params,i=this.slides;e.children("."+t.slideClass+"."+t.slideDuplicateClass).remove(),i.removeAttr("data-swiper-slide-index")}};var p={setGrabCursor:function(e){if(!(V.touch||!this.params.simulateTouch||this.params.watchOverflow&&this.isLocked)){var t=this.el;t.style.cursor="move",t.style.cursor=e?"-webkit-grabbing":"-webkit-grab",t.style.cursor=e?"-moz-grabbin":"-moz-grab",t.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){V.touch||this.params.watchOverflow&&this.isLocked||(this.el.style.cursor="")}};var f={appendSlide:function(e){var t=this.$wrapperEl,i=this.params;if(i.loop&&this.loopDestroy(),"object"==typeof e&&"length"in e)for(var n=0;n<e.length;n+=1)e[n]&&t.append(e[n]);else t.append(e);i.loop&&this.loopCreate(),i.observer&&V.observer||this.update()},prependSlide:function(e){var t=this.params,i=this.$wrapperEl,n=this.activeIndex;t.loop&&this.loopDestroy();var r=n+1;if("object"==typeof e&&"length"in e){for(var a=0;a<e.length;a+=1)e[a]&&i.prepend(e[a]);r=n+e.length}else i.prepend(e);t.loop&&this.loopCreate(),t.observer&&V.observer||this.update(),this.slideTo(r,0,!1)},addSlide:function(e,t){var i=this,n=i.$wrapperEl,r=i.params,a=i.activeIndex;r.loop&&(a-=i.loopedSlides,i.loopDestroy(),i.slides=n.children("."+r.slideClass));var s=i.slides.length;if(e<=0)i.prependSlide(t);else if(s<=e)i.appendSlide(t);else{for(var o=e<a?a+1:a,l=[],c=s-1;e<=c;c-=1){var h=i.slides.eq(c);h.remove(),l.unshift(h)}if("object"==typeof t&&"length"in t){for(var u=0;u<t.length;u+=1)t[u]&&n.append(t[u]);o=e<a?a+t.length:a}else n.append(t);for(var d=0;d<l.length;d+=1)n.append(l[d]);r.loop&&i.loopCreate(),r.observer&&V.observer||i.update(),r.loop?i.slideTo(o+i.loopedSlides,0,!1):i.slideTo(o,0,!1)}},removeSlide:function(e){var t=this,i=t.params,n=t.$wrapperEl,r=t.activeIndex;i.loop&&(r-=t.loopedSlides,t.loopDestroy(),t.slides=n.children("."+i.slideClass));var a,s=r;if("object"==typeof e&&"length"in e){for(var o=0;o<e.length;o+=1)a=e[o],t.slides[a]&&t.slides.eq(a).remove(),a<s&&(s-=1);s=Math.max(s,0)}else a=e,t.slides[a]&&t.slides.eq(a).remove(),a<s&&(s-=1),s=Math.max(s,0);i.loop&&t.loopCreate(),i.observer&&V.observer||t.update(),i.loop?t.slideTo(s+t.loopedSlides,0,!1):t.slideTo(s,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}},g=function(){var e=U.navigator.userAgent,t={ios:!1,android:!1,androidChrome:!1,desktop:!1,windows:!1,iphone:!1,ipod:!1,ipad:!1,cordova:U.cordova||U.phonegap,phonegap:U.cordova||U.phonegap},i=e.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),n=e.match(/(Android);?[\s\/]+([\d.]+)?/),r=e.match(/(iPad).*OS\s([\d_]+)/),a=e.match(/(iPod)(.*OS\s([\d_]+))?/),s=!r&&e.match(/(iPhone\sOS|iOS)\s([\d_]+)/);if(i&&(t.os="windows",t.osVersion=i[2],t.windows=!0),n&&!i&&(t.os="android",t.osVersion=n[2],t.android=!0,t.androidChrome=0<=e.toLowerCase().indexOf("chrome")),(r||s||a)&&(t.os="ios",t.ios=!0),s&&!a&&(t.osVersion=s[2].replace(/_/g,"."),t.iphone=!0),r&&(t.osVersion=r[2].replace(/_/g,"."),t.ipad=!0),a&&(t.osVersion=a[3]?a[3].replace(/_/g,"."):null,t.iphone=!0),t.ios&&t.osVersion&&0<=e.indexOf("Version/")&&"10"===t.osVersion.split(".")[0]&&(t.osVersion=e.toLowerCase().split("version/")[1].split(" ")[0]),t.desktop=!(t.os||t.android||t.webView),t.webView=(s||r||a)&&e.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var o=t.osVersion.split("."),l=m.querySelector('meta[name="viewport"]');t.minimalUi=!t.webView&&(a||s)&&(1*o[0]==7?1<=1*o[1]:7<1*o[0])&&l&&0<=l.getAttribute("content").indexOf("minimal-ui")}return t.pixelRatio=U.devicePixelRatio||1,t}();function v(){var e=this,t=e.params,i=e.el;if(!i||0!==i.offsetWidth){t.breakpoints&&e.setBreakpoint();var n=e.allowSlideNext,r=e.allowSlidePrev,a=e.snapGrid;if(e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),t.freeMode){var s=Math.min(Math.max(e.translate,e.maxTranslate()),e.minTranslate());e.setTranslate(s),e.updateActiveIndex(),e.updateSlidesClasses(),t.autoHeight&&e.updateAutoHeight()}else e.updateSlidesClasses(),("auto"===t.slidesPerView||1<t.slidesPerView)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0);e.allowSlidePrev=r,e.allowSlideNext=n,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}}var y={attachEvents:function(){var e=this,t=e.params,i=e.touchEvents,n=e.el,r=e.wrapperEl;e.onTouchStart=function(e){var t=this,i=t.touchEventsData,n=t.params,r=t.touches;if(!t.animating||!n.preventInteractionOnTransition){var a=e;if(a.originalEvent&&(a=a.originalEvent),i.isTouchEvent="touchstart"===a.type,(i.isTouchEvent||!("which"in a)||3!==a.which)&&!(!i.isTouchEvent&&"button"in a&&0<a.button||i.isTouched&&i.isMoved))if(n.noSwiping&&R(a.target).closest(n.noSwipingSelector?n.noSwipingSelector:"."+n.noSwipingClass)[0])t.allowClick=!0;else if(!n.swipeHandler||R(a).closest(n.swipeHandler)[0]){r.currentX="touchstart"===a.type?a.targetTouches[0].pageX:a.pageX,r.currentY="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY;var s=r.currentX,o=r.currentY,l=n.edgeSwipeDetection||n.iOSEdgeSwipeDetection,c=n.edgeSwipeThreshold||n.iOSEdgeSwipeThreshold;if(!l||!(s<=c||s>=U.screen.width-c)){if(G.extend(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),r.startX=s,r.startY=o,i.touchStartTime=G.now(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,0<n.threshold&&(i.allowThresholdMove=!1),"touchstart"!==a.type){var h=!0;R(a.target).is(i.formElements)&&(h=!1),m.activeElement&&R(m.activeElement).is(i.formElements)&&m.activeElement!==a.target&&m.activeElement.blur(),h&&t.allowTouchMove&&n.touchStartPreventDefault&&a.preventDefault()}t.emit("touchStart",a)}}}}.bind(e),e.onTouchMove=function(e){var t=this,i=t.touchEventsData,n=t.params,r=t.touches,a=t.rtlTranslate,s=e;if(s.originalEvent&&(s=s.originalEvent),i.isTouched){if(!i.isTouchEvent||"mousemove"!==s.type){var o="touchmove"===s.type?s.targetTouches[0].pageX:s.pageX,l="touchmove"===s.type?s.targetTouches[0].pageY:s.pageY;if(s.preventedByNestedSwiper)return r.startX=o,void(r.startY=l);if(!t.allowTouchMove)return t.allowClick=!1,void(i.isTouched&&(G.extend(r,{startX:o,startY:l,currentX:o,currentY:l}),i.touchStartTime=G.now()));if(i.isTouchEvent&&n.touchReleaseOnEdges&&!n.loop)if(t.isVertical()){if(l<r.startY&&t.translate<=t.maxTranslate()||l>r.startY&&t.translate>=t.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(o<r.startX&&t.translate<=t.maxTranslate()||o>r.startX&&t.translate>=t.minTranslate())return;if(i.isTouchEvent&&m.activeElement&&s.target===m.activeElement&&R(s.target).is(i.formElements))return i.isMoved=!0,void(t.allowClick=!1);if(i.allowTouchCallbacks&&t.emit("touchMove",s),!(s.targetTouches&&1<s.targetTouches.length)){r.currentX=o,r.currentY=l;var c,h=r.currentX-r.startX,u=r.currentY-r.startY;if(!(t.params.threshold&&Math.sqrt(Math.pow(h,2)+Math.pow(u,2))<t.params.threshold))if(void 0===i.isScrolling&&(t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:25<=h*h+u*u&&(c=180*Math.atan2(Math.abs(u),Math.abs(h))/Math.PI,i.isScrolling=t.isHorizontal()?c>n.touchAngle:90-c>n.touchAngle)),i.isScrolling&&t.emit("touchMoveOpposite",s),void 0===i.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){t.allowClick=!1,s.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&s.stopPropagation(),i.isMoved||(n.loop&&t.loopFix(),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating&&t.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!n.grabCursor||!0!==t.allowSlideNext&&!0!==t.allowSlidePrev||t.setGrabCursor(!0),t.emit("sliderFirstMove",s)),t.emit("sliderMove",s),i.isMoved=!0;var d=t.isHorizontal()?h:u;r.diff=d,d*=n.touchRatio,a&&(d=-d),t.swipeDirection=0<d?"prev":"next",i.currentTranslate=d+i.startTranslate;var p=!0,f=n.resistanceRatio;if(n.touchReleaseOnEdges&&(f=0),0<d&&i.currentTranslate>t.minTranslate()?(p=!1,n.resistance&&(i.currentTranslate=t.minTranslate()-1+Math.pow(-t.minTranslate()+i.startTranslate+d,f))):d<0&&i.currentTranslate<t.maxTranslate()&&(p=!1,n.resistance&&(i.currentTranslate=t.maxTranslate()+1-Math.pow(t.maxTranslate()-i.startTranslate-d,f))),p&&(s.preventedByNestedSwiper=!0),!t.allowSlideNext&&"next"===t.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&"prev"===t.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),0<n.threshold){if(!(Math.abs(d)>n.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,void(r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}n.followFinger&&((n.freeMode||n.watchSlidesProgress||n.watchSlidesVisibility)&&(t.updateActiveIndex(),t.updateSlidesClasses()),n.freeMode&&(0===i.velocities.length&&i.velocities.push({position:r[t.isHorizontal()?"startX":"startY"],time:i.touchStartTime}),i.velocities.push({position:r[t.isHorizontal()?"currentX":"currentY"],time:G.now()})),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}}}}else i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",s)}.bind(e),e.onTouchEnd=function(e){var t=this,i=t.touchEventsData,n=t.params,r=t.touches,a=t.rtlTranslate,s=t.$wrapperEl,o=t.slidesGrid,l=t.snapGrid,c=e;if(c.originalEvent&&(c=c.originalEvent),i.allowTouchCallbacks&&t.emit("touchEnd",c),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&n.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);n.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var h,u=G.now(),d=u-i.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(c),t.emit("tap",c),d<300&&300<u-i.lastClickTime&&(i.clickTimeout&&clearTimeout(i.clickTimeout),i.clickTimeout=G.nextTick(function(){t&&!t.destroyed&&t.emit("click",c)},300)),d<300&&u-i.lastClickTime<300&&(i.clickTimeout&&clearTimeout(i.clickTimeout),t.emit("doubleTap",c))),i.lastClickTime=G.now(),G.nextTick(function(){t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||0===r.diff||i.currentTranslate===i.startTranslate)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,h=n.followFinger?a?t.translate:-t.translate:-i.currentTranslate,n.freeMode){if(h<-t.minTranslate())return void t.slideTo(t.activeIndex);if(h>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(n.freeModeMomentum){if(1<i.velocities.length){var p=i.velocities.pop(),f=i.velocities.pop(),m=p.position-f.position,g=p.time-f.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<n.freeModeMinimumVelocity&&(t.velocity=0),(150<g||300<G.now()-p.time)&&(t.velocity=0)}else t.velocity=0;t.velocity*=n.freeModeMomentumVelocityRatio,i.velocities.length=0;var v=1e3*n.freeModeMomentumRatio,y=t.velocity*v,_=t.translate+y;a&&(_=-_);var x,b,w=!1,T=20*Math.abs(t.velocity)*n.freeModeMomentumBounceRatio;if(_<t.maxTranslate())n.freeModeMomentumBounce?(_+t.maxTranslate()<-T&&(_=t.maxTranslate()-T),x=t.maxTranslate(),w=!0,i.allowMomentumBounce=!0):_=t.maxTranslate(),n.loop&&n.centeredSlides&&(b=!0);else if(_>t.minTranslate())n.freeModeMomentumBounce?(_-t.minTranslate()>T&&(_=t.minTranslate()+T),x=t.minTranslate(),w=!0,i.allowMomentumBounce=!0):_=t.minTranslate(),n.loop&&n.centeredSlides&&(b=!0);else if(n.freeModeSticky){for(var E,M=0;M<l.length;M+=1)if(l[M]>-_){E=M;break}_=-(_=Math.abs(l[E]-_)<Math.abs(l[E-1]-_)||"next"===t.swipeDirection?l[E]:l[E-1])}if(b&&t.once("transitionEnd",function(){t.loopFix()}),0!==t.velocity)v=a?Math.abs((-_-t.translate)/t.velocity):Math.abs((_-t.translate)/t.velocity);else if(n.freeModeSticky)return void t.slideToClosest();n.freeModeMomentumBounce&&w?(t.updateProgress(x),t.setTransition(v),t.setTranslate(_),t.transitionStart(!0,t.swipeDirection),t.animating=!0,s.transitionEnd(function(){t&&!t.destroyed&&i.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(n.speed),t.setTranslate(x),s.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))})):t.velocity?(t.updateProgress(_),t.setTransition(v),t.setTranslate(_),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,s.transitionEnd(function(){t&&!t.destroyed&&t.transitionEnd()}))):t.updateProgress(_),t.updateActiveIndex(),t.updateSlidesClasses()}else if(n.freeModeSticky)return void t.slideToClosest();(!n.freeModeMomentum||d>=n.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var S=0,C=t.slidesSizesGrid[0],A=0;A<o.length;A+=n.slidesPerGroup)void 0!==o[A+n.slidesPerGroup]?h>=o[A]&&h<o[A+n.slidesPerGroup]&&(C=o[(S=A)+n.slidesPerGroup]-o[A]):h>=o[A]&&(S=A,C=o[o.length-1]-o[o.length-2]);var P=(h-o[S])/C;if(d>n.longSwipesMs){if(!n.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(P>=n.longSwipesRatio?t.slideTo(S+n.slidesPerGroup):t.slideTo(S)),"prev"===t.swipeDirection&&(P>1-n.longSwipesRatio?t.slideTo(S+n.slidesPerGroup):t.slideTo(S))}else{if(!n.shortSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&t.slideTo(S+n.slidesPerGroup),"prev"===t.swipeDirection&&t.slideTo(S)}}}.bind(e),e.onClick=function(e){this.allowClick||(this.params.preventClicks&&e.preventDefault(),this.params.preventClicksPropagation&&this.animating&&(e.stopPropagation(),e.stopImmediatePropagation()))}.bind(e);var a="container"===t.touchEventsTarget?n:r,s=!!t.nested;if(V.touch||!V.pointerEvents&&!V.prefixedPointerEvents){if(V.touch){var o=!("touchstart"!==i.start||!V.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};a.addEventListener(i.start,e.onTouchStart,o),a.addEventListener(i.move,e.onTouchMove,V.passiveListener?{passive:!1,capture:s}:s),a.addEventListener(i.end,e.onTouchEnd,o)}(t.simulateTouch&&!g.ios&&!g.android||t.simulateTouch&&!V.touch&&g.ios)&&(a.addEventListener("mousedown",e.onTouchStart,!1),m.addEventListener("mousemove",e.onTouchMove,s),m.addEventListener("mouseup",e.onTouchEnd,!1))}else a.addEventListener(i.start,e.onTouchStart,!1),m.addEventListener(i.move,e.onTouchMove,s),m.addEventListener(i.end,e.onTouchEnd,!1);(t.preventClicks||t.preventClicksPropagation)&&a.addEventListener("click",e.onClick,!0),e.on(g.ios||g.android?"resize orientationchange observerUpdate":"resize observerUpdate",v,!0)},detachEvents:function(){var e=this,t=e.params,i=e.touchEvents,n=e.el,r=e.wrapperEl,a="container"===t.touchEventsTarget?n:r,s=!!t.nested;if(V.touch||!V.pointerEvents&&!V.prefixedPointerEvents){if(V.touch){var o=!("onTouchStart"!==i.start||!V.passiveListener||!t.passiveListeners)&&{passive:!0,capture:!1};a.removeEventListener(i.start,e.onTouchStart,o),a.removeEventListener(i.move,e.onTouchMove,s),a.removeEventListener(i.end,e.onTouchEnd,o)}(t.simulateTouch&&!g.ios&&!g.android||t.simulateTouch&&!V.touch&&g.ios)&&(a.removeEventListener("mousedown",e.onTouchStart,!1),m.removeEventListener("mousemove",e.onTouchMove,s),m.removeEventListener("mouseup",e.onTouchEnd,!1))}else a.removeEventListener(i.start,e.onTouchStart,!1),m.removeEventListener(i.move,e.onTouchMove,s),m.removeEventListener(i.end,e.onTouchEnd,!1);(t.preventClicks||t.preventClicksPropagation)&&a.removeEventListener("click",e.onClick,!0),e.off(g.ios||g.android?"resize orientationchange observerUpdate":"resize observerUpdate",v)}};var _,x={setBreakpoint:function(){var e=this,t=e.activeIndex,i=e.initialized,n=e.loopedSlides;void 0===n&&(n=0);var r=e.params,a=r.breakpoints;if(a&&(!a||0!==Object.keys(a).length)){var s=e.getBreakpoint(a);if(s&&e.currentBreakpoint!==s){var o=s in a?a[s]:e.originalParams,l=r.loop&&o.slidesPerView!==r.slidesPerView;G.extend(e.params,o),G.extend(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),e.currentBreakpoint=s,l&&i&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-n+e.loopedSlides,0,!1)),e.emit("breakpoint",o)}}},getBreakpoint:function(e){if(e){var t=!1,i=[];Object.keys(e).forEach(function(e){i.push(e)}),i.sort(function(e,t){return parseInt(e,10)-parseInt(t,10)});for(var n=0;n<i.length;n+=1){var r=i[n];this.params.breakpointsInverse?r<=U.innerWidth&&(t=r):r>=U.innerWidth&&!t&&(t=r)}return t||"max"}}},O={isIE:!!U.navigator.userAgent.match(/Trident/g)||!!U.navigator.userAgent.match(/MSIE/g),isEdge:!!U.navigator.userAgent.match(/Edge/g),isSafari:(_=U.navigator.userAgent.toLowerCase(),0<=_.indexOf("safari")&&_.indexOf("chrome")<0&&_.indexOf("android")<0),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(U.navigator.userAgent)};var b={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,preventInteractionOnTransition:!1,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsInverse:!1,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!0,touchStartPreventDefault:!0,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0},w={update:o,translate:c,transition:h,slide:u,loop:d,grabCursor:p,manipulation:f,events:y,breakpoints:x,checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked;e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),t&&t!==e.isLocked&&(e.isEnd=!1,e.navigation.update())}},classes:{addClasses:function(){var t=this.classNames,i=this.params,e=this.rtl,n=this.$el,r=[];r.push(i.direction),i.freeMode&&r.push("free-mode"),V.flexbox||r.push("no-flexbox"),i.autoHeight&&r.push("autoheight"),e&&r.push("rtl"),1<i.slidesPerColumn&&r.push("multirow"),g.android&&r.push("android"),g.ios&&r.push("ios"),(O.isIE||O.isEdge)&&(V.pointerEvents||V.prefixedPointerEvents)&&r.push("wp8-"+i.direction),r.forEach(function(e){t.push(i.containerModifierClass+e)}),n.addClass(t.join(" "))},removeClasses:function(){var e=this.$el,t=this.classNames;e.removeClass(t.join(" "))}},images:{loadImage:function(e,t,i,n,r,a){var s;function o(){a&&a()}e.complete&&r?o():t?((s=new U.Image).onload=o,s.onerror=o,n&&(s.sizes=n),i&&(s.srcset=i),t&&(s.src=t)):o()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var i=0;i<e.imagesToLoad.length;i+=1){var n=e.imagesToLoad[i];e.loadImage(n,n.currentSrc||n.getAttribute("src"),n.srcset||n.getAttribute("srcset"),n.sizes||n.getAttribute("sizes"),!0,t)}}}},T={},E=function(d){function p(){for(var e,t,r,i=[],n=arguments.length;n--;)i[n]=arguments[n];(r=1===i.length&&i[0].constructor&&i[0].constructor===Object?i[0]:(t=(e=i)[0],e[1]))||(r={}),r=G.extend({},r),t&&!r.el&&(r.el=t),d.call(this,r),Object.keys(w).forEach(function(t){Object.keys(w[t]).forEach(function(e){p.prototype[e]||(p.prototype[e]=w[t][e])})});var a=this;void 0===a.modules&&(a.modules={}),Object.keys(a.modules).forEach(function(e){var t=a.modules[e];if(t.params){var i=Object.keys(t.params)[0],n=t.params[i];if("object"!=typeof n||null===n)return;if(!(i in r&&"enabled"in n))return;!0===r[i]&&(r[i]={enabled:!0}),"object"!=typeof r[i]||"enabled"in r[i]||(r[i].enabled=!0),r[i]||(r[i]={enabled:!1})}});var s=G.extend({},b);a.useModulesParams(s),a.params=G.extend({},s,T,r),a.originalParams=G.extend({},a.params),a.passedParams=G.extend({},r);var o=(a.$=R)(a.params.el);if(t=o[0]){if(1<o.length){var l=[];return o.each(function(e,t){var i=G.extend({},r,{el:t});l.push(new p(i))}),l}t.swiper=a,o.data("swiper",a);var c,h,u=o.children("."+a.params.wrapperClass);return G.extend(a,{$el:o,el:t,$wrapperEl:u,wrapperEl:u[0],classNames:[],slides:R(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===a.params.direction},isVertical:function(){return"vertical"===a.params.direction},rtl:"rtl"===t.dir.toLowerCase()||"rtl"===o.css("direction"),rtlTranslate:"horizontal"===a.params.direction&&("rtl"===t.dir.toLowerCase()||"rtl"===o.css("direction")),wrongRTL:"-webkit-box"===u.css("display"),activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEvents:(c=["touchstart","touchmove","touchend"],h=["mousedown","mousemove","mouseup"],V.pointerEvents?h=["pointerdown","pointermove","pointerup"]:V.prefixedPointerEvents&&(h=["MSPointerDown","MSPointerMove","MSPointerUp"]),a.touchEventsTouch={start:c[0],move:c[1],end:c[2]},a.touchEventsDesktop={start:h[0],move:h[1],end:h[2]},V.touch||!a.params.simulateTouch?a.touchEventsTouch:a.touchEventsDesktop),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,formElements:"input, select, option, textarea, button, video",lastClickTime:G.now(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.useModules(),a.params.init&&a.init(),a}}d&&(p.__proto__=d);var e={extendedDefaults:{configurable:!0},defaults:{configurable:!0},Class:{configurable:!0},$:{configurable:!0}};return((p.prototype=Object.create(d&&d.prototype)).constructor=p).prototype.slidesPerViewDynamic=function(){var e=this.params,t=this.slides,i=this.slidesGrid,n=this.size,r=this.activeIndex,a=1;if(e.centeredSlides){for(var s,o=t[r].swiperSlideSize,l=r+1;l<t.length;l+=1)t[l]&&!s&&(a+=1,n<(o+=t[l].swiperSlideSize)&&(s=!0));for(var c=r-1;0<=c;c-=1)t[c]&&!s&&(a+=1,n<(o+=t[c].swiperSlideSize)&&(s=!0))}else for(var h=r+1;h<t.length;h+=1)i[h]-i[r]<n&&(a+=1);return a},p.prototype.update=function(){var i=this;if(i&&!i.destroyed){var e=i.snapGrid,t=i.params;t.breakpoints&&i.setBreakpoint(),i.updateSize(),i.updateSlides(),i.updateProgress(),i.updateSlidesClasses(),i.params.freeMode?(n(),i.params.autoHeight&&i.updateAutoHeight()):(("auto"===i.params.slidesPerView||1<i.params.slidesPerView)&&i.isEnd&&!i.params.centeredSlides?i.slideTo(i.slides.length-1,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0))||n(),t.watchOverflow&&e!==i.snapGrid&&i.checkOverflow(),i.emit("update")}function n(){var e=i.rtlTranslate?-1*i.translate:i.translate,t=Math.min(Math.max(e,i.maxTranslate()),i.minTranslate());i.setTranslate(t),i.updateActiveIndex(),i.updateSlidesClasses()}},p.prototype.init=function(){var e=this;e.initialized||(e.emit("beforeInit"),e.params.breakpoints&&e.setBreakpoint(),e.addClasses(),e.params.loop&&e.loopCreate(),e.updateSize(),e.updateSlides(),e.params.watchOverflow&&e.checkOverflow(),e.params.grabCursor&&e.setGrabCursor(),e.params.preloadImages&&e.preloadImages(),e.params.loop?e.slideTo(e.params.initialSlide+e.loopedSlides,0,e.params.runCallbacksOnInit):e.slideTo(e.params.initialSlide,0,e.params.runCallbacksOnInit),e.attachEvents(),e.initialized=!0,e.emit("init"))},p.prototype.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var i=this,n=i.params,r=i.$el,a=i.$wrapperEl,s=i.slides;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),t&&(i.removeClasses(),r.removeAttr("style"),a.removeAttr("style"),s&&s.length&&s.removeClass([n.slideVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(function(e){i.off(e)}),!1!==e&&(i.$el[0].swiper=null,i.$el.data("swiper",null),G.deleteProps(i)),i.destroyed=!0),null},p.extendDefaults=function(e){G.extend(T,e)},e.extendedDefaults.get=function(){return T},e.defaults.get=function(){return b},e.Class.get=function(){return d},e.$.get=function(){return R},Object.defineProperties(p,e),p}(r),M={name:"device",proto:{device:g},static:{device:g}},S={name:"support",proto:{support:V},static:{support:V}},C={name:"browser",proto:{browser:O},static:{browser:O}},A={name:"resize",create:function(){var e=this;G.extend(e,{resize:{resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(){U.addEventListener("resize",this.resize.resizeHandler),U.addEventListener("orientationchange",this.resize.orientationChangeHandler)},destroy:function(){U.removeEventListener("resize",this.resize.resizeHandler),U.removeEventListener("orientationchange",this.resize.orientationChangeHandler)}}},P={func:U.MutationObserver||U.WebkitMutationObserver,attach:function(e,t){void 0===t&&(t={});var i=this,n=new P.func(function(e){if(1!==e.length){var t=function(){i.emit("observerUpdate",e[0])};U.requestAnimationFrame?U.requestAnimationFrame(t):U.setTimeout(t,0)}else i.emit("observerUpdate",e[0])});n.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),i.observer.observers.push(n)},init:function(){if(V.observer&&this.params.observer){if(this.params.observeParents)for(var e=this.$el.parents(),t=0;t<e.length;t+=1)this.observer.attach(e[t]);this.observer.attach(this.$el[0],{childList:!1}),this.observer.attach(this.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach(function(e){e.disconnect()}),this.observer.observers=[]}},L={name:"observer",params:{observer:!1,observeParents:!1},create:function(){G.extend(this,{observer:{init:P.init.bind(this),attach:P.attach.bind(this),destroy:P.destroy.bind(this),observers:[]}})},on:{init:function(){this.observer.init()},destroy:function(){this.observer.destroy()}}},I={update:function(e){var t=this,i=t.params,n=i.slidesPerView,r=i.slidesPerGroup,a=i.centeredSlides,s=t.params.virtual,o=s.addSlidesBefore,l=s.addSlidesAfter,c=t.virtual,h=c.from,u=c.to,d=c.slides,p=c.slidesGrid,f=c.renderSlide,m=c.offset;t.updateActiveIndex();var g,v,y,_=t.activeIndex||0;g=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",y=a?(v=Math.floor(n/2)+r+o,Math.floor(n/2)+r+l):(v=n+(r-1)+o,r+l);var x=Math.max((_||0)-y,0),b=Math.min((_||0)+v,d.length-1),w=(t.slidesGrid[x]||0)-(t.slidesGrid[0]||0);function T(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(G.extend(t.virtual,{from:x,to:b,offset:w,slidesGrid:t.slidesGrid}),h===x&&u===b&&!e)return t.slidesGrid!==p&&w!==m&&t.slides.css(g,w+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:w,from:x,to:b,slides:function(){for(var e=[],t=x;t<=b;t+=1)e.push(d[t]);return e}()}),void T();var E=[],M=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var S=h;S<=u;S+=1)(S<x||b<S)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+S+'"]').remove();for(var C=0;C<d.length;C+=1)x<=C&&C<=b&&(void 0===u||e?M.push(C):(u<C&&M.push(C),C<h&&E.push(C)));M.forEach(function(e){t.$wrapperEl.append(f(d[e],e))}),E.sort(function(e,t){return e<t}).forEach(function(e){t.$wrapperEl.prepend(f(d[e],e))}),t.$wrapperEl.children(".swiper-slide").css(g,w+"px"),T()},renderSlide:function(e,t){var i=this.params.virtual;if(i.cache&&this.virtual.cache[t])return this.virtual.cache[t];var n=i.renderSlide?R(i.renderSlide.call(this,e,t)):R('<div class="'+this.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return n.attr("data-swiper-slide-index")||n.attr("data-swiper-slide-index",t),i.cache&&(this.virtual.cache[t]=n),n},appendSlide:function(e){this.virtual.slides.push(e),this.virtual.update(!0)},prependSlide:function(e){if(this.virtual.slides.unshift(e),this.params.virtual.cache){var t=this.virtual.cache,i={};Object.keys(t).forEach(function(e){i[e+1]=t[e]}),this.virtual.cache=i}this.virtual.update(!0),this.slideNext(0)}},D={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,addSlidesBefore:0,addSlidesAfter:0}},create:function(){G.extend(this,{virtual:{update:I.update.bind(this),appendSlide:I.appendSlide.bind(this),prependSlide:I.prependSlide.bind(this),renderSlide:I.renderSlide.bind(this),slides:this.params.virtual.slides,cache:{}}})},on:{beforeInit:function(){if(this.params.virtual.enabled){this.classNames.push(this.params.containerModifierClass+"virtual");var e={watchSlidesProgress:!0};G.extend(this.params,e),G.extend(this.originalParams,e),this.virtual.update()}},setTranslate:function(){this.params.virtual.enabled&&this.virtual.update()}}},k={handle:function(e){var t=this,i=t.rtlTranslate,n=e;n.originalEvent&&(n=n.originalEvent);var r=n.keyCode||n.charCode;if(!t.allowSlideNext&&(t.isHorizontal()&&39===r||t.isVertical()&&40===r))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&37===r||t.isVertical()&&38===r))return!1;if(!(n.shiftKey||n.altKey||n.ctrlKey||n.metaKey||m.activeElement&&m.activeElement.nodeName&&("input"===m.activeElement.nodeName.toLowerCase()||"textarea"===m.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(37===r||39===r||38===r||40===r)){var a=!1;if(0<t.$el.parents("."+t.params.slideClass).length&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var s=U.innerWidth,o=U.innerHeight,l=t.$el.offset();i&&(l.left-=t.$el[0].scrollLeft);for(var c=[[l.left,l.top],[l.left+t.width,l.top],[l.left,l.top+t.height],[l.left+t.width,l.top+t.height]],h=0;h<c.length;h+=1){var u=c[h];0<=u[0]&&u[0]<=s&&0<=u[1]&&u[1]<=o&&(a=!0)}if(!a)return}t.isHorizontal()?(37!==r&&39!==r||(n.preventDefault?n.preventDefault():n.returnValue=!1),(39===r&&!i||37===r&&i)&&t.slideNext(),(37===r&&!i||39===r&&i)&&t.slidePrev()):(38!==r&&40!==r||(n.preventDefault?n.preventDefault():n.returnValue=!1),40===r&&t.slideNext(),38===r&&t.slidePrev()),t.emit("keyPress",r)}},enable:function(){this.keyboard.enabled||(R(m).on("keydown",this.keyboard.handle),this.keyboard.enabled=!0)},disable:function(){this.keyboard.enabled&&(R(m).off("keydown",this.keyboard.handle),this.keyboard.enabled=!1)}},N={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0}},create:function(){G.extend(this,{keyboard:{enabled:!1,enable:k.enable.bind(this),disable:k.disable.bind(this),handle:k.handle.bind(this)}})},on:{init:function(){this.params.keyboard.enabled&&this.keyboard.enable()},destroy:function(){this.keyboard.enabled&&this.keyboard.disable()}}};var z={lastScrollTime:G.now(),event:-1<U.navigator.userAgent.indexOf("firefox")?"DOMMouseScroll":function(){var e="onwheel",t=e in m;if(!t){var i=m.createElement("div");i.setAttribute(e,"return;"),t="function"==typeof i[e]}return!t&&m.implementation&&m.implementation.hasFeature&&!0!==m.implementation.hasFeature("","")&&(t=m.implementation.hasFeature("Events.wheel","3.0")),t}()?"wheel":"mousewheel",normalize:function(e){var t=0,i=0,n=0,r=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),n=10*t,r=10*i,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||r)&&e.deltaMode&&(1===e.deltaMode?(n*=40,r*=40):(n*=800,r*=800)),n&&!t&&(t=n<1?-1:1),r&&!i&&(i=r<1?-1:1),{spinX:t,spinY:i,pixelX:n,pixelY:r}},handleMouseEnter:function(){this.mouseEntered=!0},handleMouseLeave:function(){this.mouseEntered=!1},handle:function(e){var t=e,i=this,n=i.params.mousewheel;if(!i.mouseEntered&&!n.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var r=0,a=i.rtlTranslate?-1:1,s=z.normalize(t);if(n.forceToAxis)if(i.isHorizontal()){if(!(Math.abs(s.pixelX)>Math.abs(s.pixelY)))return!0;r=s.pixelX*a}else{if(!(Math.abs(s.pixelY)>Math.abs(s.pixelX)))return!0;r=s.pixelY}else r=Math.abs(s.pixelX)>Math.abs(s.pixelY)?-s.pixelX*a:-s.pixelY;if(0===r)return!0;if(n.invert&&(r=-r),i.params.freeMode){i.params.loop&&i.loopFix();var o=i.getTranslate()+r*n.sensitivity,l=i.isBeginning,c=i.isEnd;if(o>=i.minTranslate()&&(o=i.minTranslate()),o<=i.maxTranslate()&&(o=i.maxTranslate()),i.setTransition(0),i.setTranslate(o),i.updateProgress(),i.updateActiveIndex(),i.updateSlidesClasses(),(!l&&i.isBeginning||!c&&i.isEnd)&&i.updateSlidesClasses(),i.params.freeModeSticky&&(clearTimeout(i.mousewheel.timeout),i.mousewheel.timeout=G.nextTick(function(){i.slideToClosest()},300)),i.emit("scroll",t),i.params.autoplay&&i.params.autoplayDisableOnInteraction&&i.autoplay.stop(),o===i.minTranslate()||o===i.maxTranslate())return!0}else{if(60<G.now()-i.mousewheel.lastScrollTime)if(r<0)if(i.isEnd&&!i.params.loop||i.animating){if(n.releaseOnEdges)return!0}else i.slideNext(),i.emit("scroll",t);else if(i.isBeginning&&!i.params.loop||i.animating){if(n.releaseOnEdges)return!0}else i.slidePrev(),i.emit("scroll",t);i.mousewheel.lastScrollTime=(new U.Date).getTime()}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1},enable:function(){if(!z.event)return!1;if(this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(e=R(this.params.mousewheel.eventsTarged)),e.on("mouseenter",this.mousewheel.handleMouseEnter),e.on("mouseleave",this.mousewheel.handleMouseLeave),e.on(z.event,this.mousewheel.handle),this.mousewheel.enabled=!0},disable:function(){if(!z.event)return!1;if(!this.mousewheel.enabled)return!1;var e=this.$el;return"container"!==this.params.mousewheel.eventsTarged&&(e=R(this.params.mousewheel.eventsTarged)),e.off(z.event,this.mousewheel.handle),!(this.mousewheel.enabled=!1)}},B={update:function(){var e=this.params.navigation;if(!this.params.loop){var t=this.navigation,i=t.$nextEl,n=t.$prevEl;n&&0<n.length&&(this.isBeginning?n.addClass(e.disabledClass):n.removeClass(e.disabledClass),n[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass)),i&&0<i.length&&(this.isEnd?i.addClass(e.disabledClass):i.removeClass(e.disabledClass),i[this.params.watchOverflow&&this.isLocked?"addClass":"removeClass"](e.lockClass))}},init:function(){var e,t,i=this,n=i.params.navigation;(n.nextEl||n.prevEl)&&(n.nextEl&&(e=R(n.nextEl),i.params.uniqueNavElements&&"string"==typeof n.nextEl&&1<e.length&&1===i.$el.find(n.nextEl).length&&(e=i.$el.find(n.nextEl))),n.prevEl&&(t=R(n.prevEl),i.params.uniqueNavElements&&"string"==typeof n.prevEl&&1<t.length&&1===i.$el.find(n.prevEl).length&&(t=i.$el.find(n.prevEl))),e&&0<e.length&&e.on("click",function(e){e.preventDefault(),i.isEnd&&!i.params.loop||i.slideNext()}),t&&0<t.length&&t.on("click",function(e){e.preventDefault(),i.isBeginning&&!i.params.loop||i.slidePrev()}),G.extend(i.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}))},destroy:function(){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;t&&t.length&&(t.off("click"),t.removeClass(this.params.navigation.disabledClass)),i&&i.length&&(i.off("click"),i.removeClass(this.params.navigation.disabledClass))}},H={update:function(){var e=this,t=e.rtl,r=e.params.pagination;if(r.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a,i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,n=e.pagination.$el,s=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((a=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>i-1-2*e.loopedSlides&&(a-=i-2*e.loopedSlides),s-1<a&&(a-=s),a<0&&"bullets"!==e.params.paginationType&&(a=s+a)):a=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===r.type&&e.pagination.bullets&&0<e.pagination.bullets.length){var o,l,c,h=e.pagination.bullets;if(r.dynamicBullets&&(e.pagination.bulletSize=h.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),n.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(r.dynamicMainBullets+4)+"px"),1<r.dynamicMainBullets&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=a-e.previousIndex,e.pagination.dynamicBulletIndex>r.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=r.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),o=a-e.pagination.dynamicBulletIndex,c=((l=o+(Math.min(h.length,r.dynamicMainBullets)-1))+o)/2),h.removeClass(r.bulletActiveClass+" "+r.bulletActiveClass+"-next "+r.bulletActiveClass+"-next-next "+r.bulletActiveClass+"-prev "+r.bulletActiveClass+"-prev-prev "+r.bulletActiveClass+"-main"),1<n.length)h.each(function(e,t){var i=R(t),n=i.index();n===a&&i.addClass(r.bulletActiveClass),r.dynamicBullets&&(o<=n&&n<=l&&i.addClass(r.bulletActiveClass+"-main"),n===o&&i.prev().addClass(r.bulletActiveClass+"-prev").prev().addClass(r.bulletActiveClass+"-prev-prev"),n===l&&i.next().addClass(r.bulletActiveClass+"-next").next().addClass(r.bulletActiveClass+"-next-next"))});else if(h.eq(a).addClass(r.bulletActiveClass),r.dynamicBullets){for(var u=h.eq(o),d=h.eq(l),p=o;p<=l;p+=1)h.eq(p).addClass(r.bulletActiveClass+"-main");u.prev().addClass(r.bulletActiveClass+"-prev").prev().addClass(r.bulletActiveClass+"-prev-prev"),d.next().addClass(r.bulletActiveClass+"-next").next().addClass(r.bulletActiveClass+"-next-next")}if(r.dynamicBullets){var f=Math.min(h.length,r.dynamicMainBullets+4),m=(e.pagination.bulletSize*f-e.pagination.bulletSize)/2-c*e.pagination.bulletSize,g=t?"right":"left";h.css(e.isHorizontal()?g:"top",m+"px")}}if("fraction"===r.type&&(n.find("."+r.currentClass).text(r.formatFractionCurrent(a+1)),n.find("."+r.totalClass).text(r.formatFractionTotal(s))),"progressbar"===r.type){var v;v=r.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var y=(a+1)/s,_=1,x=1;"horizontal"===v?_=y:x=y,n.find("."+r.progressbarFillClass).transform("translate3d(0,0,0) scaleX("+_+") scaleY("+x+")").transition(e.params.speed)}"custom"===r.type&&r.renderCustom?(n.html(r.renderCustom(e,a+1,s)),e.emit("paginationRender",e,n[0])):e.emit("paginationUpdate",e,n[0]),n[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](r.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var i=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,n=e.pagination.$el,r="";if("bullets"===t.type){for(var a=e.params.loop?Math.ceil((i-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length,s=0;s<a;s+=1)t.renderBullet?r+=t.renderBullet.call(e,s,t.bulletClass):r+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";n.html(r),e.pagination.bullets=n.find("."+t.bulletClass)}"fraction"===t.type&&(r=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',n.html(r)),"progressbar"===t.type&&(r=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',n.html(r)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var i=this,e=i.params.pagination;if(e.el){var t=R(e.el);0!==t.length&&(i.params.uniqueNavElements&&"string"==typeof e.el&&1<t.length&&1===i.$el.find(e.el).length&&(t=i.$el.find(e.el)),"bullets"===e.type&&e.clickable&&t.addClass(e.clickableClass),t.addClass(e.modifierClass+e.type),"bullets"===e.type&&e.dynamicBullets&&(t.addClass(""+e.modifierClass+e.type+"-dynamic"),i.pagination.dynamicBulletIndex=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&t.addClass(e.progressbarOppositeClass),e.clickable&&t.on("click","."+e.bulletClass,function(e){e.preventDefault();var t=R(this).index()*i.params.slidesPerGroup;i.params.loop&&(t+=i.loopedSlides),i.slideTo(t)}),G.extend(i.pagination,{$el:t,el:t[0]}))}},destroy:function(){var e=this.params.pagination;if(e.el&&this.pagination.el&&this.pagination.$el&&0!==this.pagination.$el.length){var t=this.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),this.pagination.bullets&&this.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click","."+e.bulletClass)}}},F={setTranslate:function(){if(this.params.scrollbar.el&&this.scrollbar.el){var e=this.scrollbar,t=this.rtlTranslate,i=this.progress,n=e.dragSize,r=e.trackSize,a=e.$dragEl,s=e.$el,o=this.params.scrollbar,l=n,c=(r-n)*i;t?0<(c=-c)?(l=n-c,c=0):r<-c+n&&(l=r+c):c<0?(l=n+c,c=0):r<c+n&&(l=r-c),this.isHorizontal()?(V.transforms3d?a.transform("translate3d("+c+"px, 0, 0)"):a.transform("translateX("+c+"px)"),a[0].style.width=l+"px"):(V.transforms3d?a.transform("translate3d(0px, "+c+"px, 0)"):a.transform("translateY("+c+"px)"),a[0].style.height=l+"px"),o.hide&&(clearTimeout(this.scrollbar.timeout),s[0].style.opacity=1,this.scrollbar.timeout=setTimeout(function(){s[0].style.opacity=0,s.transition(400)},1e3))}},setTransition:function(e){this.params.scrollbar.el&&this.scrollbar.el&&this.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,i=t.$dragEl,n=t.$el;i[0].style.width="",i[0].style.height="";var r,a=e.isHorizontal()?n[0].offsetWidth:n[0].offsetHeight,s=e.size/e.virtualSize,o=s*(a/e.size);r="auto"===e.params.scrollbar.dragSize?a*s:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?i[0].style.width=r+"px":i[0].style.height=r+"px",n[0].style.display=1<=s?"none":"",e.params.scrollbarHide&&(n[0].style.opacity=0),G.extend(t,{trackSize:a,divider:s,moveDivider:o,dragSize:r}),t.$el[e.params.watchOverflow&&e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},setDragPosition:function(e){var t,i=this,n=i.scrollbar,r=i.rtlTranslate,a=n.$el,s=n.dragSize,o=n.trackSize;t=((i.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX||e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY||e.clientY)-a.offset()[i.isHorizontal()?"left":"top"]-s/2)/(o-s),t=Math.max(Math.min(t,1),0),r&&(t=1-t);var l=i.minTranslate()+(i.maxTranslate()-i.minTranslate())*t;i.updateProgress(l),i.setTranslate(l),i.updateActiveIndex(),i.updateSlidesClasses()},onDragStart:function(e){var t=this.params.scrollbar,i=this.scrollbar,n=this.$wrapperEl,r=i.$el,a=i.$dragEl;this.scrollbar.isTouched=!0,e.preventDefault(),e.stopPropagation(),n.transition(100),a.transition(100),i.setDragPosition(e),clearTimeout(this.scrollbar.dragTimeout),r.transition(0),t.hide&&r.css("opacity",1),this.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this.scrollbar,i=this.$wrapperEl,n=t.$el,r=t.$dragEl;this.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,t.setDragPosition(e),i.transition(0),n.transition(0),r.transition(0),this.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this.params.scrollbar,i=this.scrollbar.$el;this.scrollbar.isTouched&&(this.scrollbar.isTouched=!1,t.hide&&(clearTimeout(this.scrollbar.dragTimeout),this.scrollbar.dragTimeout=G.nextTick(function(){i.css("opacity",0),i.transition(400)},1e3)),this.emit("scrollbarDragEnd",e),t.snapOnRelease&&this.slideToClosest())},enableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,i=e.touchEvents,n=e.touchEventsDesktop,r=e.params,a=t.$el[0],s=!(!V.passiveListener||!r.passiveListeners)&&{passive:!1,capture:!1},o=!(!V.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};V.touch||!V.pointerEvents&&!V.prefixedPointerEvents?(V.touch&&(a.addEventListener(i.start,e.scrollbar.onDragStart,s),a.addEventListener(i.move,e.scrollbar.onDragMove,s),a.addEventListener(i.end,e.scrollbar.onDragEnd,o)),(r.simulateTouch&&!g.ios&&!g.android||r.simulateTouch&&!V.touch&&g.ios)&&(a.addEventListener("mousedown",e.scrollbar.onDragStart,s),m.addEventListener("mousemove",e.scrollbar.onDragMove,s),m.addEventListener("mouseup",e.scrollbar.onDragEnd,o))):(a.addEventListener(n.start,e.scrollbar.onDragStart,s),m.addEventListener(n.move,e.scrollbar.onDragMove,s),m.addEventListener(n.end,e.scrollbar.onDragEnd,o))}},disableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=e.scrollbar,i=e.touchEvents,n=e.touchEventsDesktop,r=e.params,a=t.$el[0],s=!(!V.passiveListener||!r.passiveListeners)&&{passive:!1,capture:!1},o=!(!V.passiveListener||!r.passiveListeners)&&{passive:!0,capture:!1};V.touch||!V.pointerEvents&&!V.prefixedPointerEvents?(V.touch&&(a.removeEventListener(i.start,e.scrollbar.onDragStart,s),a.removeEventListener(i.move,e.scrollbar.onDragMove,s),a.removeEventListener(i.end,e.scrollbar.onDragEnd,o)),(r.simulateTouch&&!g.ios&&!g.android||r.simulateTouch&&!V.touch&&g.ios)&&(a.removeEventListener("mousedown",e.scrollbar.onDragStart,s),m.removeEventListener("mousemove",e.scrollbar.onDragMove,s),m.removeEventListener("mouseup",e.scrollbar.onDragEnd,o))):(a.removeEventListener(n.start,e.scrollbar.onDragStart,s),m.removeEventListener(n.move,e.scrollbar.onDragMove,s),m.removeEventListener(n.end,e.scrollbar.onDragEnd,o))}},init:function(){if(this.params.scrollbar.el){var e=this.scrollbar,t=this.$el,i=this.params.scrollbar,n=R(i.el);this.params.uniqueNavElements&&"string"==typeof i.el&&1<n.length&&1===t.find(i.el).length&&(n=t.find(i.el));var r=n.find("."+this.params.scrollbar.dragClass);0===r.length&&(r=R('<div class="'+this.params.scrollbar.dragClass+'"></div>'),n.append(r)),G.extend(e,{$el:n,el:n[0],$dragEl:r,dragEl:r[0]}),i.draggable&&e.enableDraggable()}},destroy:function(){this.scrollbar.disableDraggable()}},j={setTransform:function(e,t){var i=this.rtl,n=R(e),r=i?-1:1,a=n.attr("data-swiper-parallax")||"0",s=n.attr("data-swiper-parallax-x"),o=n.attr("data-swiper-parallax-y"),l=n.attr("data-swiper-parallax-scale"),c=n.attr("data-swiper-parallax-opacity");if(s||o?(s=s||"0",o=o||"0"):this.isHorizontal()?(s=a,o="0"):(o=a,s="0"),s=0<=s.indexOf("%")?parseInt(s,10)*t*r+"%":s*t*r+"px",o=0<=o.indexOf("%")?parseInt(o,10)*t+"%":o*t+"px",null!=c){var h=c-(c-1)*(1-Math.abs(t));n[0].style.opacity=h}if(null==l)n.transform("translate3d("+s+", "+o+", 0px)");else{var u=l-(l-1)*(1-Math.abs(t));n.transform("translate3d("+s+", "+o+", 0px) scale("+u+")")}},setTranslate:function(){var n=this,e=n.$el,t=n.slides,r=n.progress,a=n.snapGrid;e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){n.parallax.setTransform(t,r)}),t.each(function(e,t){var i=t.progress;1<n.params.slidesPerGroup&&"auto"!==n.params.slidesPerView&&(i+=Math.ceil(e/2)-r*(a.length-1)),i=Math.min(Math.max(i,-1),1),R(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){n.parallax.setTransform(t,i)})})},setTransition:function(r){void 0===r&&(r=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(e,t){var i=R(t),n=parseInt(i.attr("data-swiper-parallax-duration"),10)||r;0===r&&(n=0),i.transition(n)})}},W={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,i=e.targetTouches[0].pageY,n=e.targetTouches[1].pageX,r=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(n-t,2)+Math.pow(r-i,2))},onGestureStart:function(e){var t=this.params.zoom,i=this.zoom,n=i.gesture;if(i.fakeGestureTouched=!1,i.fakeGestureMoved=!1,!V.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;i.fakeGestureTouched=!0,n.scaleStart=W.getDistanceBetweenTouches(e)}n.$slideEl&&n.$slideEl.length||(n.$slideEl=R(e.target).closest(".swiper-slide"),0===n.$slideEl.length&&(n.$slideEl=this.slides.eq(this.activeIndex)),n.$imageEl=n.$slideEl.find("img, svg, canvas"),n.$imageWrapEl=n.$imageEl.parent("."+t.containerClass),n.maxRatio=n.$imageWrapEl.attr("data-swiper-zoom")||t.maxRatio,0!==n.$imageWrapEl.length)?(n.$imageEl.transition(0),this.zoom.isScaling=!0):n.$imageEl=void 0},onGestureChange:function(e){var t=this.params.zoom,i=this.zoom,n=i.gesture;if(!V.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;i.fakeGestureMoved=!0,n.scaleMove=W.getDistanceBetweenTouches(e)}n.$imageEl&&0!==n.$imageEl.length&&(V.gestures?this.zoom.scale=e.scale*i.currentScale:i.scale=n.scaleMove/n.scaleStart*i.currentScale,i.scale>n.maxRatio&&(i.scale=n.maxRatio-1+Math.pow(i.scale-n.maxRatio+1,.5)),i.scale<t.minRatio&&(i.scale=t.minRatio+1-Math.pow(t.minRatio-i.scale+1,.5)),n.$imageEl.transform("translate3d(0,0,0) scale("+i.scale+")"))},onGestureEnd:function(e){var t=this.params.zoom,i=this.zoom,n=i.gesture;if(!V.gestures){if(!i.fakeGestureTouched||!i.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!g.android)return;i.fakeGestureTouched=!1,i.fakeGestureMoved=!1}n.$imageEl&&0!==n.$imageEl.length&&(i.scale=Math.max(Math.min(i.scale,n.maxRatio),t.minRatio),n.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale("+i.scale+")"),i.currentScale=i.scale,i.isScaling=!1,1===i.scale&&(n.$slideEl=void 0))},onTouchStart:function(e){var t=this.zoom,i=t.gesture,n=t.image;i.$imageEl&&0!==i.$imageEl.length&&(n.isTouched||(g.android&&e.preventDefault(),n.isTouched=!0,n.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,n.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this.zoom,i=t.gesture,n=t.image,r=t.velocity;if(i.$imageEl&&0!==i.$imageEl.length&&(this.allowClick=!1,n.isTouched&&i.$slideEl)){n.isMoved||(n.width=i.$imageEl[0].offsetWidth,n.height=i.$imageEl[0].offsetHeight,n.startX=G.getTranslate(i.$imageWrapEl[0],"x")||0,n.startY=G.getTranslate(i.$imageWrapEl[0],"y")||0,i.slideWidth=i.$slideEl[0].offsetWidth,i.slideHeight=i.$slideEl[0].offsetHeight,i.$imageWrapEl.transition(0),this.rtl&&(n.startX=-n.startX,n.startY=-n.startY));var a=n.width*t.scale,s=n.height*t.scale;if(!(a<i.slideWidth&&s<i.slideHeight)){if(n.minX=Math.min(i.slideWidth/2-a/2,0),n.maxX=-n.minX,n.minY=Math.min(i.slideHeight/2-s/2,0),n.maxY=-n.minY,n.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!n.isMoved&&!t.isScaling){if(this.isHorizontal()&&(Math.floor(n.minX)===Math.floor(n.startX)&&n.touchesCurrent.x<n.touchesStart.x||Math.floor(n.maxX)===Math.floor(n.startX)&&n.touchesCurrent.x>n.touchesStart.x))return void(n.isTouched=!1);if(!this.isHorizontal()&&(Math.floor(n.minY)===Math.floor(n.startY)&&n.touchesCurrent.y<n.touchesStart.y||Math.floor(n.maxY)===Math.floor(n.startY)&&n.touchesCurrent.y>n.touchesStart.y))return void(n.isTouched=!1)}e.preventDefault(),e.stopPropagation(),n.isMoved=!0,n.currentX=n.touchesCurrent.x-n.touchesStart.x+n.startX,n.currentY=n.touchesCurrent.y-n.touchesStart.y+n.startY,n.currentX<n.minX&&(n.currentX=n.minX+1-Math.pow(n.minX-n.currentX+1,.8)),n.currentX>n.maxX&&(n.currentX=n.maxX-1+Math.pow(n.currentX-n.maxX+1,.8)),n.currentY<n.minY&&(n.currentY=n.minY+1-Math.pow(n.minY-n.currentY+1,.8)),n.currentY>n.maxY&&(n.currentY=n.maxY-1+Math.pow(n.currentY-n.maxY+1,.8)),r.prevPositionX||(r.prevPositionX=n.touchesCurrent.x),r.prevPositionY||(r.prevPositionY=n.touchesCurrent.y),r.prevTime||(r.prevTime=Date.now()),r.x=(n.touchesCurrent.x-r.prevPositionX)/(Date.now()-r.prevTime)/2,r.y=(n.touchesCurrent.y-r.prevPositionY)/(Date.now()-r.prevTime)/2,Math.abs(n.touchesCurrent.x-r.prevPositionX)<2&&(r.x=0),Math.abs(n.touchesCurrent.y-r.prevPositionY)<2&&(r.y=0),r.prevPositionX=n.touchesCurrent.x,r.prevPositionY=n.touchesCurrent.y,r.prevTime=Date.now(),i.$imageWrapEl.transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,i=e.image,n=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!i.isTouched||!i.isMoved)return i.isTouched=!1,void(i.isMoved=!1);i.isTouched=!1,i.isMoved=!1;var r=300,a=300,s=n.x*r,o=i.currentX+s,l=n.y*a,c=i.currentY+l;0!==n.x&&(r=Math.abs((o-i.currentX)/n.x)),0!==n.y&&(a=Math.abs((c-i.currentY)/n.y));var h=Math.max(r,a);i.currentX=o,i.currentY=c;var u=i.width*e.scale,d=i.height*e.scale;i.minX=Math.min(t.slideWidth/2-u/2,0),i.maxX=-i.minX,i.minY=Math.min(t.slideHeight/2-d/2,0),i.maxY=-i.minY,i.currentX=Math.max(Math.min(i.currentX,i.maxX),i.minX),i.currentY=Math.max(Math.min(i.currentY,i.maxY),i.minY),t.$imageWrapEl.transition(h).transform("translate3d("+i.currentX+"px, "+i.currentY+"px,0)")}},onTransitionEnd:function(){var e=this.zoom,t=e.gesture;t.$slideEl&&this.previousIndex!==this.activeIndex&&(t.$imageEl.transform("translate3d(0,0,0) scale(1)"),t.$imageWrapEl.transform("translate3d(0,0,0)"),t.$slideEl=void 0,t.$imageEl=void 0,t.$imageWrapEl=void 0,e.scale=1,e.currentScale=1)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,i,n,r,a,s,o,l,c,h,u,d,p,f,m,g,v=this.zoom,y=this.params.zoom,_=v.gesture,x=v.image;(_.$slideEl||(_.$slideEl=this.clickedSlide?R(this.clickedSlide):this.slides.eq(this.activeIndex),_.$imageEl=_.$slideEl.find("img, svg, canvas"),_.$imageWrapEl=_.$imageEl.parent("."+y.containerClass)),_.$imageEl&&0!==_.$imageEl.length)&&(_.$slideEl.addClass(""+y.zoomedSlideClass),i=void 0===x.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,"touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=x.touchesStart.x,x.touchesStart.y),v.scale=_.$imageWrapEl.attr("data-swiper-zoom")||y.maxRatio,v.currentScale=_.$imageWrapEl.attr("data-swiper-zoom")||y.maxRatio,e?(m=_.$slideEl[0].offsetWidth,g=_.$slideEl[0].offsetHeight,n=_.$slideEl.offset().left+m/2-t,r=_.$slideEl.offset().top+g/2-i,o=_.$imageEl[0].offsetWidth,l=_.$imageEl[0].offsetHeight,c=o*v.scale,h=l*v.scale,p=-(u=Math.min(m/2-c/2,0)),f=-(d=Math.min(g/2-h/2,0)),(a=n*v.scale)<u&&(a=u),p<a&&(a=p),(s=r*v.scale)<d&&(s=d),f<s&&(s=f)):s=a=0,_.$imageWrapEl.transition(300).transform("translate3d("+a+"px, "+s+"px,0)"),_.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+v.scale+")"))},out:function(){var e=this.zoom,t=this.params.zoom,i=e.gesture;i.$slideEl||(i.$slideEl=this.clickedSlide?R(this.clickedSlide):this.slides.eq(this.activeIndex),i.$imageEl=i.$slideEl.find("img, svg, canvas"),i.$imageWrapEl=i.$imageEl.parent("."+t.containerClass)),i.$imageEl&&0!==i.$imageEl.length&&(e.scale=1,e.currentScale=1,i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),i.$slideEl.removeClass(""+t.zoomedSlideClass),i.$slideEl=void 0)},enable:function(){var e=this,t=e.zoom;if(!t.enabled){t.enabled=!0;var i=!("touchstart"!==e.touchEvents.start||!V.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};V.gestures?(e.$wrapperEl.on("gesturestart",".swiper-slide",t.onGestureStart,i),e.$wrapperEl.on("gesturechange",".swiper-slide",t.onGestureChange,i),e.$wrapperEl.on("gestureend",".swiper-slide",t.onGestureEnd,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,".swiper-slide",t.onGestureStart,i),e.$wrapperEl.on(e.touchEvents.move,".swiper-slide",t.onGestureChange,i),e.$wrapperEl.on(e.touchEvents.end,".swiper-slide",t.onGestureEnd,i)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){e.zoom.enabled=!1;var i=!("touchstart"!==e.touchEvents.start||!V.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1};V.gestures?(e.$wrapperEl.off("gesturestart",".swiper-slide",t.onGestureStart,i),e.$wrapperEl.off("gesturechange",".swiper-slide",t.onGestureChange,i),e.$wrapperEl.off("gestureend",".swiper-slide",t.onGestureEnd,i)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,".swiper-slide",t.onGestureStart,i),e.$wrapperEl.off(e.touchEvents.move,".swiper-slide",t.onGestureChange,i),e.$wrapperEl.off(e.touchEvents.end,".swiper-slide",t.onGestureEnd,i)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove)}}},X={loadInSlide:function(e,l){void 0===l&&(l=!0);var c=this,h=c.params.lazy;if(void 0!==e&&0!==c.slides.length){var u=c.virtual&&c.params.virtual.enabled?c.$wrapperEl.children("."+c.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):c.slides.eq(e),t=u.find("."+h.elementClass+":not(."+h.loadedClass+"):not(."+h.loadingClass+")");!u.hasClass(h.elementClass)||u.hasClass(h.loadedClass)||u.hasClass(h.loadingClass)||(t=t.add(u[0])),0!==t.length&&t.each(function(e,t){var n=R(t);n.addClass(h.loadingClass);var r=n.attr("data-background"),a=n.attr("data-src"),s=n.attr("data-srcset"),o=n.attr("data-sizes");c.loadImage(n[0],a||r,s,o,!1,function(){if(null!=c&&c&&(!c||c.params)&&!c.destroyed){if(r?(n.css("background-image",'url("'+r+'")'),n.removeAttr("data-background")):(s&&(n.attr("srcset",s),n.removeAttr("data-srcset")),o&&(n.attr("sizes",o),n.removeAttr("data-sizes")),a&&(n.attr("src",a),n.removeAttr("data-src"))),n.addClass(h.loadedClass).removeClass(h.loadingClass),u.find("."+h.preloaderClass).remove(),c.params.loop&&l){var e=u.attr("data-swiper-slide-index");if(u.hasClass(c.params.slideDuplicateClass)){var t=c.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+c.params.slideDuplicateClass+")");c.lazy.loadInSlide(t.index(),!1)}else{var i=c.$wrapperEl.children("."+c.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');c.lazy.loadInSlide(i.index(),!1)}}c.emit("lazyImageReady",u[0],n[0])}}),c.emit("lazyImageLoad",u[0],n[0])})}},load:function(){var n=this,t=n.$wrapperEl,i=n.params,r=n.slides,e=n.activeIndex,a=n.virtual&&i.virtual.enabled,s=i.lazy,o=i.slidesPerView;function l(e){if(a){if(t.children("."+i.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(r[e])return!0;return!1}function c(e){return a?R(e).attr("data-swiper-slide-index"):R(e).index()}if("auto"===o&&(o=0),n.lazy.initialImageLoaded||(n.lazy.initialImageLoaded=!0),n.params.watchSlidesVisibility)t.children("."+i.slideVisibleClass).each(function(e,t){var i=a?R(t).attr("data-swiper-slide-index"):R(t).index();n.lazy.loadInSlide(i)});else if(1<o)for(var h=e;h<e+o;h+=1)l(h)&&n.lazy.loadInSlide(h);else n.lazy.loadInSlide(e);if(s.loadPrevNext)if(1<o||s.loadPrevNextAmount&&1<s.loadPrevNextAmount){for(var u=s.loadPrevNextAmount,d=o,p=Math.min(e+d+Math.max(u,d),r.length),f=Math.max(e-Math.max(d,u),0),m=e+o;m<p;m+=1)l(m)&&n.lazy.loadInSlide(m);for(var g=f;g<e;g+=1)l(g)&&n.lazy.loadInSlide(g)}else{var v=t.children("."+i.slideNextClass);0<v.length&&n.lazy.loadInSlide(c(v));var y=t.children("."+i.slidePrevClass);0<y.length&&n.lazy.loadInSlide(c(y))}}},Y={LinearSpline:function(e,t){var i,n,r,a,s,o=function(e,t){for(n=-1,i=e.length;1<i-n;)e[r=i+n>>1]<=t?n=r:i=r;return i};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(s=o(this.x,e),a=s-1,(e-this.x[a])*(this.y[s]-this.y[a])/(this.x[s]-this.x[a])+this.y[a]):0},this},getInterpolateFunction:function(e){this.controller.spline||(this.controller.spline=this.params.loop?new Y.LinearSpline(this.slidesGrid,e.slidesGrid):new Y.LinearSpline(this.snapGrid,e.snapGrid))},setTranslate:function(e,t){var i,n,r=this,a=r.controller.control;function s(e){var t=r.rtlTranslate?-r.translate:r.translate;"slide"===r.params.controller.by&&(r.controller.getInterpolateFunction(e),n=-r.controller.spline.interpolate(-t)),n&&"container"!==r.params.controller.by||(i=(e.maxTranslate()-e.minTranslate())/(r.maxTranslate()-r.minTranslate()),n=(t-r.minTranslate())*i+e.minTranslate()),r.params.controller.inverse&&(n=e.maxTranslate()-n),e.updateProgress(n),e.setTranslate(n,r),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(a))for(var o=0;o<a.length;o+=1)a[o]!==t&&a[o]instanceof E&&s(a[o]);else a instanceof E&&t!==a&&s(a)},setTransition:function(t,e){var i,n=this,r=n.controller.control;function a(e){e.setTransition(t,n),0!==t&&(e.transitionStart(),e.params.autoHeight&&G.nextTick(function(){e.updateAutoHeight()}),e.$wrapperEl.transitionEnd(function(){r&&(e.params.loop&&"slide"===n.params.controller.by&&e.loopFix(),e.transitionEnd())}))}if(Array.isArray(r))for(i=0;i<r.length;i+=1)r[i]!==e&&r[i]instanceof E&&a(r[i]);else r instanceof E&&e!==r&&a(r)}},q={makeElFocusable:function(e){return e.attr("tabIndex","0"),e},addElRole:function(e,t){return e.attr("role",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterKey:function(e){var t=this,i=t.params.a11y;if(13===e.keyCode){var n=R(e.target);t.navigation&&t.navigation.$nextEl&&n.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(i.lastSlideMessage):t.a11y.notify(i.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&n.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(i.firstSlideMessage):t.a11y.notify(i.prevSlideMessage)),t.pagination&&n.is("."+t.params.pagination.bulletClass)&&n[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){if(!this.params.loop){var e=this.navigation,t=e.$nextEl,i=e.$prevEl;i&&0<i.length&&(this.isBeginning?this.a11y.disableEl(i):this.a11y.enableEl(i)),t&&0<t.length&&(this.isEnd?this.a11y.disableEl(t):this.a11y.enableEl(t))}},updatePagination:function(){var n=this,r=n.params.a11y;n.pagination&&n.params.pagination.clickable&&n.pagination.bullets&&n.pagination.bullets.length&&n.pagination.bullets.each(function(e,t){var i=R(t);n.a11y.makeElFocusable(i),n.a11y.addElRole(i,"button"),n.a11y.addElLabel(i,r.paginationBulletMessage.replace(/{{index}}/,i.index()+1))})},init:function(){var e=this;e.$el.append(e.a11y.liveRegion);var t,i,n=e.params.a11y;e.navigation&&e.navigation.$nextEl&&(t=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(i=e.navigation.$prevEl),t&&(e.a11y.makeElFocusable(t),e.a11y.addElRole(t,"button"),e.a11y.addElLabel(t,n.nextSlideMessage),t.on("keydown",e.a11y.onEnterKey)),i&&(e.a11y.makeElFocusable(i),e.a11y.addElRole(i,"button"),e.a11y.addElLabel(i,n.prevSlideMessage),i.on("keydown",e.a11y.onEnterKey)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown","."+e.params.pagination.bulletClass,e.a11y.onEnterKey)},destroy:function(){var e,t,i=this;i.a11y.liveRegion&&0<i.a11y.liveRegion.length&&i.a11y.liveRegion.remove(),i.navigation&&i.navigation.$nextEl&&(e=i.navigation.$nextEl),i.navigation&&i.navigation.$prevEl&&(t=i.navigation.$prevEl),e&&e.off("keydown",i.a11y.onEnterKey),t&&t.off("keydown",i.a11y.onEnterKey),i.pagination&&i.params.pagination.clickable&&i.pagination.bullets&&i.pagination.bullets.length&&i.pagination.$el.off("keydown","."+i.params.pagination.bulletClass,i.a11y.onEnterKey)}},$={init:function(){if(this.params.history){if(!U.history||!U.history.pushState)return this.params.history.enabled=!1,void(this.params.hashNavigation.enabled=!0);var e=this.history;e.initialized=!0,e.paths=$.getPathValues(),(e.paths.key||e.paths.value)&&(e.scrollToSlide(0,e.paths.value,this.params.runCallbacksOnInit),this.params.history.replaceState||U.addEventListener("popstate",this.history.setHistoryPopState))}},destroy:function(){this.params.history.replaceState||U.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){this.history.paths=$.getPathValues(),this.history.scrollToSlide(this.params.speed,this.history.paths.value,!1)},getPathValues:function(){var e=U.location.pathname.slice(1).split("/").filter(function(e){return""!==e}),t=e.length;return{key:e[t-2],value:e[t-1]}},setHistory:function(e,t){if(this.history.initialized&&this.params.history.enabled){var i=this.slides.eq(t),n=$.slugify(i.attr("data-history"));U.location.pathname.includes(e)||(n=e+"/"+n);var r=U.history.state;r&&r.value===n||(this.params.history.replaceState?U.history.replaceState({value:n},null,n):U.history.pushState({value:n},null,n))}},slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,i){if(t)for(var n=0,r=this.slides.length;n<r;n+=1){var a=this.slides.eq(n);if($.slugify(a.attr("data-history"))===t&&!a.hasClass(this.params.slideDuplicateClass)){var s=a.index();this.slideTo(s,e,i)}}else this.slideTo(0,e,i)}},Z={onHashCange:function(){var e=m.location.hash.replace("#","");if(e!==this.slides.eq(this.activeIndex).attr("data-hash")){var t=this.$wrapperEl.children("."+this.params.slideClass+'[data-hash="'+e+'"]').index();if(void 0===t)return;this.slideTo(t)}},setHash:function(){if(this.hashNavigation.initialized&&this.params.hashNavigation.enabled)if(this.params.hashNavigation.replaceState&&U.history&&U.history.replaceState)U.history.replaceState(null,null,"#"+this.slides.eq(this.activeIndex).attr("data-hash")||"");else{var e=this.slides.eq(this.activeIndex),t=e.attr("data-hash")||e.attr("data-history");m.location.hash=t||""}},init:function(){var e=this;if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var t=m.location.hash.replace("#","");if(t)for(var i=0,n=e.slides.length;i<n;i+=1){var r=e.slides.eq(i);if((r.attr("data-hash")||r.attr("data-history"))===t&&!r.hasClass(e.params.slideDuplicateClass)){var a=r.index();e.slideTo(a,0,e.params.runCallbacksOnInit,!0)}}e.params.hashNavigation.watchState&&R(U).on("hashchange",e.hashNavigation.onHashCange)}},destroy:function(){this.params.hashNavigation.watchState&&R(U).off("hashchange",this.hashNavigation.onHashCange)}},J={run:function(){var e=this,t=e.slides.eq(e.activeIndex),i=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(i=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),e.autoplay.timeout=G.nextTick(function(){e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(e.slideNext(e.params.speed,!0,!0),e.emit("autoplay"))},i)},start:function(){return void 0===this.autoplay.timeout&&(!this.autoplay.running&&(this.autoplay.running=!0,this.emit("autoplayStart"),this.autoplay.run(),!0))},stop:function(){return!!this.autoplay.running&&(void 0!==this.autoplay.timeout&&(this.autoplay.timeout&&(clearTimeout(this.autoplay.timeout),this.autoplay.timeout=void 0),this.autoplay.running=!1,this.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?(t.$wrapperEl[0].addEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].addEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd)):(t.autoplay.paused=!1,t.autoplay.run())))}},K={setTranslate:function(){for(var e=this.slides,t=0;t<e.length;t+=1){var i=this.slides.eq(t),n=-i[0].swiperSlideOffset;this.params.virtualTranslate||(n-=this.translate);var r=0;this.isHorizontal()||(r=n,n=0);var a=this.params.fadeEffect.crossFade?Math.max(1-Math.abs(i[0].progress),0):1+Math.min(Math.max(i[0].progress,-1),0);i.css({opacity:a}).transform("translate3d("+n+"px, "+r+"px, 0px)")}},setTransition:function(e){var i=this,t=i.slides,n=i.$wrapperEl;if(t.transition(e),i.params.virtualTranslate&&0!==e){var r=!1;t.transitionEnd(function(){if(!r&&i&&!i.destroyed){r=!0,i.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)n.trigger(e[t])}})}}},Q={setTranslate:function(){var e,t=this,i=t.$el,n=t.$wrapperEl,r=t.slides,a=t.width,s=t.height,o=t.rtlTranslate,l=t.size,c=t.params.cubeEffect,h=t.isHorizontal(),u=t.virtual&&t.params.virtual.enabled,d=0;c.shadow&&(h?(0===(e=n.find(".swiper-cube-shadow")).length&&(e=R('<div class="swiper-cube-shadow"></div>'),n.append(e)),e.css({height:a+"px"})):0===(e=i.find(".swiper-cube-shadow")).length&&(e=R('<div class="swiper-cube-shadow"></div>'),i.append(e)));for(var p=0;p<r.length;p+=1){var f=r.eq(p),m=p;u&&(m=parseInt(f.attr("data-swiper-slide-index"),10));var g=90*m,v=Math.floor(g/360);o&&(g=-g,v=Math.floor(-g/360));var y=Math.max(Math.min(f[0].progress,1),-1),_=0,x=0,b=0;m%4==0?(_=4*-v*l,b=0):(m-1)%4==0?(_=0,b=4*-v*l):(m-2)%4==0?(_=l+4*v*l,b=l):(m-3)%4==0&&(_=-l,b=3*l+4*l*v),o&&(_=-_),h||(x=_,_=0);var w="rotateX("+(h?0:-g)+"deg) rotateY("+(h?g:0)+"deg) translate3d("+_+"px, "+x+"px, "+b+"px)";if(y<=1&&-1<y&&(d=90*m+90*y,o&&(d=90*-m-90*y)),f.transform(w),c.slideShadows){var T=h?f.find(".swiper-slide-shadow-left"):f.find(".swiper-slide-shadow-top"),E=h?f.find(".swiper-slide-shadow-right"):f.find(".swiper-slide-shadow-bottom");0===T.length&&(T=R('<div class="swiper-slide-shadow-'+(h?"left":"top")+'"></div>'),f.append(T)),0===E.length&&(E=R('<div class="swiper-slide-shadow-'+(h?"right":"bottom")+'"></div>'),f.append(E)),T.length&&(T[0].style.opacity=Math.max(-y,0)),E.length&&(E[0].style.opacity=Math.max(y,0))}}if(n.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),c.shadow)if(h)e.transform("translate3d(0px, "+(a/2+c.shadowOffset)+"px, "+-a/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var M=Math.abs(d)-90*Math.floor(Math.abs(d)/90),S=1.5-(Math.sin(2*M*Math.PI/360)/2+Math.cos(2*M*Math.PI/360)/2),C=c.shadowScale,A=c.shadowScale/S,P=c.shadowOffset;e.transform("scale3d("+C+", 1, "+A+") translate3d(0px, "+(s/2+P)+"px, "+-s/2/A+"px) rotateX(-90deg)")}var L=O.isSafari||O.isUiWebView?-l/2:0;n.transform("translate3d(0px,0,"+L+"px) rotateX("+(t.isHorizontal()?0:d)+"deg) rotateY("+(t.isHorizontal()?-d:0)+"deg)")},setTransition:function(e){var t=this.$el;this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),this.params.cubeEffect.shadow&&!this.isHorizontal()&&t.find(".swiper-cube-shadow").transition(e)}},ee={setTranslate:function(){for(var e=this.slides,t=this.rtlTranslate,i=0;i<e.length;i+=1){var n=e.eq(i),r=n[0].progress;this.params.flipEffect.limitRotation&&(r=Math.max(Math.min(n[0].progress,1),-1));var a=-180*r,s=0,o=-n[0].swiperSlideOffset,l=0;if(this.isHorizontal()?t&&(a=-a):(l=o,s=-a,a=o=0),n[0].style.zIndex=-Math.abs(Math.round(r))+e.length,this.params.flipEffect.slideShadows){var c=this.isHorizontal()?n.find(".swiper-slide-shadow-left"):n.find(".swiper-slide-shadow-top"),h=this.isHorizontal()?n.find(".swiper-slide-shadow-right"):n.find(".swiper-slide-shadow-bottom");0===c.length&&(c=R('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"left":"top")+'"></div>'),n.append(c)),0===h.length&&(h=R('<div class="swiper-slide-shadow-'+(this.isHorizontal()?"right":"bottom")+'"></div>'),n.append(h)),c.length&&(c[0].style.opacity=Math.max(-r,0)),h.length&&(h[0].style.opacity=Math.max(r,0))}n.transform("translate3d("+o+"px, "+l+"px, 0px) rotateX("+s+"deg) rotateY("+a+"deg)")}},setTransition:function(e){var i=this,t=i.slides,n=i.activeIndex,r=i.$wrapperEl;if(t.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),i.params.virtualTranslate&&0!==e){var a=!1;t.eq(n).transitionEnd(function(){if(!a&&i&&!i.destroyed){a=!0,i.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],t=0;t<e.length;t+=1)r.trigger(e[t])}})}}},te={setTranslate:function(){for(var e=this.width,t=this.height,i=this.slides,n=this.$wrapperEl,r=this.slidesSizesGrid,a=this.params.coverflowEffect,s=this.isHorizontal(),o=this.translate,l=s?e/2-o:t/2-o,c=s?a.rotate:-a.rotate,h=a.depth,u=0,d=i.length;u<d;u+=1){var p=i.eq(u),f=r[u],m=(l-p[0].swiperSlideOffset-f/2)/f*a.modifier,g=s?c*m:0,v=s?0:c*m,y=-h*Math.abs(m),_=s?0:a.stretch*m,x=s?a.stretch*m:0;Math.abs(x)<.001&&(x=0),Math.abs(_)<.001&&(_=0),Math.abs(y)<.001&&(y=0),Math.abs(g)<.001&&(g=0),Math.abs(v)<.001&&(v=0);var b="translate3d("+x+"px,"+_+"px,"+y+"px)  rotateX("+v+"deg) rotateY("+g+"deg)";if(p.transform(b),p[0].style.zIndex=1-Math.abs(Math.round(m)),a.slideShadows){var w=s?p.find(".swiper-slide-shadow-left"):p.find(".swiper-slide-shadow-top"),T=s?p.find(".swiper-slide-shadow-right"):p.find(".swiper-slide-shadow-bottom");0===w.length&&(w=R('<div class="swiper-slide-shadow-'+(s?"left":"top")+'"></div>'),p.append(w)),0===T.length&&(T=R('<div class="swiper-slide-shadow-'+(s?"right":"bottom")+'"></div>'),p.append(T)),w.length&&(w[0].style.opacity=0<m?m:0),T.length&&(T[0].style.opacity=0<-m?-m:0)}}(V.pointerEvents||V.prefixedPointerEvents)&&(n[0].style.perspectiveOrigin=l+"px 50%")},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},ie={init:function(){var e=this,t=e.params.thumbs,i=e.constructor;t.swiper instanceof i?(e.thumbs.swiper=t.swiper,G.extend(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),G.extend(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):G.isObject(t.swiper)&&(e.thumbs.swiper=new i(G.extend({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick)},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var i=t.clickedIndex;if(null!=i){var n;if(n=t.params.loop?parseInt(R(t.clickedSlide).attr("data-swiper-slide-index"),10):i,e.params.loop){var r=e.activeIndex;e.slides.eq(r).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,r=e.activeIndex);var a=e.slides.eq(r).prevAll('[data-swiper-slide-index="'+n+'"]').eq(0).index(),s=e.slides.eq(r).nextAll('[data-swiper-slide-index="'+n+'"]').eq(0).index();n=void 0===a?s:void 0===s?a:s-r<r-a?s:a}e.slideTo(n)}}},update:function(e){var t=this,i=t.thumbs.swiper;if(i){var n="auto"===i.params.slidesPerView?i.slidesPerViewDynamic():i.params.slidesPerView;if(t.realIndex!==i.realIndex){var r,a=i.activeIndex;if(i.params.loop){i.slides.eq(a).hasClass(i.params.slideDuplicateClass)&&(i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft,a=i.activeIndex);var s=i.slides.eq(a).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),o=i.slides.eq(a).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();r=void 0===s?o:void 0===o?s:o-a<a-s?o:s}else r=t.realIndex;i.visibleSlidesIndexes.indexOf(r)<0&&(i.params.centeredSlides?r=a<r?r-Math.floor(n/2)+1:r+Math.floor(n/2)-1:a<r&&(r=r-n+1),i.slideTo(r,e?0:void 0))}var l=1,c=t.params.thumbs.slideThumbActiveClass;if(1<t.params.slidesPerView&&!t.params.centeredSlides&&(l=t.params.slidesPerView),i.slides.removeClass(c),i.params.loop)for(var h=0;h<l;h+=1)i.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+h)+'"]').addClass(c);else for(var u=0;u<l;u+=1)i.slides.eq(t.realIndex+u).addClass(c)}}},ne=[M,S,C,A,L,D,N,{name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarged:"container"}},create:function(){G.extend(this,{mousewheel:{enabled:!1,enable:z.enable.bind(this),disable:z.disable.bind(this),handle:z.handle.bind(this),handleMouseEnter:z.handleMouseEnter.bind(this),handleMouseLeave:z.handleMouseLeave.bind(this),lastScrollTime:G.now()}})},on:{init:function(){this.params.mousewheel.enabled&&this.mousewheel.enable()},destroy:function(){this.mousewheel.enabled&&this.mousewheel.disable()}}},{name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){G.extend(this,{navigation:{init:B.init.bind(this),update:B.update.bind(this),destroy:B.destroy.bind(this)}})},on:{init:function(){this.navigation.init(),this.navigation.update()},toEdge:function(){this.navigation.update()},fromEdge:function(){this.navigation.update()},destroy:function(){this.navigation.destroy()},click:function(e){var t=this.navigation,i=t.$nextEl,n=t.$prevEl;!this.params.navigation.hideOnClick||R(e.target).is(n)||R(e.target).is(i)||(i&&i.toggleClass(this.params.navigation.hiddenClass),n&&n.toggleClass(this.params.navigation.hiddenClass))}}},{name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){G.extend(this,{pagination:{init:H.init.bind(this),render:H.render.bind(this),update:H.update.bind(this),destroy:H.destroy.bind(this),dynamicBulletIndex:0}})},on:{init:function(){this.pagination.init(),this.pagination.render(),this.pagination.update()},activeIndexChange:function(){this.params.loop?this.pagination.update():void 0===this.snapIndex&&this.pagination.update()},snapIndexChange:function(){this.params.loop||this.pagination.update()},slidesLengthChange:function(){this.params.loop&&(this.pagination.render(),this.pagination.update())},snapGridLengthChange:function(){this.params.loop||(this.pagination.render(),this.pagination.update())},destroy:function(){this.pagination.destroy()},click:function(e){this.params.pagination.el&&this.params.pagination.hideOnClick&&0<this.pagination.$el.length&&!R(e.target).hasClass(this.params.pagination.bulletClass)&&this.pagination.$el.toggleClass(this.params.pagination.hiddenClass)}}},{name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){var e=this;G.extend(e,{scrollbar:{init:F.init.bind(e),destroy:F.destroy.bind(e),updateSize:F.updateSize.bind(e),setTranslate:F.setTranslate.bind(e),setTransition:F.setTransition.bind(e),enableDraggable:F.enableDraggable.bind(e),disableDraggable:F.disableDraggable.bind(e),setDragPosition:F.setDragPosition.bind(e),onDragStart:F.onDragStart.bind(e),onDragMove:F.onDragMove.bind(e),onDragEnd:F.onDragEnd.bind(e),isTouched:!1,timeout:null,dragTimeout:null}})},on:{init:function(){this.scrollbar.init(),this.scrollbar.updateSize(),this.scrollbar.setTranslate()},update:function(){this.scrollbar.updateSize()},resize:function(){this.scrollbar.updateSize()},observerUpdate:function(){this.scrollbar.updateSize()},setTranslate:function(){this.scrollbar.setTranslate()},setTransition:function(e){this.scrollbar.setTransition(e)},destroy:function(){this.scrollbar.destroy()}}},{name:"parallax",params:{parallax:{enabled:!1}},create:function(){G.extend(this,{parallax:{setTransform:j.setTransform.bind(this),setTranslate:j.setTranslate.bind(this),setTransition:j.setTransition.bind(this)}})},on:{beforeInit:function(){this.params.parallax.enabled&&(this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},init:function(){this.params.parallax&&this.parallax.setTranslate()},setTranslate:function(){this.params.parallax&&this.parallax.setTranslate()},setTransition:function(e){this.params.parallax&&this.parallax.setTransition(e)}}},{name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var t=this,i={enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}};"onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function(e){i[e]=W[e].bind(t)}),G.extend(t,{zoom:i})},on:{init:function(){this.params.zoom.enabled&&this.zoom.enable()},destroy:function(){this.zoom.disable()},touchStart:function(e){this.zoom.enabled&&this.zoom.onTouchStart(e)},touchEnd:function(e){this.zoom.enabled&&this.zoom.onTouchEnd(e)},doubleTap:function(e){this.params.zoom.enabled&&this.zoom.enabled&&this.params.zoom.toggle&&this.zoom.toggle(e)},transitionEnd:function(){this.zoom.enabled&&this.params.zoom.enabled&&this.zoom.onTransitionEnd()}}},{name:"lazy",params:{lazy:{enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){G.extend(this,{lazy:{initialImageLoaded:!1,load:X.load.bind(this),loadInSlide:X.loadInSlide.bind(this)}})},on:{beforeInit:function(){this.params.lazy.enabled&&this.params.preloadImages&&(this.params.preloadImages=!1)},init:function(){this.params.lazy.enabled&&!this.params.loop&&0===this.params.initialSlide&&this.lazy.load()},scroll:function(){this.params.freeMode&&!this.params.freeModeSticky&&this.lazy.load()},resize:function(){this.params.lazy.enabled&&this.lazy.load()},scrollbarDragMove:function(){this.params.lazy.enabled&&this.lazy.load()},transitionStart:function(){this.params.lazy.enabled&&(this.params.lazy.loadOnTransitionStart||!this.params.lazy.loadOnTransitionStart&&!this.lazy.initialImageLoaded)&&this.lazy.load()},transitionEnd:function(){this.params.lazy.enabled&&!this.params.lazy.loadOnTransitionStart&&this.lazy.load()}}},{name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){G.extend(this,{controller:{control:this.params.controller.control,getInterpolateFunction:Y.getInterpolateFunction.bind(this),setTranslate:Y.setTranslate.bind(this),setTransition:Y.setTransition.bind(this)}})},on:{update:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},resize:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},observerUpdate:function(){this.controller.control&&this.controller.spline&&(this.controller.spline=void 0,delete this.controller.spline)},setTranslate:function(e,t){this.controller.control&&this.controller.setTranslate(e,t)},setTransition:function(e,t){this.controller.control&&this.controller.setTransition(e,t)}}},{name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}"}},create:function(){var t=this;G.extend(t,{a11y:{liveRegion:R('<span class="'+t.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')}}),Object.keys(q).forEach(function(e){t.a11y[e]=q[e].bind(t)})},on:{init:function(){this.params.a11y.enabled&&(this.a11y.init(),this.a11y.updateNavigation())},toEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},fromEdge:function(){this.params.a11y.enabled&&this.a11y.updateNavigation()},paginationUpdate:function(){this.params.a11y.enabled&&this.a11y.updatePagination()},destroy:function(){this.params.a11y.enabled&&this.a11y.destroy()}}},{name:"history",params:{history:{enabled:!1,replaceState:!1,key:"slides"}},create:function(){G.extend(this,{history:{init:$.init.bind(this),setHistory:$.setHistory.bind(this),setHistoryPopState:$.setHistoryPopState.bind(this),scrollToSlide:$.scrollToSlide.bind(this),destroy:$.destroy.bind(this)}})},on:{init:function(){this.params.history.enabled&&this.history.init()},destroy:function(){this.params.history.enabled&&this.history.destroy()},transitionEnd:function(){this.history.initialized&&this.history.setHistory(this.params.history.key,this.activeIndex)}}},{name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){G.extend(this,{hashNavigation:{initialized:!1,init:Z.init.bind(this),destroy:Z.destroy.bind(this),setHash:Z.setHash.bind(this),onHashCange:Z.onHashCange.bind(this)}})},on:{init:function(){this.params.hashNavigation.enabled&&this.hashNavigation.init()},destroy:function(){this.params.hashNavigation.enabled&&this.hashNavigation.destroy()},transitionEnd:function(){this.hashNavigation.initialized&&this.hashNavigation.setHash()}}},{name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1}},create:function(){var t=this;G.extend(t,{autoplay:{running:!1,paused:!1,run:J.run.bind(t),start:J.start.bind(t),stop:J.stop.bind(t),pause:J.pause.bind(t),onTransitionEnd:function(e){t&&!t.destroyed&&t.$wrapperEl&&e.target===this&&(t.$wrapperEl[0].removeEventListener("transitionend",t.autoplay.onTransitionEnd),t.$wrapperEl[0].removeEventListener("webkitTransitionEnd",t.autoplay.onTransitionEnd),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())}}})},on:{init:function(){this.params.autoplay.enabled&&this.autoplay.start()},beforeTransitionStart:function(e,t){this.autoplay.running&&(t||!this.params.autoplay.disableOnInteraction?this.autoplay.pause(e):this.autoplay.stop())},sliderFirstMove:function(){this.autoplay.running&&(this.params.autoplay.disableOnInteraction?this.autoplay.stop():this.autoplay.pause())},destroy:function(){this.autoplay.running&&this.autoplay.stop()}}},{name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){G.extend(this,{fadeEffect:{setTranslate:K.setTranslate.bind(this),setTransition:K.setTransition.bind(this)}})},on:{beforeInit:function(){if("fade"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"fade");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};G.extend(this.params,e),G.extend(this.originalParams,e)}},setTranslate:function(){"fade"===this.params.effect&&this.fadeEffect.setTranslate()},setTransition:function(e){"fade"===this.params.effect&&this.fadeEffect.setTransition(e)}}},{name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){G.extend(this,{cubeEffect:{setTranslate:Q.setTranslate.bind(this),setTransition:Q.setTransition.bind(this)}})},on:{beforeInit:function(){if("cube"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"cube"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};G.extend(this.params,e),G.extend(this.originalParams,e)}},setTranslate:function(){"cube"===this.params.effect&&this.cubeEffect.setTranslate()},setTransition:function(e){"cube"===this.params.effect&&this.cubeEffect.setTransition(e)}}},{name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){G.extend(this,{flipEffect:{setTranslate:ee.setTranslate.bind(this),setTransition:ee.setTransition.bind(this)}})},on:{beforeInit:function(){if("flip"===this.params.effect){this.classNames.push(this.params.containerModifierClass+"flip"),this.classNames.push(this.params.containerModifierClass+"3d");var e={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};G.extend(this.params,e),G.extend(this.originalParams,e)}},setTranslate:function(){"flip"===this.params.effect&&this.flipEffect.setTranslate()},setTransition:function(e){"flip"===this.params.effect&&this.flipEffect.setTransition(e)}}},{name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}},create:function(){G.extend(this,{coverflowEffect:{setTranslate:te.setTranslate.bind(this),setTransition:te.setTransition.bind(this)}})},on:{beforeInit:function(){"coverflow"===this.params.effect&&(this.classNames.push(this.params.containerModifierClass+"coverflow"),this.classNames.push(this.params.containerModifierClass+"3d"),this.params.watchSlidesProgress=!0,this.originalParams.watchSlidesProgress=!0)},setTranslate:function(){"coverflow"===this.params.effect&&this.coverflowEffect.setTranslate()},setTransition:function(e){"coverflow"===this.params.effect&&this.coverflowEffect.setTransition(e)}}},{name:"thumbs",params:{thumbs:{swiper:null,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){G.extend(this,{thumbs:{swiper:null,init:ie.init.bind(this),update:ie.update.bind(this),onThumbClick:ie.onThumbClick.bind(this)}})},on:{beforeInit:function(){var e=this.params.thumbs;e&&e.swiper&&(this.thumbs.init(),this.thumbs.update(!0))},slideChange:function(){this.thumbs.swiper&&this.thumbs.update()},update:function(){this.thumbs.swiper&&this.thumbs.update()},resize:function(){this.thumbs.swiper&&this.thumbs.update()},observerUpdate:function(){this.thumbs.swiper&&this.thumbs.update()},setTransition:function(e){var t=this.thumbs.swiper;t&&t.setTransition(e)},beforeDestroy:function(){var e=this.thumbs.swiper;e&&this.thumbs.swiperCreated&&e&&e.destroy()}}}];return void 0===E.use&&(E.use=E.Class.use,E.installModule=E.Class.installModule),E.use(ne),E}),((_gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window)._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var e,l,c,t,T,b,w,E,v,i,y,M,_,x,p,f,g,n;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(n,h,_){var m=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},g=function(e,t,i){var n,r,a=e.cycle;for(n in a)r=a[n],e[n]="function"==typeof r?r(i,t[i],t):r[i%r.length];delete e.cycle},v=function(e){if("function"==typeof e)return e;var f="object"==typeof e?e:{each:e},m=f.ease,g=f.from||0,v=f.base||0,y={},_=isNaN(g),x=f.axis,b={center:.5,end:1}[g]||0;return function(e,t,i){var n,r,a,s,o,l,c,h,u,d=(i||f).length,p=y[d];if(!p){if(!(u="auto"===f.grid?0:(f.grid||[1/0])[0])){for(c=-1/0;c<(c=i[u++].getBoundingClientRect().left)&&u<d;);u--}for(p=y[d]=[],n=_?Math.min(u,d)*b-.5:g%u,r=_?d*b/u-.5:g/u|0,h=1/(c=0),l=0;l<d;l++)a=l%u-n,s=r-(l/u|0),p[l]=o=x?Math.abs("y"===x?s:a):Math.sqrt(a*a+s*s),c<o&&(c=o),o<h&&(h=o);p.max=c-h,p.min=h,p.v=d=f.amount||f.each*(d<u?d:x?"y"===x?d/u:u:Math.max(u,d/u))||0,p.b=d<0?v-d:v}return d=(p[e]-p.min)/p.max,p.b+(m?m.getRatio(d):d)*p.v}},y=function(e,t,i){_.call(this,e,t,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=y.prototype.render},x=1e-8,b=_._internals,w=b.isSelector,T=b.isArray,e=y.prototype=_.to({},.1,{}),E=[];y.version="2.1.2",e.constructor=y,e.kill()._gc=!1,y.killTweensOf=y.killDelayedCallsTo=_.killTweensOf,y.getTweensOf=_.getTweensOf,y.lagSmoothing=_.lagSmoothing,y.ticker=_.ticker,y.render=_.render,y.distribute=v,e.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),_.prototype.invalidate.call(this)},e.updateTo=function(e,t){var i,n=this,r=n.ratio,a=n.vars.immediateRender||e.immediateRender;for(i in t&&n._startTime<n._timeline._time&&(n._startTime=n._timeline._time,n._uncache(!1),n._gc?n._enabled(!0,!1):n._timeline.insert(n,n._startTime-n._delay)),e)n.vars[i]=e[i];if(n._initted||a)if(t)n._initted=!1,a&&n.render(0,!0,!0);else if(n._gc&&n._enabled(!0,!1),n._notifyPluginsOfEnabled&&n._firstPT&&_._onPluginEvent("_onDisable",n),.998<n._time/n._duration){var s=n._totalTime;n.render(0,!0,!1),n._initted=!1,n.render(s,!0,!1)}else if(n._initted=!1,n._init(),0<n._time||a)for(var o,l=1/(1-r),c=n._firstPT;c;)o=c.s+c.c,c.c*=l,c.s=o-c.c,c=c._next;return n},e.render=function(e,t,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,r,a,s,o,l,c,h,u,d=this,p=d._dirty?d.totalDuration():d._totalDuration,f=d._time,m=d._totalTime,g=d._cycle,v=d._duration,y=d._rawPrevTime;if(p-x<=e&&0<=e?(d._totalTime=p,d._cycle=d._repeat,d._yoyo&&0!=(1&d._cycle)?(d._time=0,d.ratio=d._ease._calcEnd?d._ease.getRatio(0):0):(d._time=v,d.ratio=d._ease._calcEnd?d._ease.getRatio(1):1),d._reversed||(n=!0,r="onComplete",i=i||d._timeline.autoRemoveChildren),0===v&&(d._initted||!d.vars.lazy||i)&&(d._startTime===d._timeline._duration&&(e=0),(y<0||e<=0&&-x<=e||y===x&&"isPause"!==d.data)&&y!==e&&(i=!0,x<y&&(r="onReverseComplete")),d._rawPrevTime=h=!t||e||y===e?e:x)):e<x?(d._totalTime=d._time=d._cycle=0,d.ratio=d._ease._calcEnd?d._ease.getRatio(0):0,(0!==m||0===v&&0<y)&&(r="onReverseComplete",n=d._reversed),-x<e?e=0:e<0&&(d._active=!1,0===v&&(d._initted||!d.vars.lazy||i)&&(0<=y&&(i=!0),d._rawPrevTime=h=!t||e||y===e?e:x)),d._initted||(i=!0)):(d._totalTime=d._time=e,0!==d._repeat&&(s=v+d._repeatDelay,d._cycle=d._totalTime/s>>0,0!==d._cycle&&d._cycle===d._totalTime/s&&m<=e&&d._cycle--,d._time=d._totalTime-d._cycle*s,d._yoyo&&0!=(1&d._cycle)&&(d._time=v-d._time,(u=d._yoyoEase||d.vars.yoyoEase)&&(d._yoyoEase||(!0!==u||d._initted?d._yoyoEase=u=!0===u?d._ease:u instanceof Ease?u:Ease.map[u]:(u=d.vars.ease,d._yoyoEase=u=u?u instanceof Ease?u:"function"==typeof u?new Ease(u,d.vars.easeParams):Ease.map[u]||_.defaultEase:_.defaultEase)),d.ratio=u?1-u.getRatio((v-d._time)/v):0)),d._time>v?d._time=v:d._time<0&&(d._time=0)),d._easeType&&!u?(o=d._time/v,(1===(l=d._easeType)||3===l&&.5<=o)&&(o=1-o),3===l&&(o*=2),1===(c=d._easePower)?o*=o:2===c?o*=o*o:3===c?o*=o*o*o:4===c&&(o*=o*o*o*o),d.ratio=1===l?1-o:2===l?o:d._time/v<.5?o/2:1-o/2):u||(d.ratio=d._ease.getRatio(d._time/v))),f!==d._time||i||g!==d._cycle){if(!d._initted){if(d._init(),!d._initted||d._gc)return;if(!i&&d._firstPT&&(!1!==d.vars.lazy&&d._duration||d.vars.lazy&&!d._duration))return d._time=f,d._totalTime=m,d._rawPrevTime=y,d._cycle=g,b.lazyTweens.push(d),void(d._lazy=[e,t]);!d._time||n||u?n&&this._ease._calcEnd&&!u&&(d.ratio=d._ease.getRatio(0===d._time?0:1)):d.ratio=d._ease.getRatio(d._time/v)}for(!1!==d._lazy&&(d._lazy=!1),d._active||!d._paused&&d._time!==f&&0<=e&&(d._active=!0),0===m&&(2===d._initted&&0<e&&d._init(),d._startAt&&(0<=e?d._startAt.render(e,!0,i):r||(r="_dummyGS")),d.vars.onStart&&(0!==d._totalTime||0===v)&&(t||d._callback("onStart"))),a=d._firstPT;a;)a.f?a.t[a.p](a.c*d.ratio+a.s):a.t[a.p]=a.c*d.ratio+a.s,a=a._next;d._onUpdate&&(e<0&&d._startAt&&d._startTime&&d._startAt.render(e,!0,i),t||(d._totalTime!==m||r)&&d._callback("onUpdate")),d._cycle!==g&&(t||d._gc||d.vars.onRepeat&&d._callback("onRepeat")),r&&(!d._gc||i)&&(e<0&&d._startAt&&!d._onUpdate&&d._startTime&&d._startAt.render(e,!0,i),n&&(d._timeline.autoRemoveChildren&&d._enabled(!1,!1),d._active=!1),!t&&d.vars[r]&&d._callback(r),0===v&&d._rawPrevTime===x&&h!==x&&(d._rawPrevTime=0))}else m!==d._totalTime&&d._onUpdate&&(t||d._callback("onUpdate"))},y.to=function(e,t,i){return new y(e,t,i)},y.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new y(e,t,i)},y.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new y(e,t,n)},y.staggerTo=y.allTo=function(e,t,i,n,r,a,s){var o,l,c,h,u=[],d=v(i.stagger||n),p=i.cycle,f=(i.startAt||E).cycle;for(T(e)||("string"==typeof e&&(e=_.selector(e)||e),w(e)&&(e=m(e))),o=(e=e||[]).length-1,c=0;c<=o;c++){for(h in l={},i)l[h]=i[h];if(p&&(g(l,e,c),null!=l.duration&&(t=l.duration,delete l.duration)),f){for(h in f=l.startAt={},i.startAt)f[h]=i.startAt[h];g(l.startAt,e,c)}l.delay=d(c,e[c],e)+(l.delay||0),c===o&&r&&(l.onComplete=function(){i.onComplete&&i.onComplete.apply(i.onCompleteScope||this,arguments),r.apply(s||i.callbackScope||this,a||E)}),u[c]=new y(e[c],t,l)}return u},y.staggerFrom=y.allFrom=function(e,t,i,n,r,a,s){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,y.staggerTo(e,t,i,n,r,a,s)},y.staggerFromTo=y.allFromTo=function(e,t,i,n,r,a,s,o){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,y.staggerTo(e,t,n,r,a,s,o)},y.delayedCall=function(e,t,i,n,r){return new y(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,useFrames:r,overwrite:0})},y.set=function(e,t){return new y(e,0,t)},y.isTweening=function(e){return 0<_.getTweensOf(e,!0).length};var a=function(e,t){for(var i=[],n=0,r=e._first;r;)r instanceof _?i[n++]=r:(t&&(i[n++]=r),n=(i=i.concat(a(r,t))).length),r=r._next;return i},u=y.getAllTweens=function(e){return a(n._rootTimeline,e).concat(a(n._rootFramesTimeline,e))};y.killAll=function(e,t,i,n){null==t&&(t=!0),null==i&&(i=!0);var r,a,s,o=u(0!=n),l=o.length,c=t&&i&&n;for(s=0;s<l;s++)a=o[s],(c||a instanceof h||(r=a.target===a.vars.onComplete)&&i||t&&!r)&&(e?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},y.killChildTweensOf=function(e,t){if(null!=e){var i,n,r,a,s,o=b.tweenLookup;if("string"==typeof e&&(e=_.selector(e)||e),w(e)&&(e=m(e)),T(e))for(a=e.length;-1<--a;)y.killChildTweensOf(e[a],t);else{for(r in i=[],o)for(n=o[r].target.parentNode;n;)n===e&&(i=i.concat(o[r].tweens)),n=n.parentNode;for(s=i.length,a=0;a<s;a++)t&&i[a].totalTime(i[a].totalDuration()),i[a]._enabled(!1,!1)}}};var r=function(e,t,i,n){t=!1!==t,i=!1!==i;for(var r,a,s=u(n=!1!==n),o=t&&i&&n,l=s.length;-1<--l;)a=s[l],(o||a instanceof h||(r=a.target===a.vars.onComplete)&&i||t&&!r)&&a.paused(e)};return y.pauseAll=function(e,t,i){r(!0,e,t,i)},y.resumeAll=function(e,t,i){r(!1,e,t,i)},y.globalTimeScale=function(e){var t=n._rootTimeline,i=_.ticker.time;return arguments.length?(e=e||x,t._startTime=i-(i-t._startTime)*t._timeScale/e,t=n._rootFramesTimeline,i=_.ticker.frame,t._startTime=i-(i-t._startTime)*t._timeScale/e,t._timeScale=n._rootTimeline._timeScale=e,e):t._timeScale},e.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},e.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},e.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,r=n*(i+this._repeatDelay);return i<e&&(e=i),this.totalTime(this._yoyo&&1&n?i-e+r:this._repeat?e+r:e,t)},e.duration=function(e){return arguments.length?n.prototype.duration.call(this,e):this._duration},e.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},e.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},e.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},e.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},y},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(u,d,f){var m=function(e){d.call(this,e);var t,i,n=this.vars;for(i in this._labels={},this.autoRemoveChildren=!!n.autoRemoveChildren,this.smoothChildTiming=!!n.smoothChildTiming,this._sortChildren=!0,this._onUpdate=n.onUpdate,n)t=n[i],p(t)&&-1!==t.join("").indexOf("{self}")&&(n[i]=this._swapSelfInParams(t));p(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},e=f._internals,t=m._internals={},g=e.isSelector,p=e.isArray,v=e.lazyTweens,y=e.lazyRender,s=_gsScope._gsDefine.globals,_=function(e){var t,i={};for(t in e)i[t]=e[t];return i},x=function(e,t,i){var n,r,a=e.cycle;for(n in a)r=a[n],e[n]="function"==typeof r?r(i,t[i],t):r[i%r.length];delete e.cycle},a=t.pauseCallback=function(){},c=function(e,t,i,n){var r="immediateRender";return r in t||(t[r]=!(i&&!1===i[r]||n)),t},b=function(e){if("function"==typeof e)return e;var f="object"==typeof e?e:{each:e},m=f.ease,g=f.from||0,v=f.base||0,y={},_=isNaN(g),x=f.axis,b={center:.5,end:1}[g]||0;return function(e,t,i){var n,r,a,s,o,l,c,h,u,d=(i||f).length,p=y[d];if(!p){if(!(u="auto"===f.grid?0:(f.grid||[1/0])[0])){for(c=-1/0;c<(c=i[u++].getBoundingClientRect().left)&&u<d;);u--}for(p=y[d]=[],n=_?Math.min(u,d)*b-.5:g%u,r=_?d*b/u-.5:g/u|0,h=1/(c=0),l=0;l<d;l++)a=l%u-n,s=r-(l/u|0),p[l]=o=x?Math.abs("y"===x?s:a):Math.sqrt(a*a+s*s),c<o&&(c=o),o<h&&(h=o);p.max=c-h,p.min=h,p.v=d=f.amount||f.each*(d<u?d:x?"y"===x?d/u:u:Math.max(u,d/u))||0,p.b=d<0?v-d:v}return d=(p[e]-p.min)/p.max,p.b+(m?m.getRatio(d):d)*p.v}},i=m.prototype=new d;return m.version="2.1.2",m.distribute=b,i.constructor=m,i.kill()._gc=i._forcingPlayhead=i._hasPause=!1,i.to=function(e,t,i,n){var r=i.repeat&&s.TweenMax||f;return t?this.add(new r(e,t,i),n):this.set(e,i,n)},i.from=function(e,t,i,n){return this.add((i.repeat&&s.TweenMax||f).from(e,t,c(0,i)),n)},i.fromTo=function(e,t,i,n,r){var a=n.repeat&&s.TweenMax||f;return n=c(0,n,i),t?this.add(a.fromTo(e,t,i,n),r):this.set(e,n,r)},i.staggerTo=function(e,t,i,n,r,a,s,o){var l,c,h=new m({onComplete:a,onCompleteParams:s,callbackScope:o,smoothChildTiming:this.smoothChildTiming}),u=b(i.stagger||n),d=i.startAt,p=i.cycle;for("string"==typeof e&&(e=f.selector(e)||e),g(e=e||[])&&(e=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i}(e)),c=0;c<e.length;c++)l=_(i),d&&(l.startAt=_(d),d.cycle&&x(l.startAt,e,c)),p&&(x(l,e,c),null!=l.duration&&(t=l.duration,delete l.duration)),h.to(e[c],t,l,u(c,e[c],e));return this.add(h,r)},i.staggerFrom=function(e,t,i,n,r,a,s,o){return i.runBackwards=!0,this.staggerTo(e,t,c(0,i),n,r,a,s,o)},i.staggerFromTo=function(e,t,i,n,r,a,s,o,l){return n.startAt=i,this.staggerTo(e,t,c(0,n,i),r,a,s,o,l)},i.call=function(e,t,i,n){return this.add(f.delayedCall(0,e,t,i),n)},i.set=function(e,t,i){return this.add(new f(e,0,c(0,t,null,!0)),i)},m.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var i,n,r,a,s=new m(e),o=s._timeline;for(null==t&&(t=!0),o._remove(s,!0),s._startTime=0,s._rawPrevTime=s._time=s._totalTime=o._time,r=o._first;r;)a=r._next,t&&r instanceof f&&r.target===r.vars.onComplete||((n=r._startTime-r._delay)<0&&(i=1),s.add(r,n)),r=a;return o.add(s,0),i&&s.totalDuration(),s},i.add=function(e,t,i,n){var r,a,s,o,l,c,h=this;if("number"!=typeof t&&(t=h._parseTimeOrLabel(t,0,!0,e)),!(e instanceof u)){if(e instanceof Array||e&&e.push&&p(e)){for(i=i||"normal",n=n||0,r=t,a=e.length,s=0;s<a;s++)p(o=e[s])&&(o=new m({tweens:o})),h.add(o,r),"string"!=typeof o&&"function"!=typeof o&&("sequence"===i?r=o._startTime+o.totalDuration()/o._timeScale:"start"===i&&(o._startTime-=o.delay())),r+=n;return h._uncache(!0)}if("string"==typeof e)return h.addLabel(e,t);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=f.delayedCall(0,e)}if(d.prototype.add.call(h,e,t),(e._time||!e._duration&&e._initted)&&(r=(h.rawTime()-e._startTime)*e._timeScale,(!e._duration||1e-5<Math.abs(Math.max(0,Math.min(e.totalDuration(),r)))-e._totalTime)&&e.render(r,!1,!1)),(h._gc||h._time===h._duration)&&!h._paused&&h._duration<h.duration())for(c=(l=h).rawTime()>e._startTime;l._timeline;)c&&l._timeline.smoothChildTiming?l.totalTime(l._totalTime,!0):l._gc&&l._enabled(!0,!1),l=l._timeline;return h},i.remove=function(e){if(e instanceof u){this._remove(e,!1);var t=e._timeline=e.vars.useFrames?u._rootFramesTimeline:u._rootTimeline;return e._startTime=(e._paused?e._pauseTime:t._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&p(e)){for(var i=e.length;-1<--i;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},i._remove=function(e,t){return d.prototype._remove.call(this,e,t),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},i.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},i.insert=i.insertMultiple=function(e,t,i,n){return this.add(e,t||0,i,n)},i.appendMultiple=function(e,t,i,n){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,n)},i.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},i.addPause=function(e,t,i,n){var r=f.delayedCall(0,a,i,n||this);return r.vars.onComplete=r.vars.onReverseComplete=t,r.data="isPause",this._hasPause=!0,this.add(r,e)},i.removeLabel=function(e){return delete this._labels[e],this},i.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},i._parseTimeOrLabel=function(e,t,i,n){var r,a;if(n instanceof u&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&p(n)))for(a=n.length;-1<--a;)n[a]instanceof u&&n[a].timeline===this&&this.remove(n[a]);if(r="number"!=typeof e||t?99999999999<this.duration()?this.recent().endTime(!1):this._duration:0,"string"==typeof t)return this._parseTimeOrLabel(t,i&&"number"==typeof e&&null==this._labels[t]?e-r:0,i);if(t=t||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=r);else{if(-1===(a=e.indexOf("=")))return null==this._labels[e]?i?this._labels[e]=r+t:t:this._labels[e]+t;t=parseInt(e.charAt(a-1)+"1",10)*Number(e.substr(a+1)),e=1<a?this._parseTimeOrLabel(e.substr(0,a-1),0,i):r}return Number(e)+t},i.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},i.stop=function(){return this.paused(!0)},i.gotoAndPlay=function(e,t){return this.play(e,t)},i.gotoAndStop=function(e,t){return this.pause(e,t)},i.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,r,a,s,o,l,c,h,u=this,d=u._time,p=u._dirty?u.totalDuration():u._totalDuration,f=u._startTime,m=u._timeScale,g=u._paused;if(d!==u._time&&(e+=u._time-d),p-1e-8<=e&&0<=e)u._totalTime=u._time=p,u._reversed||u._hasPausedChild()||(r=!0,s="onComplete",o=!!u._timeline.autoRemoveChildren,0===u._duration&&(e<=0&&-1e-8<=e||u._rawPrevTime<0||1e-8===u._rawPrevTime)&&u._rawPrevTime!==e&&u._first&&(o=!0,1e-8<u._rawPrevTime&&(s="onReverseComplete"))),u._rawPrevTime=u._duration||!t||e||u._rawPrevTime===e?e:1e-8,e=p+1e-4;else if(e<1e-8)if(u._totalTime=u._time=0,-1e-8<e&&(e=0),(0!==d||0===u._duration&&1e-8!==u._rawPrevTime&&(0<u._rawPrevTime||e<0&&0<=u._rawPrevTime))&&(s="onReverseComplete",r=u._reversed),e<0)u._active=!1,u._timeline.autoRemoveChildren&&u._reversed?(o=r=!0,s="onReverseComplete"):0<=u._rawPrevTime&&u._first&&(o=!0),u._rawPrevTime=e;else{if(u._rawPrevTime=u._duration||!t||e||u._rawPrevTime===e?e:1e-8,0===e&&r)for(n=u._first;n&&0===n._startTime;)n._duration||(r=!1),n=n._next;e=0,u._initted||(o=!0)}else{if(u._hasPause&&!u._forcingPlayhead&&!t){if(d<=e)for(n=u._first;n&&n._startTime<=e&&!l;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===u._rawPrevTime||(l=n),n=n._next;else for(n=u._last;n&&n._startTime>=e&&!l;)n._duration||"isPause"===n.data&&0<n._rawPrevTime&&(l=n),n=n._prev;l&&(u._time=u._totalTime=e=l._startTime,h=u._startTime+e/u._timeScale)}u._totalTime=u._time=u._rawPrevTime=e}if(u._time!==d&&u._first||i||o||l){if(u._initted||(u._initted=!0),u._active||!u._paused&&u._time!==d&&0<e&&(u._active=!0),0===d&&u.vars.onStart&&(0===u._time&&u._duration||t||u._callback("onStart")),d<=(c=u._time))for(n=u._first;n&&(a=n._next,c===u._time&&(!u._paused||g));)(n._active||n._startTime<=c&&!n._paused&&!n._gc)&&(l===n&&(u.pause(),u._pauseTime=h),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=a;else for(n=u._last;n&&(a=n._prev,c===u._time&&(!u._paused||g));){if(n._active||n._startTime<=d&&!n._paused&&!n._gc){if(l===n){for(l=n._prev;l&&l.endTime()>u._time;)l.render(l._reversed?l.totalDuration()-(e-l._startTime)*l._timeScale:(e-l._startTime)*l._timeScale,t,i),l=l._prev;l=null,u.pause(),u._pauseTime=h}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)}n=a}u._onUpdate&&(t||(v.length&&y(),u._callback("onUpdate"))),s&&(u._gc||(f===u._startTime||m!==u._timeScale)&&(0===u._time||p>=u.totalDuration())&&(r&&(v.length&&y(),u._timeline.autoRemoveChildren&&u._enabled(!1,!1),u._active=!1),!t&&u.vars[s]&&u._callback(s)))}},i._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof m&&e._hasPausedChild())return!0;e=e._next}return!1},i.getChildren=function(e,t,i,n){n=n||-9999999999;for(var r=[],a=this._first,s=0;a;)a._startTime<n||(a instanceof f?!1!==t&&(r[s++]=a):(!1!==i&&(r[s++]=a),!1!==e&&(s=(r=r.concat(a.getChildren(!0,t,i))).length))),a=a._next;return r},i.getTweensOf=function(e,t){var i,n,r=this._gc,a=[],s=0;for(r&&this._enabled(!0,!0),n=(i=f.getTweensOf(e)).length;-1<--n;)(i[n].timeline===this||t&&this._contains(i[n]))&&(a[s++]=i[n]);return r&&this._enabled(!1,!0),a},i.recent=function(){return this._recent},i._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},i.shiftChildren=function(e,t,i){i=i||0;for(var n,r=this._first,a=this._labels;r;)r._startTime>=i&&(r._startTime+=e),r=r._next;if(t)for(n in a)a[n]>=i&&(a[n]+=e);return this._uncache(!0)},i._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),n=i.length,r=!1;-1<--n;)i[n]._kill(e,t)&&(r=!0);return r},i.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;-1<--i;)t[i]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},i.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return u.prototype.invalidate.call(this)},i._enabled=function(e,t){if(e===this._gc)for(var i=this._first;i;)i._enabled(e,!0),i=i._next;return d.prototype._enabled.call(this,e,t)},i.totalTime=function(e,t,i){this._forcingPlayhead=!0;var n=u.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,n},i.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},i.totalDuration=function(e){if(arguments.length)return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this;if(this._dirty){for(var t,i,n=0,r=this,a=r._last,s=999999999999;a;)t=a._prev,a._dirty&&a.totalDuration(),a._startTime>s&&r._sortChildren&&!a._paused&&!r._calculatingDuration?(r._calculatingDuration=1,r.add(a,a._startTime-a._delay),r._calculatingDuration=0):s=a._startTime,a._startTime<0&&!a._paused&&(n-=a._startTime,r._timeline.smoothChildTiming&&(r._startTime+=a._startTime/r._timeScale,r._time-=a._startTime,r._totalTime-=a._startTime,r._rawPrevTime-=a._startTime),r.shiftChildren(-a._startTime,!1,-9999999999),s=0),n<(i=a._startTime+a._totalDuration/a._timeScale)&&(n=i),a=t;r._duration=r._totalDuration=n,r._dirty=!1}return this._totalDuration},i.paused=function(e){if(!1===e&&this._paused)for(var t=this._first;t;)t._startTime===this._time&&"isPause"===t.data&&(t._rawPrevTime=0),t=t._next;return u.prototype.paused.apply(this,arguments)},i.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===u._rootFramesTimeline},i.rawTime=function(e){return e&&(this._paused||this._repeat&&0<this.time()&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},m},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,o,e){var i=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0},A=1e-8,n=o._internals,P=n.lazyTweens,L=n.lazyRender,l=_gsScope._gsDefine.globals,c=new e(null,null,1,0),r=i.prototype=new t;return r.constructor=i,r.kill()._gc=!1,i.version="2.1.2",r.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},r.addCallback=function(e,t,i,n){return this.add(o.delayedCall(0,e,i,n),t)},r.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var i=this.getTweensOf(e,!1),n=i.length,r=this._parseTimeOrLabel(t);-1<--n;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},r.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},r.tweenTo=function(e,t){t=t||{};var i,n,r,a={ease:c,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},s=t.repeat&&l.TweenMax||o;for(n in t)a[n]=t[n];return a.time=this._parseTimeOrLabel(e),i=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,r=new s(this,i,a),a.onStart=function(){r.target.paused(!0),r.vars.time===r.target.time()||i!==r.duration()||r.isFromTo||r.duration(Math.abs(r.vars.time-r.target.time())/r.target._timeScale).render(r.time(),!0,!0),t.onStart&&t.onStart.apply(t.onStartScope||t.callbackScope||r,t.onStartParams||[])},r},r.tweenFromTo=function(e,t,i){i=i||{},e=this._parseTimeOrLabel(e),i.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(t,i);return n.isFromTo=1,n.duration(Math.abs(n.vars.time-e)/this._timeScale||.001)},r.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var n,r,a,s,o,l,c,h,u,d=this,p=d._time,f=d._dirty?d.totalDuration():d._totalDuration,m=d._duration,g=d._totalTime,v=d._startTime,y=d._timeScale,_=d._rawPrevTime,x=d._paused,b=d._cycle;if(p!==d._time&&(e+=d._time-p),f-A<=e&&0<=e)d._locked||(d._totalTime=f,d._cycle=d._repeat),d._reversed||d._hasPausedChild()||(r=!0,s="onComplete",o=!!d._timeline.autoRemoveChildren,0===d._duration&&(e<=0&&-A<=e||_<0||_===A)&&_!==e&&d._first&&(o=!0,A<_&&(s="onReverseComplete"))),d._rawPrevTime=d._duration||!t||e||d._rawPrevTime===e?e:A,d._yoyo&&1&d._cycle?d._time=e=0:e=(d._time=m)+1e-4;else if(e<A)if(d._locked||(d._totalTime=d._cycle=0),d._time=0,-A<e&&(e=0),(0!==p||0===m&&_!==A&&(0<_||e<0&&0<=_)&&!d._locked)&&(s="onReverseComplete",r=d._reversed),e<0)d._active=!1,d._timeline.autoRemoveChildren&&d._reversed?(o=r=!0,s="onReverseComplete"):0<=_&&d._first&&(o=!0),d._rawPrevTime=e;else{if(d._rawPrevTime=m||!t||e||d._rawPrevTime===e?e:A,0===e&&r)for(n=d._first;n&&0===n._startTime;)n._duration||(r=!1),n=n._next;e=0,d._initted||(o=!0)}else if(0===m&&_<0&&(o=!0),d._time=d._rawPrevTime=e,d._locked||(d._totalTime=e,0!==d._repeat&&(l=m+d._repeatDelay,d._cycle=d._totalTime/l>>0,d._cycle&&d._cycle===d._totalTime/l&&g<=e&&d._cycle--,d._time=d._totalTime-d._cycle*l,d._yoyo&&1&d._cycle&&(d._time=m-d._time),d._time>m?e=(d._time=m)+1e-4:d._time<0?d._time=e=0:e=d._time)),d._hasPause&&!d._forcingPlayhead&&!t){if(p<=(e=d._time)||d._repeat&&b!==d._cycle)for(n=d._first;n&&n._startTime<=e&&!c;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===d._rawPrevTime||(c=n),n=n._next;else for(n=d._last;n&&n._startTime>=e&&!c;)n._duration||"isPause"===n.data&&0<n._rawPrevTime&&(c=n),n=n._prev;c&&(u=d._startTime+c._startTime/d._timeScale,c._startTime<m&&(d._time=d._rawPrevTime=e=c._startTime,d._totalTime=e+d._cycle*(d._totalDuration+d._repeatDelay)))}if(d._cycle!==b&&!d._locked){var w=d._yoyo&&0!=(1&b),T=w===(d._yoyo&&0!=(1&d._cycle)),E=d._totalTime,M=d._cycle,S=d._rawPrevTime,C=d._time;if(d._totalTime=b*m,d._cycle<b?w=!w:d._totalTime+=m,d._time=p,d._rawPrevTime=0===m?_-1e-4:_,d._cycle=b,d._locked=!0,p=w?0:m,d.render(p,t,0===m),t||d._gc||d.vars.onRepeat&&(d._cycle=M,d._locked=!1,d._callback("onRepeat")),p!==d._time)return;if(T&&(d._cycle=b,d._locked=!0,p=w?m+1e-4:-1e-4,d.render(p,!0,!1)),d._locked=!1,d._paused&&!x)return;d._time=C,d._totalTime=E,d._cycle=M,d._rawPrevTime=S}if(d._time!==p&&d._first||i||o||c){if(d._initted||(d._initted=!0),d._active||!d._paused&&d._totalTime!==g&&0<e&&(d._active=!0),0===g&&d.vars.onStart&&(0===d._totalTime&&d._totalDuration||t||d._callback("onStart")),p<=(h=d._time))for(n=d._first;n&&(a=n._next,h===d._time&&(!d._paused||x));)(n._active||n._startTime<=d._time&&!n._paused&&!n._gc)&&(c===n&&(d.pause(),d._pauseTime=u),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=a;else for(n=d._last;n&&(a=n._prev,h===d._time&&(!d._paused||x));){if(n._active||n._startTime<=p&&!n._paused&&!n._gc){if(c===n){for(c=n._prev;c&&c.endTime()>d._time;)c.render(c._reversed?c.totalDuration()-(e-c._startTime)*c._timeScale:(e-c._startTime)*c._timeScale,t,i),c=c._prev;c=null,d.pause(),d._pauseTime=u}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)}n=a}d._onUpdate&&(t||(P.length&&L(),d._callback("onUpdate"))),s&&(d._locked||d._gc||(v===d._startTime||y!==d._timeScale)&&(0===d._time||f>=d.totalDuration())&&(r&&(P.length&&L(),d._timeline.autoRemoveChildren&&d._enabled(!1,!1),d._active=!1),!t&&d.vars[s]&&d._callback(s)))}else g!==d._totalTime&&d._onUpdate&&(t||d._callback("onUpdate"))},r.getActive=function(e,t,i){var n,r,a=[],s=this.getChildren(e||null==e,t||null==e,!!i),o=0,l=s.length;for(n=0;n<l;n++)(r=s[n]).isActive()&&(a[o++]=r);return a},r.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,i=this.getLabelsArray(),n=i.length;for(t=0;t<n;t++)if(i[t].time>e)return i[t].name;return null},r.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),i=t.length;-1<--i;)if(t[i].time<e)return t[i].name;return null},r.getLabelsArray=function(){var e,t=[],i=0;for(e in this._labels)t[i++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},r.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},r.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0},r.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0},r.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},r.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,r=n*(i+this._repeatDelay);return i<e&&(e=i),this.totalTime(this._yoyo&&1&n?i-e+r:this._repeat?e+r:e,t)},r.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},r.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},r.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},r.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+A)},i},!0),T=180/Math.PI,b=[],w=[],E=[],v={},i=_gsScope._gsDefine.globals,y=function(e,t,i,n){i===n&&(i=n-(n-t)/1e6),e===t&&(t=e+(i-e)/1e6),this.a=e,this.b=t,this.c=i,this.d=n,this.da=n-e,this.ca=i-e,this.ba=t-e},M=function(e,t,i,n){var r={a:e},a={},s={},o={c:n},l=(e+t)/2,c=(t+i)/2,h=(i+n)/2,u=(l+c)/2,d=(c+h)/2,p=(d-u)/8;return r.b=l+(e-l)/4,a.b=u+p,r.c=a.a=(r.b+a.b)/2,a.c=s.a=(u+d)/2,s.b=d-p,o.b=h+(n-h)/4,s.c=o.a=(s.b+o.b)/2,[r,a,s,o]},_=function(e,t,i,n,r){var a,s,o,l,c,h,u,d,p,f,m,g,v,y=e.length-1,_=0,x=e[0].a;for(a=0;a<y;a++)s=(c=e[_]).a,o=c.d,l=e[_+1].d,d=r?(m=b[a],v=((g=w[a])+m)*t*.25/(n?.5:E[a]||.5),o-((h=o-(o-s)*(n?.5*t:0!==m?v/m:0))+(((u=o+(l-o)*(n?.5*t:0!==g?v/g:0))-h)*(3*m/(m+g)+.5)/4||0))):o-((h=o-(o-s)*t*.5)+(u=o+(l-o)*t*.5))/2,h+=d,u+=d,c.c=p=h,c.b=0!==a?x:x=c.a+.6*(c.c-c.a),c.da=o-s,c.ca=p-s,c.ba=x-s,i?(f=M(s,x,p,o),e.splice(_,1,f[0],f[1],f[2],f[3]),_+=4):_++,x=u;(c=e[_]).b=x,c.c=x+.4*(c.d-x),c.da=c.d-c.a,c.ca=c.c-c.a,c.ba=x-c.a,i&&(f=M(c.a,x,c.c,c.d),e.splice(_,1,f[0],f[1],f[2],f[3]))},x=function(e,t,i,n){var r,a,s,o,l,c,h=[];if(n)for(a=(e=[n].concat(e)).length;-1<--a;)"string"==typeof(c=e[a][t])&&"="===c.charAt(1)&&(e[a][t]=n[t]+Number(c.charAt(0)+c.substr(2)));if((r=e.length-2)<0)return h[0]=new y(e[0][t],0,0,e[0][t]),h;for(a=0;a<r;a++)s=e[a][t],o=e[a+1][t],h[a]=new y(s,0,0,o),i&&(l=e[a+2][t],b[a]=(b[a]||0)+(o-s)*(o-s),w[a]=(w[a]||0)+(l-o)*(l-o));return h[a]=new y(e[a][t],0,0,e[a+1][t]),h},p=function(e,t,i,n,r,a){var s,o,l,c,h,u,d,p,f={},m=[],g=a||e[0];for(o in r="string"==typeof r?","+r+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==t&&(t=1),e[0])m.push(o);if(1<e.length){for(p=e[e.length-1],d=!0,s=m.length;-1<--s;)if(o=m[s],.05<Math.abs(g[o]-p[o])){d=!1;break}d&&(e=e.concat(),a&&e.unshift(a),e.push(e[1]),a=e[e.length-3])}for(b.length=w.length=E.length=0,s=m.length;-1<--s;)o=m[s],v[o]=-1!==r.indexOf(","+o+","),f[o]=x(e,o,v[o],a);for(s=b.length;-1<--s;)b[s]=Math.sqrt(b[s]),w[s]=Math.sqrt(w[s]);if(!n){for(s=m.length;-1<--s;)if(v[o])for(u=(l=f[m[s]]).length-1,c=0;c<u;c++)h=l[c+1].da/w[c]+l[c].da/b[c]||0,E[c]=(E[c]||0)+h*h;for(s=E.length;-1<--s;)E[s]=Math.sqrt(E[s])}for(s=m.length,c=i?4:1;-1<--s;)l=f[o=m[s]],_(l,t,i,n,v[o]),d&&(l.splice(0,c),l.splice(l.length-c,c));return f},f=function(e,t,i){for(var n,r,a,s,o,l,c,h,u,d,p,f=1/i,m=e.length;-1<--m;)for(a=(d=e[m]).a,s=d.d-a,o=d.c-a,l=d.b-a,n=r=0,h=1;h<=i;h++)n=r-(r=((c=f*h)*c*s+3*(u=1-c)*(c*o+u*l))*c),t[p=m*i+h-1]=(t[p]||0)+n*n},g=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(e,t,i){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var n,r,a,s,o,l=t.values||[],c={},h=l[0],u=t.autoRotate||i.vars.orientToBezier;for(n in this._autoRotate=u?u instanceof Array?u:[["x","y","rotation",!0===u?0:Number(u)||0]]:null,h)this._props.push(n);for(a=this._props.length;-1<--a;)n=this._props[a],this._overwriteProps.push(n),r=this._func[n]="function"==typeof e[n],c[n]=r?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),o||c[n]!==l[0][n]&&(o=c);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?p(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,o):function(e,t,i){var n,r,a,s,o,l,c,h,u,d,p,f={},m="cubic"===(t=t||"soft")?3:2,g="soft"===t,v=[];if(g&&i&&(e=[i].concat(e)),null==e||e.length<m+1)throw"invalid Bezier data";for(u in e[0])v.push(u);for(l=v.length;-1<--l;){for(f[u=v[l]]=o=[],d=0,h=e.length,c=0;c<h;c++)n=null==i?e[c][u]:"string"==typeof(p=e[c][u])&&"="===p.charAt(1)?i[u]+Number(p.charAt(0)+p.substr(2)):Number(p),g&&1<c&&c<h-1&&(o[d++]=(n+o[d-2])/2),o[d++]=n;for(h=d-m+1,c=d=0;c<h;c+=m)n=o[c],r=o[c+1],a=o[c+2],s=2===m?0:o[c+3],o[d++]=p=3===m?new y(n,r,a,s):new y(n,(2*r+n)/3,(2*r+a)/3,a);o.length=d}return f}(l,t.type,c),this._segCount=this._beziers[n].length,this._timeRes){var d=function(e,t){var i,n,r,a,s=[],o=[],l=0,c=0,h=(t=t>>0||6)-1,u=[],d=[];for(i in e)f(e[i],s,t);for(r=s.length,n=0;n<r;n++)l+=Math.sqrt(s[n]),d[a=n%t]=l,a===h&&(c+=l,u[a=n/t>>0]=d,o[a]=c,l=0,d=[]);return{length:c,lengths:o,segments:u}}(this._beziers,this._timeRes);this._length=d.length,this._lengths=d.lengths,this._segments=d.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(u=this._autoRotate)for(this._initialRotations=[],u[0]instanceof Array||(this._autoRotate=u=[u]),a=u.length;-1<--a;){for(s=0;s<3;s++)n=u[a][s],this._func[n]="function"==typeof e[n]&&e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)];n=u[a][2],this._initialRotations[a]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var t,i,n,r,a,s,o,l,c,h,u=this._segCount,d=this._func,p=this._target,f=e!==this._startRatio;if(this._timeRes){if(c=this._lengths,h=this._curSeg,e*=this._length,n=this._li,e>this._l2&&n<u-1){for(l=u-1;n<l&&(this._l2=c[++n])<=e;);this._l1=c[n-1],this._li=n,this._curSeg=h=this._segments[n],this._s2=h[this._s1=this._si=0]}else if(e<this._l1&&0<n){for(;0<n&&(this._l1=c[--n])>=e;);0===n&&e<this._l1?this._l1=0:n++,this._l2=c[n],this._li=n,this._curSeg=h=this._segments[n],this._s1=h[(this._si=h.length-1)-1]||0,this._s2=h[this._si]}if(t=n,e-=this._l1,n=this._si,e>this._s2&&n<h.length-1){for(l=h.length-1;n<l&&(this._s2=h[++n])<=e;);this._s1=h[n-1],this._si=n}else if(e<this._s1&&0<n){for(;0<n&&(this._s1=h[--n])>=e;);0===n&&e<this._s1?this._s1=0:n++,this._s2=h[n],this._si=n}s=(n+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else s=(e-(t=e<0?0:1<=e?u-1:u*e>>0)*(1/u))*u;for(i=1-s,n=this._props.length;-1<--n;)r=this._props[n],o=(s*s*(a=this._beziers[r][t]).da+3*i*(s*a.ca+i*a.ba))*s+a.a,this._mod[r]&&(o=this._mod[r](o,p)),d[r]?p[r](o):p[r]=o;if(this._autoRotate){var m,g,v,y,_,x,b,w=this._autoRotate;for(n=w.length;-1<--n;)r=w[n][2],x=w[n][3]||0,b=!0===w[n][4]?1:T,a=this._beziers[w[n][0]],m=this._beziers[w[n][1]],a&&m&&(a=a[t],m=m[t],g=a.a+(a.b-a.a)*s,g+=((y=a.b+(a.c-a.b)*s)-g)*s,y+=(a.c+(a.d-a.c)*s-y)*s,v=m.a+(m.b-m.a)*s,v+=((_=m.b+(m.c-m.b)*s)-v)*s,_+=(m.c+(m.d-m.c)*s-_)*s,o=f?Math.atan2(_-v,y-g)*b+x:this._initialRotations[n],this._mod[r]&&(o=this._mod[r](o,p)),d[r]?p[r](o):p[r]=o)}}}),n=g.prototype,g.bezierThrough=p,g.cubicToQuadratic=M,g._autoCSS=!0,g.quadraticToCubic=function(e,t,i){return new y(e,(2*t+e)/3,(2*t+i)/3,i)},g._cssRegister=function(){var e=i.CSSPlugin;if(e){var t=e._internals,p=t._parseToProxy,f=t._setPluginRatio,m=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,i,n,r,a){t instanceof Array&&(t={values:t}),a=new g;var s,o,l,c=t.values,h=c.length-1,u=[],d={};if(h<0)return r;for(s=0;s<=h;s++)l=p(e,c[s],n,r,a,h!==s),u[s]=l.end;for(o in t)d[o]=t[o];return d.values=u,(r=new m(e,"bezier",0,0,l.pt,2)).data=l,r.plugin=a,r.setRatio=f,0===d.autoRotate&&(d.autoRotate=!0),!d.autoRotate||d.autoRotate instanceof Array||(s=!0===d.autoRotate?0:Number(d.autoRotate),d.autoRotate=null!=l.end.left?[["left","top","rotation",s,!1]]:null!=l.end.x&&[["x","y","rotation",s,!1]]),d.autoRotate&&(n._transform||n._enableTransforms(!1),l.autoRotate=n._target._gsTransform,l.proxy.rotation=l.autoRotate.rotation||0,n._overwriteProps.push("rotation")),a._onInitTween(l.proxy,d,n._tween),r}})}},n._mod=function(e){for(var t,i=this._overwriteProps,n=i.length;-1<--n;)(t=e[i[n]])&&"function"==typeof t&&(this._mod[i[n]]=t)},n._kill=function(e){var t,i,n=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],i=n.length;-1<--i;)n[i]===t&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;-1<--i;)e[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,e)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,F){var f,E,M,m,U=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=U.prototype.setRatio},c=_gsScope._gsDefine.globals,g={},e=U.prototype=new a("css");(e.constructor=U).version="2.1.0",U.API=2,U.defaultTransformPerspective=0,U.defaultSkewType="compensated",U.defaultSmoothOrigin=!0,e="px",U.suffixMap={top:e,right:e,bottom:e,left:e,width:e,height:e,fontSize:e,padding:e,margin:e,perspective:e,lineHeight:""};var C,v,y,z,_,S,A,P,t,i,L=/(?:\-|\.|\b)(\d|\.|e\-)+/g,R=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,h=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,O=/(?:\d|\-|\+|=|#|\.)*/g,I=/opacity *= *([^)]*)/i,b=/opacity:([^;]*)/i,s=/alpha\(opacity *=.+?\)/i,w=/^(rgb|hsl)/,o=/([A-Z])/g,l=/-([a-z])/gi,T=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,u=function(e,t){return t.toUpperCase()},p=/(?:Left|Right|Width)/i,d=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,D=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,k=/,(?=[^\)]*(?:\(|$))/gi,N=/[\s,\(]/i,B=Math.PI/180,G=180/Math.PI,H={},n={style:{}},V=_gsScope.document||{createElement:function(){return n}},j=function(e,t){return t&&V.createElementNS?V.createElementNS(t,e):V.createElement(e)},W=j("div"),X=j("img"),r=U._internals={_specialProps:g},Y=(_gsScope.navigator||{}).userAgent||"",q=(t=Y.indexOf("Android"),i=j("a"),y=-1!==Y.indexOf("Safari")&&-1===Y.indexOf("Chrome")&&(-1===t||3<parseFloat(Y.substr(t+8,2))),_=y&&parseFloat(Y.substr(Y.indexOf("Version/")+8,2))<6,z=-1!==Y.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(Y)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(Y))&&(S=parseFloat(RegExp.$1)),!!i&&(i.style.cssText="top:1px;opacity:.55;",/^0.55/.test(i.style.opacity))),$=function(e){return I.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Z=function(e){_gsScope.console&&console.log(e)},J="",K="",Q=function(e,t){var i,n,r=(t=t||W).style;if(void 0!==r[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;-1<--n&&void 0===r[i[n]+e];);return 0<=n?(J="-"+(K=3===n?"ms":i[n]).toLowerCase()+"-",K+e):null},ee="undefined"!=typeof window?window:V.defaultView||{getComputedStyle:function(){}},te=function(e){return ee.getComputedStyle(e)},ie=U.getStyle=function(e,t,i,n,r){var a;return q||"opacity"!==t?(!n&&e.style[t]?a=e.style[t]:(i=i||te(e))?a=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(o,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]),null==r||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:r):$(e)},ne=r.convertToPixels=function(e,t,i,n,r){if("px"===n||!n&&"lineHeight"!==t)return i;if("auto"===n||!i)return 0;var a,s,o,l=p.test(t),c=e,h=W.style,u=i<0,d=1===i;if(u&&(i=-i),d&&(i*=100),"lineHeight"!==t||n)if("%"===n&&-1!==t.indexOf("border"))a=i/100*(l?e.clientWidth:e.clientHeight);else{if(h.cssText="border:0 solid red;position:"+ie(e,"position")+";line-height:0;","%"!==n&&c.appendChild&&"v"!==n.charAt(0)&&"rem"!==n)h[l?"borderLeftWidth":"borderTopWidth"]=i+n;else{if(c=e.parentNode||V.body,-1!==ie(c,"display").indexOf("flex")&&(h.position="absolute"),s=c._gsCache,o=F.ticker.frame,s&&l&&s.time===o)return s.width*i/100;h[l?"width":"height"]=i+n}c.appendChild(W),a=parseFloat(W[l?"offsetWidth":"offsetHeight"]),c.removeChild(W),l&&"%"===n&&!1!==U.cacheWidths&&((s=c._gsCache=c._gsCache||{}).time=o,s.width=a/i*100),0!==a||r||(a=ne(e,t,i,n,!0))}else s=te(e).lineHeight,e.style.lineHeight=i,a=parseFloat(te(e).lineHeight),e.style.lineHeight=s;return d&&(a/=100),u?-a:a},re=r.calculateOffset=function(e,t,i){if("absolute"!==ie(e,"position",i))return 0;var n="left"===t?"Left":"Top",r=ie(e,"margin"+n,i);return e["offset"+n]-(ne(e,t,parseFloat(r),r.replace(O,""))||0)},ae=function(e,t){var i,n,r,a={};if(t=t||te(e))if(i=t.length)for(;-1<--i;)(-1===(r=t[i]).indexOf("-transform")||Ne===r)&&(a[r.replace(l,u)]=t.getPropertyValue(r));else for(i in t)(-1===i.indexOf("Transform")||ke===i)&&(a[i]=t[i]);else if(t=e.currentStyle||e.style)for(i in t)"string"==typeof i&&void 0===a[i]&&(a[i.replace(l,u)]=t[i]);return q||(a.opacity=$(e)),n=$e(e,t,!1),a.rotation=n.rotation,a.skewX=n.skewX,a.scaleX=n.scaleX,a.scaleY=n.scaleY,a.x=n.x,a.y=n.y,Be&&(a.z=n.z,a.rotationX=n.rotationX,a.rotationY=n.rotationY,a.scaleZ=n.scaleZ),a.filters&&delete a.filters,a},se=function(e,t,i,n,r){var a,s,o,l={},c=e.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(t[s]!==(a=i[s])||r&&r[s])&&-1===s.indexOf("Origin")&&("number"==typeof a||"string"==typeof a)&&(l[s]="auto"!==a||"left"!==s&&"top"!==s?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[s]||""===t[s].replace(h,"")?a:0:re(e,s),void 0!==c[s]&&(o=new be(c,s,c[s],o)));if(n)for(s in n)"className"!==s&&(l[s]=n[s]);return{difs:l,firstMPT:o}},oe={width:["Left","Right"],height:["Top","Bottom"]},le=["marginLeft","marginRight","marginTop","marginBottom"],ce=function(e,t,i){if("svg"===(e.nodeName+"").toLowerCase())return(i||te(e))[t]||0;if(e.getCTM&&Xe(e))return e.getBBox()[t]||0;var n=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),r=oe[t],a=r.length;for(i=i||te(e);-1<--a;)n-=parseFloat(ie(e,"padding"+r[a],i,!0))||0,n-=parseFloat(ie(e,"border"+r[a]+"Width",i,!0))||0;return n},he=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";(null==e||""===e)&&(e="0 0");var i,n=e.split(" "),r=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":n[0],a=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":n[1];if(3<n.length&&!t){for(n=e.split(", ").join(",").split(","),e=[],i=0;i<n.length;i++)e.push(he(n[i]));return e.join(",")}return null==a?a="center"===r?"50%":"0":"center"===a&&(a="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e=r+" "+a+(2<n.length?" "+n[2]:""),t&&(t.oxp=-1!==r.indexOf("%"),t.oyp=-1!==a.indexOf("%"),t.oxr="="===r.charAt(1),t.oyr="="===a.charAt(1),t.ox=parseFloat(r.replace(h,"")),t.oy=parseFloat(a.replace(h,"")),t.v=e),t||e},ue=function(e,t){return"function"==typeof e&&(e=e(P,A)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},de=function(e,t){"function"==typeof e&&(e=e(P,A));var i="string"==typeof e&&"="===e.charAt(1);return"string"==typeof e&&"v"===e.charAt(e.length-2)&&(e=(i?e.substr(0,2):0)+window["inner"+("vh"===e.substr(-2)?"Height":"Width")]*(parseFloat(i?e.substr(2):e)/100)),null==e?t:i?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},pe=function(e,t,i,n){var r,a,s,o;return"function"==typeof e&&(e=e(P,A)),(s=null==e?t:"number"==typeof e?e:(360,r=e.split("_"),a=((o="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(r[0].substr(2)):parseFloat(r[0]))*(-1===e.indexOf("rad")?1:G)-(o?0:t),r.length&&(n&&(n[i]=t+a),-1!==e.indexOf("short")&&((a%=360)!==a%180&&(a=a<0?a+360:a-360)),-1!==e.indexOf("_cw")&&a<0?a=(a+3599999999640)%360-360*(a/360|0):-1!==e.indexOf("ccw")&&0<a&&(a=(a-3599999999640)%360-360*(a/360|0))),t+a))<1e-6&&-1e-6<s&&(s=0),s},fe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},me=function(e,t,i){return 255*(6*(e=e<0?e+1:1<e?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0},ge=U.parseColor=function(e,t){var i,n,r,a,s,o,l,c,h,u,d;if(e)if("number"==typeof e)i=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),fe[e])i=fe[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(n=e.charAt(1))+n+(r=e.charAt(2))+r+(a=e.charAt(3))+a),i=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(i=d=e.match(L),t){if(-1!==e.indexOf("="))return e.match(R)}else s=Number(i[0])%360/360,o=Number(i[1])/100,n=2*(l=Number(i[2])/100)-(r=l<=.5?l*(o+1):l+o-l*o),3<i.length&&(i[3]=Number(i[3])),i[0]=me(s+1/3,n,r),i[1]=me(s,n,r),i[2]=me(s-1/3,n,r);else i=e.match(L)||fe.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),3<i.length&&(i[3]=Number(i[3]))}else i=fe.black;return t&&!d&&(n=i[0]/255,r=i[1]/255,a=i[2]/255,l=((c=Math.max(n,r,a))+(h=Math.min(n,r,a)))/2,c===h?s=o=0:(u=c-h,o=.5<l?u/(2-c-h):u/(c+h),s=c===n?(r-a)/u+(r<a?6:0):c===r?(a-n)/u+2:(n-r)/u+4,s*=60),i[0]=s+.5|0,i[1]=100*o+.5|0,i[2]=100*l+.5|0),i},ve=function(e,t){var i,n,r,a=e.match(ye)||[],s=0,o="";if(!a.length)return e;for(i=0;i<a.length;i++)n=a[i],s+=(r=e.substr(s,e.indexOf(n,s)-s)).length+n.length,3===(n=ge(n,t)).length&&n.push(1),o+=r+(t?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return o+e.substr(s)},ye="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(e in fe)ye+="|"+e+"\\b";ye=new RegExp(ye+")","gi"),U.colorStringFilter=function(e){var t,i=e[0]+" "+e[1];ye.test(i)&&(t=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),e[0]=ve(e[0],t),e[1]=ve(e[1],t)),ye.lastIndex=0},F.defaultStringFilter||(F.defaultStringFilter=U.colorStringFilter);var _e=function(e,t,a,s){if(null==e)return function(e){return e};var o,l=t?(e.match(ye)||[""])[0]:"",c=e.split(l).join("").match(x)||[],h=e.substr(0,e.indexOf(c[0])),u=")"===e.charAt(e.length-1)?")":"",d=-1!==e.indexOf(" ")?" ":",",p=c.length,f=0<p?c[0].replace(L,""):"";return p?o=t?function(e){var t,i,n,r;if("number"==typeof e)e+=f;else if(s&&k.test(e)){for(r=e.replace(k,"|").split("|"),n=0;n<r.length;n++)r[n]=o(r[n]);return r.join(",")}if(t=(e.match(ye)||[l])[0],n=(i=e.split(t).join("").match(x)||[]).length,p>n--)for(;++n<p;)i[n]=a?i[(n-1)/2|0]:c[n];return h+i.join(d)+d+t+u+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,i,n;if("number"==typeof e)e+=f;else if(s&&k.test(e)){for(i=e.replace(k,"|").split("|"),n=0;n<i.length;n++)i[n]=o(i[n]);return i.join(",")}if(n=(t=e.match(x)||[]).length,p>n--)for(;++n<p;)t[n]=a?t[(n-1)/2|0]:c[n];return h+t.join(d)+u}:function(e){return e}},xe=function(c){return c=c.split(","),function(e,t,i,n,r,a,s){var o,l=(t+"").split(" ");for(s={},o=0;o<4;o++)s[c[o]]=l[o]=l[o]||l[(o-1)/2>>0];return n.parse(e,s,r,a)}},be=(r._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,i,n,r,a,s=this.data,o=s.proxy,l=s.firstMPT;l;)t=o[l.v],l.r?t=l.r(t):t<1e-6&&-1e-6<t&&(t=0),l.t[l.p]=t,l=l._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod.call(this._tween,o.rotation,this.t,this._tween):o.rotation),1===e||0===e)for(l=s.firstMPT,a=1===e?"e":"b";l;){if((i=l.t).type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;n<i.l;n++)r+=i["xn"+n]+i["xs"+(n+1)];i[a]=r}}else i[a]=i.s+i.xs0;l=l._next}},function(e,t,i,n,r){this.t=e,this.p=t,this.v=i,this.r=r,n&&((n._prev=this)._next=n)}),we=(r._parseToProxy=function(e,t,i,n,r,a){var s,o,l,c,h,u=n,d={},p={},f=i._transform,m=H;for(i._transform=null,H=t,n=h=i.parse(e,t,n,r),H=m,a&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));n&&n!==u;){if(n.type<=1&&(p[o=n.p]=n.s+n.c,d[o]=n.s,a||(c=new be(n,"s",o,c,n.r),n.c=0),1===n.type))for(s=n.l;0<--s;)l="xn"+s,p[o=n.p+"_"+l]=n.data[l],d[o]=n[l],a||(c=new be(n,l,o,c,n.rxp[l]));n=n._next}return{proxy:d,end:p,firstMPT:c,pt:h}},r.CSSPropTween=function(e,t,i,n,r,a,s,o,l,c,h){this.t=e,this.p=t,this.s=i,this.c=n,this.n=s||t,e instanceof we||m.push(this.n),this.r=o?"function"==typeof o?o:Math.round:o,this.type=a||0,l&&(this.pr=l,f=!0),this.b=void 0===c?i:c,this.e=void 0===h?i+n:h,r&&((this._next=r)._prev=this)}),Te=function(e,t,i,n,r,a){var s=new we(e,t,i,n-i,r,-1,a);return s.b=i,s.e=s.xs0=n,s},Ee=U.parseComplex=function(e,t,i,n,r,a,s,o,l,c){i=i||a||"","function"==typeof n&&(n=n(P,A)),s=new we(e,t,0,0,s,c?2:1,null,!1,o,i,n),n+="",r&&ye.test(n+i)&&(n=[i,n],U.colorStringFilter(n),i=n[0],n=n[1]);var h,u,d,p,f,m,g,v,y,_,x,b,w,T=i.split(", ").join(",").split(" "),E=n.split(", ").join(",").split(" "),M=T.length,S=!1!==C;for((-1!==n.indexOf(",")||-1!==i.indexOf(","))&&(E=-1!==(n+i).indexOf("rgb")||-1!==(n+i).indexOf("hsl")?(T=T.join(" ").replace(k,", ").split(" "),E.join(" ").replace(k,", ").split(" ")):(T=T.join(" ").split(",").join(", ").split(" "),E.join(" ").split(",").join(", ").split(" ")),M=T.length),M!==E.length&&(M=(T=(a||"").split(" ")).length),s.plugin=l,s.setRatio=c,h=ye.lastIndex=0;h<M;h++)if(p=T[h],f=E[h]+"",(v=parseFloat(p))||0===v)s.appendXtra("",v,ue(f,v),f.replace(R,""),!(!S||-1===f.indexOf("px"))&&Math.round,!0);else if(r&&ye.test(p))b=")"+((b=f.indexOf(")")+1)?f.substr(b):""),w=-1!==f.indexOf("hsl")&&q,_=f,p=ge(p,w),f=ge(f,w),(y=6<p.length+f.length)&&!q&&0===f[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(E[h]).join("transparent")):(q||(y=!1),w?s.appendXtra(_.substr(0,_.indexOf("hsl"))+(y?"hsla(":"hsl("),p[0],ue(f[0],p[0]),",",!1,!0).appendXtra("",p[1],ue(f[1],p[1]),"%,",!1).appendXtra("",p[2],ue(f[2],p[2]),y?"%,":"%"+b,!1):s.appendXtra(_.substr(0,_.indexOf("rgb"))+(y?"rgba(":"rgb("),p[0],f[0]-p[0],",",Math.round,!0).appendXtra("",p[1],f[1]-p[1],",",Math.round).appendXtra("",p[2],f[2]-p[2],y?",":b,Math.round),y&&(p=p.length<4?1:p[3],s.appendXtra("",p,(f.length<4?1:f[3])-p,b,!1))),ye.lastIndex=0;else if(m=p.match(L)){if(!(g=f.match(R))||g.length!==m.length)return s;for(u=d=0;u<m.length;u++)x=m[u],_=p.indexOf(x,d),s.appendXtra(p.substr(d,_-d),Number(x),ue(g[u],x),"",!(!S||"px"!==p.substr(_+x.length,2))&&Math.round,0===u),d=_+x.length;s["xs"+s.l]+=p.substr(d)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+f:f;if(-1!==n.indexOf("=")&&s.data){for(b=s.xs0+s.data.s,h=1;h<s.l;h++)b+=s["xs"+h]+s.data["xn"+h];s.e=b+s["xs"+h]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},Me=9;for((e=we.prototype).l=e.pr=0;0<--Me;)e["xn"+Me]=0,e["xs"+Me]="";e.xs0="",e._next=e._prev=e.xfirst=e.data=e.plugin=e.setRatio=e.rxp=null,e.appendXtra=function(e,t,i,n,r,a){var s=this,o=s.l;return s["xs"+o]+=a&&(o||s["xs"+o])?" "+e:e||"",i||0===o||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=n||"",0<o?(s.data["xn"+o]=t+i,s.rxp["xn"+o]=r,s["xn"+o]=t,s.plugin||(s.xfirst=new we(s,"xn"+o,t,i,s.xfirst||s,0,s.n,r,s.pr),s.xfirst.xs0=0)):(s.data={s:t+i},s.rxp={},s.s=t,s.c=i,s.r=r)):s["xs"+o]+=t+(n||""),s};var Se=function(e,t){t=t||{},this.p=t.prefix&&Q(e)||e,g[e]=g[this.p]=this,this.format=t.formatter||_e(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.allowFunc=t.allowFunc,this.pr=t.priority||0},Ce=r._registerComplexSpecialProp=function(e,t,i){"object"!=typeof t&&(t={parser:i});var n,r=e.split(","),a=t.defaultValue;for(i=i||[a],n=0;n<r.length;n++)t.prefix=0===n&&t.prefix,t.defaultValue=i[n]||a,new Se(r[n],t)},Ae=r._registerPluginProp=function(e){if(!g[e]){var l=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Ce(e,{parser:function(e,t,i,n,r,a,s){var o=c.com.greensock.plugins[l];return o?(o._cssRegister(),g[i].parse(e,t,i,n,r,a,s)):(Z("Error: "+l+" js file not loaded."),r)}})}};(e=Se.prototype).parseComplex=function(e,t,i,n,r,a){var s,o,l,c,h,u,d=this.keyword;if(this.multi&&(k.test(i)||k.test(t)?(o=t.replace(k,"|").split("|"),l=i.replace(k,"|").split("|")):d&&(o=[t],l=[i])),l){for(c=l.length>o.length?l.length:o.length,s=0;s<c;s++)t=o[s]=o[s]||this.dflt,i=l[s]=l[s]||this.dflt,d&&((h=t.indexOf(d))!==(u=i.indexOf(d))&&(-1===u?o[s]=o[s].split(d).join(""):-1===h&&(o[s]+=" "+d)));t=o.join(", "),i=l.join(", ")}return Ee(e,this.p,t,i,this.clrs,this.dflt,n,this.pr,r,a)},e.parse=function(e,t,i,n,r,a,s){return this.parseComplex(e.style,this.format(ie(e,this.p,M,!1,this.dflt)),this.format(t),r,a)},U.registerSpecialProp=function(e,l,c){Ce(e,{parser:function(e,t,i,n,r,a,s){var o=new we(e,i,0,0,r,2,i,!1,c);return o.plugin=a,o.setRatio=l(e,t,n._tween,i),o},priority:c})},U.useSVGTransformAttr=!0;var Pe,Le,Re,Oe,Ie,De="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),ke=Q("transform"),Ne=J+"transform",ze=Q("transformOrigin"),Be=null!==Q("perspective"),He=r.Transform=function(){this.perspective=parseFloat(U.defaultTransformPerspective)||0,this.force3D=!(!1===U.defaultForce3D||!Be)&&(U.defaultForce3D||"auto")},Fe=_gsScope.SVGElement,Ue=function(e,t,i){var n,r=V.createElementNS("http://www.w3.org/2000/svg",e),a=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(a,"$1-$2").toLowerCase(),i[n]);return t.appendChild(r),r},Ge=V.documentElement||{},Ve=(Ie=S||/Android/i.test(Y)&&!_gsScope.chrome,V.createElementNS&&!Ie&&(Le=Ue("svg",Ge),Oe=(Re=Ue("rect",Le,{width:100,height:50,x:100})).getBoundingClientRect().width,Re.style[ze]="50% 50%",Re.style[ke]="scaleX(0.5)",Ie=Oe===Re.getBoundingClientRect().width&&!(z&&Be),Ge.removeChild(Le)),Ie),je=function(e,t,i,n,r,a){var s,o,l,c,h,u,d,p,f,m,g,v,y,_,x=e._gsTransform,b=qe(e,!0);x&&(y=x.xOrigin,_=x.yOrigin),(!n||(s=n.split(" ")).length<2)&&(0===(d=e.getBBox()).x&&0===d.y&&d.width+d.height===0&&(d={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),s=[(-1!==(t=he(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*d.width:parseFloat(t[0]))+d.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*d.height:parseFloat(t[1]))+d.y]),i.xOrigin=c=parseFloat(s[0]),i.yOrigin=h=parseFloat(s[1]),n&&b!==Ye&&(u=b[0],d=b[1],p=b[2],f=b[3],m=b[4],g=b[5],(v=u*f-d*p)&&(o=c*(f/v)+h*(-p/v)+(p*g-f*m)/v,l=c*(-d/v)+h*(u/v)-(u*g-d*m)/v,c=i.xOrigin=s[0]=o,h=i.yOrigin=s[1]=l)),x&&(a&&(i.xOffset=x.xOffset,i.yOffset=x.yOffset,x=i),r||!1!==r&&!1!==U.defaultSmoothOrigin?(o=c-y,l=h-_,x.xOffset+=o*b[0]+l*b[2]-o,x.yOffset+=o*b[1]+l*b[3]-l):x.xOffset=x.yOffset=0),a||e.setAttribute("data-svg-origin",s.join(" "))},We=function(e){var t,i=j("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,a=this.style.cssText;if(Ge.appendChild(i),i.appendChild(this),this.style.display="block",e)try{t=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=We}catch(e){}else this._originalGetBBox&&(t=this._originalGetBBox());return r?n.insertBefore(this,r):n.appendChild(this),Ge.removeChild(i),this.style.cssText=a,t},Xe=function(e){return!(!Fe||!e.getCTM||e.parentNode&&!e.ownerSVGElement||!function(t){try{return t.getBBox()}catch(e){return We.call(t,!0)}}(e))},Ye=[1,0,0,1,0,0],qe=function(e,t){var i,n,r,a,s,o,l,c=e._gsTransform||new He,h=e.style;if(ke?n=ie(e,Ne,null,!0):e.currentStyle&&(n=(n=e.currentStyle.filter.match(d))&&4===n.length?[n[0].substr(4),Number(n[2].substr(4)),Number(n[1].substr(4)),n[3].substr(4),c.x||0,c.y||0].join(","):""),i=!n||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,ke&&i&&!e.offsetParent&&(a=h.display,h.display="block",(l=e.parentNode)&&e.offsetParent||(s=1,o=e.nextSibling,Ge.appendChild(e)),i=!(n=ie(e,Ne,null,!0))||"none"===n||"matrix(1, 0, 0, 1, 0, 0)"===n,a?h.display=a:Qe(h,"display"),s&&(o?l.insertBefore(e,o):l?l.appendChild(e):Ge.removeChild(e))),(c.svg||e.getCTM&&Xe(e))&&(i&&-1!==(h[ke]+"").indexOf("matrix")&&(n=h[ke],i=0),r=e.getAttribute("transform"),i&&r&&(n="matrix("+(r=e.transform.baseVal.consolidate().matrix).a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")",i=0)),i)return Ye;for(r=(n||"").match(L)||[],Me=r.length;-1<--Me;)a=Number(r[Me]),r[Me]=(s=a-(a|=0))?(1e5*s+(s<0?-.5:.5)|0)/1e5+a:a;return t&&6<r.length?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},$e=r.getTransform=function(e,t,i,n){if(e._gsTransform&&i&&!n)return e._gsTransform;var r,a,s,o,l,c,h=i&&e._gsTransform||new He,u=h.scaleX<0,d=Be&&(parseFloat(ie(e,ze,t,!1,"0 0 0").split(" ")[2])||h.zOrigin)||0,p=parseFloat(U.defaultTransformPerspective)||0;if(h.svg=!(!e.getCTM||!Xe(e)),h.svg&&(je(e,ie(e,ze,t,!1,"50% 50%")+"",h,e.getAttribute("data-svg-origin")),Pe=U.useSVGTransformAttr||Ve),(r=qe(e))!==Ye){if(16===r.length){var f,m,g,v,y,_=r[0],x=r[1],b=r[2],w=r[3],T=r[4],E=r[5],M=r[6],S=r[7],C=r[8],A=r[9],P=r[10],L=r[12],R=r[13],O=r[14],I=r[11],D=Math.atan2(M,P);h.zOrigin&&(L=C*(O=-h.zOrigin)-r[12],R=A*O-r[13],O=P*O+h.zOrigin-r[14]),h.rotationX=D*G,D&&(f=T*(v=Math.cos(-D))+C*(y=Math.sin(-D)),m=E*v+A*y,g=M*v+P*y,C=T*-y+C*v,A=E*-y+A*v,P=M*-y+P*v,I=S*-y+I*v,T=f,E=m,M=g),D=Math.atan2(-b,P),h.rotationY=D*G,D&&(m=x*(v=Math.cos(-D))-A*(y=Math.sin(-D)),g=b*v-P*y,A=x*y+A*v,P=b*y+P*v,I=w*y+I*v,_=f=_*v-C*y,x=m,b=g),D=Math.atan2(x,_),h.rotation=D*G,D&&(f=_*(v=Math.cos(D))+x*(y=Math.sin(D)),m=T*v+E*y,g=C*v+A*y,x=x*v-_*y,E=E*v-T*y,A=A*v-C*y,_=f,T=m,C=g),h.rotationX&&359.9<Math.abs(h.rotationX)+Math.abs(h.rotation)&&(h.rotationX=h.rotation=0,h.rotationY=180-h.rotationY),D=Math.atan2(T,E),h.scaleX=(1e5*Math.sqrt(_*_+x*x+b*b)+.5|0)/1e5,h.scaleY=(1e5*Math.sqrt(E*E+M*M)+.5|0)/1e5,h.scaleZ=(1e5*Math.sqrt(C*C+A*A+P*P)+.5|0)/1e5,_/=h.scaleX,T/=h.scaleY,x/=h.scaleX,E/=h.scaleY,2e-5<Math.abs(D)?(h.skewX=D*G,T=0,"simple"!==h.skewType&&(h.scaleY*=1/Math.cos(D))):h.skewX=0,h.perspective=I?1/(I<0?-I:I):0,h.x=L,h.y=R,h.z=O,h.svg&&(h.x-=h.xOrigin-(h.xOrigin*_-h.yOrigin*T),h.y-=h.yOrigin-(h.yOrigin*x-h.xOrigin*E))}else if(!Be||n||!r.length||h.x!==r[4]||h.y!==r[5]||!h.rotationX&&!h.rotationY){var k=6<=r.length,N=k?r[0]:1,z=r[1]||0,B=r[2]||0,H=k?r[3]:1;h.x=r[4]||0,h.y=r[5]||0,s=Math.sqrt(N*N+z*z),o=Math.sqrt(H*H+B*B),l=N||z?Math.atan2(z,N)*G:h.rotation||0,c=B||H?Math.atan2(B,H)*G+l:h.skewX||0,h.scaleX=s,h.scaleY=o,h.rotation=l,h.skewX=c,Be&&(h.rotationX=h.rotationY=h.z=0,h.perspective=p,h.scaleZ=1),h.svg&&(h.x-=h.xOrigin-(h.xOrigin*N+h.yOrigin*B),h.y-=h.yOrigin-(h.xOrigin*z+h.yOrigin*H))}for(a in 90<Math.abs(h.skewX)&&Math.abs(h.skewX)<270&&(u?(h.scaleX*=-1,h.skewX+=h.rotation<=0?180:-180,h.rotation+=h.rotation<=0?180:-180):(h.scaleY*=-1,h.skewX+=h.skewX<=0?180:-180)),h.zOrigin=d,h)h[a]<2e-5&&-2e-5<h[a]&&(h[a]=0)}return i&&((e._gsTransform=h).svg&&(Pe&&e.style[ke]?F.delayedCall(.001,function(){Qe(e.style,ke)}):!Pe&&e.getAttribute("transform")&&F.delayedCall(.001,function(){e.removeAttribute("transform")}))),h},Ze=function(e){var t,i,n=this.data,r=-n.rotation*B,a=r+n.skewX*B,s=(Math.cos(r)*n.scaleX*1e5|0)/1e5,o=(Math.sin(r)*n.scaleX*1e5|0)/1e5,l=(Math.sin(a)*-n.scaleY*1e5|0)/1e5,c=(Math.cos(a)*n.scaleY*1e5|0)/1e5,h=this.t.style,u=this.t.currentStyle;if(u){i=o,o=-l,l=-i,t=u.filter,h.filter="";var d,p,f=this.t.offsetWidth,m=this.t.offsetHeight,g="absolute"!==u.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+o+", M21="+l+", M22="+c,y=n.x+f*n.xPercent/100,_=n.y+m*n.yPercent/100;if(null!=n.ox&&(y+=(d=(n.oxp?f*n.ox*.01:n.ox)-f/2)-(d*s+(p=(n.oyp?m*n.oy*.01:n.oy)-m/2)*o),_+=p-(d*l+p*c)),g?v+=", Dx="+((d=f/2)-(d*s+(p=m/2)*o)+y)+", Dy="+(p-(d*l+p*c)+_)+")":v+=", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?h.filter=t.replace(D,v):h.filter=v+" "+t,(0===e||1===e)&&1===s&&0===o&&0===l&&1===c&&(g&&-1===v.indexOf("Dx=0, Dy=0")||I.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&h.removeAttribute("filter")),!g){var x,b,w,T=S<8?1:-1;for(d=n.ieOffsetX||0,p=n.ieOffsetY||0,n.ieOffsetX=Math.round((f-((s<0?-s:s)*f+(o<0?-o:o)*m))/2+y),n.ieOffsetY=Math.round((m-((c<0?-c:c)*m+(l<0?-l:l)*f))/2+_),Me=0;Me<4;Me++)w=(i=-1!==(x=u[b=le[Me]]).indexOf("px")?parseFloat(x):ne(this.t,b,parseFloat(x),x.replace(O,""))||0)!==n[b]?Me<2?-n.ieOffsetX:-n.ieOffsetY:Me<2?d-n.ieOffsetX:p-n.ieOffsetY,h[b]=(n[b]=Math.round(i-w*(0===Me||2===Me?1:T)))+"px"}}},Je=r.set3DTransformRatio=r.setTransformRatio=function(e){var t,i,n,r,a,s,o,l,c,h,u,d,p,f,m,g,v,y,_,x,b=this.data,w=this.t.style,T=b.rotation,E=b.rotationX,M=b.rotationY,S=b.scaleX,C=b.scaleY,A=b.scaleZ,P=b.x,L=b.y,R=b.z,O=b.svg,I=b.perspective,D=b.force3D,k=b.skewY,N=b.skewX;if(k&&(N+=k,T+=k),!((1!==e&&0!==e||"auto"!==D||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&D||R||I||M||E||1!==A)||Pe&&O||!Be)T||N||O?(T*=B,x=N*B,1e5,i=Math.cos(T)*S,a=Math.sin(T)*S,n=Math.sin(T-x)*-C,s=Math.cos(T-x)*C,x&&"simple"===b.skewType&&(t=Math.tan(x-k*B),n*=t=Math.sqrt(1+t*t),s*=t,k&&(t=Math.tan(k*B),i*=t=Math.sqrt(1+t*t),a*=t)),O&&(P+=b.xOrigin-(b.xOrigin*i+b.yOrigin*n)+b.xOffset,L+=b.yOrigin-(b.xOrigin*a+b.yOrigin*s)+b.yOffset,Pe&&(b.xPercent||b.yPercent)&&(m=this.t.getBBox(),P+=.01*b.xPercent*m.width,L+=.01*b.yPercent*m.height),P<(m=1e-6)&&-m<P&&(P=0),L<m&&-m<L&&(L=0)),_=(1e5*i|0)/1e5+","+(1e5*a|0)/1e5+","+(1e5*n|0)/1e5+","+(1e5*s|0)/1e5+","+P+","+L+")",O&&Pe?this.t.setAttribute("transform","matrix("+_):w[ke]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix(":"matrix(")+_):w[ke]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix(":"matrix(")+S+",0,0,"+C+","+P+","+L+")";else{if(z&&(S<(m=1e-4)&&-m<S&&(S=A=2e-5),C<m&&-m<C&&(C=A=2e-5),!I||b.z||b.rotationX||b.rotationY||(I=0)),T||N)T*=B,g=i=Math.cos(T),v=a=Math.sin(T),N&&(T-=N*B,g=Math.cos(T),v=Math.sin(T),"simple"===b.skewType&&(t=Math.tan((N-k)*B),g*=t=Math.sqrt(1+t*t),v*=t,b.skewY&&(t=Math.tan(k*B),i*=t=Math.sqrt(1+t*t),a*=t))),n=-v,s=g;else{if(!(M||E||1!==A||I||O))return void(w[ke]=(b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) translate3d(":"translate3d(")+P+"px,"+L+"px,"+R+"px)"+(1!==S||1!==C?" scale("+S+","+C+")":""));i=s=1,n=a=0}h=1,r=o=l=c=u=d=0,p=I?-1/I:0,f=b.zOrigin,m=1e-6,",","0",(T=M*B)&&(g=Math.cos(T),u=p*(l=-(v=Math.sin(T))),r=i*v,o=a*v,p*=h=g,i*=g,a*=g),(T=E*B)&&(t=n*(g=Math.cos(T))+r*(v=Math.sin(T)),y=s*g+o*v,c=h*v,d=p*v,r=n*-v+r*g,o=s*-v+o*g,h*=g,p*=g,n=t,s=y),1!==A&&(r*=A,o*=A,h*=A,p*=A),1!==C&&(n*=C,s*=C,c*=C,d*=C),1!==S&&(i*=S,a*=S,l*=S,u*=S),(f||O)&&(f&&(P+=r*-f,L+=o*-f,R+=h*-f+f),O&&(P+=b.xOrigin-(b.xOrigin*i+b.yOrigin*n)+b.xOffset,L+=b.yOrigin-(b.xOrigin*a+b.yOrigin*s)+b.yOffset),P<m&&-m<P&&(P="0"),L<m&&-m<L&&(L="0"),R<m&&-m<R&&(R=0)),_=b.xPercent||b.yPercent?"translate("+b.xPercent+"%,"+b.yPercent+"%) matrix3d(":"matrix3d(",_+=(i<m&&-m<i?"0":i)+","+(a<m&&-m<a?"0":a)+","+(l<m&&-m<l?"0":l),_+=","+(u<m&&-m<u?"0":u)+","+(n<m&&-m<n?"0":n)+","+(s<m&&-m<s?"0":s),E||M||1!==A?(_+=","+(c<m&&-m<c?"0":c)+","+(d<m&&-m<d?"0":d)+","+(r<m&&-m<r?"0":r),_+=","+(o<m&&-m<o?"0":o)+","+(h<m&&-m<h?"0":h)+","+(p<m&&-m<p?"0":p)+","):_+=",0,0,0,0,1,0,",_+=P+","+L+","+R+","+(I?1+-R/I:1)+")",w[ke]=_}};(e=He.prototype).x=e.y=e.z=e.skewX=e.skewY=e.rotation=e.rotationX=e.rotationY=e.zOrigin=e.xPercent=e.yPercent=e.xOffset=e.yOffset=0,e.scaleX=e.scaleY=e.scaleZ=1,Ce("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,n,r,a,s){if(n._lastParsedTransform===s)return r;var o=(n._lastParsedTransform=s).scale&&"function"==typeof s.scale?s.scale:0;o&&(s.scale=o(P,e));var l,c,h,u,d,p,f,m,g,v=e._gsTransform,y=e.style,_=De.length,x=s,b={},w="transformOrigin",T=$e(e,M,!0,x.parseTransform),E=x.transform&&("function"==typeof x.transform?x.transform(P,A):x.transform);if(T.skewType=x.skewType||T.skewType||U.defaultSkewType,n._transform=T,"rotationZ"in x&&(x.rotation=x.rotationZ),E&&"string"==typeof E&&ke)(c=W.style)[ke]=E,c.display="block",c.position="absolute",-1!==E.indexOf("%")&&(c.width=ie(e,"width"),c.height=ie(e,"height")),V.body.appendChild(W),l=$e(W,null,!1),"simple"===T.skewType&&(l.scaleY*=Math.cos(l.skewX*B)),T.svg&&(p=T.xOrigin,f=T.yOrigin,l.x-=T.xOffset,l.y-=T.yOffset,(x.transformOrigin||x.svgOrigin)&&(E={},je(e,he(x.transformOrigin),E,x.svgOrigin,x.smoothOrigin,!0),p=E.xOrigin,f=E.yOrigin,l.x-=E.xOffset-T.xOffset,l.y-=E.yOffset-T.yOffset),(p||f)&&(m=qe(W,!0),l.x-=p-(p*m[0]+f*m[2]),l.y-=f-(p*m[1]+f*m[3]))),V.body.removeChild(W),l.perspective||(l.perspective=T.perspective),null!=x.xPercent&&(l.xPercent=de(x.xPercent,T.xPercent)),null!=x.yPercent&&(l.yPercent=de(x.yPercent,T.yPercent));else if("object"==typeof x){if(l={scaleX:de(null!=x.scaleX?x.scaleX:x.scale,T.scaleX),scaleY:de(null!=x.scaleY?x.scaleY:x.scale,T.scaleY),scaleZ:de(x.scaleZ,T.scaleZ),x:de(x.x,T.x),y:de(x.y,T.y),z:de(x.z,T.z),xPercent:de(x.xPercent,T.xPercent),yPercent:de(x.yPercent,T.yPercent),perspective:de(x.transformPerspective,T.perspective)},null!=(d=x.directionalRotation))if("object"==typeof d)for(c in d)x[c]=d[c];else x.rotation=d;"string"==typeof x.x&&-1!==x.x.indexOf("%")&&(l.x=0,l.xPercent=de(x.x,T.xPercent)),"string"==typeof x.y&&-1!==x.y.indexOf("%")&&(l.y=0,l.yPercent=de(x.y,T.yPercent)),l.rotation=pe("rotation"in x?x.rotation:"shortRotation"in x?x.shortRotation+"_short":T.rotation,T.rotation,"rotation",b),Be&&(l.rotationX=pe("rotationX"in x?x.rotationX:"shortRotationX"in x?x.shortRotationX+"_short":T.rotationX||0,T.rotationX,"rotationX",b),l.rotationY=pe("rotationY"in x?x.rotationY:"shortRotationY"in x?x.shortRotationY+"_short":T.rotationY||0,T.rotationY,"rotationY",b)),l.skewX=pe(x.skewX,T.skewX),l.skewY=pe(x.skewY,T.skewY)}for(Be&&null!=x.force3D&&(T.force3D=x.force3D,u=!0),(h=T.force3D||T.z||T.rotationX||T.rotationY||l.z||l.rotationX||l.rotationY||l.perspective)||null==x.scale||(l.scaleZ=1);-1<--_;)(1e-6<(E=l[g=De[_]]-T[g])||E<-1e-6||null!=x[g]||null!=H[g])&&(u=!0,r=new we(T,g,T[g],E,r),g in b&&(r.e=b[g]),r.xs0=0,r.plugin=a,n._overwriteProps.push(r.n));return E="function"==typeof x.transformOrigin?x.transformOrigin(P,A):x.transformOrigin,T.svg&&(E||x.svgOrigin)&&(p=T.xOffset,f=T.yOffset,je(e,he(E),l,x.svgOrigin,x.smoothOrigin),r=Te(T,"xOrigin",(v?T:l).xOrigin,l.xOrigin,r,w),r=Te(T,"yOrigin",(v?T:l).yOrigin,l.yOrigin,r,w),(p!==T.xOffset||f!==T.yOffset)&&(r=Te(T,"xOffset",v?p:T.xOffset,T.xOffset,r,w),r=Te(T,"yOffset",v?f:T.yOffset,T.yOffset,r,w)),E="0px 0px"),(E||Be&&h&&T.zOrigin)&&(ke?(u=!0,g=ze,E||(E=(E=(ie(e,g,M,!1,"50% 50%")+"").split(" "))[0]+" "+E[1]+" "+T.zOrigin+"px"),E+="",(r=new we(y,g,0,0,r,-1,w)).b=y[g],r.plugin=a,r.xs0=r.e=Be?(c=T.zOrigin,E=E.split(" "),T.zOrigin=(2<E.length?parseFloat(E[2]):c)||0,r.xs0=r.e=E[0]+" "+(E[1]||"50%")+" 0px",(r=new we(T,"zOrigin",0,0,r,-1,r.n)).b=c,T.zOrigin):E):he(E+"",T)),u&&(n._transformType=T.svg&&Pe||!h&&3!==this._transformType?2:3),o&&(s.scale=o),r},allowFunc:!0,prefix:!0}),Ce("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Ce("clipPath",{defaultValue:"inset(0px)",prefix:!0,multi:!0,formatter:_e("inset(0px 0px 0px 0px)",!1,!0)}),Ce("borderRadius",{defaultValue:"0px",parser:function(e,t,i,n,r,a){t=this.format(t);var s,o,l,c,h,u,d,p,f,m,g,v,y,_,x,b,w=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],T=e.style;for(f=parseFloat(e.offsetWidth),m=parseFloat(e.offsetHeight),s=t.split(" "),o=0;o<w.length;o++)this.p.indexOf("border")&&(w[o]=Q(w[o])),-1!==(h=c=ie(e,w[o],M,!1,"0px")).indexOf(" ")&&(h=(c=h.split(" "))[0],c=c[1]),u=l=s[o],d=parseFloat(h),v=h.substr((d+"").length),""===(g=(y="="===u.charAt(1))?(p=parseInt(u.charAt(0)+"1",10),u=u.substr(2),p*=parseFloat(u),u.substr((p+"").length-(p<0?1:0))||""):(p=parseFloat(u),u.substr((p+"").length)))&&(g=E[i]||v),g!==v&&(_=ne(e,"borderLeft",d,v),x=ne(e,"borderTop",d,v),c="%"===g?(h=_/f*100+"%",x/m*100+"%"):"em"===g?(h=_/(b=ne(e,"borderLeft",1,"em"))+"em",x/b+"em"):(h=_+"px",x+"px"),y&&(u=parseFloat(h)+p+g,l=parseFloat(c)+p+g)),r=Ee(T,w[o],h+" "+c,u+" "+l,!1,"0px",r);return r},prefix:!0,formatter:_e("0px 0px 0px 0px",!1,!0)}),Ce("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,n,r,a){return Ee(e.style,i,this.format(ie(e,i,M,!1,"0px 0px")),this.format(t),!1,"0px",r)},prefix:!0,formatter:_e("0px 0px",!1,!0)}),Ce("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,n,r,a){var s,o,l,c,h,u,d="background-position",p=M||te(e),f=this.format((p?S?p.getPropertyValue(d+"-x")+" "+p.getPropertyValue(d+"-y"):p.getPropertyValue(d):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),m=this.format(t);if(-1!==f.indexOf("%")!=(-1!==m.indexOf("%"))&&m.split(",").length<2&&((u=ie(e,"backgroundImage").replace(T,""))&&"none"!==u)){for(s=f.split(" "),o=m.split(" "),X.setAttribute("src",u),l=2;-1<--l;)(c=-1!==(f=s[l]).indexOf("%"))!==(-1!==o[l].indexOf("%"))&&(h=0===l?e.offsetWidth-X.width:e.offsetHeight-X.height,s[l]=c?parseFloat(f)/100*h+"px":parseFloat(f)/h*100+"%");f=s.join(" ")}return this.parseComplex(e.style,f,m,r,a)},formatter:he}),Ce("backgroundSize",{defaultValue:"0 0",formatter:function(e){return"co"===(e+="").substr(0,2)?e:he(-1===e.indexOf(" ")?e+" "+e:e)}}),Ce("perspective",{defaultValue:"0px",prefix:!0}),Ce("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Ce("transformStyle",{prefix:!0}),Ce("backfaceVisibility",{prefix:!0}),Ce("userSelect",{prefix:!0}),Ce("margin",{parser:xe("marginTop,marginRight,marginBottom,marginLeft")}),Ce("padding",{parser:xe("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Ce("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,n,r,a){var s,o,l;return t=S<9?(o=e.currentStyle,l=S<8?" ":",",s="rect("+o.clipTop+l+o.clipRight+l+o.clipBottom+l+o.clipLeft+")",this.format(t).split(",").join(l)):(s=this.format(ie(e,this.p,M,!1,this.dflt)),this.format(t)),this.parseComplex(e.style,s,t,r,a)}}),Ce("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Ce("autoRound,strictUnits",{parser:function(e,t,i,n,r){return r}}),Ce("border",{defaultValue:"0px solid #000",parser:function(e,t,i,n,r,a){var s=ie(e,"borderTopWidth",M,!1,"0px"),o=this.format(t).split(" "),l=o[0].replace(O,"");return"px"!==l&&(s=parseFloat(s)/ne(e,"borderTopWidth",1,l)+l),this.parseComplex(e.style,this.format(s+" "+ie(e,"borderTopStyle",M,!1,"solid")+" "+ie(e,"borderTopColor",M,!1,"#000")),o.join(" "),r,a)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ye)||["#000"])[0]}}),Ce("borderWidth",{parser:xe("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Ce("float,cssFloat,styleFloat",{parser:function(e,t,i,n,r,a){var s=e.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new we(s,o,0,0,r,-1,i,!1,0,s[o],t)}});var Ke=function(e){var t,i=this.t,n=i.filter||ie(this.data,"filter")||"",r=this.s+this.c*e|0;100===r&&(t=-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),!ie(this.data,"filter")):(i.filter=n.replace(s,""),!0)),t||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(I,"opacity="+r))};Ce("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,n,r,a){var s=parseFloat(ie(e,"opacity",M,!1,"1")),o=e.style,l="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+s),l&&1===s&&"hidden"===ie(e,"visibility",M)&&0!==t&&(s=0),q?r=new we(o,"opacity",s,t-s,r):((r=new we(o,"opacity",100*s,100*(t-s),r)).xn1=l?1:0,o.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=e,r.plugin=a,r.setRatio=Ke),l&&((r=new we(o,"visibility",0,0,r,-1,null,!1,0,0!==s?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",n._overwriteProps.push(r.n),n._overwriteProps.push(i)),r}});var Qe=function(e,t){t&&(e.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),e.removeProperty(t.replace(o,"-$1").toLowerCase())):e.removeAttribute(t))},et=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,i=this.t.style;t;)t.v?i[t.p]=t.v:Qe(i,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Ce("className",{parser:function(e,t,i,n,r,a,s){var o,l,c,h,u,d=e.getAttribute("class")||"",p=e.style.cssText;if((r=n._classNamePT=new we(e,i,0,0,r,2)).setRatio=et,r.pr=-11,f=!0,r.b=d,l=ae(e,M),c=e._gsClassPT){for(h={},u=c.data;u;)h[u.p]=1,u=u._next;c.setRatio(1)}return(e._gsClassPT=r).e="="!==t.charAt(1)?t:d.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",r.e),o=se(e,l,ae(e),s,h),e.setAttribute("class",d),r.data=o.firstMPT,e.style.cssText=p,r.xfirst=n.parse(e,o.difs,r,a)}});var tt=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,i,n,r,a,s=this.t.style,o=g.transform.parse;if("all"===this.e)r=!(s.cssText="");else for(n=(t=this.e.split(" ").join("").split(",")).length;-1<--n;)i=t[n],g[i]&&(g[i].parse===o?r=!0:i="transformOrigin"===i?ze:g[i].p),Qe(s,i);r&&(Qe(s,ke),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Ce("clearProps",{parser:function(e,t,i,n,r){return(r=new we(e,i,0,0,r,2)).setRatio=tt,r.e=t,r.pr=-10,r.data=n._tween,f=!0,r}}),e="bezier,throwProps,physicsProps,physics2D".split(","),Me=e.length;Me--;)Ae(e[Me]);(e=U.prototype)._firstPT=e._lastParsedTransform=e._transform=null,e._onInitTween=function(e,t,i,n){if(!e.nodeType)return!1;this._target=A=e,this._tween=i,this._vars=t,P=n,C=t.autoRound,f=!1,E=t.suffixMap||U.suffixMap,M=te(e),m=this._overwriteProps;var r,a,s,o,l,c,h,u,d,p=e.style;if(v&&""===p.zIndex&&(("auto"===(r=ie(e,"zIndex",M))||""===r)&&this._addLazySet(p,"zIndex",0)),"string"==typeof t&&(o=p.cssText,r=ae(e,M),p.cssText=o+";"+t,r=se(e,r,ae(e)).difs,!q&&b.test(t)&&(r.opacity=parseFloat(RegExp.$1)),t=r,p.cssText=o),t.className?this._firstPT=a=g.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=a=this.parse(e,t,null),this._transformType){for(d=3===this._transformType,ke?y&&(v=!0,""===p.zIndex&&(("auto"===(h=ie(e,"zIndex",M))||""===h)&&this._addLazySet(p,"zIndex",0)),_&&this._addLazySet(p,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(d?"visible":"hidden"))):p.zoom=1,s=a;s&&s._next;)s=s._next;u=new we(e,"transform",0,0,null,2),this._linkCSSP(u,null,s),u.setRatio=ke?Je:Ze,u.data=this._transform||$e(e,M,!0),u.tween=i,u.pr=-1,m.pop()}if(f){for(;a;){for(c=a._next,s=o;s&&s.pr>a.pr;)s=s._next;(a._prev=s?s._prev:l)?a._prev._next=a:o=a,(a._next=s)?s._prev=a:l=a,a=c}this._firstPT=o}return!0},e.parse=function(e,t,i,n){var r,a,s,o,l,c,h,u,d,p,f=e.style;for(r in t){if(c=t[r],a=g[r],"function"!=typeof c||a&&a.allowFunc||(c=c(P,A)),a)i=a.parse(e,c,r,this,i,n,t);else{if("--"===r.substr(0,2)){this._tween._propLookup[r]=this._addTween.call(this._tween,e.style,"setProperty",te(e).getPropertyValue(r)+"",c+"",r,!1,r);continue}l=ie(e,r,M)+"",d="string"==typeof c,"color"===r||"fill"===r||"stroke"===r||-1!==r.indexOf("Color")||d&&w.test(c)?(d||(c=(3<(c=ge(c)).length?"rgba(":"rgb(")+c.join(",")+")"),i=Ee(f,r,l,c,!0,"transparent",i,0,n)):d&&N.test(c)?i=Ee(f,r,l,c,!0,null,i,0,n):(h=(s=parseFloat(l))||0===s?l.substr((s+"").length):"",(""===l||"auto"===l)&&(h="width"===r||"height"===r?(s=ce(e,r,M),"px"):"left"===r||"top"===r?(s=re(e,r,M),"px"):(s="opacity"!==r?0:1,"")),""===(u=(p=d&&"="===c.charAt(1))?(o=parseInt(c.charAt(0)+"1",10),c=c.substr(2),o*=parseFloat(c),c.replace(O,"")):(o=parseFloat(c),d?c.replace(O,""):""))&&(u=r in E?E[r]:h),c=o||0===o?(p?o+s:o)+u:t[r],h!==u&&(""!==u||"lineHeight"===r)&&(o||0===o)&&s&&(s=ne(e,r,s,h),"%"===u?(s/=ne(e,r,100,"%")/100,!0!==t.strictUnits&&(l=s+"%")):"em"===u||"rem"===u||"vw"===u||"vh"===u?s/=ne(e,r,1,u):"px"!==u&&(o=ne(e,r,o,u),u="px"),p&&(o||0===o)&&(c=o+s+u)),p&&(o+=s),!s&&0!==s||!o&&0!==o?void 0!==f[r]&&(c||c+""!="NaN"&&null!=c)?(i=new we(f,r,o||s||0,0,i,-1,r,!1,0,l,c)).xs0="none"!==c||"display"!==r&&-1===r.indexOf("Style")?c:l:Z("invalid "+r+" tween value: "+t[r]):(i=new we(f,r,s,o-s,i,0,r,!1!==C&&("px"===u||"zIndex"===r),0,l,c)).xs0=u)}n&&i&&!i.plugin&&(i.plugin=n)}return i},e.setRatio=function(e){var t,i,n,r=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(t=r.c*e+r.s,r.r?t=r.r(t):t<1e-6&&-1e-6<t&&(t=0),r.type)if(1===r.type)if(2===(n=r.l))r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+t+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(e);else r.t[r.p]=t+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(e),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(t=r.r(r.s+r.c),r.type){if(1===r.type){for(n=r.l,i=r.xs0+t+r.xs1,n=1;n<r.l;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}}else r.t[r.p]=t+r.xs0;else r.t[r.p]=r.e;else r.setRatio(e);r=r._next}},e._enableTransforms=function(e){this._transform=this._transform||$e(this._target,M,!0),this._transformType=this._transform.svg&&Pe||!e&&3!==this._transformType?2:3};var it=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};e._addLazySet=function(e,t,i){var n=this._firstPT=new we(e,t,0,0,this._firstPT,2);n.e=i,n.setRatio=it,n.data=this},e._linkCSSP=function(e,t,i,n){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,n=!0),i?i._next=e:n||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=i),e},e._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&(t.r=e[t.p]),t=t._next},e._kill=function(e){var t,i,n,r=e;if(e.autoAlpha||e.alpha){for(i in r={},e)r[i]=e[i];r.opacity=1,r.autoAlpha&&(r.visibility=1)}for(e.className&&(t=this._classNamePT)&&((n=t.xfirst)&&n._prev?this._linkCSSP(n._prev,t._next,n._prev._prev):n===this._firstPT&&(this._firstPT=t._next),t._next&&this._linkCSSP(t._next,t._next._next,n._prev),this._classNamePT=null),t=this._firstPT;t;)t.plugin&&t.plugin!==i&&t.plugin._kill&&(t.plugin._kill(e),i=t.plugin),t=t._next;return a.prototype._kill.call(this,r)};var nt=function(e,t,i){var n,r,a,s;if(e.slice)for(r=e.length;-1<--r;)nt(e[r],t,i);else for(r=(n=e.childNodes).length;-1<--r;)s=(a=n[r]).type,a.style&&(t.push(ae(a)),i&&i.push(a)),1!==s&&9!==s&&11!==s||!a.childNodes.length||nt(a,t,i)};return U.cascadeTo=function(e,t,i){var n,r,a,s,o=F.to(e,t,i),l=[o],c=[],h=[],u=[],d=F._internals.reservedProps;for(e=o._targets||o.target,nt(e,c,u),o.render(t,!0,!0),nt(e,h),o.render(0,!0,!0),o._enabled(!0),n=u.length;-1<--n;)if((r=se(u[n],c[n],h[n])).firstMPT){for(a in r=r.difs,i)d[a]&&(r[a]=i[a]);for(a in s={},r)s[a]=c[n][a];l.push(F.fromTo(u[n],t,s,r))}return l},a.activate([U]),U},!0),e=_gsScope._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(e,t,i){return this._tween=i,!0}}),l=function(t){var i=t<1?Math.pow(10,(t+"").length-2):1;return function(e){return(Math.round(e/t)*t*i|0)/i}},c=function(e,t){for(;e;)e.f||e.blob||(e.m=t||Math.round),e=e._next},(t=e.prototype)._onInitAllProps=function(){var e,t,i,n,r=this._tween,a=r.vars.roundProps,s={},o=r._propLookup.roundProps;if("object"!=typeof a||a.push)for("string"==typeof a&&(a=a.split(",")),i=a.length;-1<--i;)s[a[i]]=Math.round;else for(n in a)s[n]=l(a[n]);for(n in s)for(e=r._firstPT;e;)t=e._next,e.pg?e.t._mod(s):e.n===n&&(2===e.f&&e.t?c(e.t._firstPT,s[n]):(this._add(e.t,n,e.s,e.c,s[n]),t&&(t._prev=e._prev),e._prev?e._prev._next=t:r._firstPT===e&&(r._firstPT=t),e._next=e._prev=null,r._propLookup[n]=o)),e=t;return!1},t._add=function(e,t,i,n,r){this._addTween(e,t,i,i+n,t,r||Math.round),this._overwriteProps.push(t)},_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,i,n){var r,a;if("function"!=typeof e.setAttribute)return!1;for(r in t)"function"==typeof(a=t[r])&&(a=a(n,e)),this._addTween(e,"setAttribute",e.getAttribute(r)+"",a+"",r,!1,r),this._overwriteProps.push(r);return!0}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,i,n){"object"!=typeof t&&(t={rotation:t}),this.finals={};var r,a,s,o,l,c,h=!0===t.useRadians?2*Math.PI:360;for(r in t)"useRadians"!==r&&("function"==typeof(o=t[r])&&(o=o(n,e)),a=(c=(o+"").split("_"))[0],s=parseFloat("function"!=typeof e[r]?e[r]:e[r.indexOf("set")||"function"!=typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]()),l=(o=this.finals[r]="string"==typeof a&&"="===a.charAt(1)?s+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-s,c.length&&(-1!==(a=c.join("_")).indexOf("short")&&((l%=h)!==l%(h/2)&&(l=l<0?l+h:l-h)),-1!==a.indexOf("_cw")&&l<0?l=(l+9999999999*h)%h-(l/h|0)*h:-1!==a.indexOf("ccw")&&0<l&&(l=(l-9999999999*h)%h-(l/h|0)*h)),(1e-6<l||l<-1e-6)&&(this._addTween(e,r,s,s+l,r),this._overwriteProps.push(r)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(g){var i,n,t,e,r=_gsScope.GreenSockGlobals||_gsScope,a=r.com.greensock,s=2*Math.PI,o=Math.PI/2,l=a._class,c=function(e,t){var i=l("easing."+e,function(){},!0),n=i.prototype=new g;return n.constructor=i,n.getRatio=t,i},h=g.register||function(){},u=function(e,t,i,n,r){var a=l("easing."+e,{easeOut:new t,easeIn:new i,easeInOut:new n},!0);return h(a,e),a},v=function(e,t,i){this.t=e,this.v=t,i&&(((this.next=i).prev=this).c=i.v-t,this.gap=i.t-e)},d=function(e,t){var i=l("easing."+e,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),n=i.prototype=new g;return n.constructor=i,n.getRatio=t,n.config=function(e){return new i(e)},i},p=u("Back",d("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),d("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),d("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),f=l("easing.SlowMo",function(e,t,i){t=t||0===t?t:.7,null==e?e=.7:1<e&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),m=f.prototype=new g;return m.constructor=f,m.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1===e?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},f.ease=new f(.7,.7),m.config=f.config=function(e,t,i){return new f(e,t,i)},(m=(i=l("easing.SteppedEase",function(e,t){e=e||1,this._p1=1/e,this._p2=e+(t?0:1),this._p3=t?1:0},!0)).prototype=new g).constructor=i,m.getRatio=function(e){return e<0?e=0:1<=e&&(e=.999999999),((this._p2*e|0)+this._p3)*this._p1},m.config=i.config=function(e,t){return new i(e,t)},(m=(n=l("easing.ExpoScaleEase",function(e,t,i){this._p1=Math.log(t/e),this._p2=t-e,this._p3=e,this._ease=i},!0)).prototype=new g).constructor=n,m.getRatio=function(e){return this._ease&&(e=this._ease.getRatio(e)),(this._p3*Math.exp(this._p1*e)-this._p3)/this._p2},m.config=n.config=function(e,t,i){return new n(e,t,i)},(m=(t=l("easing.RoughEase",function(e){for(var t,i,n,r,a,s,o=(e=e||{}).taper||"none",l=[],c=0,h=0|(e.points||20),u=h,d=!1!==e.randomize,p=!0===e.clamp,f=e.template instanceof g?e.template:null,m="number"==typeof e.strength?.4*e.strength:.4;-1<--u;)t=d?Math.random():1/h*u,i=f?f.getRatio(t):t,n="none"===o?m:"out"===o?(r=1-t)*r*m:"in"===o?t*t*m:(r=t<.5?2*t:2*(1-t))*r*.5*m,d?i+=Math.random()*n-.5*n:u%2?i+=.5*n:i-=.5*n,p&&(1<i?i=1:i<0&&(i=0)),l[c++]={x:t,y:i};for(l.sort(function(e,t){return e.x-t.x}),s=new v(1,1,null),u=h;-1<--u;)a=l[u],s=new v(a.x,a.y,s);this._prev=new v(0,0,0!==s.t?s:s.next)},!0)).prototype=new g).constructor=t,m.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return(this._prev=t).v+(e-t.t)/t.gap*t.c},m.config=function(e){return new t(e)},t.ease=new t,u("Bounce",c("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),c("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),c("BounceInOut",function(e){var t=e<.5;return e=(e=t?1-2*e:2*e-1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),u("Circ",c("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),c("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),c("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),u("Elastic",(e=function(e,t,i){var n=l("easing."+e,function(e,t){this._p1=1<=e?e:1,this._p2=(t||i)/(e<1?e:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2},!0),r=n.prototype=new g;return r.constructor=n,r.getRatio=t,r.config=function(e,t){return new n(e,t)},n})("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),e("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),e("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),u("Expo",c("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),c("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),c("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),u("Sine",c("SineOut",function(e){return Math.sin(e*o)}),c("SineIn",function(e){return 1-Math.cos(e*o)}),c("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),l("easing.EaseLookup",{find:function(e){return g.map[e]}},!0),h(r.SlowMo,"SlowMo","ease,"),h(t,"RoughEase","ease,"),h(i,"SteppedEase","ease,"),p},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(d,p){"use strict";var f={},n=d.document,m=d.GreenSockGlobals=d.GreenSockGlobals||d,e=m[p];if(e)return"undefined"!=typeof module&&module.exports&&(module.exports=e);var t,i,r,g,v,a,s,y=function(e){var t,i=e.split("."),n=m;for(t=0;t<i.length;t++)n[i[t]]=n=n[i[t]]||{};return n},u=y("com.greensock"),_=1e-8,l=function(e){var t,i=[],n=e.length;for(t=0;t!==n;i.push(e[t++]));return i},x=function(){},b=(a=Object.prototype.toString,s=a.call([]),function(e){return null!=e&&(e instanceof Array||"object"==typeof e&&!!e.push&&a.call(e)===s)}),w={},T=function(o,l,c,h){this.sc=w[o]?w[o].sc:[],(w[o]=this).gsClass=null,this.func=c;var u=[];this.check=function(e){for(var t,i,n,r,a=l.length,s=a;-1<--a;)(t=w[l[a]]||new T(l[a],[])).gsClass?(u[a]=t.gsClass,s--):e&&t.sc.push(this);if(0===s&&c){if(n=(i=("com.greensock."+o).split(".")).pop(),r=y(i.join("."))[n]=this.gsClass=c.apply(c,u),h)if(m[n]=f[n]=r,"undefined"!=typeof module&&module.exports)if(o===p)for(a in module.exports=f[p]=r,f)r[a]=f[a];else f[p]&&(f[p][n]=r);else"function"==typeof define&&define.amd&&define((d.GreenSockAMDPath?d.GreenSockAMDPath+"/":"")+o.split(".").pop(),[],function(){return r});for(a=0;a<this.sc.length;a++)this.sc[a].check()}},this.check(!0)},o=d._gsDefine=function(e,t,i,n){return new T(e,t,i,n)},E=u._class=function(e,t,i){return t=t||function(){},o(e,[],function(){return t},i),t};o.globals=m;var c=[0,0,1,1],M=E("easing.Ease",function(e,t,i,n){this._func=e,this._type=i||0,this._power=n||0,this._params=t?c.concat(t):c},!0),S=M.map={},h=M.register=function(e,t,i,n){for(var r,a,s,o,l=t.split(","),c=l.length,h=(i||"easeIn,easeOut,easeInOut").split(",");-1<--c;)for(a=l[c],r=n?E("easing."+a,null,!0):u.easing[a]||{},s=h.length;-1<--s;)o=h[s],S[a+"."+o]=S[o+a]=r[o]=e.getRatio?e:e[o]||new e};for((r=M.prototype)._calcEnd=!1,r.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,n=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===t?1-n:2===t?n:e<.5?n/2:1-n/2},i=(t=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;-1<--i;)r=t[i]+",Power"+i,h(new M(null,null,1,i),r,"easeOut",!0),h(new M(null,null,2,i),r,"easeIn"+(0===i?",easeNone":"")),h(new M(null,null,3,i),r,"easeInOut");S.linear=u.easing.Linear.easeIn,S.swing=u.easing.Quad.easeInOut;var C=E("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(r=C.prototype).addEventListener=function(e,t,i,n,r){r=r||0;var a,s,o=this._listeners[e],l=0;for(this!==g||v||g.wake(),null==o&&(this._listeners[e]=o=[]),s=o.length;-1<--s;)(a=o[s]).c===t&&a.s===i?o.splice(s,1):0===l&&a.pr<r&&(l=s+1);o.splice(l,0,{c:t,s:i,up:n,pr:r})},r.removeEventListener=function(e,t){var i,n=this._listeners[e];if(n)for(i=n.length;-1<--i;)if(n[i].c===t)return void n.splice(i,1)},r.dispatchEvent=function(e){var t,i,n,r=this._listeners[e];if(r)for(1<(t=r.length)&&(r=r.slice(0)),i=this._eventTarget;-1<--t;)(n=r[t])&&(n.up?n.c.call(n.s||i,{type:e,target:i}):n.c.call(n.s||i))};var A=d.requestAnimationFrame,P=d.cancelAnimationFrame,L=Date.now||function(){return(new Date).getTime()},R=L();for(i=(t=["ms","moz","webkit","o"]).length;-1<--i&&!A;)A=d[t[i]+"RequestAnimationFrame"],P=d[t[i]+"CancelAnimationFrame"]||d[t[i]+"CancelRequestAnimationFrame"];E("Ticker",function(e,t){var r,a,s,o,l,c=this,h=L(),i=!(!1===t||!A)&&"auto",u=500,d=33,p=function(e){var t,i,n=L()-R;u<n&&(h+=n-d),R+=n,c.time=(R-h)/1e3,t=c.time-l,(!r||0<t||!0===e)&&(c.frame++,l+=t+(o<=t?.004:o-t),i=!0),!0!==e&&(s=a(p)),i&&c.dispatchEvent("tick")};C.call(c),c.time=c.frame=0,c.tick=function(){p(!0)},c.lagSmoothing=function(e,t){return arguments.length?(u=e||1e8,void(d=Math.min(t,u,0))):u<1e8},c.sleep=function(){null!=s&&(i&&P?P(s):clearTimeout(s),a=x,s=null,c===g&&(v=!1))},c.wake=function(e){null!==s?c.sleep():e?h+=-R+(R=L()):10<c.frame&&(R=L()-u+5),a=0===r?x:i&&A?A:function(e){return setTimeout(e,1e3*(l-c.time)+1|0)},c===g&&(v=!0),p(2)},c.fps=function(e){return arguments.length?(o=1/((r=e)||60),l=this.time+o,void c.wake()):r},c.useRAF=function(e){return arguments.length?(c.sleep(),i=e,void c.fps(r)):i},c.fps(e),setTimeout(function(){"auto"===i&&c.frame<5&&"hidden"!==(n||{}).visibilityState&&c.useRAF(!1)},1500)}),(r=u.Ticker.prototype=new u.events.EventDispatcher).constructor=u.Ticker;var O=E("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!!t.immediateRender,this.data=t.data,this._reversed=!!t.reversed,K){v||g.wake();var i=this.vars.useFrames?J:K;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});g=O.ticker=new u.Ticker,(r=O.prototype)._dirty=r._gc=r._initted=r._paused=!1,r._totalTime=r._time=0,r._rawPrevTime=-1,r._next=r._last=r._onUpdate=r._timeline=r.timeline=null,r._paused=!1;var I=function(){v&&2e3<L()-R&&("hidden"!==(n||{}).visibilityState||!g.lagSmoothing())&&g.wake();var e=setTimeout(I,2e3);e.unref&&e.unref()};I(),r.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},r.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},r.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},r.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},r.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},r.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},r.render=function(e,t,i){},r.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},r.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<i+this.totalDuration()/this._timeScale-_},r._enabled=function(e,t){return v||g.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},r._kill=function(e,t){return this._enabled(!1,!1)},r.kill=function(e,t){return this._kill(e,t),this},r._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},r._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();-1<--t;)"{self}"===e[t]&&(i[t]=this);return i},r._callback=function(e){var t=this.vars,i=t[e],n=t[e+"Params"],r=t[e+"Scope"]||t.callbackScope||this;switch(n?n.length:0){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},r.eventCallback=function(e,t,i,n){if("on"===(e||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[e];null==t?delete r[e]:(r[e]=t,r[e+"Params"]=b(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[e+"Scope"]=n),"onUpdate"===e&&(this._onUpdate=t)}return this},r.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},r.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},r.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},r.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},r.totalTime=function(e,t,i){if(v||g.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(n<e&&!i&&(e=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-e:e)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(z.length&&ee(),this.render(e,t,!1),z.length&&ee())}return this},r.progress=r.totalProgress=function(e,t){var i=this.duration();return arguments.length?this.totalTime(i*e,t):i?this._time/i:this.ratio},r.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},r.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},r.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,i;for(e=e||_,this._timeline&&this._timeline.smoothChildTiming&&(i=(t=this._pauseTime)||0===t?t:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/e),this._timeScale=e,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},r.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},r.paused=function(e){if(!arguments.length)return this._paused;var t,i,n=this._timeline;return e!=this._paused&&n&&(v||e||g.wake(),i=(t=n.rawTime())-this._pauseTime,!e&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==i&&this._initted&&this.duration()&&(t=n.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var D=E("core.SimpleTimeline",function(e){O.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(r=D.prototype=new O).constructor=D,r.kill()._gc=!1,r._first=r._last=r._recent=null,r._sortChildren=!1,r.add=r.insert=function(e,t,i,n){var r,a;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime)),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),r=this._last,this._sortChildren)for(a=e._startTime;r&&r._startTime>a;)r=r._prev;return r?(e._next=r._next,r._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=r,this._recent=e,this._timeline&&this._uncache(!0),this},r._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},r.render=function(e,t,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;r;)n=r._next,(r._active||e>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=n},r.rawTime=function(){return v||g.wake(),this._totalTime};var k=E("TweenLite",function(e,t,i){if(O.call(this,t,i),this.render=k.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:k.selector(e)||e;var n,r,a,s=e.jquery||e.length&&e!==d&&e[0]&&(e[0]===d||e[0].nodeType&&e[0].style&&!e.nodeType),o=this.vars.overwrite;if(this._overwrite=o=null==o?Z[k.defaultOverwrite]:"number"==typeof o?o>>0:Z[o],(s||e instanceof Array||e.push&&b(e))&&"number"!=typeof e[0])for(this._targets=a=l(e),this._propLookup=[],this._siblings=[],n=0;n<a.length;n++)(r=a[n])?"string"!=typeof r?r.length&&r!==d&&r[0]&&(r[0]===d||r[0].nodeType&&r[0].style&&!r.nodeType)?(a.splice(n--,1),this._targets=a=a.concat(l(r))):(this._siblings[n]=te(r,this,!1),1===o&&1<this._siblings[n].length&&ne(r,this,null,1,this._siblings[n])):"string"==typeof(r=a[n--]=k.selector(r))&&a.splice(n+1,1):a.splice(n--,1);else this._propLookup={},this._siblings=te(e,this,!1),1===o&&1<this._siblings.length&&ne(e,this,null,1,this._siblings);(this.vars.immediateRender||0===t&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-_,this.render(Math.min(0,-this._delay)))},!0),N=function(e){return e&&e.length&&e!==d&&e[0]&&(e[0]===d||e[0].nodeType&&e[0].style&&!e.nodeType)};(r=k.prototype=new O).constructor=k,r.kill()._gc=!1,r.ratio=0,r._firstPT=r._targets=r._overwrittenProps=r._startAt=null,r._notifyPluginsOfEnabled=r._lazy=!1,k.version="2.1.2",k.defaultEase=r._ease=new M(null,null,1,1),k.defaultOverwrite="auto",k.ticker=g,k.autoSleep=120,k.lagSmoothing=function(e,t){g.lagSmoothing(e,t)},k.selector=d.$||d.jQuery||function(e){var t=d.$||d.jQuery;return t?(k.selector=t)(e):(n||(n=d.document),n?n.querySelectorAll?n.querySelectorAll(e):n.getElementById("#"===e.charAt(0)?e.substr(1):e):e)};var z=[],B={},H=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,F=/[\+-]=-?[\.\d]/,U=function(e){for(var t,i=this._firstPT;i;)t=i.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:i.c*e+i.s,i.m?t=i.m.call(this._tween,t,this._target||i.t,this._tween):t<1e-6&&-1e-6<t&&!i.blob&&(t=0),i.f?i.fp?i.t[i.p](i.fp,t):i.t[i.p](t):i.t[i.p]=t,i=i._next},G=function(e){return(1e3*e|0)/1e3+""},V=function(e,t,i,n){var r,a,s,o,l,c,h,u=[],d=0,p="",f=0;for(u.start=e,u.end=t,e=u[0]=e+"",t=u[1]=t+"",i&&(i(u),e=u[0],t=u[1]),u.length=0,r=e.match(H)||[],a=t.match(H)||[],n&&(n._next=null,n.blob=1,u._firstPT=u._applyPT=n),l=a.length,o=0;o<l;o++)h=a[o],p+=(c=t.substr(d,t.indexOf(h,d)-d))||!o?c:",",d+=c.length,f?f=(f+1)%5:"rgba("===c.substr(-5)&&(f=1),h===r[o]||r.length<=o?p+=h:(p&&(u.push(p),p=""),s=parseFloat(r[o]),u.push(s),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:s,c:("="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*parseFloat(h.substr(2)):parseFloat(h)-s)||0,f:0,m:f&&f<4?Math.round:G}),d+=h.length;return(p+=t.substr(d))&&u.push(p),u.setRatio=U,F.test(t)&&(u.end=null),u},j=function(e,t,i,n,r,a,s,o,l){"function"==typeof n&&(n=n(l||0,e));var c=typeof e[t],h="function"!==c?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),u="get"!==i?i:h?s?e[h](s):e[h]():e[t],d="string"==typeof n&&"="===n.charAt(1),p={t:e,p:t,s:u,f:"function"===c,pg:0,n:r||t,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:d?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-u||0};return("number"!=typeof u||"number"!=typeof n&&!d)&&(s||isNaN(u)||!d&&isNaN(n)||"boolean"==typeof u||"boolean"==typeof n?(p.fp=s,p={t:V(u,d?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):n,o||k.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||t,pr:0,m:0}):(p.s=parseFloat(u),d||(p.c=parseFloat(n)-p.s||0))),p.c?((p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p):void 0},W=k._internals={isArray:b,isSelector:N,lazyTweens:z,blobDif:V},X=k._plugins={},Y=W.tweenLookup={},q=0,$=W.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},Z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},J=O._rootFramesTimeline=new D,K=O._rootTimeline=new D,Q=30,ee=W.lazyRender=function(){var e,t,i=z.length;for(B={},e=0;e<i;e++)(t=z[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);z.length=0};K._startTime=g.time,J._startTime=g.frame,K._active=J._active=!0,setTimeout(ee,1),O._updateRoot=k.render=function(){var e,t,i;if(z.length&&ee(),K.render((g.time-K._startTime)*K._timeScale,!1,!1),J.render((g.frame-J._startTime)*J._timeScale,!1,!1),z.length&&ee(),g.frame>=Q){for(i in Q=g.frame+(parseInt(k.autoSleep,10)||120),Y){for(e=(t=Y[i].tweens).length;-1<--e;)t[e]._gc&&t.splice(e,1);0===t.length&&delete Y[i]}if((!(i=K._first)||i._paused)&&k.autoSleep&&!J._first&&1===g._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||g.sleep()}}},g.addEventListener("tick",O._updateRoot);var te=function(e,t,i){var n,r,a=e._gsTweenID;if(Y[a||(e._gsTweenID=a="t"+q++)]||(Y[a]={target:e,tweens:[]}),t&&((n=Y[a].tweens)[r=n.length]=t,i))for(;-1<--r;)n[r]===t&&n.splice(r,1);return Y[a].tweens},ie=function(e,t,i,n){var r,a,s=e.vars.onOverwrite;return s&&(r=s(e,t,i,n)),(s=k.onOverwrite)&&(a=s(e,t,i,n)),!1!==r&&!1!==a},ne=function(e,t,i,n,r){var a,s,o,l;if(1===n||4<=n){for(l=r.length,a=0;a<l;a++)if((o=r[a])!==t)o._gc||o._kill(null,e,t)&&(s=!0);else if(5===n)break;return s}var c,h=t._startTime+_,u=[],d=0,p=0===t._duration;for(a=r.length;-1<--a;)(o=r[a])===t||o._gc||o._paused||(o._timeline!==t._timeline?(c=c||re(t,0,p),0===re(o,c,p)&&(u[d++]=o)):o._startTime<=h&&o._startTime+o.totalDuration()/o._timeScale>h&&((p||!o._initted)&&h-o._startTime<=2e-8||(u[d++]=o)));for(a=d;-1<--a;)if(l=(o=u[a])._firstPT,2===n&&o._kill(i,e,t)&&(s=!0),2!==n||!o._firstPT&&o._initted&&l){if(2!==n&&!ie(o,t))continue;o._enabled(!1,!1)&&(s=!0)}return s},re=function(e,t,i){for(var n=e._timeline,r=n._timeScale,a=e._startTime;n._timeline;){if(a+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return t<(a/=r)?a-t:i&&a===t||!e._initted&&a-t<2e-8?_:(a+=e.totalDuration()/e._timeScale/r)>t+_?0:a-t-_};r._init=function(){var e,t,i,n,r,a,s=this.vars,o=this._overwrittenProps,l=this._duration,c=!!s.immediateRender,h=s.ease,u=this._startAt;if(s.startAt){for(n in u&&(u.render(-1,!0),u.kill()),r={},s.startAt)r[n]=s.startAt[n];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=c&&!1!==s.lazy,r.startAt=r.delay=null,r.onUpdate=s.onUpdate,r.onUpdateParams=s.onUpdateParams,r.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=k.to(this.target||{},0,r),c)if(0<this._time)this._startAt=null;else if(0!==l)return}else if(s.runBackwards&&0!==l)if(u)u.render(-1,!0),u.kill(),this._startAt=null;else{for(n in 0!==this._time&&(c=!1),i={},s)$[n]&&"autoCSS"!==n||(i[n]=s[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=c&&!1!==s.lazy,i.immediateRender=c,this._startAt=k.to(this.target,0,i),c){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=h=h?h instanceof M?h:"function"==typeof h?new M(h,s.easeParams):S[h]||k.defaultEase:k.defaultEase,s.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,e=0;e<a;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],o?o[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(t&&k._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},r._initProps=function(e,t,i,n,r){var a,s,o,l,c,h;if(null==e)return!1;for(a in B[e._gsTweenID]&&ee(),this.vars.css||e.style&&e!==d&&e.nodeType&&X.css&&!1!==this.vars.autoCSS&&function(e,t){var i,n={};for(i in e)$[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!X[i]||X[i]&&X[i]._autoCSS)||(n[i]=e[i],delete e[i]);e.css=n}(this.vars,e),this.vars)if(h=this.vars[a],$[a])h&&(h instanceof Array||h.push&&b(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[a]=h=this._swapSelfInParams(h,this));else if(X[a]&&(l=new X[a])._onInitTween(e,this.vars[a],this,r)){for(this._firstPT=c={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:a,pg:1,pr:l._priority,m:0},s=l._overwriteProps.length;-1<--s;)t[l._overwriteProps[s]]=this._firstPT;(l._priority||l._onInitAllProps)&&(o=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else t[a]=j.call(this,e,a,"get",h,a,0,null,this.vars.stringFilter,r);return n&&this._kill(n,e)?this._initProps(e,t,i,n,r):1<this._overwrite&&this._firstPT&&1<i.length&&ne(e,this,t,this._overwrite,i)?(this._kill(t,e),this._initProps(e,t,i,n,r)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(B[e._gsTweenID]=!0),o)},r.render=function(e,t,i){var n,r,a,s,o=this,l=o._time,c=o._duration,h=o._rawPrevTime;if(c-_<=e&&0<=e)o._totalTime=o._time=c,o.ratio=o._ease._calcEnd?o._ease.getRatio(1):1,o._reversed||(n=!0,r="onComplete",i=i||o._timeline.autoRemoveChildren),0===c&&(o._initted||!o.vars.lazy||i)&&(o._startTime===o._timeline._duration&&(e=0),(h<0||e<=0&&-_<=e||h===_&&"isPause"!==o.data)&&h!==e&&(i=!0,_<h&&(r="onReverseComplete")),o._rawPrevTime=s=!t||e||h===e?e:_);else if(e<_)o._totalTime=o._time=0,o.ratio=o._ease._calcEnd?o._ease.getRatio(0):0,(0!==l||0===c&&0<h)&&(r="onReverseComplete",n=o._reversed),-_<e?e=0:e<0&&(o._active=!1,0===c&&(o._initted||!o.vars.lazy||i)&&(0<=h&&(h!==_||"isPause"!==o.data)&&(i=!0),o._rawPrevTime=s=!t||e||h===e?e:_)),(!o._initted||o._startAt&&o._startAt.progress())&&(i=!0);else if(o._totalTime=o._time=e,o._easeType){var u=e/c,d=o._easeType,p=o._easePower;(1===d||3===d&&.5<=u)&&(u=1-u),3===d&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),o.ratio=1===d?1-u:2===d?u:e/c<.5?u/2:1-u/2}else o.ratio=o._ease.getRatio(e/c);if(o._time!==l||i){if(!o._initted){if(o._init(),!o._initted||o._gc)return;if(!i&&o._firstPT&&(!1!==o.vars.lazy&&o._duration||o.vars.lazy&&!o._duration))return o._time=o._totalTime=l,o._rawPrevTime=h,z.push(o),void(o._lazy=[e,t]);o._time&&!n?o.ratio=o._ease.getRatio(o._time/c):n&&o._ease._calcEnd&&(o.ratio=o._ease.getRatio(0===o._time?0:1))}for(!1!==o._lazy&&(o._lazy=!1),o._active||!o._paused&&o._time!==l&&0<=e&&(o._active=!0),0===l&&(o._startAt&&(0<=e?o._startAt.render(e,!0,i):r||(r="_dummyGS")),o.vars.onStart&&(0!==o._time||0===c)&&(t||o._callback("onStart"))),a=o._firstPT;a;)a.f?a.t[a.p](a.c*o.ratio+a.s):a.t[a.p]=a.c*o.ratio+a.s,a=a._next;o._onUpdate&&(e<0&&o._startAt&&-1e-4!==e&&o._startAt.render(e,!0,i),t||(o._time!==l||n||i)&&o._callback("onUpdate")),r&&(!o._gc||i)&&(e<0&&o._startAt&&!o._onUpdate&&-1e-4!==e&&o._startAt.render(e,!0,i),n&&(o._timeline.autoRemoveChildren&&o._enabled(!1,!1),o._active=!1),!t&&o.vars[r]&&o._callback(r),0===c&&o._rawPrevTime===_&&s!==_&&(o._rawPrevTime=0))}},r._kill=function(e,t,i){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:k.selector(t)||t;var n,r,a,s,o,l,c,h,u,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,p=this._firstPT;if((b(t)||N(t))&&"number"!=typeof t[0])for(n=t.length;-1<--n;)this._kill(e,t[n],i)&&(l=!0);else{if(this._targets){for(n=this._targets.length;-1<--n;)if(t===this._targets[n]){o=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=e?this._overwrittenProps[n]||{}:"all";break}}else{if(t!==this.target)return!1;o=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(o){if(c=e||o,h=e!==r&&"all"!==r&&e!==o&&("object"!=typeof e||!e._tempKill),i&&(k.onOverwrite||this.vars.onOverwrite)){for(a in c)o[a]&&(u||(u=[]),u.push(a));if((u||!e)&&!ie(this,i,t,u))return!1}for(a in c)(s=o[a])&&(d&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,l=!0),s.pg&&s.t._kill(c)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete o[a]),h&&(r[a]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return l},r.invalidate=function(){this._notifyPluginsOfEnabled&&k._onPluginEvent("_onDisable",this);var e=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],O.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-_,this.render(e,!1,!1!==this.vars.lazy)),this},r._enabled=function(e,t){if(v||g.wake(),e&&this._gc){var i,n=this._targets;if(n)for(i=n.length;-1<--i;)this._siblings[i]=te(n[i],this,!0);else this._siblings=te(this.target,this,!0)}return O.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&k._onPluginEvent(e?"_onEnable":"_onDisable",this)},k.to=function(e,t,i){return new k(e,t,i)},k.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new k(e,t,i)},k.fromTo=function(e,t,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new k(e,t,n)},k.delayedCall=function(e,t,i,n,r){return new k(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:n,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},k.set=function(e,t){return new k(e,0,t)},k.getTweensOf=function(e,t){if(null==e)return[];var i,n,r,a;if(e="string"!=typeof e?e:k.selector(e)||e,(b(e)||N(e))&&"number"!=typeof e[0]){for(i=e.length,n=[];-1<--i;)n=n.concat(k.getTweensOf(e[i],t));for(i=n.length;-1<--i;)for(a=n[i],r=i;-1<--r;)a===n[r]&&n.splice(i,1)}else if(e._gsTweenID)for(i=(n=te(e).concat()).length;-1<--i;)(n[i]._gc||t&&!n[i].isActive())&&n.splice(i,1);return n||[]},k.killTweensOf=k.killDelayedCallsTo=function(e,t,i){"object"==typeof t&&(i=t,t=!1);for(var n=k.getTweensOf(e,t),r=n.length;-1<--r;)n[r]._kill(i,e)};var ae=E("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=ae.prototype},!0);if(r=ae.prototype,ae.version="1.19.0",ae.API=2,r._firstPT=null,r._addTween=j,r.setRatio=U,r._kill=function(e){var t,i=this._overwriteProps,n=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;-1<--t;)null!=e[i[t]]&&i.splice(t,1);for(;n;)null!=e[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},r._mod=r._roundProps=function(e){for(var t,i=this._firstPT;i;)(t=e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===i.f?i.t._applyPT.m=t:i.m=t),i=i._next},k._onPluginEvent=function(e,t){var i,n,r,a,s,o=t._firstPT;if("_onInitAllProps"===e){for(;o;){for(s=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:a)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:a=o,o=s}o=t._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[e]&&o.t[e]()&&(i=!0),o=o._next;return i},ae.activate=function(e){for(var t=e.length;-1<--t;)e[t].API===ae.API&&(X[(new e[t])._propName]=e[t]);return!0},o.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,n=e.priority||0,r=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=E("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){ae.call(this,i,n),this._overwriteProps=r||[]},!0===e.global),o=s.prototype=new ae(i);for(t in(o.constructor=s).API=e.API,a)"function"==typeof e[t]&&(o[a[t]]=e[t]);return s.version=e.version,ae.activate([s]),s},t=d._gsQueue){for(i=0;i<t.length;i++)t[i]();for(r in w)w[r].func||d.console.log("GSAP encountered missing dependency: "+r)}v=!1}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window,"TweenMax");